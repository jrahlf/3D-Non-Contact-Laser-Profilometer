   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 2
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"ff.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.cmp_lfn,"ax",%progbits
  20              		.align	2
  21              		.thumb
  22              		.thumb_func
  24              	cmp_lfn:
  25              	.LFB13:
  26              		.file 1 "/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c"
   1:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*----------------------------------------------------------------------------/
   2:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /  FatFs - FAT file system module  R0.09                  (C)ChaN, 2011
   3:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /-----------------------------------------------------------------------------/
   4:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / FatFs module is a generic FAT file system module for small embedded systems.
   5:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / This is a free software that opened for education, research and commercial
   6:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / developments under license policy of following terms.
   7:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
   8:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /  Copyright (C) 2011, ChaN, all right reserved.
   9:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  10:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / * The FatFs module is a free software and there is NO WARRANTY.
  11:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / * No restriction on use. You can use, modify and redistribute it for
  12:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /   personal, non-profit or commercial products UNDER YOUR RESPONSIBILITY.
  13:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / * Redistributions of source code must retain the above copyright notice.
  14:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  15:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /-----------------------------------------------------------------------------/
  16:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Feb 26,'06 R0.00  Prototype.
  17:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  18:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Apr 29,'06 R0.01  First stable version.
  19:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  20:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Jun 01,'06 R0.02  Added FAT12 support.
  21:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Removed unbuffered mode.
  22:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed a problem on small (<32M) partition.
  23:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Jun 10,'06 R0.02a Added a configuration option (_FS_MINIMUM).
  24:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  25:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Sep 22,'06 R0.03  Added f_rename().
  26:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Changed option _FS_MINIMUM to _FS_MINIMIZE.
  27:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Dec 11,'06 R0.03a Improved cluster scan algorithm to write files fast.
  28:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed f_mkdir() creates incorrect directory on FAT32.
  29:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  30:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Feb 04,'07 R0.04  Supported multiple drive system.
  31:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Changed some interfaces for multiple drive system.
  32:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Changed f_mountdrv() to f_mount().
  33:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added f_mkfs().
  34:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Apr 01,'07 R0.04a Supported multiple partitions on a physical drive.
  35:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added a capability of extending file size to f_lseek().
  36:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added minimization level 3.
  37:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed an endian sensitive code in f_mkfs().
  38:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / May 05,'07 R0.04b Added a configuration option _USE_NTFLAG.
  39:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added FSInfo support.
  40:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed DBCS name can result FR_INVALID_NAME.
  41:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed short seek (<= csize) collapses the file object.
  42:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  43:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Aug 25,'07 R0.05  Changed arguments of f_read(), f_write() and f_mkfs().
  44:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed f_mkfs() on FAT32 creates incorrect FSInfo.
  45:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed f_mkdir() on FAT32 creates incorrect directory.
  46:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Feb 03,'08 R0.05a Added f_truncate() and f_utime().
  47:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed off by one error at FAT sub-type determination.
  48:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed btr in f_read() can be mistruncated.
  49:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed cached sector is not flushed when create and close without write.
  50:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  51:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Apr 01,'08 R0.06  Added fputc(), fputs(), fprintf() and fgets().
  52:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Improved performance of f_lseek() on moving to the same or following cluster.
  53:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  54:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Apr 01,'09 R0.07  Merged Tiny-FatFs as a configuration option. (_FS_TINY)
  55:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added long file name feature.
  56:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added multiple code page feature.
  57:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added re-entrancy for multitask operation.
  58:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added auto cluster size selection to f_mkfs().
  59:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added rewind option to f_readdir().
  60:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Changed result code of critical errors.
  61:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Renamed string functions to avoid name collision.
  62:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Apr 14,'09 R0.07a Separated out OS dependent code on reentrant cfg.
  63:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added multiple sector size feature.
  64:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Jun 21,'09 R0.07c Fixed f_unlink() can return FR_OK on error.
  65:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed wrong cache control in f_lseek().
  66:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added relative path feature.
  67:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added f_chdir() and f_chdrive().
  68:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added proper case conversion to extended char.
  69:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Nov 03,'09 R0.07e Separated out configuration options from ff.h to ffconf.h.
  70:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed f_unlink() fails to remove a sub-dir on _FS_RPATH.
  71:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed name matching error on the 13 char boundary.
  72:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added a configuration option, _LFN_UNICODE.
  73:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Changed f_readdir() to return the SFN with always upper case on non-LFN cfg.
  74:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  75:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / May 15,'10 R0.08  Added a memory configuration option. (_USE_LFN = 3)
  76:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added file lock feature. (_FS_SHARE)
  77:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added fast seek feature. (_USE_FASTSEEK)
  78:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Changed some types on the API, XCHAR->TCHAR.
  79:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Changed fname member in the FILINFO structure on Unicode cfg.
  80:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   String functions support UTF-8 encoding files on Unicode cfg.
  81:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Aug 16,'10 R0.08a Added f_getcwd(). (_FS_RPATH = 2)
  82:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added sector erase feature. (_USE_ERASE)
  83:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Moved file lock semaphore table from fs object to the bss.
  84:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed a wrong directory entry is created on non-LFN cfg when the given name con
  85:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Fixed f_mkfs() creates wrong FAT32 volume.
  86:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Jan 15,'11 R0.08b Fast seek feature is also applied to f_read() and f_write().
  87:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   f_lseek() reports required table size on creating CLMP.
  88:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Extended format syntax of f_printf function.
  89:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Ignores duplicated directory separators in given path names.
  90:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /
  91:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / Sep 06,'11 R0.09  f_mkfs() supports multiple partition to finish the multiple partition feature.
  92:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /                   Added f_fdisk(). (_MULTI_PARTITION = 2)
  93:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /---------------------------------------------------------------------------*/
  94:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
  95:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #include "ff.h"			/* FatFs configurations and declarations */
  96:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #include "diskio.h"		/* Declarations of low level disk I/O functions */
  97:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
  98:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
  99:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*--------------------------------------------------------------------------
 100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c ****    Module Private Definitions
 102:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** ---------------------------------------------------------------------------*/
 104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 105:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FATFS != 6502	/* Revision ID */
 106:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error Wrong include file (ff.h).
 107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Definitions on sector size */
 111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error Wrong sector size.
 113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 114:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _MAX_SS != 512
 115:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
 116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
 117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	SS(fs)	512U			/* Fixed sector size */
 118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 119:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Reentrancy related */
 122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_REENTRANT
 123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN == 1
 124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error Static LFN work area must not be used in re-entrant configuration.
 125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 126:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
 127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
 129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	ENTER_FF(fs)
 130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define LEAVE_FF(fs, res)	return res
 131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 132:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 133:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	ABORT(fs, res)		{ fp->flag |= FA__ERROR; LEAVE_FF(fs, res); }
 134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* File shareing feature */
 137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
 138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_READONLY
 139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error _FS_SHARE must be 0 on read-only cfg.
 140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** typedef struct {
 142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs;				/* File ID 1, volume (NULL:blank entry) */
 143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clu;				/* File ID 2, directory */
 144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD idx;				/* File ID 3, directory index */
 145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD ctr;				/* File open counter, 0:none, 0x01..0xFF:read open count, 0x100:write mode */
 146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** } FILESEM;
 147:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 148:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 149:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Misc definitions */
 151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define LD_CLUST(dir)	(((DWORD)LD_WORD(dir+DIR_FstClusHI)<<16) | LD_WORD(dir+DIR_FstClusLO))
 152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define ST_CLUST(dir,cl) {ST_WORD(dir+DIR_FstClusLO, cl); ST_WORD(dir+DIR_FstClusHI, (DWORD)cl>>16)
 153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 154:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 155:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* DBCS code ranges and SBCS extend char conversion table */
 156:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 157:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
 158:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
 159:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
 160:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
 161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
 162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
 163:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
 164:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
 165:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
 166:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
 168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0x81
 169:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1E	0xFE
 170:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1S	0x40
 171:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1E	0x7E
 172:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2S	0x80
 173:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2E	0xFE
 174:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 175:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
 176:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0x81
 177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1E	0xFE
 178:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1S	0x41
 179:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1E	0x5A
 180:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2S	0x61
 181:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2E	0x7A
 182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS3S	0x81
 183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS3E	0xFE
 184:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 185:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
 186:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0x81
 187:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1E	0xFE
 188:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1S	0x40
 189:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS1E	0x7E
 190:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2S	0xA1
 191:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DS2E	0xFE
 192:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 193:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 437	/* U.S. (OEM) */
 194:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 195:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x9
 196:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 197:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 198:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 199:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 200:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 720	/* Arabic (OEM) */
 201:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 202:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x9
 203:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 204:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 205:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 206:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 207:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 737	/* Greek (OEM) */
 208:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 209:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 210:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,
 211:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 212:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 213:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 214:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 775	/* Baltic (OEM) */
 215:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 216:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x9
 217:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 218:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,
 219:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 220:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 221:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 850	/* Multilingual Latin 1 (OEM) */
 222:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 223:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 224:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 226:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 227:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 228:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 (OEM) */
 229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x9
 231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,
 232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 233:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,
 234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 235:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic (OEM) */
 236:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 237:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x9
 238:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 239:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,
 240:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,
 241:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 242:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 857	/* Turkish (OEM) */
 243:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 244:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x9
 245:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 246:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 247:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,
 248:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 249:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 858	/* Multilingual Latin 1 + Euro (OEM) */
 250:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 251:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 252:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 253:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 254:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 255:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 256:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew (OEM) */
 257:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 258:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 259:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 260:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 261:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 262:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 263:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 866	/* Russian (OEM) */
 264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 266:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,
 267:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,
 269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 874	/* Thai (OEM, Windows) */
 271:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 273:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 274:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 275:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 276:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 277:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1250 /* Central Europe (Windows) */
 278:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 280:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 281:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 282:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 283:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 284:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1251 /* Cyrillic (Windows) */
 285:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 286:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x8
 287:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 288:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 289:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 290:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1252 /* Latin 1 (Windows) */
 292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 293:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 294:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 296:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 297:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1253 /* Greek (Windows) */
 299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 301:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 303:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 304:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1254 /* Turkish (Windows) */
 306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 310:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 311:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1255 /* Hebrew (Windows) */
 313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 314:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 315:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 316:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 317:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 318:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 319:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1256 /* Arabic (Windows) */
 320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 322:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 323:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 324:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,
 325:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 326:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1257 /* Baltic (Windows) */
 327:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 328:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 329:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 330:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 331:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 332:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 333:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1258 /* Vietnam (OEM, Windows) */
 334:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 335:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 336:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 337:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 338:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 339:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 341:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
 342:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error Cannot use LFN feature without valid code page.
 343:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 344:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define _DF1S	0
 345:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 346:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
 347:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error Unknown code page
 348:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 349:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 350:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 351:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 352:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Character code support macros */
 353:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
 354:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 355:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 356:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 357:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _DF1S		/* Code page is DBCS */
 358:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 359:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 360:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 361:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else			/* One 1st byte area */
 362:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 363:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 364:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 365:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 366:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 367:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else			/* Two 2nd byte areas */
 368:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 369:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 370:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 371:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else			/* Code page is SBCS */
 372:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 373:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsDBCS1(c)	0
 374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define IsDBCS2(c)	0
 375:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _DF1S */
 377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 378:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 379:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Name status flags */
 380:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define NS			11		/* Index of name status byte in fn[] */
 381:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 382:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define NS_LAST		0x04	/* Last segment */
 384:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
 385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 386:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 387:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 389:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* FAT sub-type boundaries */
 390:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Note that the FAT spec by Microsoft says 4085 but Windows works with 4087! */
 391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define MIN_FAT16	4086	/* Minimum number of clusters for FAT16 */
 392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	MIN_FAT32	65526	/* Minimum number of clusters for FAT32 */
 393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 394:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 395:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* FatFs refers the members in the FAT structures as byte array instead of
 396:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / structure member because the structure is not binary compatible between
 397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** / different platforms */
 398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 399:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_jmpBoot			0	/* Jump instruction (3) */
 400:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_OEMName			3	/* OEM name (8) */
 401:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_BytsPerSec		11	/* Sector size [byte] (2) */
 402:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_SecPerClus		13	/* Cluster size [sector] (1) */
 403:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_RsvdSecCnt		14	/* Size of reserved area [sector] (2) */
 404:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_NumFATs			16	/* Number of FAT copies (1) */
 405:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_RootEntCnt		17	/* Number of root dir entries for FAT12/16 (2) */
 406:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_TotSec16		19	/* Volume size [sector] (2) */
 407:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_Media			21	/* Media descriptor (1) */
 408:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_FATSz16			22	/* FAT size [sector] (2) */
 409:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_SecPerTrk		24	/* Track size [sector] (2) */
 410:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_NumHeads		26	/* Number of heads (2) */
 411:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_HiddSec			28	/* Number of special hidden sectors (4) */
 412:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_TotSec32		32	/* Volume size [sector] (4) */
 413:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_DrvNum			36	/* Physical drive number (2) */
 414:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_BootSig			38	/* Extended boot signature (1) */
 415:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_VolID			39	/* Volume serial number (4) */
 416:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_VolLab			43	/* Volume label (8) */
 417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_FilSysType		54	/* File system type (1) */
 418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_FATSz32			36	/* FAT size [sector] (4) */
 419:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_ExtFlags		40	/* Extended flags (2) */
 420:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_FSVer			42	/* File system version (2) */
 421:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_RootClus		44	/* Root dir first cluster (4) */
 422:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_FSInfo			48	/* Offset of FSInfo sector (2) */
 423:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BPB_BkBootSec		50	/* Offset of backup boot sectot (2) */
 424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_DrvNum32			64	/* Physical drive number (2) */
 425:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_BootSig32		66	/* Extended boot signature (1) */
 426:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_VolID32			67	/* Volume serial number (4) */
 427:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_VolLab32			71	/* Volume label (8) */
 428:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_FilSysType32		82	/* File system type (1) */
 429:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FSI_LeadSig			0	/* FSI: Leading signature (4) */
 430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FSI_StrucSig		484	/* FSI: Structure signature (4) */
 431:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FSI_Free_Count		488	/* FSI: Number of free clusters (4) */
 432:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FSI_Nxt_Free		492	/* FSI: Last allocated cluster (4) */
 433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define MBR_Table			446	/* MBR: Partition table offset (2) */
 434:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	SZ_PTE				16	/* MBR: Size of a partition table entry */
 435:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define BS_55AA				510	/* Boot sector signature (2) */
 436:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 437:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_Name			0	/* Short file name (11) */
 438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_Attr			11	/* Attribute (1) */
 439:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_NTres			12	/* NT flag (1) */
 440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_CrtTime			14	/* Created time (2) */
 441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_CrtDate			16	/* Created date (2) */
 442:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_FstClusHI		20	/* Higher 16-bit of first cluster (2) */
 443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_WrtTime			22	/* Modified time (2) */
 444:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_WrtDate			24	/* Modified date (2) */
 445:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_FstClusLO		26	/* Lower 16-bit of first cluster (2) */
 446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DIR_FileSize		28	/* File size (4) */
 447:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	LDIR_Ord			0	/* LFN entry order and LLE flag (1) */
 448:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	LDIR_Attr			11	/* LFN attribute (1) */
 449:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	LDIR_Type			12	/* LFN type (1) */
 450:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	LDIR_Chksum			13	/* Sum of corresponding SFN entry */
 451:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	LDIR_FstClusLO		26	/* Filled by zero (0) */
 452:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	SZ_DIR				32		/* Size of a directory entry */
 453:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	LLE					0x40	/* Last long entry flag in LDIR_Ord */
 454:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DDE					0xE5	/* Deleted directory enrty mark in DIR_Name[0] */
 455:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	NDDE				0x05	/* Replacement of a character collides with DDE */
 456:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 457:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 458:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*------------------------------------------------------------*/
 459:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Module private work area                                   */
 460:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*------------------------------------------------------------*/
 461:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Note that uninitialized variables with static duration are
 462:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /  zeroed/nulled at start-up. If not, the compiler or start-up
 463:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /  routine is out of ANSI-C standard.
 464:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** */
 465:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 466:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _VOLUMES
 467:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 468:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
 469:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
 470:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error Number of volumes must not be 0.
 471:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 472:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 473:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 474:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** WORD Fsid;				/* File system mount ID */
 475:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 476:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH
 477:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 478:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** BYTE CurrVol;			/* Current drive */
 479:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 480:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 481:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
 482:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 483:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FILESEM	Files[_FS_SHARE];	/* File lock semaphores */
 484:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 485:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 486:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN == 0			/* No LFN feature */
 487:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]
 488:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define INIT_BUF(dobj)		(dobj).fn = sfn
 489:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FREE_BUF()
 490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 491:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _USE_LFN == 1			/* LFN feature with static working buffer */
 492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static WCHAR LfnBuf[_MAX_LFN+1];
 493:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]
 494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = LfnBuf; }
 495:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FREE_BUF()
 496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 497:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _USE_LFN == 2 		/* LFN feature with dynamic working buffer on the stack */
 498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR lbuf[_MAX_LFN+1]
 499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = lbuf; }
 500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FREE_BUF()
 501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #elif _USE_LFN == 3 		/* LFN feature with dynamic working buffer on the heap */
 503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR *lfn
 504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define INIT_BUF(dobj)		{ lfn = ff_memalloc((_MAX_LFN + 1) * 2); \
 505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							  if (!lfn) LEAVE_FF((dobj).fs, FR_NOT_ENOUGH_CORE); \
 506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							  (dobj).lfn = lfn;	(dobj).fn = sfn; }
 507:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define	FREE_BUF()			ff_memfree(lfn)
 508:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 509:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
 510:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #error Wrong LFN configuration.
 511:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 512:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 514:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*--------------------------------------------------------------------------
 517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c ****    Module Private Functions
 519:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 520:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** ---------------------------------------------------------------------------*/
 521:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 522:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 523:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* String functions                                                      */
 525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 526:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Copy memory to memory */
 528:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 529:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
 530:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *d = (BYTE*)dst;
 531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *s = (const BYTE*)src;
 532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 533:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _WORD_ACCESS == 1
 534:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt >= sizeof(int)) {
 535:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*(int*)d = *(int*)s;
 536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		d += sizeof(int); s += sizeof(int);
 537:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cnt -= sizeof(int);
 538:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 539:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 542:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 543:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 544:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Fill memory */
 545:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 546:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
 547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *d = (BYTE*)dst;
 548:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 551:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 552:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 553:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Compare memory to memory */
 554:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 555:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {
 556:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 557:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int r = 0;
 558:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt-- && (r = *d++ - *s++) == 0) ;
 560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return r;
 561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 563:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Check if chr is contained in the string */
 564:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int chk_chr (const char* str, int chr) {
 566:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (*str && *str != chr) str++;
 567:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return *str;
 568:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 569:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 570:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 571:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 572:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 573:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Request/Release grant to access the volume                            */
 574:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 575:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_REENTRANT
 576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 577:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 578:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int lock_fs (
 579:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs		/* File system object */
 580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 582:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return ff_req_grant(fs->sobj);
 583:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 584:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 585:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 586:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 587:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** void unlock_fs (
 588:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,		/* File system object */
 589:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res		/* Result code to be returned */
 590:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 591:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 592:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_NOT_ENABLED &&
 593:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res != FR_INVALID_DRIVE &&
 594:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res != FR_INVALID_OBJECT &&
 595:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res != FR_TIMEOUT) {
 596:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ff_rel_grant(fs->sobj);
 597:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 598:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 599:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 600:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 601:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 602:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 603:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 604:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* File shareing control functions                                       */
 605:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 606:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
 607:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 608:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
 610:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR* dj,		/* Directory object pointing the file to be checked */
 611:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int acc			/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 612:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 614:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, be;
 615:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 616:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Search file semaphore table */
 617:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (i = be = 0; i < _FS_SHARE; i++) {
 618:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (Files[i].fs == dj->fs &&	 	/* Check if the file matched with an open file */
 620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				Files[i].clu == dj->sclust &&
 621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				Files[i].idx == dj->index) break;
 622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {			/* Blank entry */
 623:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			be++;
 624:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
 625:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 626:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (i == _FS_SHARE)	/* The file is not opened */
 627:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new file?
 628:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 629:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* The file has been opened. Reject any open against writing file and all write mode open */
 630:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 631:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 632:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 633:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 634:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 635:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new file */
 636:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 637:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i;
 638:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (i = 0; i < _FS_SHARE && Files[i].fs; i++) ;
 640:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (i == _FS_SHARE) ? 0 : 1;
 641:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 642:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 645:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** UINT inc_lock (	/* Increment file open counter and returns its index (0:int error) */
 646:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR* dj,	/* Directory object pointing the file to register or increment */
 647:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int acc		/* Desired access mode (0:Read, !0:Write) */
 648:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 649:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i;
 651:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 652:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 653:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (i = 0; i < _FS_SHARE; i++) {	/* Find the file */
 654:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (Files[i].fs == dj->fs &&
 655:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			Files[i].clu == dj->sclust &&
 656:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			Files[i].idx == dj->index) break;
 657:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 658:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 659:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (i == _FS_SHARE) {				/* Not opened. Register it as new. */
 660:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < _FS_SHARE && Files[i].fs; i++) ;
 661:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (i == _FS_SHARE) return 0;	/* No space to register (int err) */
 662:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		Files[i].fs = dj->fs;
 663:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		Files[i].clu = dj->sclust;
 664:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		Files[i].idx = dj->index;
 665:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		Files[i].ctr = 0;
 666:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 667:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 668:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 669:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 670:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 671:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 672:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return i + 1;
 673:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 674:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 675:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 676:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 677:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT dec_lock (	/* Decrement file open counter */
 678:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i			/* Semaphore index */
 679:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 680:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD n;
 682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
 683:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 685:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (--i < _FS_SHARE) {
 686:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n = Files[i].ctr;
 687:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (n == 0x100) n = 0;
 688:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (n) n--;
 689:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		Files[i].ctr = n;
 690:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!n) Files[i].fs = 0;
 691:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_OK;
 692:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
 693:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_INT_ERR;
 694:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 695:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
 696:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 699:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 700:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs
 702:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 703:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 704:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i;
 705:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 706:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (i = 0; i < _FS_SHARE; i++) {
 707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 708:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 709:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 711:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 712:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 715:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Change window offset                                                  */
 716:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 717:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 718:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 719:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT move_window (
 720:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,		/* File system object */
 721:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD sector	/* Sector number to make appearance in the fs->win[] */
 722:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )					/* Move to zero only writes back dirty window */
 723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 724:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD wsect;
 725:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 726:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 729:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 732:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_DISK_ERR;
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 735:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				BYTE nf;
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 739:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
 740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
 741:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
 742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 745:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_DISK_ERR;
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 747:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
 748:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 749:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
 751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 752:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 753:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 754:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 755:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 756:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 757:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Clean-up cached data                                                  */
 758:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 759:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
 760:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 761:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT sync (	/* FR_OK: successful, FR_DISK_ERR: failed */
 762:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs	/* File system object */
 763:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 764:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 765:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
 766:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 767:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 768:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = move_window(fs, 0);
 769:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 770:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Update FSInfo sector if needed */
 771:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag) {
 772:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = 0;
 773:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			/* Create FSInfo structure */
 774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mem_set(fs->win, 0, 512);
 775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 780:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			/* Write it into the FSInfo sector */
 781:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			disk_write(fs->drv, fs->win, fs->fsi_sector, 1);
 782:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 0;
 783:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
 784:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 785:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
 786:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_DISK_ERR;
 787:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 788:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 789:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
 790:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 791:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 792:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 793:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 794:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 795:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 796:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 797:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Get sector# from cluster#                                             */
 798:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 799:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 800:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 801:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
 802:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,		/* File system object */
 803:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 804:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 805:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 809:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 810:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 811:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 812:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 813:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 814:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 815:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* FAT access - Read value of a FAT entry                                */
 816:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 817:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 818:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 819:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, Else:Cluster status */
 820:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,	/* File system object */
 821:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst	/* Cluster# to get the link information */
 822:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 823:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 824:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT wc, bc;
 825:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *p;
 826:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 827:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 829:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 1;
 830:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 832:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	case FS_FAT12 :
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 839:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 840:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	case FS_FAT16 :
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 844:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 845:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	case FS_FAT32 :
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 849:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 850:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return 0xFFFFFFFF;	/* An error occurred at the disk I/O layer */
 852:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 853:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 854:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 856:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 857:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 858:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* FAT access - Change value of a FAT entry                              */
 859:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 860:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
 861:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT put_fat (
 863:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,	/* File system object */
 864:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst,	/* Cluster# to be changed in range of 2 to fs->n_fatent - 1 */
 865:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD val	/* New value to mark the cluster */
 866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT bc;
 869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *p;
 870:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
 871:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 872:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 874:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_INT_ERR;
 875:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 876:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
 877:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (fs->fs_type) {
 878:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case FS_FAT12 :
 879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bc = clst; bc += bc / 2;
 880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 881:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
 882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[bc % SS(fs)];
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bc++;
 885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 1;
 886:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
 888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[bc % SS(fs)];
 889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((BYTE)(*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 890:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			break;
 891:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 892:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case FS_FAT16 :
 893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
 895:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[clst * 2 % SS(fs)];
 896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(p, (WORD)val);
 897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			break;
 898:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 899:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case FS_FAT32 :
 900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
 902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[clst * 4 % SS(fs)];
 903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 904:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(p, val);
 905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			break;
 906:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 907:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		default :
 908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INT_ERR;
 909:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			break;
 910:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
 911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->wflag = 1;
 912:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 913:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 914:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
 915:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 916:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* !_FS_READONLY */
 917:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 918:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 919:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 920:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 921:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* FAT handling - Remove a cluster chain                                 */
 923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 924:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
 925:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 926:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT remove_chain (
 927:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,			/* File system object */
 928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst			/* Cluster# to remove a chain from */
 929:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 930:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 931:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
 932:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD nxt;
 933:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_ERASE
 934:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD scl = clst, ecl = clst, resion[2];
 935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 936:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 938:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_INT_ERR;
 939:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 940:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
 941:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_OK;
 942:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
 943:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 944:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 946:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 947:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
 949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSInfo */
 950:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust++;
 951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->fsi_flag = 1;
 952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
 953:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_ERASE
 954:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ecl + 1 == nxt) {	/* Next cluster is contiguous */
 955:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ecl = nxt;
 956:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {				/* End of contiguous clusters */ 
 957:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				resion[0] = clust2sect(fs, scl);					/* Start sector */
 958:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				resion[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
 959:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				disk_ioctl(fs->drv, CTRL_ERASE_SECTOR, resion);		/* Erase the block */
 960:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				scl = ecl = nxt;
 961:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
 962:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 963:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			clst = nxt;	/* Next cluster */
 964:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
 965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 966:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 967:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
 968:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
 970:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 971:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 972:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 973:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 974:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 975:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* FAT handling - Stretch or Create a cluster chain                      */
 976:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
 977:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
 978:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
 979:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
 980:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,			/* File system object */
 981:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst			/* Cluster# to stretch. 0 means create a new chain. */
 982:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
 983:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 984:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD cs, ncl, scl;
 985:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
 986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {		/* Create a new chain */
 989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 991:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	else {					/* Stretch the current chain */
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 996:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = clst;
 997:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
 998:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
 999:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ncl = scl;				/* Start cluster */
1000:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (;;) {
1001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl++;							/* Next cluster */
1002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Wrap around */
1003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ncl = 2;
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
1005:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, ncl);			/* Get the cluster status */
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
1009:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return cs;
1010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
1011:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1012:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1013:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = put_fat(fs, ncl, 0x0FFFFFFF);	/* Mark the new cluster "last link" */
1014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && clst != 0) {
1015:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
1016:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
1018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
1020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->free_clust--;
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
1022:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
1025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1026:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return ncl;		/* Return new cluster number or error code */
1028:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1029:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* !_FS_READONLY */
1030:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1031:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1032:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1033:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1034:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_FASTSEEK
1038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1039:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1040:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1041:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD ofs		/* File offset to be converted to cluster# */
1042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD cl, ncl, *tbl;
1045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1047:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
1048:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
1049:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (;;) {
1050:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
1051:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
1052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
1053:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
1054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
1056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif	/* _USE_FASTSEEK */
1058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Directory handling - Set directory index                              */
1063:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1064:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1065:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT dir_sdi (
1067:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj,		/* Pointer to directory object */
1068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD idx		/* Directory index number */
1069:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1071:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst;
1072:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD ic;
1073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
1076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst = dj->sclust;
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
1078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INT_ERR;
1079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!clst && dj->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
1080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		clst = dj->fs->dirbase;
1081:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {	/* Static table (root-dir in FAT12/16) */
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
1085:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_INT_ERR;
1086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = dj->fs->dirbase + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
1087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	else {				/* Dynamic table (sub-dirs or root-dir in FAT32) */
1089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ic = SS(dj->fs) / SZ_DIR * dj->fs->csize;	/* Entries per cluster */
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
1091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			clst = get_fat(dj->fs, clst);				/* Get next cluster */
1092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst < 2 || clst >= dj->fs->n_fatent)	/* Reached to end of table or int error */
1094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_INT_ERR;
1095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			idx -= ic;
1096:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
1098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = clust2sect(dj->fs, clst) + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
1099:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (idx % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
1102:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;	/* Seek succeeded */
1104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1105:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1106:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Directory handling - Move directory index next                        */
1111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1114:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table, FR_DENIED:EOT and could not stretch
1115:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj,		/* Pointer to directory object */
1116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1119:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst;
1120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD i;
1121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	(void) stretch;		/* To suppress warning on read-only cfg. */
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
1125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NO_FILE;
1126:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
1129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
1132:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_NO_FILE;
1133:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		else {					/* Dynamic table */
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
1140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
1141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					BYTE c;
1142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* When do not stretch, report EOT */
1143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = create_chain(dj->fs, dj->clust);		/* Stretch cluster chain */
1144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 1) return FR_INT_ERR;
1146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1147:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					/* Clean-up stretched table */
1148:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (move_window(dj->fs, 0)) return FR_DISK_ERR;	/* Flush active window */
1149:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_set(dj->fs->win, 0, SS(dj->fs));			/* Clear window buffer */
1150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->fs->winsect = clust2sect(dj->fs, clst);	/* Cluster start sector */
1151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					for (c = 0; c < dj->fs->csize; c++) {		/* Fill the new cluster with 0 */
1152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->fs->wflag = 1;
1153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (move_window(dj->fs, 0)) return FR_DISK_ERR;
1154:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->fs->winsect++;
1155:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
1156:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->fs->winsect -= c;						/* Rewind window address */
1157:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
1158:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					return FR_NO_FILE;			/* Report EOT */
1159:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1160:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
1163:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1164:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1165:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1166:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
1169:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1170:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
1171:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1172:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1173:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1174:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1175:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1176:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* LFN handling - Test/Pick/Fit an LFN segment from/to directory entry   */
1178:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1179:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1180:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1181:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN chars in the directory 
1182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1184:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1185:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int cmp_lfn (			/* 1:Matched, 0:Not matched */
1186:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WCHAR *lfnbuf,		/* Pointer to the LFN to be compared */
1187:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir			/* Pointer to the directory entry containing a part of LFN */
1188:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1189:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
  27              		.loc 1 1189 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, sl, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 32
  35              		.cfi_offset 4, -32
  36              		.cfi_offset 5, -28
  37              		.cfi_offset 6, -24
  38              		.cfi_offset 7, -20
  39              		.cfi_offset 8, -16
  40              		.cfi_offset 9, -12
  41              		.cfi_offset 10, -8
  42              		.cfi_offset 14, -4
1190:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, s;
1191:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WCHAR wc, uc;
1192:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1193:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1194:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLE) - 1) * 13;	/* Get offset in the LFN buffer */
  43              		.loc 1 1194 0
  44 0004 91F80090 		ldrb	r9, [r1, #0]	@ zero_extendqisi2
  45 0008 1F4E     		ldr	r6, .L13
  46 000a 29F04009 		bic	r9, r9, #64
  47 000e 09F1FF39 		add	r9, r9, #-1
  48 0012 09EB4903 		add	r3, r9, r9, lsl #1
1189:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
  49              		.loc 1 1189 0
  50 0016 0D46     		mov	r5, r1
  51 0018 0746     		mov	r7, r0
  52              		.loc 1 1194 0
  53 001a 09EB8309 		add	r9, r9, r3, lsl #2
  54              	.LVL1:
1195:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s = 0; wc = 1;
  55              		.loc 1 1195 0
  56 001e 4FF00108 		mov	r8, #1
  57 0022 0024     		movs	r4, #0
  58 0024 05E0     		b	.L7
  59              	.LVL2:
  60              	.L2:
1196:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
1197:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);	/* Pick an LFN character from the entry */
1198:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
1199:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
1200:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
1201:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return 0;				/* Not matched */
1202:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
1203:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;	/* Check filler */
  61              		.loc 1 1203 0
  62 0026 4FF6FF72 		movw	r2, #65535
  63 002a 9042     		cmp	r0, r2
  64 002c 19D1     		bne	.L5
  65              	.LVL3:
  66              	.L6:
1204:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1205:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (++s < 13);				/* Repeat until all chars in the entry are checked */
  67              		.loc 1 1205 0
  68 002e 0D2C     		cmp	r4, #13
  69 0030 1AD0     		beq	.L12
  70              	.LVL4:
  71              	.L7:
1197:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);	/* Pick an LFN character from the entry */
  72              		.loc 1 1197 0
  73 0032 335D     		ldrb	r3, [r6, r4]	@ zero_extendqisi2
  74 0034 EA18     		adds	r2, r5, r3
  75 0036 EB5C     		ldrb	r3, [r5, r3]	@ zero_extendqisi2
  76 0038 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
  77              		.loc 1 1205 0
  78 003a 0134     		adds	r4, r4, #1
  79              	.LVL5:
1197:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);	/* Pick an LFN character from the entry */
  80              		.loc 1 1197 0
  81 003c 43EA0220 		orr	r0, r3, r2, lsl #8
  82              	.LVL6:
1198:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
  83              		.loc 1 1198 0
  84 0040 B8F1000F 		cmp	r8, #0
  85 0044 EFD0     		beq	.L2
1199:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
  86              		.loc 1 1199 0
  87 0046 DFF844A0 		ldr	sl, .L13+4
  88 004a D047     		blx	sl
  89              	.LVL7:
1200:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
  90              		.loc 1 1200 0
  91 004c B9F1FE0F 		cmp	r9, #254
1199:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
  92              		.loc 1 1199 0
  93 0050 8046     		mov	r8, r0
  94              	.LVL8:
1200:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
  95              		.loc 1 1200 0
  96 0052 06D8     		bhi	.L5
1200:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
  97              		.loc 1 1200 0 is_stmt 0 discriminator 1
  98 0054 37F81900 		ldrh	r0, [r7, r9, lsl #1]
  99              	.LVL9:
 100 0058 D047     		blx	sl
 101              	.LVL10:
 102 005a 4045     		cmp	r0, r8
 103 005c 09F10109 		add	r9, r9, #1
 104              	.LVL11:
 105 0060 E5D0     		beq	.L6
 106              	.LVL12:
 107              	.L5:
1201:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return 0;				/* Not matched */
 108              		.loc 1 1201 0 is_stmt 1
 109 0062 0020     		movs	r0, #0
 110 0064 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 111              	.LVL13:
 112              	.L12:
1206:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1207:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((dir[LDIR_Ord] & LLE) && wc && lfnbuf[i])	/* Last segment matched but different length */
 113              		.loc 1 1207 0
 114 0068 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 115 006a 03F04003 		and	r3, r3, #64
 116 006e DBB2     		uxtb	r3, r3
 117 0070 33B1     		cbz	r3, .L9
 118              		.loc 1 1207 0 is_stmt 0 discriminator 1
 119 0072 B8F1000F 		cmp	r8, #0
 120 0076 03D0     		beq	.L9
 121 0078 37F81930 		ldrh	r3, [r7, r9, lsl #1]
 122 007c 002B     		cmp	r3, #0
 123 007e F0D1     		bne	.L5
 124              	.L9:
1208:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
1209:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1210:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return 1;						/* The part of LFN matched */
 125              		.loc 1 1210 0 is_stmt 1
 126 0080 0120     		movs	r0, #1
1211:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 127              		.loc 1 1211 0
 128 0082 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 129              	.L14:
 130 0086 00BF     		.align	2
 131              	.L13:
 132 0088 00000000 		.word	.LANCHOR0
 133 008c 00000000 		.word	ff_wtoupper
 134              		.cfi_endproc
 135              	.LFE13:
 137              		.section	.text.sync,"ax",%progbits
 138              		.align	2
 139              		.thumb
 140              		.thumb_func
 142              	sync:
 143              	.LFB5:
 764:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 144              		.loc 1 764 0
 145              		.cfi_startproc
 146              		@ args = 0, pretend = 0, frame = 8
 147              		@ frame_needed = 0, uses_anonymous_args = 0
 148              	.LVL14:
 149 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 150              	.LCFI1:
 151              		.cfi_def_cfa_offset 36
 152              		.cfi_offset 4, -36
 153              		.cfi_offset 5, -32
 154              		.cfi_offset 6, -28
 155              		.cfi_offset 7, -24
 156              		.cfi_offset 8, -20
 157              		.cfi_offset 9, -16
 158              		.cfi_offset 10, -12
 159              		.cfi_offset 11, -8
 160              		.cfi_offset 14, -4
 161              	.LBB97:
 162              	.LBB98:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 163              		.loc 1 727 0
 164 0004 C46A     		ldr	r4, [r0, #44]
 165              	.LBE98:
 166              	.LBE97:
 764:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 167              		.loc 1 764 0
 168 0006 83B0     		sub	sp, sp, #12
 169              	.LCFI2:
 170              		.cfi_def_cfa_offset 48
 764:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 171              		.loc 1 764 0
 172 0008 0546     		mov	r5, r0
 173              	.LVL15:
 174              	.LBB102:
 175              	.LBB100:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 176              		.loc 1 728 0
 177 000a 0CB1     		cbz	r4, .L16
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 178              		.loc 1 730 0
 179 000c 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 180 000e 6BB9     		cbnz	r3, .L36
 181              	.LVL16:
 182              	.L16:
 183              	.LBE100:
 184              	.LBE102:
 771:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag) {
 185              		.loc 1 771 0
 186 0010 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 187 0012 032B     		cmp	r3, #3
 188 0014 2CD0     		beq	.L37
 189              	.LVL17:
 190              	.L19:
 785:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
 191              		.loc 1 785 0
 192 0016 0021     		movs	r1, #0
 193 0018 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 194 001a 414B     		ldr	r3, .L39
 195 001c 0A46     		mov	r2, r1
 196 001e 9847     		blx	r3
 197              	.LVL18:
 198 0020 0030     		adds	r0, r0, #0
 199 0022 18BF     		it	ne
 200 0024 0120     		movne	r0, #1
 201              	.L34:
 790:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 202              		.loc 1 790 0
 203 0026 03B0     		add	sp, sp, #12
 204 0028 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 205              	.LVL19:
 206              	.L36:
 207              	.LBB103:
 208              	.LBB101:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 209              		.loc 1 731 0
 210 002c 00F13007 		add	r7, r0, #48
 211 0030 DFF8F080 		ldr	r8, .L39+4
 212 0034 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 213              	.LVL20:
 214 0036 3946     		mov	r1, r7
 215 0038 2246     		mov	r2, r4
 216 003a 0123     		movs	r3, #1
 217 003c C047     		blx	r8
 218              	.LVL21:
 219 003e A8B9     		cbnz	r0, .L22
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 220              		.loc 1 734 0
 221 0040 EB69     		ldr	r3, [r5, #28]
 222 0042 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 223              		.loc 1 733 0
 224 0044 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 225              		.loc 1 734 0
 226 0046 9A18     		adds	r2, r3, r2
 227 0048 9442     		cmp	r4, r2
 228 004a E1D2     		bcs	.L16
 229              	.LBB99:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 230              		.loc 1 736 0
 231 004c EE78     		ldrb	r6, [r5, #3]	@ zero_extendqisi2
 232              	.LVL22:
 233 004e 012E     		cmp	r6, #1
 234 0050 01D8     		bhi	.L33
 235 0052 DDE7     		b	.L16
 236              	.LVL23:
 237              	.L38:
 238 0054 EB69     		ldr	r3, [r5, #28]
 239              	.LVL24:
 240              	.L33:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 241              		.loc 1 737 0
 242 0056 E418     		adds	r4, r4, r3
 243              	.LVL25:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 244              		.loc 1 736 0
 245 0058 013E     		subs	r6, r6, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 246              		.loc 1 738 0
 247 005a 0123     		movs	r3, #1
 248 005c 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 249 005e 3946     		mov	r1, r7
 250 0060 2246     		mov	r2, r4
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 251              		.loc 1 736 0
 252 0062 F6B2     		uxtb	r6, r6
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 253              		.loc 1 738 0
 254 0064 C047     		blx	r8
 255              	.LVL26:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 256              		.loc 1 736 0
 257 0066 012E     		cmp	r6, #1
 258 0068 F4D8     		bhi	.L38
 259 006a D1E7     		b	.L16
 260              	.LVL27:
 261              	.L22:
 262              	.LBE99:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 263              		.loc 1 731 0
 264 006c 0120     		movs	r0, #1
 265              	.LVL28:
 266 006e DAE7     		b	.L34
 267              	.LVL29:
 268              	.L37:
 269              	.LBE101:
 270              	.LBE103:
 771:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag) {
 271              		.loc 1 771 0 discriminator 1
 272 0070 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
 273 0072 002B     		cmp	r3, #0
 274 0074 CFD0     		beq	.L19
 772:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = 0;
 275              		.loc 1 772 0
 276 0076 0023     		movs	r3, #0
 774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mem_set(fs->win, 0, 512);
 277              		.loc 1 774 0
 278 0078 05F13001 		add	r1, r5, #48
 279              	.LVL30:
 772:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = 0;
 280              		.loc 1 772 0
 281 007c EB62     		str	r3, [r5, #44]
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 282              		.loc 1 549 0
 283 007e 40F2FF14 		movw	r4, #511
 284              	.LVL31:
 547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *d = (BYTE*)dst;
 285              		.loc 1 547 0
 286 0082 0B46     		mov	r3, r1
 287 0084 00E0     		b	.L20
 288              	.LVL32:
 289              	.L23:
 290              	.LBB104:
 291              	.LBB105:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 292              		.loc 1 549 0
 293 0086 0446     		mov	r4, r0
 294              	.LVL33:
 295              	.L20:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 296              		.loc 1 550 0
 297 0088 0022     		movs	r2, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 298              		.loc 1 549 0
 299 008a 601E     		subs	r0, r4, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 300              		.loc 1 550 0
 301 008c 03F8012B 		strb	r2, [r3], #1
 302              	.LVL34:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 303              		.loc 1 549 0
 304 0090 002C     		cmp	r4, #0
 305 0092 F8D1     		bne	.L23
 306              	.LBE105:
 307              	.LBE104:
 779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 308              		.loc 1 779 0
 309 0094 EB68     		ldr	r3, [r5, #12]
 310              	.LVL35:
 778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 311              		.loc 1 778 0
 312 0096 D5F81080 		ldr	r8, [r5, #16]
 779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 313              		.loc 1 779 0
 314 009a 85F81C32 		strb	r3, [r5, #540]
 315 009e 4FEA136B 		lsr	fp, r3, #24
 316 00a2 CDF804B0 		str	fp, [sp, #4]
 317 00a6 C3F3072C 		ubfx	ip, r3, #8, #8
 318 00aa 4FEA134E 		lsr	lr, r3, #16
 775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 319              		.loc 1 775 0
 320 00ae 4FF0550B 		mov	fp, #85
 779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 321              		.loc 1 779 0
 322 00b2 019B     		ldr	r3, [sp, #4]
 778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 323              		.loc 1 778 0
 324 00b4 85F81882 		strb	r8, [r5, #536]
 776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 325              		.loc 1 776 0
 326 00b8 6122     		movs	r2, #97
 327 00ba 4120     		movs	r0, #65
 328              	.LVL36:
 777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 329              		.loc 1 777 0
 330 00bc 7226     		movs	r6, #114
 776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 331              		.loc 1 776 0
 332 00be 5227     		movs	r7, #82
 778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 333              		.loc 1 778 0
 334 00c0 C8F3072A 		ubfx	sl, r8, #8, #8
 335 00c4 4FEA1849 		lsr	r9, r8, #16
 775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 336              		.loc 1 775 0
 337 00c8 85F82EB2 		strb	fp, [r5, #558]
 778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 338              		.loc 1 778 0
 339 00cc 4FEA1868 		lsr	r8, r8, #24
 775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 340              		.loc 1 775 0
 341 00d0 4FF0AA0B 		mov	fp, #170
 776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 342              		.loc 1 776 0
 343 00d4 85F83220 		strb	r2, [r5, #50]
 344 00d8 85F83300 		strb	r0, [r5, #51]
 777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 345              		.loc 1 777 0
 346 00dc 85F81462 		strb	r6, [r5, #532]
 347 00e0 85F81562 		strb	r6, [r5, #533]
 348 00e4 85F81602 		strb	r0, [r5, #534]
 349 00e8 85F81722 		strb	r2, [r5, #535]
 779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 350              		.loc 1 779 0
 351 00ec 85F81F32 		strb	r3, [r5, #543]
 775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 352              		.loc 1 775 0
 353 00f0 85F82FB2 		strb	fp, [r5, #559]
 776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 354              		.loc 1 776 0
 355 00f4 85F83070 		strb	r7, [r5, #48]
 356 00f8 85F83170 		strb	r7, [r5, #49]
 778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 357              		.loc 1 778 0
 358 00fc 85F819A2 		strb	sl, [r5, #537]
 359 0100 85F81A92 		strb	r9, [r5, #538]
 360 0104 85F81B82 		strb	r8, [r5, #539]
 779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 361              		.loc 1 779 0
 362 0108 85F81DC2 		strb	ip, [r5, #541]
 363 010c 85F81EE2 		strb	lr, [r5, #542]
 781:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			disk_write(fs->drv, fs->win, fs->fsi_sector, 1);
 364              		.loc 1 781 0
 365 0110 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 366 0112 6A69     		ldr	r2, [r5, #20]
 367 0114 034E     		ldr	r6, .L39+4
 368 0116 0123     		movs	r3, #1
 369 0118 B047     		blx	r6
 370              	.LVL37:
 782:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 0;
 371              		.loc 1 782 0
 372 011a 6C71     		strb	r4, [r5, #5]
 373 011c 7BE7     		b	.L19
 374              	.L40:
 375 011e 00BF     		.align	2
 376              	.L39:
 377 0120 00000000 		.word	disk_ioctl
 378 0124 00000000 		.word	disk_write
 379              		.cfi_endproc
 380              	.LFE5:
 382              		.section	.text.move_window,"ax",%progbits
 383              		.align	2
 384              		.thumb
 385              		.thumb_func
 387              	move_window:
 388              	.LFB4:
 723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 389              		.loc 1 723 0
 390              		.cfi_startproc
 391              		@ args = 0, pretend = 0, frame = 0
 392              		@ frame_needed = 0, uses_anonymous_args = 0
 393              	.LVL38:
 394 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 395              	.LCFI3:
 396              		.cfi_def_cfa_offset 32
 397              		.cfi_offset 3, -32
 398              		.cfi_offset 4, -28
 399              		.cfi_offset 5, -24
 400              		.cfi_offset 6, -20
 401              		.cfi_offset 7, -16
 402              		.cfi_offset 8, -12
 403              		.cfi_offset 9, -8
 404              		.cfi_offset 14, -4
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 405              		.loc 1 727 0
 406 0004 C56A     		ldr	r5, [r0, #44]
 407              	.LVL39:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 408              		.loc 1 728 0
 409 0006 8D42     		cmp	r5, r1
 723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 410              		.loc 1 723 0
 411 0008 0446     		mov	r4, r0
 412 000a 0E46     		mov	r6, r1
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 413              		.loc 1 728 0
 414 000c 02D0     		beq	.L46
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 415              		.loc 1 730 0
 416 000e 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 417 0010 73B9     		cbnz	r3, .L44
 418              	.LVL40:
 419              	.L47:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 420              		.loc 1 743 0
 421 0012 16B9     		cbnz	r6, .L54
 422              	.L46:
 750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
 423              		.loc 1 750 0
 424 0014 0020     		movs	r0, #0
 425 0016 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 426              	.L54:
 427              	.LVL41:
 428              	.LBB111:
 429              	.LBB112:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 430              		.loc 1 744 0
 431 001a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 432 001c 174D     		ldr	r5, .L56
 433              	.LVL42:
 434 001e 04F13001 		add	r1, r4, #48
 435 0022 3246     		mov	r2, r6
 436 0024 0123     		movs	r3, #1
 437 0026 A847     		blx	r5
 438              	.LVL43:
 439 0028 20BB     		cbnz	r0, .L50
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 440              		.loc 1 746 0
 441 002a E662     		str	r6, [r4, #44]
 442 002c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 443              	.LVL44:
 444              	.L44:
 445              	.LBE112:
 446              	.LBE111:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 447              		.loc 1 731 0
 448 0030 00F13008 		add	r8, r0, #48
 449 0034 DFF84890 		ldr	r9, .L56+4
 450 0038 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 451              	.LVL45:
 452 003a 4146     		mov	r1, r8
 453              	.LVL46:
 454 003c 2A46     		mov	r2, r5
 455 003e 0123     		movs	r3, #1
 456 0040 C847     		blx	r9
 457              	.LVL47:
 458 0042 B8B9     		cbnz	r0, .L50
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 459              		.loc 1 734 0
 460 0044 E369     		ldr	r3, [r4, #28]
 461 0046 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 462              		.loc 1 733 0
 463 0048 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 464              		.loc 1 734 0
 465 004a 9A18     		adds	r2, r3, r2
 466 004c 9542     		cmp	r5, r2
 467 004e E0D2     		bcs	.L47
 468              	.LBB113:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 469              		.loc 1 736 0
 470 0050 E778     		ldrb	r7, [r4, #3]	@ zero_extendqisi2
 471              	.LVL48:
 472 0052 012F     		cmp	r7, #1
 473 0054 01D8     		bhi	.L52
 474 0056 DCE7     		b	.L47
 475              	.LVL49:
 476              	.L55:
 477 0058 E369     		ldr	r3, [r4, #28]
 478              	.LVL50:
 479              	.L52:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 480              		.loc 1 737 0 discriminator 2
 481 005a ED18     		adds	r5, r5, r3
 482              	.LVL51:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 483              		.loc 1 736 0 discriminator 2
 484 005c 013F     		subs	r7, r7, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 485              		.loc 1 738 0 discriminator 2
 486 005e 0123     		movs	r3, #1
 487 0060 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 488 0062 4146     		mov	r1, r8
 489 0064 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 490              		.loc 1 736 0 discriminator 2
 491 0066 FFB2     		uxtb	r7, r7
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 492              		.loc 1 738 0 discriminator 2
 493 0068 C847     		blx	r9
 494              	.LVL52:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 495              		.loc 1 736 0 discriminator 2
 496 006a 012F     		cmp	r7, #1
 497 006c F4D8     		bhi	.L55
 498              	.LBE113:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 499              		.loc 1 743 0
 500 006e 002E     		cmp	r6, #0
 501 0070 D0D0     		beq	.L46
 502 0072 D2E7     		b	.L54
 503              	.LVL53:
 504              	.L50:
 732:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_DISK_ERR;
 505              		.loc 1 732 0
 506 0074 0120     		movs	r0, #1
 751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 507              		.loc 1 751 0
 508 0076 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 509              	.L57:
 510 007a 00BF     		.align	2
 511              	.L56:
 512 007c 00000000 		.word	disk_read
 513 0080 00000000 		.word	disk_write
 514              		.cfi_endproc
 515              	.LFE4:
 517              		.section	.text.put_fat.part.4,"ax",%progbits
 518              		.align	2
 519              		.thumb
 520              		.thumb_func
 522              	put_fat.part.4:
 523              	.LFB54:
 862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT put_fat (
 524              		.loc 1 862 0
 525              		.cfi_startproc
 526              		@ args = 0, pretend = 0, frame = 8
 527              		@ frame_needed = 0, uses_anonymous_args = 0
 528              	.LVL54:
 529 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 530              	.LCFI4:
 531              		.cfi_def_cfa_offset 36
 532              		.cfi_offset 4, -36
 533              		.cfi_offset 5, -32
 534              		.cfi_offset 6, -28
 535              		.cfi_offset 7, -24
 536              		.cfi_offset 8, -20
 537              		.cfi_offset 9, -16
 538              		.cfi_offset 10, -12
 539              		.cfi_offset 11, -8
 540              		.cfi_offset 14, -4
 877:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (fs->fs_type) {
 541              		.loc 1 877 0
 542 0004 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 543 0006 022B     		cmp	r3, #2
 862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT put_fat (
 544              		.loc 1 862 0
 545 0008 83B0     		sub	sp, sp, #12
 546              	.LCFI5:
 547              		.cfi_def_cfa_offset 48
 862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT put_fat (
 548              		.loc 1 862 0
 549 000a 0446     		mov	r4, r0
 550 000c 0D46     		mov	r5, r1
 551 000e 1646     		mov	r6, r2
 877:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (fs->fs_type) {
 552              		.loc 1 877 0
 553 0010 6BD0     		beq	.L61
 554 0012 032B     		cmp	r3, #3
 555 0014 46D0     		beq	.L62
 556 0016 012B     		cmp	r3, #1
 557 0018 05D0     		beq	.L92
 908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INT_ERR;
 558              		.loc 1 908 0
 559 001a 0220     		movs	r0, #2
 560              	.LVL55:
 561              	.L59:
 911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->wflag = 1;
 562              		.loc 1 911 0
 563 001c 0123     		movs	r3, #1
 564 001e 2371     		strb	r3, [r4, #4]
 915:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 565              		.loc 1 915 0
 566 0020 03B0     		add	sp, sp, #12
 567 0022 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 568              	.LVL56:
 569              	.L92:
 880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 570              		.loc 1 880 0
 571 0026 016A     		ldr	r1, [r0, #32]
 572              	.LVL57:
 573              	.LBB132:
 574              	.LBB133:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 575              		.loc 1 727 0
 576 0028 C76A     		ldr	r7, [r0, #44]
 577              	.LBE133:
 578              	.LBE132:
 879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bc = clst; bc += bc / 2;
 579              		.loc 1 879 0
 580 002a 05EB550B 		add	fp, r5, r5, lsr #1
 581              	.LVL58:
 880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 582              		.loc 1 880 0
 583 002e 01EB5B29 		add	r9, r1, fp, lsr #9
 584              	.LVL59:
 585              	.LBB143:
 586              	.LBB139:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 587              		.loc 1 728 0
 588 0032 B945     		cmp	r9, r7
 589 0034 08D0     		beq	.L84
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 590              		.loc 1 730 0
 591 0036 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 592              	.LVL60:
 593 0038 002A     		cmp	r2, #0
 594 003a 40F09480 		bne	.L64
 595              	.LVL61:
 596              	.L67:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 597              		.loc 1 743 0
 598 003e B9F1000F 		cmp	r9, #0
 599 0042 40F0DD80 		bne	.L65
 600 0046 216A     		ldr	r1, [r4, #32]
 601              	.LVL62:
 602              	.L84:
 603              	.LBE139:
 604              	.LBE143:
 882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[bc % SS(fs)];
 605              		.loc 1 882 0
 606 0048 4FEACB53 		lsl	r3, fp, #23
 607 004c DB0D     		lsrs	r3, r3, #23
 608              	.LVL63:
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 609              		.loc 1 883 0
 610 004e 15F00105 		ands	r5, r5, #1
 611              	.LVL64:
 612 0052 00F0F780 		beq	.L70
 613 0056 E318     		adds	r3, r4, r3
 614              	.LVL65:
1212:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1213:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1214:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1215:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1216:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int pick_lfn (			/* 1:Succeeded, 0:Buffer overflow */
1217:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WCHAR *lfnbuf,		/* Pointer to the Unicode-LFN buffer */
1218:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir			/* Pointer to the directory entry */
1219:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1220:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1221:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, s;
1222:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WCHAR wc, uc;
1223:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1224:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1226:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1227:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s = 0; wc = 1;
1228:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1233:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1235:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1236:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (++s < 13);						/* Read all character in the entry */
1237:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1238:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dir[LDIR_Ord] & LLE) {				/* Put terminator if it is the last LFN part */
1239:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
1240:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		lfnbuf[i] = 0;
1241:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1242:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1243:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return 1;
1244:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1245:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1246:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1247:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
1248:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1249:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** void fit_lfn (
1250:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const WCHAR *lfnbuf,	/* Pointer to the LFN buffer */
1251:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir,				/* Pointer to the directory entry */
1252:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE ord,				/* LFN order (1-20) */
1253:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE sum				/* SFN sum */
1254:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1255:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1256:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, s;
1257:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WCHAR wc;
1258:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1259:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1260:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set check sum */
1261:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
1262:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Type] = 0;
1263:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(dir+LDIR_FstClusLO, 0);
1264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
1266:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s = wc = 0;
1267:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
1271:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (++s < 13);
1272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLE;	/* Bottom LFN part is the start of LFN sequence */
1273:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
1274:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1275:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1276:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1277:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1278:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1280:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1281:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1282:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Create numbered name                                                  */
1283:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1284:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1285:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** void gen_numname (
1286:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dst,			/* Pointer to generated SFN */
1287:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *src,	/* Pointer to source SFN to be modified */
1288:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const WCHAR *lfn,	/* Pointer to LFN */
1289:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD seq			/* Sequence number */
1290:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE ns[8], c;
1293:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, j;
1294:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1296:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_cpy(dst, src, 11);
1297:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
1299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do seq = (seq >> 1) + (seq << 15) + (WORD)*lfn++; while (*lfn);
1300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1301:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* itoa (hexdecimal) */
1303:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = 7;
1304:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
1305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = (seq % 16) + '0';
1306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c > '9') c += 7;
1307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ns[i--] = c;
1308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		seq /= 16;
1309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (seq);
1310:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ns[i] = '~';
1311:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Append the number */
1313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
1314:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (IsDBCS1(dst[j])) {
1315:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (j == i - 1) break;
1316:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			j++;
1317:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1318:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1319:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
1322:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1323:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1324:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1325:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1326:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1327:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1328:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1329:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Calculate sum of an SFN                                               */
1330:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1331:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1332:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1333:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** BYTE sum_sfn (
1334:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *dir		/* Ptr to directory entry */
1335:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1336:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1337:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE sum = 0;
1338:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT n = 11;
1339:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
1341:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return sum;
1342:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1343:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1344:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1345:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1346:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1347:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1348:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1349:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Directory handling - Find an object in the directory                  */
1350:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1351:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1352:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1353:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT dir_find (
1354:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj			/* Pointer to the directory object linked to the file name */
1355:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1356:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1357:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
1358:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE c, *dir;
1359:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1360:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE a, ord, sum;
1361:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1362:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1363:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = dir_sdi(dj, 0);			/* Rewind directory object */
1364:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) return res;
1365:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1366:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1367:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ord = sum = 0xFF;
1368:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1369:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
1370:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = move_window(dj->fs, dj->sect);
1371:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) break;
1372:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dir = dj->dir;					/* Ptr to the directory entry of current index */
1373:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = dir[DIR_Name];
1374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1375:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN	/* LFN configuration */
1376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
1378:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ord = 0xFF;
1379:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
1380:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1381:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj->lfn) {
1382:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (c & LLE) {		/* Is it start of LFN sequence? */
1383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						sum = dir[LDIR_Chksum];
1384:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						c &= ~LLE; ord = c;	/* LFN start order */
1385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->lfn_idx = dj->index;
1386:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
1387:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
1388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
1389:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
1390:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {					/* An SFN entry is found */
1391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
1392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = 0xFF; dj->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!(dj->fn[NS] & NS_LOSS) && !mem_cmp(dir, dj->fn, 11)) break;	/* SFN matched? */
1394:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1395:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1396:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else		/* Non LFN configuration */
1397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dj->fn, 11)) /* Is it a valid entry? */
1398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			break;
1399:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1400:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dir_next(dj, 0);		/* Next entry */
1401:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (res == FR_OK);
1402:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1403:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
1404:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1405:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1406:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1407:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1408:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1409:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1410:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Read an object from the directory                                     */
1411:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1412:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_MINIMIZE <= 1
1413:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1414:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT dir_read (
1415:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj			/* Pointer to the directory object that pointing the entry to be read */
1416:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
1419:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE c, *dir;
1420:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1421:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE a, ord = 0xFF, sum = 0xFF;
1422:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1423:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = FR_NO_FILE;
1425:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (dj->sect) {
1426:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = move_window(dj->fs, dj->sect);
1427:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) break;
1428:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dir = dj->dir;					/* Ptr to the directory entry of current index */
1429:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = dir[DIR_Name];
1430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1431:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN	/* LFN configuration */
1432:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || (!_FS_RPATH && c == '.') || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without 
1434:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ord = 0xFF;
1435:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
1436:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1437:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c & LLE) {			/* Is it start of LFN sequence? */
1438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					sum = dir[LDIR_Chksum];
1439:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					c &= ~LLE; ord = c;
1440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->lfn_idx = dj->index;
1441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
1442:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				/* Check LFN validity and capture it */
1443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
1444:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {					/* An SFN entry is found */
1445:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
1446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->lfn_idx = 0xFFFF;		/* It has no LFN. */
1447:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				break;
1448:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1449:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1450:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else		/* Non LFN configuration */
1451:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c != DDE && (_FS_RPATH || c != '.') && !(dir[DIR_Attr] & AM_VOL))	/* Is it a valid entry? */
1452:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			break;
1453:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1454:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dir_next(dj, 0);				/* Next entry */
1455:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) break;
1456:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1457:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1458:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) dj->sect = 0;
1459:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1460:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
1461:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1462:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1463:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1464:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1465:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1466:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1467:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Register an object to the directory                                   */
1468:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1469:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
1470:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1471:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT dir_register (	/* FR_OK:Successful, FR_DENIED:No free entry or too many SFN collision, FR_D
1472:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj				/* Target directory with object name to be created */
1473:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1474:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1475:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
1476:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE c, *dir;
1477:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN	/* LFN configuration */
1478:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD n, ne, is;
1479:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE sn[12], *fn, sum;
1480:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WCHAR *lfn;
1481:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1482:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1483:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fn = dj->fn; lfn = dj->lfn;
1484:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_cpy(sn, fn, 12);
1485:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1486:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (_FS_RPATH && (sn[NS] & NS_DOT))		/* Cannot create dot entry */
1487:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_NAME;
1488:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1489:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (sn[NS] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
1490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fn[NS] = 0; dj->lfn = 0;			/* Find only SFN */
1491:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < 100; n++) {
1492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
1493:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_find(dj);				/* Check if the name collides with existing SFN */
1494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
1495:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
1497:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
1498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fn[NS] = sn[NS]; dj->lfn = lfn;
1499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (sn[NS] & NS_LFN) {			/* When LFN is to be created, reserve an SFN + LFN entries. */
1502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (ne = 0; lfn[ne]; ne++) ;
1503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ne = (ne + 25) / 13;
1504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {						/* Otherwise reserve only an SFN entry. */
1505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ne = 1;
1506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1507:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1508:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Reserve contiguous entries */
1509:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = dir_sdi(dj, 0);
1510:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) return res;
1511:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = is = 0;
1512:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
1513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = move_window(dj->fs, dj->sect);
1514:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) break;
1515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *dj->dir;				/* Check the entry status */
1516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || c == 0) {	/* Is it a blank entry? */
1517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (n == 0) is = dj->index;	/* First index of the contiguous entry */
1518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (++n == ne) break;	/* A contiguous entry that required count is found */
1519:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
1520:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = 0;					/* Not a blank entry. Restart to search */
1521:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1522:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dir_next(dj, 1);		/* Next entry with table stretch */
1523:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (res == FR_OK);
1524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && ne > 1) {	/* Initialize LFN entry if needed */
1526:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dir_sdi(dj, is);
1527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
1528:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sum = sum_sfn(dj->fn);	/* Sum of the SFN tied to the LFN */
1529:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ne--;
1530:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			do {					/* Store LFN entries in bottom first */
1531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = move_window(dj->fs, dj->sect);
1532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res != FR_OK) break;
1533:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fit_lfn(dj->lfn, dj->dir, (BYTE)ne, sum);
1534:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->fs->wflag = 1;
1535:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_next(dj, 0);	/* Next entry */
1536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} while (res == FR_OK && --ne);
1537:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1538:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1539:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else	/* Non LFN configuration */
1541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = dir_sdi(dj, 0);
1542:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
1543:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do {	/* Find a blank entry for the SFN */
1544:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(dj->fs, dj->sect);
1545:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
1546:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = *dj->dir;
1547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == DDE || c == 0) break;	/* Is it a blank entry? */
1548:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_next(dj, 1);			/* Next entry with table stretch */
1549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (res == FR_OK);
1550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1551:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1552:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1553:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {		/* Initialize the SFN entry */
1554:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = move_window(dj->fs, dj->sect);
1555:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
1556:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj->dir;
1557:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mem_set(dir, 0, SZ_DIR);	/* Clean the entry */
1558:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mem_cpy(dir, dj->fn, 11);	/* Put SFN */
1559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir[DIR_NTres] = *(dj->fn+NS) & (NS_BODY | NS_EXT);	/* Put NT flag */
1561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->fs->wflag = 1;
1563:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1564:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1566:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
1567:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1568:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* !_FS_READONLY */
1569:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1570:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1571:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1572:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1573:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1574:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Remove an object from the directory                                   */
1575:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY && !_FS_MINIMIZE
1577:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1578:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT dir_remove (	/* FR_OK: Successful, FR_DISK_ERR: A disk error */
1579:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj				/* Directory object pointing the entry to be removed */
1580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1582:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
1583:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN	/* LFN configuration */
1584:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD i;
1585:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1586:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index;	/* SFN index */
1587:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = dir_sdi(dj, (WORD)((dj->lfn_idx == 0xFFFF) ? i : dj->lfn_idx));	/* Goto the SFN or top of th
1588:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
1589:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do {
1590:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(dj->fs, dj->sect);
1591:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
1592:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*dj->dir = DDE;			/* Mark the entry "deleted" */
1593:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->fs->wflag = 1;
1594:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
1595:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_next(dj, 0);		/* Next entry */
1596:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (res == FR_OK);
1597:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
1598:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1599:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1600:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else			/* Non LFN configuration */
1601:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = dir_sdi(dj, dj->index);
1602:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
1603:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = move_window(dj->fs, dj->sect);
1604:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
1605:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*dj->dir = DDE;			/* Mark the entry "deleted" */
1606:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->fs->wflag = 1;
1607:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1608:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1610:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1611:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
1612:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* !_FS_READONLY */
1614:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1615:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1616:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1617:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1618:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Pick a segment and create the object name in directory form           */
1620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1623:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT create_name (
1624:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj,			/* Pointer to the directory object */
1625:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR **path	/* Pointer to pointer to the segment in the path string */
1626:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1627:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1628:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #ifdef _EXCVT
1629:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	static const BYTE excvt[] = _EXCVT;	/* Upper conversion table for extended chars */
1630:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1631:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1632:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN	/* LFN configuration */
1633:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE b, cf;
1634:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WCHAR w, *lfn;
1635:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, ni, si, di;
1636:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *p;
1637:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1638:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Create LFN in Unicode */
1639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
1640:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	lfn = dj->lfn;
1641:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	si = di = 0;
1642:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (;;) {
1643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = p[si++];					/* Get a character */
1644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
1645:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
1646:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_INVALID_NAME;
1647:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_LFN_UNICODE
1648:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w &= 0xFF;
1649:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
1650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
1651:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!IsDBCS2(b))
1652:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
1653:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
1654:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1655:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
1656:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
1657:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1658:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal chars for LFN */
1659:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_INVALID_NAME;
1660:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		lfn[di++] = w;					/* Store the Unicode char */
1661:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1662:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
1663:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
1664:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH
1665:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((di == 1 && lfn[di-1] == '.') || /* Is this a dot entry? */
1666:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		(di == 2 && lfn[di-1] == '.' && lfn[di-2] == '.')) {
1667:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		lfn[di] = 0;
1668:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 11; i++)
1669:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->fn[i] = (i < di) ? '.' : ' ';
1670:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->fn[i] = cf | NS_DOT;		/* This is a dot entry */
1671:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_OK;
1672:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1673:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1674:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (di) {						/* Strip trailing spaces and dots */
1675:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = lfn[di-1];
1676:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w != ' ' && w != '.') break;
1677:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		di--;
1678:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1679:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!di) return FR_INVALID_NAME;	/* Reject nul string */
1680:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	lfn[di] = 0;						/* LFN is created */
1682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1683:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Create SFN in directory form */
1684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_set(dj->fn, ' ', 11);
1685:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
1686:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
1687:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
1688:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1689:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b = i = 0; ni = 8;
1690:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (;;) {
1691:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = lfn[si++];					/* Get an LFN char */
1692:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
1693:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
1694:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
1695:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1696:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
1698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ni == 11) {				/* Long extension */
1699:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
1700:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
1702:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (si > di) break;			/* No extension */
1703:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
1704:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			b <<= 2; continue;
1705:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1706:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w >= 0x80) {				/* Non ASCII char */
1708:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #ifdef _EXCVT
1709:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
1710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (w) w = excvt[w - 0x80];	/* Convert extended char to upper (SBCS) */
1711:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
1712:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
1713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
1715:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1716:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1717:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (_DF1S && w >= 0x100) {		/* Double byte char (always false on SBCS cfg) */
1718:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= ni - 1) {
1719:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
1720:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1721:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->fn[i++] = (BYTE)(w >> 8);
1722:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {						/* Single byte char */
1723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal chars for SFN */
1724:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
1725:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
1726:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
1727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					b |= 2;
1728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} else {
1729:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
1730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						b |= 1; w -= 0x20;
1731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
1732:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
1733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1735:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->fn[i++] = (BYTE)w;
1736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->fn[0] == DDE) dj->fn[0] = NDDE;	/* If the first char collides with deleted mark, replace i
1739:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (ni == 8) b <<= 2;
1741:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
1742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cf |= NS_LFN;
1743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended char, NT flags are create
1744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
1745:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
1746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1747:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1748:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->fn[NS] = cf;	/* SFN is created */
1749:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
1751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1752:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1753:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else	/* Non-LFN configuration */
1754:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE b, c, d, *sfn;
1755:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT ni, si, i;
1756:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const char *p;
1757:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1758:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Create file name in directory form */
1759:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
1760:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sfn = dj->fn;
1761:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_set(sfn, ' ', 11);
1762:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	si = i = b = 0; ni = 8;
1763:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH
1764:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
1765:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (;;) {
1766:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = (BYTE)p[si++];
1767:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c != '.' || si >= 3) break;
1768:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sfn[i++] = c;
1769:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1770:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
1771:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*path = &p[si];									/* Return pointer to the next segment */
1772:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		sfn[NS] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of path */
1773:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_OK;
1774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (;;) {
1777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = (BYTE)p[si++];
1778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
1779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '.' || i >= ni) {
1780:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
1781:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			i = 8; ni = 11;
1782:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			b <<= 2; continue;
1783:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1784:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c >= 0x80) {				/* Extended char? */
1785:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			b |= 3;						/* Eliminate NT flag */
1786:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #ifdef _EXCVT
1787:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = excvt[c-0x80];			/* Upper conversion (SBCS) */
1788:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
1789:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_DF1S	/* ASCII only cfg */
1790:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_INVALID_NAME;
1791:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1792:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1793:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1794:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
1795:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
1796:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1)	/* Reject invalid DBC */
1797:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_INVALID_NAME;
1798:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sfn[i++] = c;
1799:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sfn[i++] = d;
1800:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {						/* Single byte code */
1801:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))	/* Reject illegal chrs for SFN */
1802:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_INVALID_NAME;
1803:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (IsUpper(c)) {			/* ASCII large capital? */
1804:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				b |= 2;
1805:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
1806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (IsLower(c)) {		/* ASCII small capital? */
1807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					b |= 1; c -= 0x20;
1808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
1809:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1810:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sfn[i++] = c;
1811:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1812:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1813:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
1814:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
1815:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1816:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i) return FR_INVALID_NAME;		/* Reject nul string */
1817:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (sfn[0] == DDE) sfn[0] = NDDE;	/* When first char collides with DDE, replace it with 0x05 */
1818:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1819:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (ni == 8) b <<= 2;
1820:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
1821:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
1822:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1823:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sfn[NS] = c;		/* Store NT flag, File name is created */
1824:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1825:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
1826:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1827:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1829:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1830:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1832:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Get file information from directory entry                             */
1834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_MINIMIZE <= 1
1836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** void get_fileinfo (		/* No return code */
1838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj,			/* Pointer to the directory object */
1839:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FILINFO *fno	 	/* Pointer to the file information to be filled */
1840:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i;
1843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE nt, *dir;
1844:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR *p, c;
1845:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	p = fno->fname;
1848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->sect) {
1849:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dir = dj->dir;
1850:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		nt = dir[DIR_NTres];		/* NT flag */
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
1852:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = dir[i];
1853:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == ' ') break;
1854:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == NDDE) c = (TCHAR)DDE;
1855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (_USE_LFN && (nt & NS_BODY) && IsUpper(c)) c += 0x20;
1856:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _LFN_UNICODE
1857:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (IsDBCS1(c) && i < 7 && IsDBCS2(dir[i+1]))
1858:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				c = (c << 8) | dir[++i];
1859:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = ff_convert(c, 1);
1860:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!c) c = '?';
1861:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p++ = c;
1863:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1864:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dir[8] != ' ') {		/* Copy name extension */
1865:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p++ = '.';
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
1867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				c = dir[i];
1868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c == ' ') break;
1869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (_USE_LFN && (nt & NS_EXT) && IsUpper(c)) c += 0x20;
1870:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _LFN_UNICODE
1871:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (IsDBCS1(c) && i < 10 && IsDBCS2(dir[i+1]))
1872:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					c = (c << 8) | dir[++i];
1873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				c = ff_convert(c, 1);
1874:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!c) c = '?';
1875:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1876:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				*p++ = c;
1877:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1878:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
1880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
1881:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
1882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
1883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*p = 0;		/* Terminate SFN str by a \0 */
1885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1886:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
1887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((fno->lfname != 0) && (fno->lfsize != 0)) {
1888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		TCHAR *tp = fno->lfname;
1889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		WCHAR w, *lfn;
1890:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1891:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		i = 0;
1892:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->sect && dj->lfn_idx != 0xFFFF) {/* Get LFN if available */
1893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfn = dj->lfn;
1894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while ((w = *lfn++) != 0) {			/* Get an LFN char */
1895:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_LFN_UNICODE
1896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				w = ff_convert(w, 0);			/* Unicode -> OEM conversion */
1897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!w) { i = 0; break; }		/* Could not convert, no LFN */
1898:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (_DF1S && w >= 0x100)		/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
1899:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					tp[i++] = (TCHAR)(w >> 8);
1900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* Buffer overflow, no LFN */
1902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tp[i++] = (TCHAR)w;
1903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1904:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tp[i] = 0;	/* Terminate the LFN str by a \0 */
1906:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1907:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1909:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
1910:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1912:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1913:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1914:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1915:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Follow a file path                                                    */
1916:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1917:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1918:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1919:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
1920:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj,			/* Directory object to return last directory and found object */
1921:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path	/* Full-path string to find a file or directory */
1922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1924:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
1925:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir, ns;
1926:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1927:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH
1929:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (*path == '/' || *path == '\\') { /* There is a heading separator */
1930:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		path++;	dj->sclust = 0;		/* Strip it and start from the root dir */
1931:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {							/* No heading separator */
1932:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sclust = dj->fs->cdir;	/* Start from the current dir */
1933:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1934:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
1935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (*path == '/' || *path == '\\')	/* Strip heading separator if exist */
1936:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		path++;
1937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->sclust = 0;						/* Start from the root dir */
1938:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
1939:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1940:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((UINT)*path < ' ') {			/* Nul path means the start directory itself */
1941:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dir_sdi(dj, 0);
1942:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->dir = 0;
1943:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1944:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {							/* Follow path */
1945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (;;) {
1946:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = create_name(dj, &path);	/* Get a segment */
1947:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
1948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_find(dj);				/* Find it */
1949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ns = *(dj->fn+NS);
1950:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
1951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res != FR_NO_FILE) break;	/* Abort if any hard error occurred */
1952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				/* Object not found */
1953:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exit */
1954:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->sclust = 0; dj->dir = 0;	/* It is the root dir */
1955:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_OK;
1956:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!(ns & NS_LAST)) continue;
1957:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} else {							/* Could not find the object */
1958:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!(ns & NS_LAST)) res = FR_NO_PATH;
1959:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
1960:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				break;
1961:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1962:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment match. Function completed. */
1963:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj->dir;						/* There is next segment. Follow the sub directory */
1964:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* Cannot follow because it is a file */
1965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NO_PATH; break;
1966:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
1967:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->sclust = LD_CLUST(dir);
1968:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
1969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
1970:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1971:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
1972:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1973:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1974:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1975:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1976:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1977:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1978:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Load a sector and check if it is an FAT Volume Boot Record            */
1979:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
1980:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1981:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
1982:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** BYTE check_fs (	/* 0:FAT-VBR, 1:Valid BR but not FAT, 2:Not a BR, 3:Disk error */
1983:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,	/* File system object */
1984:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
1985:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
1986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
1991:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
1996:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
1997:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return 1;
1998:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
1999:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2000:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Check if the file system object is valid or not                       */
2005:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
2008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT chk_mounted (	/* FR_OK(0): successful, !=0: any error occurred */
2009:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR **path,	/* Pointer to pointer to the path name (drive number) */
2010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS **rfs,		/* Pointer to pointer to the found file system object */
2011:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE chk_wp			/* !=0: Check media write protection for write access */
2012:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2013:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE fmt, b, pi, *tbl;
2015:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT vol;
2016:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DSTATUS stat;
2017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat;
2018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD nrsv;
2019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *p = *path;
2020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs;
2021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2022:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Get logical drive number from the path name */
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
2026:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {							/* No drive number is given */
2027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH
2028:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		vol = CurrVol;					/* Use current drive */
2029:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2030:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		vol = 0;						/* Use drive 0 */
2031:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2032:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2033:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2034:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Check if the file system object is valid or not */
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
2039:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2040:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ENTER_FF(fs);						/* Lock file system */
2041:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
2045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check write protection if needed */
2046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_WRITE_PROTECTED;
2047:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_OK;				/* The file system object is valid */
2048:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2049:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2050:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2051:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* The file system object is not valid. */
2052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
2053:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
2059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check disk write protection if needed */
2060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_WRITE_PROTECTED;
2061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _MAX_SS != 512						/* Get disk sector size (variable sector size cfg only) */
2062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &fs->ssize) != RES_OK)
2063:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_DISK_ERR;
2064:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2065:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Search FAT partition on the drive. Supports only generic partitionings, FDISK and SFD. */
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
2067:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD2PT(vol) && !fmt) fmt = 1;	/* Force non-SFD if the volume is forced partition */
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
2069:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Check the partition listed in the partition table */
2070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		pi = LD2PT(vol);
2071:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (pi) pi--;
2072:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl = &fs->win[MBR_Table + pi * SZ_PTE];/* Partition table */
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
2075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fmt = check_fs(fs, bsect);		/* Check the partition */
2076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
2080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2081:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* An FAT volume is found. Following code initializes the file system object */
2082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
2084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NO_FILESYSTEM;
2085:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
2089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
2093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
2096:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
2099:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
2102:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
2105:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2106:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Determine the FAT sub type */
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
2114:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2115:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Boundaries and Limits */
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
2119:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
2123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
2126:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Required FAT size) */
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
2128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
2130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NO_FILESYSTEM;
2131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2132:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2133:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Initialize cluster allocation information */
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
2136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Get fsinfo if available */
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
2147:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2148:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2149:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
2154:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH
2155:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->cdir = 0;			/* Current directory (root dir) */
2156:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2157:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE				/* Clear file lock semaphores */
2158:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clear_lock(fs);
2159:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2160:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
2162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2163:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2164:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2165:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2166:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Check if the file/dir object is valid or not                          */
2169:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2170:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2171:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** static
2172:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT validate (	/* FR_OK(0): The object is valid, !=0: Invalid */
2173:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs,		/* Pointer to the file system object */
2174:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	WORD id			/* Member id of the target object to be checked */
2175:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2176:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
2178:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_OBJECT;
2179:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2180:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ENTER_FF(fs);		/* Lock file system */
2181:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
2184:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2185:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
2186:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2187:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2188:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2189:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2190:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2191:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*--------------------------------------------------------------------------
2192:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2193:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c ****    Public Functions
2194:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2195:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** --------------------------------------------------------------------------*/
2196:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2197:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2198:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2199:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2200:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Mount/Unmount a Logical Drive                                         */
2201:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2202:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2203:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_mount (
2204:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE vol,		/* Logical drive number to be mounted/unmounted */
2205:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs		/* Pointer to new file system object (NULL for unmount)*/
2206:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2207:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2208:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *rfs;
2209:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2210:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2211:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES)		/* Check if the drive number is valid */
2212:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
2213:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	rfs = FatFs[vol];			/* Get current fs object */
2214:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2215:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (rfs) {
2216:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
2217:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		clear_lock(rfs);
2218:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2219:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_REENTRANT				/* Discard sync object of the current volume */
2220:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!ff_del_syncobj(rfs->sobj)) return FR_INT_ERR;
2221:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2222:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rfs->fs_type = 0;		/* Clear old fs object */
2223:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2224:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs) {
2226:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fs_type = 0;		/* Clear new fs object */
2227:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_REENTRANT				/* Create sync object for the new volume */
2228:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!ff_cre_syncobj(vol, &fs->sobj)) return FR_INT_ERR;
2229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FatFs[vol] = fs;			/* Register new fs object */
2232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2233:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
2234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2235:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2236:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2237:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2238:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2239:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2240:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Open or Create a File                                                 */
2241:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2242:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2243:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_open (
2244:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp,			/* Pointer to the blank file object */
2245:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path,	/* Pointer to the file name */
2246:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
2247:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2248:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2249:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2250:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj;
2251:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir;
2252:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
2253:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2254:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2255:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->fs = 0;			/* Clear file object */
2256:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2257:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2258:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
2259:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, (BYTE)(mode & ~FA_READ));
2260:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2261:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mode &= FA_READ;
2262:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, 0);
2263:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	INIT_BUF(dj);
2265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK)
2266:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
2267:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir = dj.dir;
2268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY	/* R/W configuration */
2270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
2271:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!dir)	/* Current dir itself */
2272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;
2273:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
2274:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		else
2275:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2276:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2277:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2278:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Create or Open a file */
2279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
2280:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		DWORD dw, cl;
2281:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2282:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) {					/* No file, create new */
2283:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
2284:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
2285:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
2286:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2287:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_register(&dj);
2288:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2289:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mode |= FA_CREATE_ALWAYS;		/* File is created */
2290:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;					/* New entry */
2291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		else {								/* Any object is already existing */
2293:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
2294:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_DENIED;
2295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
2296:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
2297:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_EXIST;
2298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
2301:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dw = get_fattime();					/* Created time */
2302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(dir+DIR_CrtTime, dw);
2303:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir[DIR_Attr] = 0;					/* Reset attribute */
2304:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(dir+DIR_FileSize, 0);		/* size = 0 */
2305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cl = LD_CLUST(dir);					/* Get start cluster */
2306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_CLUST(dir, 0);					/* cluster = 0 */
2307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj.fs->wflag = 1;
2308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cl) {							/* Remove the cluster chain if exist */
2309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dw = dj.fs->winsect;
2310:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = remove_chain(dj.fs, cl);
2311:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK) {
2312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
2313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = move_window(dj.fs, dw);
2314:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2315:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2316:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2317:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2318:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	else {	/* Open an existing file */
2319:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {						/* Follow succeeded */
2320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dir[DIR_Attr] & AM_DIR) {		/* It is a directory */
2321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NO_FILE;
2322:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
2323:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
2324:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_DENIED;
2325:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2326:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2327:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2328:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
2329:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (mode & FA_CREATE_ALWAYS)			/* Set file change flag if created or overwritten */
2330:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mode |= FA__WRITTEN;
2331:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dir_sect = dj.fs->winsect;			/* Pointer to the directory entry */
2332:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dir_ptr = dir;
2333:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
2334:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2335:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fp->lockid) res = FR_INT_ERR;
2336:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2337:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2338:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2339:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else				/* R/O configuration */
2340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {					/* Follow succeeded */
2341:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!dir) {						/* Current dir itself */
2342:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;
2343:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
2344:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dir[DIR_Attr] & AM_DIR)	/* It is a directory */
2345:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NO_FILE;
2346:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2347:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2348:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2349:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FREE_BUF();
2350:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2351:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
2352:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag = mode;					/* File access mode */
2353:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->sclust = LD_CLUST(dir);			/* File start cluster */
2354:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
2355:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr = 0;						/* File pointer */
2356:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dsect = 0;
2357:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_FASTSEEK
2358:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->cltbl = 0;						/* Normal seek mode */
2359:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2360:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fs = dj.fs; fp->id = dj.fs->id;	/* Validate file object */
2361:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2362:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2363:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
2364:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2365:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2366:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2367:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2368:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2369:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2370:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Read File                                                             */
2371:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2372:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2373:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_read (
2374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp, 		/* Pointer to the file object */
2375:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	void *buff,		/* Pointer to data buffer */
2376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT btr,		/* Number of bytes to read */
2377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT *br		/* Pointer to number of bytes read */
2378:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2379:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2380:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2381:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst, sect, remain;
2382:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT rcnt, cc;
2383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE csect, *rbuff = buff;
2384:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2386:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*br = 0;	/* Initialize byte counter */
2387:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);				/* Check validity */
2389:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
2390:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)					/* Aborted file? */
2391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_INT_ERR);
2392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
2393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2394:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	remain = fp->fsize - fp->fptr;
2395:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
2396:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
2398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
2399:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
2400:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2401:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
2402:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
2403:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
2404:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} else {						/* Middle or end of the file */
2405:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_FASTSEEK
2406:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fp->cltbl)
2407:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2408:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					else
2409:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2410:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
2411:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2412:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
2413:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2414:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;				/* Update current cluster */
2415:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2416:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
2418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
2419:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
2420:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
2421:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2422:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					cc = fp->fs->csize - csect;
2423:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, (BYTE)cc) != RES_OK)
2424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2425:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
2426:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_TINY
2427:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fs->wflag && fp->fs->winsect - sect < cc)
2428:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(rbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), fp->fs->win, SS(fp->fs));
2429:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
2431:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf, SS(fp->fs));
2432:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2434:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
2435:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				continue;
2436:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2437:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_TINY
2438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
2439:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
2441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
2442:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->flag &= ~FA__DIRTY;
2444:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2445:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)	/* Fill sector cache */
2447:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2448:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2449:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2450:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
2451:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2452:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rcnt = SS(fp->fs) - (fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer */
2453:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (rcnt > btr) rcnt = btr;
2454:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_TINY
2455:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fp->fs, fp->dsect))		/* Move sector window */
2456:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2457:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(rbuff, &fp->fs->win[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2458:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2459:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(rbuff, &fp->buf[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2460:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2461:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2462:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2463:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2464:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2465:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2466:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2467:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2468:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2469:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2470:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2471:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Write File                                                            */
2472:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2473:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2474:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_write (
2475:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp,			/* Pointer to the file object */
2476:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const void *buff,	/* Pointer to the data to be written */
2477:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT btw,			/* Number of bytes to write */
2478:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT *bw			/* Pointer to number of bytes written */
2479:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2480:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2481:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2482:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD clst, sect;
2483:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT wcnt, cc;
2484:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *wbuff = buff;
2485:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE csect;
2486:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2487:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2488:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*bw = 0;	/* Initialize byte counter */
2489:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
2491:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
2493:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_INT_ERR);
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
2495:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
2497:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
2507:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} else {					/* Middle or end of the file */
2508:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_FASTSEEK
2509:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fp->cltbl)
2510:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2511:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					else
2512:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
2514:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
2519:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2520:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_TINY
2521:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->fs->winsect == fp->dsect && move_window(fp->fs, 0))	/* Write-back sector cache */
2522:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
2523:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
2526:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
2528:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2529:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2530:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
2533:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
2534:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
2535:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					cc = fp->fs->csize - csect;
2537:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, (BYTE)cc) != RES_OK)
2538:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2539:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_TINY
2540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct 
2541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(fp->fs->win, wbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), SS(fp->fs));
2542:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->fs->wflag = 0;
2543:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2544:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2545:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write 
2546:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
2547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->flag &= ~FA__DIRTY;
2548:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
2551:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				continue;
2552:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2553:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_TINY
2554:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->fptr >= fp->fsize) {	/* Avoid silly cache filling at growing edge */
2555:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (move_window(fp->fs, 0)) ABORT(fp->fs, FR_DISK_ERR);
2556:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fs->winsect = sect;
2557:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2558:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2563:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2564:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
2566:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2567:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wcnt = SS(fp->fs) - (fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
2568:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wcnt > btw) wcnt = btw;
2569:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_TINY
2570:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fp->fs, fp->dsect))	/* Move sector window */
2571:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2572:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(&fp->fs->win[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2573:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fs->wflag = 1;
2574:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2575:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(&fp->buf[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
2577:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2578:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2579:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
2582:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2583:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2584:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2585:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2586:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2587:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2588:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2589:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2590:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Synchronize the File Object                                           */
2591:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2592:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2593:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_sync (
2594:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp		/* Pointer to the file object */
2595:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2596:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2597:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2598:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD tim;
2599:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir;
2600:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2601:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2602:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
2603:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
2604:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
2605:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_TINY	/* Write-back dirty buffer */
2606:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {
2607:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
2608:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
2609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
2610:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2611:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2612:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			/* Update the directory entry */
2613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fp->fs, fp->dir_sect);
2614:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) {
2615:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir = fp->dir_ptr;
2616:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
2617:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
2618:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, fp->sclust);					/* Update start cluster */
2619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tim = get_fattime();						/* Update updated time */
2620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
2621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__WRITTEN;
2622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fs->wflag = 1;
2623:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(fp->fs);
2624:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2625:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2626:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2627:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2628:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, res);
2629:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2630:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2631:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* !_FS_READONLY */
2632:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2633:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2634:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2635:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2636:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2637:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Close File                                                            */
2638:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2640:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_close (
2641:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp		/* Pointer to the file object to be closed */
2642:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2645:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2646:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_READONLY
2647:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs = fp->fs;
2648:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fs, fp->id);
2649:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) fp->fs = 0;	/* Discard file object */
2650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fs, res);
2651:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2652:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2653:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = f_sync(fp);		/* Flush cached data */
2654:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
2655:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {		/* Decrement open counter */
2656:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_REENTRANT
2657:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = validate(fp->fs, fp->id);
2658:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
2659:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dec_lock(fp->lockid);	
2660:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			unlock_fs(fp->fs, FR_OK);
2661:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2662:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else
2663:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dec_lock(fp->lockid);
2664:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2665:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2666:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2667:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) fp->fs = 0;	/* Discard file object */
2668:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return res;
2669:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2670:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2671:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2672:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2673:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2674:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2675:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2676:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Current Drive/Directory Handlings                                     */
2677:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2678:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2679:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH >= 1
2680:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_chdrive (
2682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE drv		/* Drive number */
2683:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2685:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (drv >= _VOLUMES) return FR_INVALID_DRIVE;
2686:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2687:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	CurrVol = drv;
2688:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2689:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
2690:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2691:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2692:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2693:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2694:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_chdir (
2695:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path	/* Pointer to the directory path */
2696:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2699:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj;
2700:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
2701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2702:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2703:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, 0);
2704:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
2705:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
2706:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
2707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
2708:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
2709:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!dj.dir) {
2710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->cdir = dj.sclust;	/* Start directory itself */
2711:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
2712:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj.dir[DIR_Attr] & AM_DIR)	/* Reached to the directory */
2713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->cdir = LD_CLUST(dj.dir);
2714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				else
2715:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
2716:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2717:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2718:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
2719:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2720:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2721:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
2722:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2724:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2725:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH >= 2
2726:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_getcwd (
2727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR *path,	/* Pointer to the directory path */
2728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT sz_path	/* Size of path */
2729:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2732:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj;
2733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, n;
2734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD ccl;
2735:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR *tp;
2736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FILINFO fno;
2737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
2738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2739:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*path = 0;
2741:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted((const TCHAR**)&path, &dj.fs, 0);	/* Get current volume */
2742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
2743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
2744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		i = sz_path;		/* Bottom of buffer (dir stack base) */
2745:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj.sclust = dj.fs->cdir;			/* Start to follow upper dir from current dir */
2746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while ((ccl = dj.sclust) != 0) {	/* Repeat while current dir is a sub-dir */
2747:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_sdi(&dj, 1);			/* Get parent dir */
2748:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
2749:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_read(&dj);
2750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
2751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj.sclust = LD_CLUST(dj.dir);	/* Goto parent dir */
2752:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_sdi(&dj, 0);
2753:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
2754:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			do {							/* Find the entry links to the child dir */
2755:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_read(&dj);
2756:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res != FR_OK) break;
2757:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ccl == LD_CLUST(dj.dir)) break;	/* Found the entry */
2758:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_next(&dj, 0);	
2759:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} while (res == FR_OK);
2760:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
2761:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
2762:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_LFN
2763:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fno.lfname = path;
2764:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fno.lfsize = i;
2765:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2766:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			get_fileinfo(&dj, &fno);		/* Get the dir name and push it to the buffer */
2767:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tp = fno.fname;
2768:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (_USE_LFN && *path) tp = path;
2769:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (n = 0; tp[n]; n++) ;
2770:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i < n + 3) {
2771:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NOT_ENOUGH_CORE; break;
2772:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2773:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while (n) path[--i] = tp[--n];
2774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			path[--i] = '/';
2775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tp = path;
2777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
2778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
2779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*tp++ = ':';
2780:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i == sz_path) {				/* Root-dir */
2781:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				*tp++ = '/';
2782:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {						/* Sub-dir */
2783:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				do		/* Add stacked path str */
2784:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					*tp++ = path[i++];
2785:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (i < sz_path);
2786:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2787:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2788:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*tp = 0;
2789:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
2790:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2791:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2792:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
2793:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2794:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _FS_RPATH >= 2 */
2795:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _FS_RPATH >= 1 */
2796:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2797:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2798:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2799:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_MINIMIZE <= 2
2800:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2801:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Seek File R/W Pointer                                                 */
2802:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2803:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2804:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_lseek (
2805:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp,		/* Pointer to the file object */
2806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD ofs		/* File pointer from top of file */
2807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2809:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2810:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2811:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2812:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
2813:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
2814:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)			/* Check abort flag */
2815:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_INT_ERR);
2816:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2817:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_FASTSEEK
2818:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
2819:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
2820:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2821:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
2822:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl = fp->cltbl;
2823:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
2824:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
2825:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cl) {
2826:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				do {
2827:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					/* Get a fragment */
2828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
2829:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					do {
2830:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						pcl = cl; ncl++;
2831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						cl = get_fat(fp->fs, cl);
2832:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
2833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					} while (cl == pcl + 1);
2835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
2836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
2837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
2838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} while (cl < fp->fs->n_fatent);	/* Repeat until end of chain */
2839:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2840:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
2841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ulen <= tlen)
2842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				*tbl = 0;		/* Terminate table */
2843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			else
2844:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
2845:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {						/* Fast seek */
2847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ofs > fp->fsize)		/* Clip offset at the file size */
2848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ofs = fp->fsize;
2849:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
2850:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ofs) {
2851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
2852:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
2853:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
2854:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
2855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
2856:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_TINY
2857:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2858:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
2859:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
2860:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
2861:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->flag &= ~FA__DIRTY;
2862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
2863:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2864:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (disk_read(fp->fs->drv, fp->buf, dsc, 1) != RES_OK)	/* Load current sector */
2865:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->dsect = dsc;
2868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2870:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2871:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else
2872:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2874:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Normal Seek */
2875:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	{
2876:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		DWORD clst, bcs, nsect, ifptr;
2877:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2878:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
2879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			 && !(fp->flag & FA_WRITE)
2881:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			) ofs = fp->fsize;
2883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ifptr = fp->fptr;
2885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr = nsect = 0;
2886:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ofs) {
2887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
2888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ifptr > 0 &&
2889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
2890:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
2891:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ofs -= fp->fptr;
2892:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = fp->clust;
2893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {									/* When seek to back cluster, */
2894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = fp->sclust;						/* start from the first cluster */
2895:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
2897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = create_chain(fp->fs, 0);
2898:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
2899:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->sclust = clst;
2901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;
2904:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst != 0) {
2906:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
2907:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
2909:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
2910:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
2911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							ofs = bcs; break;
2912:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						}
2913:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					} else
2914:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2915:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = get_fat(fp->fs, clst);	/* Follow cluster chain if not in write mode */
2916:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2917:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
2918:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->clust = clst;
2919:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->fptr += bcs;
2920:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ofs -= bcs;
2921:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fptr += ofs;
2923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ofs % SS(fp->fs)) {
2924:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
2925:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
2926:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					nsect += ofs / SS(fp->fs);
2927:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2929:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2930:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
2931:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_TINY
2932:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2933:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
2934:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
2935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2936:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
2937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2938:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2939:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fp->fs->drv, fp->buf, nsect, 1) != RES_OK)	/* Fill sector cache */
2940:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
2941:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2942:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = nsect;
2943:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2944:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
2945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
2946:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->fsize = fp->fptr;
2947:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->flag |= FA__WRITTEN;
2948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
2950:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, res);
2953:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2954:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2955:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2956:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2957:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_MINIMIZE <= 1
2958:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2959:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Create a Directroy Object                                             */
2960:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2961:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2962:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_opendir (
2963:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj,			/* Pointer to directory object to create */
2964:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path	/* Pointer to the directory path */
2965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
2966:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
2967:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
2968:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
2969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2970:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2971:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj->fs, 0);
2972:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
2973:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(*dj);
2974:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(dj, path);			/* Follow the path to the directory */
2975:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
2976:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
2977:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj->dir) {						/* It is not the root dir */
2978:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj->dir[DIR_Attr] & AM_DIR) {	/* The object is a directory */
2979:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->sclust = LD_CLUST(dj->dir);
2980:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} else {						/* The object is not a directory */
2981:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_NO_PATH;
2982:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
2983:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2984:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) {
2985:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->id = dj->fs->id;
2986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_sdi(dj, 0);			/* Rewind dir */
2987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
2988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
2989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
2990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
2991:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj->fs, res);
2993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
2994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2996:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2997:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
2998:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
2999:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Read Directory Entry in Sequense                                      */
3000:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_readdir (
3003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR *dj,			/* Pointer to the open directory object */
3004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FILINFO *fno		/* Pointer to file information to return */
3005:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
3009:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3011:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(dj->fs, dj->id);			/* Check validity of the object */
3012:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3013:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fno == 0) {
3014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_sdi(dj, 0);			/* Rewind the directory object */
3015:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
3016:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			INIT_BUF(*dj);
3017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_read(dj);				/* Read an directory item */
3018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of dir */
3019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = 0;
3020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_OK;
3021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3022:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
3023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				get_fileinfo(dj, fno);		/* Get the object information */
3024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_next(dj, 0);		/* Increment index for next */
3025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_NO_FILE) {
3026:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->sect = 0;
3027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_OK;
3028:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
3029:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3030:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			FREE_BUF();
3031:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3032:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3033:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3034:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj->fs, res);
3035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3039:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_MINIMIZE == 0
3040:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3041:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Get File Status                                                       */
3042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_stat (
3045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path,	/* Pointer to the file path */
3046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FILINFO *fno		/* Pointer to file information to return */
3047:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3048:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3049:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3050:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj;
3051:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
3052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3053:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, 0);
3055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
3057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
3059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj.dir)		/* Found an object */
3060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				get_fileinfo(&dj, fno);
3061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			else			/* It is root dir */
3062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;
3063:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3064:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
3065:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3067:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
3068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3069:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3071:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3072:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
3073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Get Number of Free Clusters                                           */
3075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_getfree (
3078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path,	/* Pointer to the logical drive number (root dir) */
3079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD *nclst,		/* Pointer to the variable to return number of free clusters */
3080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS **fatfs		/* Pointer to pointer to corresponding file system object to return */
3081:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD n, clst, sect, stat;
3085:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i;
3086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE fat, *p;
3087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Get drive number */
3090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, fatfs, 0);
3091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
3093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((*fatfs)->free_clust <= (*fatfs)->n_fatent - 2) {
3094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*nclst = (*fatfs)->free_clust;
3095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
3096:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			/* Get number of free clusters */
3097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fat = (*fatfs)->fs_type;
3098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = 0;
3099:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fat == FS_FAT12) {
3100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = 2;
3101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				do {
3102:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					stat = get_fat(*fatfs, clst);
3103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
3104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
3105:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 0) n++;
3106:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} while (++clst < (*fatfs)->n_fatent);
3107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
3108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = (*fatfs)->n_fatent;
3109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				sect = (*fatfs)->fatbase;
3110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				i = 0; p = 0;
3111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				do {
3112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!i) {
3113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						res = move_window(*fatfs, sect++);
3114:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (res != FR_OK) break;
3115:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						p = (*fatfs)->win;
3116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						i = SS(*fatfs);
3117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
3118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fat == FS_FAT16) {
3119:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (LD_WORD(p) == 0) n++;
3120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						p += 2; i -= 2;
3121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					} else {
3122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
3123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						p += 4; i -= 4;
3124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
3125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} while (--clst);
3126:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			(*fatfs)->free_clust = n;
3128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fat == FS_FAT32) (*fatfs)->fsi_flag = 1;
3129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*nclst = n;
3130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3132:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(*fatfs, res);
3133:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Truncate File                                                         */
3140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_truncate (
3143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp		/* Pointer to the file object */
3144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3147:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD ncl;
3148:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3149:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
3151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->flag & FA__ERROR) {			/* Check abort flag */
3153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INT_ERR;
3154:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
3155:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!(fp->flag & FA_WRITE))		/* Check access mode */
3156:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_DENIED;
3157:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3158:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3159:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3160:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fsize > fp->fptr) {
3161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
3162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->flag |= FA__WRITTEN;
3163:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
3164:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
3165:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->sclust = 0;
3166:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
3167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ncl = get_fat(fp->fs, fp->clust);
3168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_OK;
3169:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
3170:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
3171:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
3172:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
3173:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
3174:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
3175:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3176:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) fp->flag |= FA__ERROR;
3178:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3179:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3180:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, res);
3181:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3184:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3185:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3186:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3187:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Delete a File or Directory                                            */
3188:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3189:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3190:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_unlink (
3191:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path		/* Pointer to the file or directory path */
3192:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3193:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3194:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3195:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj, sdj;
3196:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir;
3197:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD dclst;
3198:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
3199:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3200:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3201:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, 1);
3202:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3203:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
3204:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3205:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
3206:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
3207:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
3208:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Cannot remove open file */
3209:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3210:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
3211:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;
3212:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!dir) {
3213:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the start directory */
3214:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
3215:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dir[DIR_Attr] & AM_RDO)
3216:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
3217:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3218:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dclst = LD_CLUST(dir);
3219:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
3220:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dclst < 2) {
3221:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_INT_ERR;
3222:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} else {
3223:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(&sdj, &dj, sizeof(DIR));	/* Check if the sub-dir is empty or not */
3224:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					sdj.sclust = dclst;
3225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
3226:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) {
3227:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						res = dir_read(&sdj);
3228:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (res == FR_OK			/* Not empty dir */
3229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_RPATH
3230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						|| dclst == sdj.fs->cdir	/* Current dir */
3231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						) res = FR_DENIED;
3233:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (res == FR_NO_FILE) res = FR_OK;	/* Empty */
3234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
3235:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
3236:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3237:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) {
3238:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
3239:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK) {
3240:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (dclst)				/* Remove the cluster chain if exist */
3241:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						res = remove_chain(dj.fs, dclst);
3242:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) res = sync(dj.fs);
3243:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
3244:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3245:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3246:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
3247:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3248:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
3249:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3250:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3251:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3252:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3253:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3254:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3255:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Create a Directory                                                    */
3256:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3257:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3258:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_mkdir (
3259:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path		/* Pointer to the directory path */
3260:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3261:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3262:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3263:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj;
3264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir, n;
3265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD dsc, dcl, pcl, tim = get_fattime();
3266:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
3267:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, 1);
3270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3271:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
3272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
3273:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
3274:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NS] & NS_DOT))
3275:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;
3276:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
3277:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
3278:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_OK;
3279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
3280:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
3281:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
3282:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
3283:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = move_window(dj.fs, 0);
3284:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
3285:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
3286:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir = dj.fs->win;
3287:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
3288:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_set(dir+DIR_Name, ' ', 8+3);	/* Create "." entry */
3289:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Name] = '.';
3290:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = AM_DIR;
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
3293:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_cpy(dir+SZ_DIR, dir, SZ_DIR); 	/* Create ".." entry */
3294:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[33] = '.'; pcl = dj.sclust;
3295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
3296:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					pcl = 0;
3297:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir+SZ_DIR, pcl);
3298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
3299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->winsect = dsc++;
3300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->wflag = 1;
3301:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = move_window(dj.fs, 0);
3302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res != FR_OK) break;
3303:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
3304:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
3305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
3307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) {
3308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
3309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
3310:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir = dj.dir;
3311:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
3312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);		/* Created time */
3313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);					/* Table start cluster */
3314:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
3315:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(dj.fs);
3316:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3317:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3318:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
3319:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
3322:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3323:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3324:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3325:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3326:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3327:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3328:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Change Attribute                                                      */
3329:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3330:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3331:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_chmod (
3332:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path,	/* Pointer to the file path */
3333:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE value,			/* Attribute bits */
3334:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE mask			/* Attribute mask to change */
3335:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3336:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3337:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3338:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj;
3339:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir;
3340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
3341:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3342:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3343:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, 1);
3344:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3345:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
3346:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3347:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
3348:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
3349:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;
3350:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
3351:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;
3352:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!dir) {						/* Is it a root directory? */
3353:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;
3354:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {						/* File or sub directory */
3355:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
3356:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
3357:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
3358:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(dj.fs);
3359:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3360:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3361:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3362:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3363:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
3364:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3365:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3366:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3367:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3368:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3369:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3370:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Change Timestamp                                                      */
3371:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3372:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3373:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_utime (
3374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path,	/* Pointer to the file/directory name */
3375:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const FILINFO *fno	/* Pointer to the time stamp to be set */
3376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3378:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3379:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR dj;
3380:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *dir;
3381:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
3382:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3384:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, 1);
3385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3386:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
3387:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
3389:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
3390:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;
3391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
3392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;
3393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!dir) {					/* Root directory */
3394:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;
3395:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {					/* File or sub-directory */
3396:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_WORD(dir+DIR_WrtTime, fno->ftime);
3397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_WORD(dir+DIR_WrtDate, fno->fdate);
3398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
3399:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(dj.fs);
3400:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3401:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3402:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3403:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3404:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(dj.fs, res);
3405:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3406:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3407:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3408:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3409:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3410:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3411:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Rename File/Directory                                                 */
3412:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3413:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3414:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_rename (
3415:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path_old,	/* Pointer to the old name */
3416:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR *path_new	/* Pointer to the new name */
3417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3419:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3420:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DIR djo, djn;
3421:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE buf[21], *dir;
3422:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD dw;
3423:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DEF_NAMEBUF;
3424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3425:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3426:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path_old, &djo.fs, 1);
3427:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
3428:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		djn.fs = djo.fs;
3429:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(djo);
3430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
3431:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NS] & NS_DOT))
3432:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;
3433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _FS_SHARE
3434:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) res = chk_lock(&djo, 2);
3435:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3436:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {						/* Old object is found */
3437:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
3438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NO_FILE;
3439:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
3440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_cpy(buf, djo.dir+DIR_Attr, 21);		/* Save the object information except for name */
3441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_cpy(&djn, &djo, sizeof(DIR));		/* Check new object */
3442:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = follow_path(&djn, path_new);
3443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
3444:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_NO_FILE) { 				/* Is it a valid path and no name collision? */
3445:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Start critical section that any interruption or error can cause cross-link */
3446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
3447:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) {
3448:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dir = djn.dir;					/* Copy object information except for name */
3449:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						mem_cpy(dir+13, buf+2, 19);
3450:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
3451:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						djo.fs->wflag = 1;
3452:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the direct
3453:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							dw = clust2sect(djn.fs, LD_CLUST(dir));
3454:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							if (!dw) {
3455:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								res = FR_INT_ERR;
3456:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							} else {
3457:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								res = move_window(djn.fs, dw);
3458:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								dir = djn.fs->win+SZ_DIR;	/* .. entry */
3459:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
3460:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									dw = (djn.fs->fs_type == FS_FAT32 && djn.sclust == djn.fs->dirbase) ? 0 : djn.sclust;
3461:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									ST_CLUST(dir, dw);
3462:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									djn.fs->wflag = 1;
3463:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								}
3464:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							}
3465:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						}
3466:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (res == FR_OK) {
3467:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
3468:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							if (res == FR_OK)
3469:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								res = sync(djo.fs);
3470:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						}
3471:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					}
3472:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* End critical section */
3473:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
3474:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3475:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3476:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		FREE_BUF();
3477:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3478:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(djo.fs, res);
3479:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3480:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3481:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* !_FS_READONLY */
3482:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _FS_MINIMIZE == 0 */
3483:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
3484:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
3485:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3486:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3487:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3488:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3489:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Forward data to the stream directly (available on only tiny cfg)      */
3490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3491:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_FORWARD && _FS_TINY
3492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3493:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_forward (
3494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL *fp, 						/* Pointer to the file object */
3495:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
3496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT btr,						/* Number of bytes to forward */
3497:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT *bf						/* Pointer to number of bytes forwarded */
3498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FRESULT res;
3501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD remain, clst, sect;
3502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT rcnt;
3503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE csect;
3504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*bf = 0;	/* Initialize byte counter */
3507:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3508:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);					/* Check validity of the object */
3509:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
3510:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)						/* Check error flag */
3511:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_INT_ERR);
3512:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_READ))						/* Check access mode */
3513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
3514:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	remain = fp->fsize - fp->fptr;
3516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (btr > remain) btr = (UINT)remain;			/* Truncate btr by remaining bytes */
3517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btr && (*func)(0, 0);					/* Repeat until all data transferred or stream becomes busy */
3519:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btr -= rcnt) {
3520:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
3521:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {			/* On the sector boundary? */
3522:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {							/* On the cluster boundary? */
3523:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
3524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->sclust : get_fat(fp->fs, fp->clust);
3525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) ABORT(fp->fs, FR_INT_ERR);
3526:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;					/* Update current cluster */
3528:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3529:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3530:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		sect = clust2sect(fp->fs, fp->clust);		/* Get current data sector */
3531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!sect) ABORT(fp->fs, FR_INT_ERR);
3532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		sect += csect;
3533:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fp->fs, sect))				/* Move sector window */
3534:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
3535:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dsect = sect;
3536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rcnt = SS(fp->fs) - (WORD)(fp->fptr % SS(fp->fs));	/* Forward data from sector window */
3537:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (rcnt > btr) rcnt = btr;
3538:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rcnt = (*func)(&fp->fs->win[(WORD)fp->fptr % SS(fp->fs)], rcnt);
3539:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!rcnt) ABORT(fp->fs, FR_INT_ERR);
3540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3542:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
3543:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3544:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _USE_FORWARD */
3545:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3546:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3548:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_MKFS && !_FS_READONLY
3549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Create File System on the Drive                                       */
3551:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3552:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define N_ROOTDIR	512		/* Number of root dir entries for FAT12/16 */
3553:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #define N_FATS		1		/* Number of FAT copies (1 or 2) */
3554:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3555:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3556:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_mkfs (
3557:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE drv,		/* Logical drive number */
3558:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE sfd,		/* Partitioning rule 0:FDISK, 1:SFD */
3559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT au			/* Allocation unit size [bytes] */
3560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
3563:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
3564:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE fmt, md, sys, *tbl, pdrv, part;
3565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD n_clst, vs, n, wsect;
3566:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i;
3567:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
3568:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
3569:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FATFS *fs;
3570:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DSTATUS stat;
3571:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3572:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3573:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Check mounted drive and clear work area */
3574:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (drv >= _VOLUMES) return FR_INVALID_DRIVE;
3575:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
3576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (au & (au - 1)) return FR_INVALID_PARAMETER;
3577:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs = FatFs[drv];
3578:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
3579:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;
3580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	pdrv = LD2PD(drv);	/* Physical drive */
3581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	part = LD2PT(drv);	/* Partition (0:auto detect, 1-4:get from partition table)*/
3582:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3583:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Get disk statics */
3584:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(pdrv);
3585:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
3586:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
3587:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _MAX_SS != 512					/* Get disk sector size */
3588:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK || SS(fs) > _MAX_SS)
3589:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_DISK_ERR;
3590:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3591:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (_MULTI_PARTITION && part) {
3592:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Get partition information from partition table in the MBR */
3593:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(pdrv, fs->win, 0, 1) != RES_OK) return FR_DISK_ERR;
3594:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (LD_WORD(fs->win+BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;
3595:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
3596:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!tbl[4]) return FR_MKFS_ABORTED;	/* No partition? */
3597:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_vol = LD_DWORD(tbl+8);	/* Volume start sector */
3598:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_vol = LD_DWORD(tbl+12);	/* Volume size */
3599:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
3600:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Create a partition in this function */
3601:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
3602:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_DISK_ERR;
3603:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
3604:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_vol -= b_vol;				/* Volume size */
3605:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3606:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3607:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!au) {				/* AU auto selection */
3608:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
3609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
3610:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		au = cst[i];
3611:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3612:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	au /= SS(fs);		/* Number of sectors per cluster */
3613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (au == 0) au = 1;
3614:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (au > 128) au = 128;
3615:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3616:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Pre-compute number of clusters and FAT syb-type */
3617:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = n_vol / au;
3618:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
3619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
3620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
3621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Determine offset and size of FAT structure */
3623:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
3624:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
3625:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_rsv = 32;
3626:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_dir = 0;
3627:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
3628:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
3629:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
3630:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_rsv = 1;
3631:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
3632:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3633:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b_fat = b_vol + n_rsv;				/* FAT area start sector */
3634:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
3635:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
3636:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
3637:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3638:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Align data start sector to erase block boundary (for flash memory media) */
3639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
3640:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
3641:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = (n - b_data) / N_FATS;
3642:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
3643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_rsv += n;
3644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_fat += n;
3645:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
3646:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat += n;
3647:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3648:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3649:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Determine number of clusters and final check of validity of the FAT sub-type */
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
3651:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
3652:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
3653:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_MKFS_ABORTED;
3654:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3655:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fmt) {	/* Determine system ID for partition table */
3656:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	case FS_FAT12:	sys = 0x01; break;
3657:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	case FS_FAT16:	sys = (n_vol < 0x10000) ? 0x04 : 0x06; break;
3658:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	default: 		sys = 0x0C; break;
3659:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3660:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3661:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (_MULTI_PARTITION && part) {
3662:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Update system ID in the partition table */
3663:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
3664:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[4] = sys;
3665:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_write(pdrv, fs->win, 0, 1) != RES_OK) return FR_DISK_ERR;
3666:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		md = 0xF8;
3667:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
3668:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sfd) {	/* No patition table (SFD) */
3669:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			md = 0xF0;
3670:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {	/* Create partition table (FDISK) */
3671:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mem_set(fs->win, 0, SS(fs));
3672:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl = fs->win+MBR_Table;	/* Create partiton table for single partition in the drive */
3673:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[1] = 1;						/* Partition start head */
3674:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
3675:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
3676:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[4] = sys;					/* System type */
3677:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[5] = 254;					/* Partition end head */
3678:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
3679:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[6] = (BYTE)((n >> 2) | 63);	/* Partiiton end sector */
3680:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
3681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
3682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
3683:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
3684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)	/* Write it to the MBR sector */
3685:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_DISK_ERR;
3686:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			md = 0xF8;
3687:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3688:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3689:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3690:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Create BPB in the VBR */
3691:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl = fs->win;							/* Clear sector */
3692:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_set(tbl, 0, SS(fs));
3693:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
3694:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = SS(fs);								/* Sector size */
3695:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_BytsPerSec, i);
3696:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
3697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
3698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
3699:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of rootdir entries */
3700:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_RootEntCnt, i);
3701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
3702:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_TotSec16, n_vol);
3703:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
3704:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_TotSec32, n_vol);
3705:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3706:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_Media] = md;					/* Media descriptor */
3707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
3708:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
3709:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_DWORD(tbl+BPB_HiddSec, b_vol);		/* Hidden sectors */
3710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
3711:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
3712:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
3713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
3714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
3715:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSInfo record offset (VBR+1) */
3716:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
3717:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
3718:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
3719:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(tbl+BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
3720:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
3721:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID, n);			/* VSN */
3722:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
3723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
3724:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
3725:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(tbl+BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
3726:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
3728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
3729:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_DISK_ERR;
3730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32)							/* Write backup VBR if needed (VBR+6) */
3731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
3732:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Initialize FAT area */
3734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = b_fat;
3735:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (i = 0; i < N_FATS; i++) {		/* Initialize each FAT copy */
3736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
3737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n = md;								/* Media descriptor byte */
3738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fmt != FS_FAT32) {
3739:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
3740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
3741:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
3742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n |= 0xFFFFFF00;
3743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
3744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+4, 0xFFFFFFFF);
3745:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root dir */
3746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3747:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
3748:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_DISK_ERR;
3749:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
3750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
3751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
3752:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_DISK_ERR;
3753:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3754:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3755:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3756:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Initialize root directory */
3757:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = (fmt == FS_FAT32) ? au : n_dir;
3758:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do {
3759:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
3760:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_DISK_ERR;
3761:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (--i);
3762:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3763:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_ERASE	/* Erase data area if needed */
3764:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	{
3765:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		DWORD eb[2];
3766:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3767:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == FS_FAT32) ? 1 : 0)) * au - 1;
3768:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_ioctl(pdrv, CTRL_ERASE_SECTOR, eb);
3769:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3770:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3771:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3772:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Create FSInfo if needed */
3773:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
3774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
3775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
3776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
3777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
3778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
3779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
3780:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR+7) */
3781:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3782:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3783:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
3784:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3785:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3786:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3787:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _MULTI_PARTITION == 2
3788:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3789:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Divide Physical Drive                                                 */
3790:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3791:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3792:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT f_fdisk (
3793:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE pdrv,			/* Physical drive number */
3794:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const DWORD szt[],	/* Pointer to the size table for each partitions */
3795:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	void* work			/* Pointer to the working buffer */
3796:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3797:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3798:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
3799:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
3800:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DSTATUS stat;
3801:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD sz_disk, sz_part, s_part;
3802:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3803:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3804:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(pdrv);
3805:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
3806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
3807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
3808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3809:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Determine CHS in the table regardless of the drive geometry */
3810:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
3811:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n == 256) n--;
3812:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	e_hd = n - 1;
3813:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sz_cyl = 63 * n;
3814:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tot_cyl = sz_disk / sz_cyl;
3815:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3816:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Create partition table */
3817:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_set(buf, 0, _MAX_SS);
3818:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	p = buf + MBR_Table; b_cyl = 0;
3819:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (i = 0; i < 4; i++, p += SZ_PTE) {
3820:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p_cyl = (szt[i] <= 100) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;
3821:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!p_cyl) continue;
3822:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		s_part = (DWORD)sz_cyl * b_cyl;
3823:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		sz_part = (DWORD)sz_cyl * p_cyl;
3824:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (i == 0) {	/* Exclude first track of cylinder 0 */
3825:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s_hd = 1;
3826:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s_part += 63; sz_part -= 63;
3827:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
3828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s_hd = 0;
3829:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3830:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		e_cyl = b_cyl + p_cyl - 1;
3831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
3832:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Set partition table */
3834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p[1] = s_hd;						/* Start head */
3835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
3836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
3837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p[4] = 0x06;						/* System type (temporary setting) */
3838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p[5] = e_hd;						/* End head */
3839:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
3840:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p[7] = (BYTE)e_cyl;					/* End cylinder */
3841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(p + 8, s_part);			/* Start sector in LBA */
3842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(p + 12, sz_part);			/* Partition size */
3843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3844:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Next partition */
3845:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_cyl += p_cyl;
3846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(p, 0xAA55);
3848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3849:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	/* Write it to the MBR */
3850:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (disk_write(pdrv, buf, 0, 1) || disk_ioctl(pdrv, CTRL_SYNC, 0)) ? FR_DISK_ERR : FR_OK;
3851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3852:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3853:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3854:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _MULTI_PARTITION == 2 */
3855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif /* _USE_MKFS && !_FS_READONLY */
3856:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3857:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3858:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3859:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3860:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_STRFUNC
3861:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Get a string from the file                                            */
3863:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3864:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** TCHAR* f_gets (
3865:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR* buff,	/* Pointer to the string buffer to read */
3866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int len,		/* Size of string buffer (characters) */
3867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL* fil		/* Pointer to the file object */
3868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3870:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int n = 0;
3871:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR c, *p = buff;
3872:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE s[2];
3873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT rc;
3874:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3875:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3876:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (n < len - 1) {			/* Read bytes until buffer gets filled */
3877:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		f_read(fil, s, 1, &rc);
3878:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (rc != 1) break;			/* Break on EOF or error */
3879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = s[0];
3880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _LFN_UNICODE					/* Read a character in UTF-8 encoding */
3881:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c >= 0x80) {
3882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c < 0xC0) continue;	/* Skip stray trailer */
3883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c < 0xE0) {			/* Two-byte sequense */
3884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				f_read(fil, s, 1, &rc);
3885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (rc != 1) break;
3886:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				c = ((c & 0x1F) << 6) | (s[0] & 0x3F);
3887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c < 0x80) c = '?';
3888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} else {
3889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c < 0xF0) {		/* Three-byte sequense */
3890:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					f_read(fil, s, 2, &rc);
3891:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (rc != 2) break;
3892:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					c = (c << 12) | ((s[0] & 0x3F) << 6) | (s[1] & 0x3F);
3893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (c < 0x800) c = '?';
3894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} else {			/* Reject four-byte sequense */
3895:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					c = '?';
3896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				}
3897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
3898:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3899:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_STRFUNC >= 2
3901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '\r') continue;	/* Strip '\r' */
3902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*p++ = c;
3904:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n++;
3905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
3906:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3907:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*p = 0;
3908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
3909:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3910:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3912:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3913:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if !_FS_READONLY
3914:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #include <stdarg.h>
3915:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3916:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Put a character to the file                                           */
3917:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3918:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int f_putc (
3919:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR c,	/* A character to be output */
3920:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL* fil	/* Pointer to the file object */
3921:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT bw, btw;
3924:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE s[3];
3925:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3926:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3927:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _USE_STRFUNC >= 2
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
3929:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3930:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3931:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #if _LFN_UNICODE	/* Write the character in UTF-8 encoding */
3932:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c < 0x80) {			/* 7-bit */
3933:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		s[0] = (BYTE)c;
3934:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		btw = 1;
3935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} else {
3936:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c < 0x800) {	/* 11-bit */
3937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[0] = (BYTE)(0xC0 | (c >> 6));
3938:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[1] = (BYTE)(0x80 | (c & 0x3F));
3939:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			btw = 2;
3940:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {			/* 16-bit */
3941:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[0] = (BYTE)(0xE0 | (c >> 12));
3942:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[1] = (BYTE)(0x80 | ((c >> 6) & 0x3F));
3943:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[2] = (BYTE)(0x80 | (c & 0x3F));
3944:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			btw = 3;
3945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
3946:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3947:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #else				/* Write the character without conversion */
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
3949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	btw = 1;
3950:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** #endif
3951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	f_write(fil, s, btw, &bw);		/* Write the char to the file */
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
3953:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3954:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3955:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3956:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3957:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3958:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3959:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Put a string to the file                                              */
3960:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3961:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int f_puts (
3962:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR* str,	/* Pointer to the string to be output */
3963:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL* fil			/* Pointer to the file object */
3964:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3966:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int n;
3967:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3968:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (n = 0; *str; str++, n++) {
3970:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (f_putc(*str, fil) == EOF) return EOF;
3971:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
3972:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return n;
3973:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
3974:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3975:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3976:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3977:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3978:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3979:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /* Put a formatted string to the file                                    */
3980:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** /*-----------------------------------------------------------------------*/
3981:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** int f_printf (
3982:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FIL* fil,			/* Pointer to the file object */
3983:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const TCHAR* str,	/* Pointer to the format string */
3984:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	...					/* Optional arguments... */
3985:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** )
3986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
3987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	va_list arp;
3988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE f, r;
3989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT i, j, w;
3990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ULONG v;
3991:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR c, d, s[16], *p;
3992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int res, chc, cc;
3993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	va_start(arp, str);
3996:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
3997:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (cc = res = 0; cc != EOF; res += cc) {
3998:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
3999:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) break;			/* End of string */
4000:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c != '%') {				/* Non escape character */
4001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cc = f_putc(c, fil);
4002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc != EOF) cc = 1;
4003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			continue;
4004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
4005:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = f = 0;
4006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
4007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
4008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			f = 1; c = *str++;
4009:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} else {
4010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == '-') {			/* Flag: left justified */
4011:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				f = 2; c = *str++;
4012:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
4013:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
4014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (IsDigit(c)) {		/* Precision */
4015:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			w = w * 10 + c - '0';
4016:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = *str++;
4017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
4018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
4019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			f |= 4; c = *str++;
4020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
4021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!c) break;
4022:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		d = c;
4023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (IsLower(d)) d -= 0x20;
4024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (d) {				/* Type is... */
4025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case 'S' :					/* String */
4026:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = va_arg(arp, TCHAR*);
4027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (j = 0; p[j]; j++) ;
4028:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			chc = 0;
4029:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!(f & 2)) {
4030:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (j++ < w) chc += (cc = f_putc(' ', fil));
4031:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			}
4032:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			chc += (cc = f_puts(p, fil));
4033:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while (j++ < w) chc += (cc = f_putc(' ', fil));
4034:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc != EOF) cc = chc;
4035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			continue;
4036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case 'C' :					/* Character */
4037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cc = f_putc((TCHAR)va_arg(arp, int), fil); continue;
4038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case 'B' :					/* Binary */
4039:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			r = 2; break;
4040:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case 'O' :					/* Octal */
4041:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			r = 8; break;
4042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case 'D' :					/* Signed decimal */
4043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case 'U' :					/* Unsigned decimal */
4044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			r = 10; break;
4045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		case 'X' :					/* Hexdecimal */
4046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			r = 16; break;
4047:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		default:					/* Unknown type (passthrough) */
4048:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cc = f_putc(c, fil); continue;
4049:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
4050:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
4051:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		/* Get an argument and put it in numeral */
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
4053:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
4054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			v = 0 - v;
4055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			f |= 8;
4056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
4057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		i = 0;
4058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do {
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
4063:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (f & 8) s[i++] = '-';
4064:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
4065:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = 0;
4066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (!(f & 2) && j++ < w) res += (cc = f_putc(d, fil));
4067:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do res += (cc = f_putc(s[--i], fil)); while(i);
4068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (j++ < w) res += (cc = f_putc(' ', fil));
4069:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cc != EOF) cc = res;
4070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	}
4071:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 
4072:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	va_end(arp);
4073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (cc == EOF) ? cc : res;
4074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 615              		.loc 1 4074 0
 616 0058 F2B2     		uxtb	r2, r6
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 617              		.loc 1 883 0
 618 005a 93F83000 		ldrb	r0, [r3, #48]	@ zero_extendqisi2
 619 005e 00F00F00 		and	r0, r0, #15
 620 0062 40EA0212 		orr	r2, r0, r2, lsl #4
 621              	.L71:
 884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bc++;
 622              		.loc 1 884 0
 623 0066 0BF1010B 		add	fp, fp, #1
 624              	.LVL66:
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 625              		.loc 1 883 0
 626 006a 83F83020 		strb	r2, [r3, #48]
 885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 1;
 627              		.loc 1 885 0
 628 006e 0123     		movs	r3, #1
 629 0070 2371     		strb	r3, [r4, #4]
 886:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 630              		.loc 1 886 0
 631 0072 2046     		mov	r0, r4
 632 0074 01EB5B21 		add	r1, r1, fp, lsr #9
 633 0078 784B     		ldr	r3, .L100
 634 007a 9847     		blx	r3
 635              	.LVL67:
 887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) break;
 636              		.loc 1 887 0
 637 007c 0028     		cmp	r0, #0
 638 007e CDD1     		bne	.L59
 888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[bc % SS(fs)];
 639              		.loc 1 888 0
 640 0080 4FEACB5B 		lsl	fp, fp, #23
 641              	.LVL68:
 642 0084 4FEADB5B 		lsr	fp, fp, #23
 643              	.LVL69:
 889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((BYTE)(*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 644              		.loc 1 889 0
 645 0088 002D     		cmp	r5, #0
 646 008a 40F0E280 		bne	.L93
 647 008e A344     		add	fp, r4, fp
 648              	.LVL70:
 649 0090 C6F30326 		ubfx	r6, r6, #8, #4
 650              	.LVL71:
 651 0094 9BF83030 		ldrb	r3, [fp, #48]	@ zero_extendqisi2
 652 0098 23F00F03 		bic	r3, r3, #15
 653 009c 1E43     		orrs	r6, r6, r3
 654              	.L73:
 655 009e 8BF83060 		strb	r6, [fp, #48]
 656 00a2 BBE7     		b	.L59
 657              	.LVL72:
 658              	.L62:
 900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 659              		.loc 1 900 0
 660 00a4 036A     		ldr	r3, [r0, #32]
 661              	.LBB144:
 662              	.LBB145:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 663              		.loc 1 727 0
 664 00a6 C76A     		ldr	r7, [r0, #44]
 665              	.LBE145:
 666              	.LBE144:
 900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 667              		.loc 1 900 0
 668 00a8 03EBD119 		add	r9, r3, r1, lsr #7
 669              	.LVL73:
 670              	.LBB152:
 671              	.LBB149:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 672              		.loc 1 728 0
 673 00ac B945     		cmp	r9, r7
 674 00ae 06D0     		beq	.L86
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 675              		.loc 1 730 0
 676 00b0 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 677 00b2 002B     		cmp	r3, #0
 678 00b4 7ED1     		bne	.L80
 679              	.LVL74:
 680              	.L82:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 681              		.loc 1 743 0
 682 00b6 B9F1000F 		cmp	r9, #0
 683 00ba 40F0AB80 		bne	.L94
 684              	.LVL75:
 685              	.L86:
 686              	.LBE149:
 687              	.LBE152:
 902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[clst * 4 % SS(fs)];
 688              		.loc 1 902 0
 689 00be 6D06     		lsls	r5, r5, #25
 690              	.LVL76:
 691 00c0 ED0D     		lsrs	r5, r5, #23
 692 00c2 05F13003 		add	r3, r5, #48
 693 00c6 E318     		adds	r3, r4, r3
 694              	.LVL77:
 903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 695              		.loc 1 903 0
 696 00c8 6519     		adds	r5, r4, r5
 697 00ca DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 698 00cc 1206     		lsls	r2, r2, #24
 699 00ce 02F07042 		and	r2, r2, #-268435456
 700 00d2 1643     		orrs	r6, r6, r2
 701              	.LVL78:
 904:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(p, val);
 702              		.loc 1 904 0
 703 00d4 C6F30727 		ubfx	r7, r6, #8, #8
 704 00d8 310C     		lsrs	r1, r6, #16
 705 00da 320E     		lsrs	r2, r6, #24
 706 00dc 85F83060 		strb	r6, [r5, #48]
 707 00e0 0020     		movs	r0, #0
 708 00e2 5F70     		strb	r7, [r3, #1]
 709 00e4 9970     		strb	r1, [r3, #2]
 710 00e6 DA70     		strb	r2, [r3, #3]
 711 00e8 98E7     		b	.L59
 712              	.LVL79:
 713              	.L61:
 893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 714              		.loc 1 893 0
 715 00ea 036A     		ldr	r3, [r0, #32]
 716              	.LBB153:
 717              	.LBB154:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 718              		.loc 1 727 0
 719 00ec C76A     		ldr	r7, [r0, #44]
 720              	.LBE154:
 721              	.LBE153:
 893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 722              		.loc 1 893 0
 723 00ee 03EB1129 		add	r9, r3, r1, lsr #8
 724              	.LVL80:
 725              	.LBB161:
 726              	.LBB158:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 727              		.loc 1 728 0
 728 00f2 B945     		cmp	r9, r7
 729 00f4 05D0     		beq	.L85
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 730              		.loc 1 730 0
 731 00f6 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 732 00f8 7BB9     		cbnz	r3, .L75
 733              	.LVL81:
 734              	.L77:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 735              		.loc 1 743 0
 736 00fa B9F1000F 		cmp	r9, #0
 737 00fe 40F09580 		bne	.L95
 738              	.LVL82:
 739              	.L85:
 740              	.LBE158:
 741              	.LBE161:
 895:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[clst * 2 % SS(fs)];
 742              		.loc 1 895 0
 743 0102 2D06     		lsls	r5, r5, #24
 744              	.LVL83:
 745 0104 ED0D     		lsrs	r5, r5, #23
 746              	.LVL84:
 896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(p, (WORD)val);
 747              		.loc 1 896 0
 748 0106 6219     		adds	r2, r4, r5
 749 0108 C6F30723 		ubfx	r3, r6, #8, #8
 750 010c 1546     		mov	r5, r2
 751              	.LVL85:
 752 010e 82F83060 		strb	r6, [r2, #48]
 753 0112 0020     		movs	r0, #0
 754 0114 82F83130 		strb	r3, [r2, #49]
 755 0118 80E7     		b	.L59
 756              	.LVL86:
 757              	.L75:
 758              	.LBB162:
 759              	.LBB159:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 760              		.loc 1 731 0
 761 011a 00F1300B 		add	fp, r0, #48
 762 011e DFF84481 		ldr	r8, .L100+8
 763 0122 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 764              	.LVL87:
 765 0124 5946     		mov	r1, fp
 766              	.LVL88:
 767 0126 3A46     		mov	r2, r7
 768              	.LVL89:
 769 0128 0123     		movs	r3, #1
 770 012a C047     		blx	r8
 771              	.LVL90:
 772 012c 0028     		cmp	r0, #0
 773 012e 6FD1     		bne	.L69
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 774              		.loc 1 734 0
 775 0130 E369     		ldr	r3, [r4, #28]
 776 0132 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 777              		.loc 1 733 0
 778 0134 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 779              		.loc 1 734 0
 780 0136 9A18     		adds	r2, r3, r2
 781 0138 9742     		cmp	r7, r2
 782 013a DED2     		bcs	.L77
 783              	.LBB155:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 784              		.loc 1 736 0
 785 013c 94F803A0 		ldrb	sl, [r4, #3]	@ zero_extendqisi2
 786              	.LVL91:
 787 0140 BAF1010F 		cmp	sl, #1
 788 0144 01D8     		bhi	.L90
 789 0146 D8E7     		b	.L77
 790              	.LVL92:
 791              	.L96:
 792 0148 E369     		ldr	r3, [r4, #28]
 793              	.LVL93:
 794              	.L90:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 795              		.loc 1 737 0
 796 014a FF18     		adds	r7, r7, r3
 797              	.LVL94:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 798              		.loc 1 736 0
 799 014c 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 800              		.loc 1 738 0
 801 0150 0123     		movs	r3, #1
 802 0152 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 803 0154 5946     		mov	r1, fp
 804 0156 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 805              		.loc 1 736 0
 806 0158 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 807              		.loc 1 738 0
 808 015c C047     		blx	r8
 809              	.LVL95:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 810              		.loc 1 736 0
 811 015e BAF1010F 		cmp	sl, #1
 812 0162 F1D8     		bhi	.L96
 813 0164 C9E7     		b	.L77
 814              	.LVL96:
 815              	.L64:
 816              	.LBE155:
 817              	.LBE159:
 818              	.LBE162:
 819              	.LBB163:
 820              	.LBB140:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 821              		.loc 1 731 0
 822 0166 00F13002 		add	r2, r0, #48
 823 016a 0192     		str	r2, [sp, #4]
 824 016c 1146     		mov	r1, r2
 825 016e 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 826              	.LVL97:
 827 0170 DFF8F080 		ldr	r8, .L100+8
 828 0174 3A46     		mov	r2, r7
 829 0176 C047     		blx	r8
 830              	.LVL98:
 831 0178 0028     		cmp	r0, #0
 832 017a 49D1     		bne	.L69
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 833              		.loc 1 734 0
 834 017c E369     		ldr	r3, [r4, #28]
 835 017e 216A     		ldr	r1, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 836              		.loc 1 733 0
 837 0180 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 838              		.loc 1 734 0
 839 0182 5918     		adds	r1, r3, r1
 840 0184 8F42     		cmp	r7, r1
 841 0186 BFF45AAF 		bcs	.L67
 842              	.LBB134:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 843              		.loc 1 736 0
 844 018a 94F803A0 		ldrb	sl, [r4, #3]	@ zero_extendqisi2
 845              	.LVL99:
 846 018e BAF1010F 		cmp	sl, #1
 847 0192 01D8     		bhi	.L89
 848 0194 53E7     		b	.L67
 849              	.LVL100:
 850              	.L97:
 851 0196 E369     		ldr	r3, [r4, #28]
 852              	.LVL101:
 853              	.L89:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 854              		.loc 1 737 0
 855 0198 FF18     		adds	r7, r7, r3
 856              	.LVL102:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 857              		.loc 1 738 0
 858 019a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 859 019c 0199     		ldr	r1, [sp, #4]
 860 019e 0123     		movs	r3, #1
 861 01a0 3A46     		mov	r2, r7
 862 01a2 C047     		blx	r8
 863              	.LVL103:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 864              		.loc 1 736 0
 865 01a4 0AF1FF3C 		add	ip, sl, #-1
 866 01a8 5FFA8CFA 		uxtb	sl, ip
 867              	.LVL104:
 868 01ac BAF1010F 		cmp	sl, #1
 869 01b0 F1D8     		bhi	.L97
 870 01b2 44E7     		b	.L67
 871              	.LVL105:
 872              	.L80:
 873              	.LBE134:
 874              	.LBE140:
 875              	.LBE163:
 876              	.LBB164:
 877              	.LBB150:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 878              		.loc 1 731 0
 879 01b4 00F1300B 		add	fp, r0, #48
 880 01b8 DFF8A880 		ldr	r8, .L100+8
 881 01bc 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 882              	.LVL106:
 883 01be 5946     		mov	r1, fp
 884              	.LVL107:
 885 01c0 3A46     		mov	r2, r7
 886              	.LVL108:
 887 01c2 0123     		movs	r3, #1
 888 01c4 C047     		blx	r8
 889              	.LVL109:
 890 01c6 18BB     		cbnz	r0, .L69
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 891              		.loc 1 734 0
 892 01c8 E369     		ldr	r3, [r4, #28]
 893 01ca 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 894              		.loc 1 733 0
 895 01cc 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 896              		.loc 1 734 0
 897 01ce 9A18     		adds	r2, r3, r2
 898 01d0 9742     		cmp	r7, r2
 899 01d2 BFF470AF 		bcs	.L82
 900              	.LBB146:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 901              		.loc 1 736 0
 902 01d6 94F803A0 		ldrb	sl, [r4, #3]	@ zero_extendqisi2
 903              	.LVL110:
 904 01da BAF1010F 		cmp	sl, #1
 905 01de 01D8     		bhi	.L91
 906 01e0 69E7     		b	.L82
 907              	.LVL111:
 908              	.L98:
 909 01e2 E369     		ldr	r3, [r4, #28]
 910              	.LVL112:
 911              	.L91:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 912              		.loc 1 737 0
 913 01e4 FF18     		adds	r7, r7, r3
 914              	.LVL113:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 915              		.loc 1 736 0
 916 01e6 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 917              		.loc 1 738 0
 918 01ea 0123     		movs	r3, #1
 919 01ec 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 920 01ee 5946     		mov	r1, fp
 921 01f0 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 922              		.loc 1 736 0
 923 01f2 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 924              		.loc 1 738 0
 925 01f6 C047     		blx	r8
 926              	.LVL114:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 927              		.loc 1 736 0
 928 01f8 BAF1010F 		cmp	sl, #1
 929 01fc F1D8     		bhi	.L98
 930 01fe 5AE7     		b	.L82
 931              	.LVL115:
 932              	.L65:
 933              	.LBE146:
 934              	.LBE150:
 935              	.LBE164:
 936              	.LBB165:
 937              	.LBB141:
 938              	.LBB135:
 939              	.LBB136:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 940              		.loc 1 744 0
 941 0200 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 942 0202 174F     		ldr	r7, .L100+4
 943              	.LVL116:
 944 0204 04F13001 		add	r1, r4, #48
 945 0208 4A46     		mov	r2, r9
 946 020a 0123     		movs	r3, #1
 947 020c B847     		blx	r7
 948              	.LVL117:
 949 020e E0B1     		cbz	r0, .L99
 950              	.LVL118:
 951              	.L69:
 952              	.LBE136:
 953              	.LBE135:
 954              	.LBE141:
 955              	.LBE165:
 908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INT_ERR;
 956              		.loc 1 908 0
 957 0210 0120     		movs	r0, #1
 958 0212 03E7     		b	.L59
 959              	.LVL119:
 960              	.L94:
 961              	.LBB166:
 962              	.LBB151:
 963              	.LBB147:
 964              	.LBB148:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 965              		.loc 1 744 0
 966 0214 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 967 0216 124F     		ldr	r7, .L100+4
 968              	.LVL120:
 969 0218 04F13001 		add	r1, r4, #48
 970 021c 4A46     		mov	r2, r9
 971 021e 0123     		movs	r3, #1
 972 0220 B847     		blx	r7
 973              	.LVL121:
 974 0222 0028     		cmp	r0, #0
 975 0224 F4D1     		bne	.L69
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 976              		.loc 1 746 0
 977 0226 C4F82C90 		str	r9, [r4, #44]
 978 022a 48E7     		b	.L86
 979              	.LVL122:
 980              	.L95:
 981              	.LBE148:
 982              	.LBE147:
 983              	.LBE151:
 984              	.LBE166:
 985              	.LBB167:
 986              	.LBB160:
 987              	.LBB156:
 988              	.LBB157:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 989              		.loc 1 744 0
 990 022c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 991 022e 0C4F     		ldr	r7, .L100+4
 992              	.LVL123:
 993 0230 04F13001 		add	r1, r4, #48
 994 0234 4A46     		mov	r2, r9
 995 0236 0123     		movs	r3, #1
 996 0238 B847     		blx	r7
 997              	.LVL124:
 998 023a 0028     		cmp	r0, #0
 999 023c E8D1     		bne	.L69
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1000              		.loc 1 746 0
 1001 023e C4F82C90 		str	r9, [r4, #44]
 1002 0242 5EE7     		b	.L85
 1003              	.LVL125:
 1004              	.L70:
 1005              	.LBE157:
 1006              	.LBE156:
 1007              	.LBE160:
 1008              	.LBE167:
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 1009              		.loc 1 883 0
 1010 0244 3246     		mov	r2, r6
 1011 0246 E318     		adds	r3, r4, r3
 1012              	.LVL126:
 1013 0248 0DE7     		b	.L71
 1014              	.LVL127:
 1015              	.L99:
 1016 024a 216A     		ldr	r1, [r4, #32]
 1017              	.LBB168:
 1018              	.LBB142:
 1019              	.LBB138:
 1020              	.LBB137:
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1021              		.loc 1 746 0
 1022 024c C4F82C90 		str	r9, [r4, #44]
 1023 0250 FAE6     		b	.L84
 1024              	.LVL128:
 1025              	.L93:
 1026              	.LBE137:
 1027              	.LBE138:
 1028              	.LBE142:
 1029              	.LBE168:
 889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((BYTE)(*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 1030              		.loc 1 889 0
 1031 0252 C6F30716 		ubfx	r6, r6, #4, #8
 1032              	.LVL129:
 1033 0256 A344     		add	fp, r4, fp
 1034              	.LVL130:
 1035 0258 21E7     		b	.L73
 1036              	.L101:
 1037 025a 00BF     		.align	2
 1038              	.L100:
 1039 025c 00000000 		.word	move_window
 1040 0260 00000000 		.word	disk_read
 1041 0264 00000000 		.word	disk_write
 1042              		.cfi_endproc
 1043              	.LFE54:
 1045              		.section	.text.remove_chain.part.7,"ax",%progbits
 1046              		.align	2
 1047              		.thumb
 1048              		.thumb_func
 1050              	remove_chain.part.7:
 1051              	.LFB57:
 926:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT remove_chain (
 1052              		.loc 1 926 0
 1053              		.cfi_startproc
 1054              		@ args = 0, pretend = 0, frame = 8
 1055              		@ frame_needed = 0, uses_anonymous_args = 0
 1056              	.LVL131:
 1057 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 1058              	.LCFI6:
 1059              		.cfi_def_cfa_offset 36
 1060              		.cfi_offset 4, -36
 1061              		.cfi_offset 5, -32
 1062              		.cfi_offset 6, -28
 1063              		.cfi_offset 7, -24
 1064              		.cfi_offset 8, -20
 1065              		.cfi_offset 9, -16
 1066              		.cfi_offset 10, -12
 1067              		.cfi_offset 11, -8
 1068              		.cfi_offset 14, -4
 1069 0004 0446     		mov	r4, r0
 1070 0006 83B0     		sub	sp, sp, #12
 1071              	.LCFI7:
 1072              		.cfi_def_cfa_offset 48
 926:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** FRESULT remove_chain (
 1073              		.loc 1 926 0
 1074 0008 0D46     		mov	r5, r1
 1075              	.LVL132:
 1076              	.L103:
 942:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
 1077              		.loc 1 942 0
 1078 000a A369     		ldr	r3, [r4, #24]
 1079 000c 9D42     		cmp	r5, r3
 1080 000e 6DD2     		bcs	.L165
 1081              	.LVL133:
 1082              	.LBB225:
 1083              	.LBB226:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 1084              		.loc 1 828 0
 1085 0010 012D     		cmp	r5, #1
 1086 0012 44D9     		bls	.L181
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 1087              		.loc 1 831 0
 1088 0014 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 1089 0016 022B     		cmp	r3, #2
 1090 0018 78D0     		beq	.L106
 1091 001a 032B     		cmp	r3, #3
 1092 001c 43D0     		beq	.L107
 1093 001e 012B     		cmp	r3, #1
 1094 0020 01D0     		beq	.L206
 1095              	.L179:
 1096              	.LBE226:
 1097              	.LBE225:
 946:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 1098              		.loc 1 946 0
 1099 0022 0120     		movs	r0, #1
 1100 0024 3CE0     		b	.L193
 1101              	.L206:
 1102              	.LVL134:
 1103              	.LBB272:
 1104              	.LBB267:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 1105              		.loc 1 834 0
 1106 0026 226A     		ldr	r2, [r4, #32]
 1107              	.LBB227:
 1108              	.LBB228:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 1109              		.loc 1 727 0
 1110 0028 E66A     		ldr	r6, [r4, #44]
 1111              	.LBE228:
 1112              	.LBE227:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 1113              		.loc 1 833 0
 1114 002a 05EB5509 		add	r9, r5, r5, lsr #1
 1115              	.LVL135:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 1116              		.loc 1 834 0
 1117 002e 02EB5928 		add	r8, r2, r9, lsr #9
 1118              	.LVL136:
 1119              	.LBB234:
 1120              	.LBB232:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1121              		.loc 1 728 0
 1122 0032 B045     		cmp	r8, r6
 1123 0034 0AD0     		beq	.L166
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 1124              		.loc 1 730 0
 1125 0036 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 1126 0038 002A     		cmp	r2, #0
 1127 003a 40F0B280 		bne	.L109
 1128              	.L113:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1129              		.loc 1 743 0
 1130 003e B8F1000F 		cmp	r8, #0
 1131 0042 40F0D780 		bne	.L207
 1132              	.L188:
 1133 0046 226A     		ldr	r2, [r4, #32]
 1134 0048 D4F82C80 		ldr	r8, [r4, #44]
 1135              	.LVL137:
 1136              	.L166:
 1137              	.LBE232:
 1138              	.LBE234:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 1139              		.loc 1 835 0
 1140 004c 4FEAC953 		lsl	r3, r9, #23
 1141 0050 DB0D     		lsrs	r3, r3, #23
 1142 0052 09F10109 		add	r9, r9, #1
 1143              	.LVL138:
 1144 0056 E318     		adds	r3, r4, r3
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 1145              		.loc 1 836 0
 1146 0058 02EB5926 		add	r6, r2, r9, lsr #9
 1147              	.LBB235:
 1148              	.LBB236:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1149              		.loc 1 728 0
 1150 005c 4645     		cmp	r6, r8
 1151              	.LBE236:
 1152              	.LBE235:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 1153              		.loc 1 835 0
 1154 005e 93F830A0 		ldrb	sl, [r3, #48]	@ zero_extendqisi2
 1155              	.LVL139:
 1156              	.LBB243:
 1157              	.LBB240:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1158              		.loc 1 728 0
 1159 0062 06D0     		beq	.L167
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 1160              		.loc 1 730 0
 1161 0064 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1162 0066 002B     		cmp	r3, #0
 1163 0068 40F07782 		bne	.L117
 1164              	.L119:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1165              		.loc 1 743 0
 1166 006c 002E     		cmp	r6, #0
 1167 006e 40F06582 		bne	.L208
 1168              	.L167:
 1169              	.LBE240:
 1170              	.LBE243:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 1171              		.loc 1 837 0
 1172 0072 4FEAC959 		lsl	r9, r9, #23
 1173              	.LVL140:
 1174 0076 4FEAD959 		lsr	r9, r9, #23
 1175 007a A144     		add	r9, r4, r9
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 1176              		.loc 1 838 0
 1177 007c E807     		lsls	r0, r5, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 1178              		.loc 1 837 0
 1179 007e 99F83060 		ldrb	r6, [r9, #48]	@ zero_extendqisi2
 1180              	.LVL141:
 1181 0082 4AEA0626 		orr	r6, sl, r6, lsl #8
 1182              	.LVL142:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 1183              		.loc 1 838 0
 1184 0086 40F19082 		bpl	.L121
 1185 008a 3609     		lsrs	r6, r6, #4
 1186              	.LVL143:
 1187              	.L122:
 1188              	.LBE267:
 1189              	.LBE272:
 944:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 1190              		.loc 1 944 0
 1191 008c 002E     		cmp	r6, #0
 1192 008e 2DD0     		beq	.L165
 1193              	.L133:
 945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 1194              		.loc 1 945 0
 1195 0090 012E     		cmp	r6, #1
 1196 0092 04D0     		beq	.L181
 1197              	.LVL144:
 1198              	.LBB273:
 1199              	.LBB274:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 1200              		.loc 1 873 0
 1201 0094 012D     		cmp	r5, #1
 1202 0096 02D9     		bls	.L181
 1203 0098 A369     		ldr	r3, [r4, #24]
 1204 009a 9D42     		cmp	r5, r3
 1205 009c 28D3     		bcc	.L209
 1206              	.LVL145:
 1207              	.L181:
 945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 1208              		.loc 1 945 0
 1209 009e 0220     		movs	r0, #2
 1210              	.LVL146:
 1211              	.L193:
 1212              	.LBE274:
 1213              	.LBE273:
 968:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 1214              		.loc 1 968 0
 1215 00a0 03B0     		add	sp, sp, #12
 1216 00a2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 1217              	.LVL147:
 1218              	.L107:
 1219              	.LBB334:
 1220              	.LBB268:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 1221              		.loc 1 846 0
 1222 00a6 236A     		ldr	r3, [r4, #32]
 1223              	.LBB244:
 1224              	.LBB245:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 1225              		.loc 1 727 0
 1226 00a8 E66A     		ldr	r6, [r4, #44]
 1227              	.LBE245:
 1228              	.LBE244:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 1229              		.loc 1 846 0
 1230 00aa 03EBD518 		add	r8, r3, r5, lsr #7
 1231              	.LVL148:
 1232              	.LBB251:
 1233              	.LBB249:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1234              		.loc 1 728 0
 1235 00ae B045     		cmp	r8, r6
 1236 00b0 07D0     		beq	.L169
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 1237              		.loc 1 730 0
 1238 00b2 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1239 00b4 002B     		cmp	r3, #0
 1240 00b6 40F0AB80 		bne	.L129
 1241              	.L131:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1242              		.loc 1 743 0
 1243 00ba B8F1000F 		cmp	r8, #0
 1244 00be 40F0D180 		bne	.L210
 1245              	.LVL149:
 1246              	.L169:
 1247              	.LBE249:
 1248              	.LBE251:
 1249              	.LBB252:
 1250              	.LBB253:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 1251              		.loc 1 847 0
 1252 00c2 6A06     		lsls	r2, r5, #25
 1253 00c4 D20D     		lsrs	r2, r2, #23
 1254 00c6 02F13003 		add	r3, r2, #48
 1255 00ca E318     		adds	r3, r4, r3
 1256              	.LVL150:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 1257              		.loc 1 848 0
 1258 00cc A018     		adds	r0, r4, r2
 1259 00ce DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 1260 00d0 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 1261 00d2 5E78     		ldrb	r6, [r3, #1]	@ zero_extendqisi2
 1262 00d4 90F83030 		ldrb	r3, [r0, #48]	@ zero_extendqisi2
 1263              	.LVL151:
 1264 00d8 1206     		lsls	r2, r2, #24
 1265 00da 42EA0142 		orr	r2, r2, r1, lsl #16
 1266 00de 42EA0626 		orr	r6, r2, r6, lsl #8
 1267 00e2 1E43     		orrs	r6, r6, r3
 1268 00e4 26F07046 		bic	r6, r6, #-268435456
 1269              	.LBE253:
 1270              	.LBE252:
 1271              	.LBE268:
 1272              	.LBE334:
 944:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 1273              		.loc 1 944 0
 1274 00e8 002E     		cmp	r6, #0
 1275 00ea D1D1     		bne	.L133
 1276              	.LVL152:
 1277              	.L165:
 1278              	.LBB335:
 1279              	.LBB328:
 1280              	.LBB275:
 1281              	.LBB276:
 889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((BYTE)(*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 1282              		.loc 1 889 0
 1283 00ec 0020     		movs	r0, #0
 1284 00ee D7E7     		b	.L193
 1285              	.LVL153:
 1286              	.L209:
 877:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (fs->fs_type) {
 1287              		.loc 1 877 0
 1288 00f0 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 1289 00f2 022B     		cmp	r3, #2
 1290 00f4 00F0EB80 		beq	.L137
 1291 00f8 032B     		cmp	r3, #3
 1292 00fa 00F0C080 		beq	.L138
 1293 00fe 012B     		cmp	r3, #1
 1294 0100 00F0FF80 		beq	.L211
 1295              	.LVL154:
 911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->wflag = 1;
 1296              		.loc 1 911 0
 1297 0104 0123     		movs	r3, #1
 1298 0106 2371     		strb	r3, [r4, #4]
 1299              	.LVL155:
 908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INT_ERR;
 1300              		.loc 1 908 0
 1301 0108 0220     		movs	r0, #2
 1302 010a C9E7     		b	.L193
 1303              	.LVL156:
 1304              	.L106:
 1305              	.LBE276:
 1306              	.LBE275:
 1307              	.LBE328:
 1308              	.LBE335:
 1309              	.LBB336:
 1310              	.LBB269:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 1311              		.loc 1 841 0
 1312 010c 236A     		ldr	r3, [r4, #32]
 1313              	.LBB254:
 1314              	.LBB255:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 1315              		.loc 1 727 0
 1316 010e E66A     		ldr	r6, [r4, #44]
 1317              	.LBE255:
 1318              	.LBE254:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 1319              		.loc 1 841 0
 1320 0110 03EB1528 		add	r8, r3, r5, lsr #8
 1321              	.LVL157:
 1322              	.LBB261:
 1323              	.LBB259:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1324              		.loc 1 728 0
 1325 0114 B045     		cmp	r8, r6
 1326 0116 04D0     		beq	.L168
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 1327              		.loc 1 730 0
 1328 0118 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1329 011a 6BB9     		cbnz	r3, .L124
 1330              	.L126:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1331              		.loc 1 743 0
 1332 011c B8F1000F 		cmp	r8, #0
 1333 0120 32D1     		bne	.L212
 1334              	.LVL158:
 1335              	.L168:
 1336              	.LBE259:
 1337              	.LBE261:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 1338              		.loc 1 842 0
 1339 0122 2B06     		lsls	r3, r5, #24
 1340 0124 DB0D     		lsrs	r3, r3, #23
 1341              	.LVL159:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 1342              		.loc 1 843 0
 1343 0126 E218     		adds	r2, r4, r3
 1344 0128 1346     		mov	r3, r2
 1345              	.LVL160:
 1346 012a 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 1347 012e 93F83160 		ldrb	r6, [r3, #49]	@ zero_extendqisi2
 1348 0132 42EA0626 		orr	r6, r2, r6, lsl #8
 1349 0136 A9E7     		b	.L122
 1350              	.LVL161:
 1351              	.L124:
 1352              	.LBB262:
 1353              	.LBB260:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 1354              		.loc 1 731 0
 1355 0138 04F1300A 		add	sl, r4, #48
 1356 013c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1357 013e B34F     		ldr	r7, .L225
 1358 0140 5146     		mov	r1, sl
 1359 0142 3246     		mov	r2, r6
 1360 0144 0123     		movs	r3, #1
 1361 0146 B847     		blx	r7
 1362              	.LVL162:
 1363 0148 0028     		cmp	r0, #0
 1364 014a 7FF46AAF 		bne	.L179
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1365              		.loc 1 734 0
 1366 014e E369     		ldr	r3, [r4, #28]
 1367 0150 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 1368              		.loc 1 733 0
 1369 0152 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1370              		.loc 1 734 0
 1371 0154 9A18     		adds	r2, r3, r2
 1372 0156 9642     		cmp	r6, r2
 1373 0158 E0D2     		bcs	.L126
 1374              	.LBB256:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1375              		.loc 1 736 0
 1376 015a 94F80390 		ldrb	r9, [r4, #3]	@ zero_extendqisi2
 1377              	.LVL163:
 1378 015e B9F1010F 		cmp	r9, #1
 1379 0162 01D8     		bhi	.L191
 1380 0164 DAE7     		b	.L126
 1381              	.LVL164:
 1382              	.L213:
 1383 0166 E369     		ldr	r3, [r4, #28]
 1384              	.LVL165:
 1385              	.L191:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 1386              		.loc 1 737 0
 1387 0168 F618     		adds	r6, r6, r3
 1388              	.LVL166:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1389              		.loc 1 736 0
 1390 016a 09F1FF39 		add	r9, r9, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1391              		.loc 1 738 0
 1392 016e 0123     		movs	r3, #1
 1393 0170 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1394 0172 5146     		mov	r1, sl
 1395 0174 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1396              		.loc 1 736 0
 1397 0176 5FFA89F9 		uxtb	r9, r9
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1398              		.loc 1 738 0
 1399 017a B847     		blx	r7
 1400              	.LVL167:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1401              		.loc 1 736 0
 1402 017c B9F1010F 		cmp	r9, #1
 1403 0180 F1D8     		bhi	.L213
 1404              	.LBE256:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1405              		.loc 1 743 0
 1406 0182 B8F1000F 		cmp	r8, #0
 1407 0186 CCD0     		beq	.L168
 1408              	.LVL168:
 1409              	.L212:
 1410              	.LBB257:
 1411              	.LBB258:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 1412              		.loc 1 744 0
 1413 0188 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1414 018a A14E     		ldr	r6, .L225+4
 1415              	.LVL169:
 1416 018c 04F13001 		add	r1, r4, #48
 1417 0190 4246     		mov	r2, r8
 1418 0192 0123     		movs	r3, #1
 1419 0194 B047     		blx	r6
 1420              	.LVL170:
 1421 0196 0028     		cmp	r0, #0
 1422 0198 7FF443AF 		bne	.L179
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1423              		.loc 1 746 0
 1424 019c C4F82C80 		str	r8, [r4, #44]
 1425 01a0 BFE7     		b	.L168
 1426              	.LVL171:
 1427              	.L109:
 1428              	.LBE258:
 1429              	.LBE257:
 1430              	.LBE260:
 1431              	.LBE262:
 1432              	.LBB263:
 1433              	.LBB233:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 1434              		.loc 1 731 0
 1435 01a2 04F1300A 		add	sl, r4, #48
 1436 01a6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1437 01a8 984F     		ldr	r7, .L225
 1438 01aa 5146     		mov	r1, sl
 1439 01ac 3246     		mov	r2, r6
 1440 01ae B847     		blx	r7
 1441              	.LVL172:
 1442 01b0 0028     		cmp	r0, #0
 1443 01b2 7FF436AF 		bne	.L179
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1444              		.loc 1 734 0
 1445 01b6 E369     		ldr	r3, [r4, #28]
 1446 01b8 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 1447              		.loc 1 733 0
 1448 01ba 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1449              		.loc 1 734 0
 1450 01bc 9A18     		adds	r2, r3, r2
 1451 01be 9642     		cmp	r6, r2
 1452 01c0 BFF43DAF 		bcs	.L113
 1453              	.LBB229:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1454              		.loc 1 736 0
 1455 01c4 94F803B0 		ldrb	fp, [r4, #3]	@ zero_extendqisi2
 1456              	.LVL173:
 1457 01c8 BBF1010F 		cmp	fp, #1
 1458 01cc 01D8     		bhi	.L189
 1459 01ce 36E7     		b	.L113
 1460              	.LVL174:
 1461              	.L214:
 1462 01d0 E369     		ldr	r3, [r4, #28]
 1463              	.LVL175:
 1464              	.L189:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 1465              		.loc 1 737 0
 1466 01d2 F618     		adds	r6, r6, r3
 1467              	.LVL176:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1468              		.loc 1 736 0
 1469 01d4 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1470              		.loc 1 738 0
 1471 01d8 0123     		movs	r3, #1
 1472 01da 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1473 01dc 5146     		mov	r1, sl
 1474 01de 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1475              		.loc 1 736 0
 1476 01e0 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1477              		.loc 1 738 0
 1478 01e4 B847     		blx	r7
 1479              	.LVL177:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1480              		.loc 1 736 0
 1481 01e6 BBF1010F 		cmp	fp, #1
 1482 01ea F1D8     		bhi	.L214
 1483              	.LBE229:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1484              		.loc 1 743 0
 1485 01ec B8F1000F 		cmp	r8, #0
 1486 01f0 3FF429AF 		beq	.L188
 1487              	.LVL178:
 1488              	.L207:
 1489              	.LBB230:
 1490              	.LBB231:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 1491              		.loc 1 744 0
 1492 01f4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1493 01f6 864E     		ldr	r6, .L225+4
 1494              	.LVL179:
 1495 01f8 04F13001 		add	r1, r4, #48
 1496 01fc 4246     		mov	r2, r8
 1497 01fe 0123     		movs	r3, #1
 1498 0200 B047     		blx	r6
 1499              	.LVL180:
 1500 0202 0028     		cmp	r0, #0
 1501 0204 7FF40DAF 		bne	.L179
 1502 0208 226A     		ldr	r2, [r4, #32]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1503              		.loc 1 746 0
 1504 020a C4F82C80 		str	r8, [r4, #44]
 1505 020e 1DE7     		b	.L166
 1506              	.LVL181:
 1507              	.L129:
 1508              	.LBE231:
 1509              	.LBE230:
 1510              	.LBE233:
 1511              	.LBE263:
 1512              	.LBB264:
 1513              	.LBB250:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 1514              		.loc 1 731 0
 1515 0210 04F1300A 		add	sl, r4, #48
 1516 0214 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1517 0216 7D4F     		ldr	r7, .L225
 1518 0218 5146     		mov	r1, sl
 1519 021a 3246     		mov	r2, r6
 1520 021c 0123     		movs	r3, #1
 1521 021e B847     		blx	r7
 1522              	.LVL182:
 1523 0220 0028     		cmp	r0, #0
 1524 0222 7FF4FEAE 		bne	.L179
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1525              		.loc 1 734 0
 1526 0226 E369     		ldr	r3, [r4, #28]
 1527 0228 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 1528              		.loc 1 733 0
 1529 022a 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1530              		.loc 1 734 0
 1531 022c 9A18     		adds	r2, r3, r2
 1532 022e 9642     		cmp	r6, r2
 1533 0230 BFF443AF 		bcs	.L131
 1534              	.LBB246:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1535              		.loc 1 736 0
 1536 0234 94F80390 		ldrb	r9, [r4, #3]	@ zero_extendqisi2
 1537              	.LVL183:
 1538 0238 B9F1010F 		cmp	r9, #1
 1539 023c 01D8     		bhi	.L192
 1540 023e 3CE7     		b	.L131
 1541              	.LVL184:
 1542              	.L215:
 1543 0240 E369     		ldr	r3, [r4, #28]
 1544              	.LVL185:
 1545              	.L192:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 1546              		.loc 1 737 0
 1547 0242 F618     		adds	r6, r6, r3
 1548              	.LVL186:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1549              		.loc 1 736 0
 1550 0244 09F1FF39 		add	r9, r9, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1551              		.loc 1 738 0
 1552 0248 0123     		movs	r3, #1
 1553 024a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1554 024c 5146     		mov	r1, sl
 1555 024e 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1556              		.loc 1 736 0
 1557 0250 5FFA89F9 		uxtb	r9, r9
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1558              		.loc 1 738 0
 1559 0254 B847     		blx	r7
 1560              	.LVL187:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1561              		.loc 1 736 0
 1562 0256 B9F1010F 		cmp	r9, #1
 1563 025a F1D8     		bhi	.L215
 1564              	.LBE246:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1565              		.loc 1 743 0
 1566 025c B8F1000F 		cmp	r8, #0
 1567 0260 3FF42FAF 		beq	.L169
 1568              	.LVL188:
 1569              	.L210:
 1570              	.LBB247:
 1571              	.LBB248:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 1572              		.loc 1 744 0
 1573 0264 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1574 0266 6A4E     		ldr	r6, .L225+4
 1575              	.LVL189:
 1576 0268 04F13001 		add	r1, r4, #48
 1577 026c 4246     		mov	r2, r8
 1578 026e 0123     		movs	r3, #1
 1579 0270 B047     		blx	r6
 1580              	.LVL190:
 1581 0272 0028     		cmp	r0, #0
 1582 0274 7FF4D5AE 		bne	.L179
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1583              		.loc 1 746 0
 1584 0278 C4F82C80 		str	r8, [r4, #44]
 1585 027c 21E7     		b	.L169
 1586              	.LVL191:
 1587              	.L138:
 1588              	.LBE248:
 1589              	.LBE247:
 1590              	.LBE250:
 1591              	.LBE264:
 1592              	.LBE269:
 1593              	.LBE336:
 1594              	.LBB337:
 1595              	.LBB329:
 1596              	.LBB323:
 1597              	.LBB317:
 900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 1598              		.loc 1 900 0
 1599 027e 236A     		ldr	r3, [r4, #32]
 1600              	.LBB277:
 1601              	.LBB278:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 1602              		.loc 1 727 0
 1603 0280 D4F82C80 		ldr	r8, [r4, #44]
 1604              	.LBE278:
 1605              	.LBE277:
 900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 1606              		.loc 1 900 0
 1607 0284 03EBD519 		add	r9, r3, r5, lsr #7
 1608              	.LVL192:
 1609              	.LBB285:
 1610              	.LBB282:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1611              		.loc 1 728 0
 1612 0288 C145     		cmp	r9, r8
 1613 028a 07D0     		beq	.L173
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 1614              		.loc 1 730 0
 1615 028c 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1616 028e 002B     		cmp	r3, #0
 1617 0290 40F0D380 		bne	.L160
 1618              	.L162:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1619              		.loc 1 743 0
 1620 0294 B9F1000F 		cmp	r9, #0
 1621 0298 40F0BC80 		bne	.L216
 1622              	.L173:
 1623              	.LBE282:
 1624              	.LBE285:
 902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[clst * 4 % SS(fs)];
 1625              		.loc 1 902 0
 1626 029c 6D06     		lsls	r5, r5, #25
 1627              	.LVL193:
 1628 029e ED0D     		lsrs	r5, r5, #23
 1629 02a0 05F13003 		add	r3, r5, #48
 1630 02a4 E318     		adds	r3, r4, r3
 1631              	.LVL194:
 903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 1632              		.loc 1 903 0
 1633 02a6 6519     		adds	r5, r4, r5
 1634 02a8 D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 1635              	.LVL195:
 904:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(p, val);
 1636              		.loc 1 904 0
 1637 02aa 0022     		movs	r2, #0
 1638 02ac 01F0F001 		and	r1, r1, #240
 1639              	.LVL196:
 1640 02b0 85F83020 		strb	r2, [r5, #48]
 1641 02b4 5A70     		strb	r2, [r3, #1]
 1642 02b6 9A70     		strb	r2, [r3, #2]
 1643 02b8 D970     		strb	r1, [r3, #3]
 1644              	.LVL197:
 1645              	.L153:
 1646              	.LBE317:
 1647              	.LBE323:
 1648              	.LBE329:
 1649              	.LBE337:
 949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSInfo */
 1650              		.loc 1 949 0
 1651 02ba 2369     		ldr	r3, [r4, #16]
 1652              	.LBB338:
 1653              	.LBB330:
 1654              	.LBB324:
 1655              	.LBB318:
 911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->wflag = 1;
 1656              		.loc 1 911 0
 1657 02bc 0122     		movs	r2, #1
 1658              	.LBE318:
 1659              	.LBE324:
 1660              	.LBE330:
 1661              	.LBE338:
 949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSInfo */
 1662              		.loc 1 949 0
 1663 02be 591C     		adds	r1, r3, #1
 1664              	.LBB339:
 1665              	.LBB331:
 1666              	.LBB325:
 1667              	.LBB319:
 911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->wflag = 1;
 1668              		.loc 1 911 0
 1669 02c0 2271     		strb	r2, [r4, #4]
 1670              	.LVL198:
 1671              	.LBE319:
 1672              	.LBE325:
 1673              	.LBE331:
 1674              	.LBE339:
 949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSInfo */
 1675              		.loc 1 949 0
 1676 02c2 02D0     		beq	.L175
 950:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust++;
 1677              		.loc 1 950 0
 1678 02c4 0133     		adds	r3, r3, #1
 1679 02c6 2361     		str	r3, [r4, #16]
 951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->fsi_flag = 1;
 1680              		.loc 1 951 0
 1681 02c8 6271     		strb	r2, [r4, #5]
 1682              	.L175:
 1683              	.LBB340:
 1684              	.LBB332:
 1685              	.LBB326:
 1686              	.LBB320:
 889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((BYTE)(*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 1687              		.loc 1 889 0
 1688 02ca 3546     		mov	r5, r6
 1689 02cc 9DE6     		b	.L103
 1690              	.LVL199:
 1691              	.L137:
 893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 1692              		.loc 1 893 0
 1693 02ce 236A     		ldr	r3, [r4, #32]
 1694              	.LBB286:
 1695              	.LBB287:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 1696              		.loc 1 727 0
 1697 02d0 D4F82C80 		ldr	r8, [r4, #44]
 1698              	.LBE287:
 1699              	.LBE286:
 893:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 1700              		.loc 1 893 0
 1701 02d4 03EB1529 		add	r9, r3, r5, lsr #8
 1702              	.LVL200:
 1703              	.LBB294:
 1704              	.LBB291:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1705              		.loc 1 728 0
 1706 02d8 C145     		cmp	r9, r8
 1707 02da 07D0     		beq	.L172
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 1708              		.loc 1 730 0
 1709 02dc 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1710 02de 002B     		cmp	r3, #0
 1711 02e0 40F0D580 		bne	.L155
 1712              	.L157:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1713              		.loc 1 743 0
 1714 02e4 B9F1000F 		cmp	r9, #0
 1715 02e8 40F08380 		bne	.L217
 1716              	.L172:
 1717              	.LBE291:
 1718              	.LBE294:
 895:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[clst * 2 % SS(fs)];
 1719              		.loc 1 895 0
 1720 02ec 2D06     		lsls	r5, r5, #24
 1721              	.LVL201:
 1722 02ee ED0D     		lsrs	r5, r5, #23
 1723              	.LVL202:
 1724 02f0 05F13002 		add	r2, r5, #48
 896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(p, (WORD)val);
 1725              		.loc 1 896 0
 1726 02f4 A218     		adds	r2, r4, r2
 1727 02f6 6519     		adds	r5, r4, r5
 1728              	.LVL203:
 1729 02f8 0023     		movs	r3, #0
 1730 02fa 85F83030 		strb	r3, [r5, #48]
 1731 02fe 5370     		strb	r3, [r2, #1]
 1732 0300 DBE7     		b	.L153
 1733              	.LVL204:
 1734              	.L211:
 880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 1735              		.loc 1 880 0
 1736 0302 226A     		ldr	r2, [r4, #32]
 1737              	.LBB295:
 1738              	.LBB296:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 1739              		.loc 1 727 0
 1740 0304 D4F82C90 		ldr	r9, [r4, #44]
 1741              	.LBE296:
 1742              	.LBE295:
 879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bc = clst; bc += bc / 2;
 1743              		.loc 1 879 0
 1744 0308 05EB550A 		add	sl, r5, r5, lsr #1
 1745              	.LVL205:
 880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 1746              		.loc 1 880 0
 1747 030c 02EB5A28 		add	r8, r2, sl, lsr #9
 1748              	.LVL206:
 1749              	.LBB303:
 1750              	.LBB300:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1751              		.loc 1 728 0
 1752 0310 C845     		cmp	r8, r9
 1753 0312 09D0     		beq	.L170
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 1754              		.loc 1 730 0
 1755 0314 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1756 0316 002B     		cmp	r3, #0
 1757 0318 40F0E380 		bne	.L140
 1758              	.L144:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1759              		.loc 1 743 0
 1760 031c B8F1000F 		cmp	r8, #0
 1761 0320 59D1     		bne	.L218
 1762              	.L195:
 1763 0322 226A     		ldr	r2, [r4, #32]
 1764 0324 D4F82C80 		ldr	r8, [r4, #44]
 1765              	.LVL207:
 1766              	.L170:
 1767              	.LBE300:
 1768              	.LBE303:
 882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[bc % SS(fs)];
 1769              		.loc 1 882 0
 1770 0328 4FEACA53 		lsl	r3, sl, #23
 1771 032c DB0D     		lsrs	r3, r3, #23
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 1772              		.loc 1 883 0
 1773 032e 15F00105 		ands	r5, r5, #1
 1774              	.LVL208:
 1775 0332 7CD1     		bne	.L219
 1776 0334 2846     		mov	r0, r5
 1777 0336 E118     		adds	r1, r4, r3
 1778              	.L146:
 884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bc++;
 1779              		.loc 1 884 0
 1780 0338 0AF1010A 		add	sl, sl, #1
 1781              	.LVL209:
 886:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 1782              		.loc 1 886 0
 1783 033c 02EB5A2B 		add	fp, r2, sl, lsr #9
 885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 1;
 1784              		.loc 1 885 0
 1785 0340 0123     		movs	r3, #1
 1786              	.LVL210:
 1787              	.LBB304:
 1788              	.LBB305:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1789              		.loc 1 728 0
 1790 0342 C345     		cmp	fp, r8
 1791              	.LBE305:
 1792              	.LBE304:
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 1793              		.loc 1 883 0
 1794 0344 81F83000 		strb	r0, [r1, #48]
 885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 1;
 1795              		.loc 1 885 0
 1796 0348 2371     		strb	r3, [r4, #4]
 1797              	.LBB310:
 1798              	.LBB309:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 1799              		.loc 1 728 0
 1800 034a 35D0     		beq	.L171
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 1801              		.loc 1 731 0
 1802 034c 04F13009 		add	r9, r4, #48
 1803              	.LVL211:
 1804 0350 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1805 0352 2E4F     		ldr	r7, .L225
 1806 0354 4946     		mov	r1, r9
 1807 0356 4246     		mov	r2, r8
 1808 0358 B847     		blx	r7
 1809              	.LVL212:
 1810 035a 0028     		cmp	r0, #0
 1811 035c 40F0EB80 		bne	.L143
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1812              		.loc 1 734 0
 1813 0360 E369     		ldr	r3, [r4, #28]
 1814 0362 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 1815              		.loc 1 733 0
 1816 0364 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1817              		.loc 1 734 0
 1818 0366 9A18     		adds	r2, r3, r2
 1819 0368 9045     		cmp	r8, r2
 1820 036a 17D2     		bcs	.L150
 1821              	.LBB306:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1822              		.loc 1 736 0
 1823 036c 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 1824              	.LVL213:
 1825 0370 BCF1010F 		cmp	ip, #1
 1826 0374 01D8     		bhi	.L197
 1827 0376 11E0     		b	.L150
 1828              	.LVL214:
 1829              	.L220:
 1830 0378 E369     		ldr	r3, [r4, #28]
 1831              	.LVL215:
 1832              	.L197:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 1833              		.loc 1 737 0
 1834 037a 9844     		add	r8, r8, r3
 1835              	.LVL216:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1836              		.loc 1 738 0
 1837 037c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1838 037e CDF800C0 		str	ip, [sp, #0]
 1839 0382 0123     		movs	r3, #1
 1840 0384 4946     		mov	r1, r9
 1841 0386 4246     		mov	r2, r8
 1842 0388 B847     		blx	r7
 1843              	.LVL217:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 1844              		.loc 1 736 0
 1845 038a DDF800C0 		ldr	ip, [sp, #0]
 1846 038e 0CF1FF3C 		add	ip, ip, #-1
 1847 0392 5FFA8CFC 		uxtb	ip, ip
 1848              	.LVL218:
 1849 0396 BCF1010F 		cmp	ip, #1
 1850 039a EDD8     		bhi	.L220
 1851              	.LVL219:
 1852              	.L150:
 1853              	.LBE306:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 1854              		.loc 1 743 0
 1855 039c BBF1000F 		cmp	fp, #0
 1856 03a0 0AD0     		beq	.L171
 1857              	.LVL220:
 1858              	.LBB307:
 1859              	.LBB308:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 1860              		.loc 1 744 0
 1861 03a2 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1862 03a4 1A4F     		ldr	r7, .L225+4
 1863 03a6 4946     		mov	r1, r9
 1864 03a8 5A46     		mov	r2, fp
 1865 03aa 0123     		movs	r3, #1
 1866 03ac B847     		blx	r7
 1867              	.LVL221:
 1868 03ae 0028     		cmp	r0, #0
 1869 03b0 40F0C180 		bne	.L143
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1870              		.loc 1 746 0
 1871 03b4 C4F82CB0 		str	fp, [r4, #44]
 1872              	.LVL222:
 1873              	.L171:
 1874              	.LBE308:
 1875              	.LBE307:
 1876              	.LBE309:
 1877              	.LBE310:
 888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = &fs->win[bc % SS(fs)];
 1878              		.loc 1 888 0
 1879 03b8 4FEACA5A 		lsl	sl, sl, #23
 1880              	.LVL223:
 1881 03bc 4FEADA5A 		lsr	sl, sl, #23
 889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((BYTE)(*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 1882              		.loc 1 889 0
 1883 03c0 002D     		cmp	r5, #0
 1884 03c2 40F0C780 		bne	.L183
 1885 03c6 A244     		add	sl, r4, sl
 1886 03c8 9AF83030 		ldrb	r3, [sl, #48]	@ zero_extendqisi2
 1887 03cc 03F0F003 		and	r3, r3, #240
 1888              	.L152:
 1889 03d0 8AF83030 		strb	r3, [sl, #48]
 1890 03d4 71E7     		b	.L153
 1891              	.LVL224:
 1892              	.L218:
 1893              	.LBB311:
 1894              	.LBB301:
 1895              	.LBB297:
 1896              	.LBB298:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 1897              		.loc 1 744 0
 1898 03d6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1899 03d8 0D4F     		ldr	r7, .L225+4
 1900 03da 04F13001 		add	r1, r4, #48
 1901 03de 4246     		mov	r2, r8
 1902 03e0 0123     		movs	r3, #1
 1903 03e2 B847     		blx	r7
 1904              	.LVL225:
 1905 03e4 0028     		cmp	r0, #0
 1906 03e6 40F0A680 		bne	.L143
 1907 03ea 226A     		ldr	r2, [r4, #32]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1908              		.loc 1 746 0
 1909 03ec C4F82C80 		str	r8, [r4, #44]
 1910 03f0 9AE7     		b	.L170
 1911              	.LVL226:
 1912              	.L217:
 1913              	.LBE298:
 1914              	.LBE297:
 1915              	.LBE301:
 1916              	.LBE311:
 1917              	.LBB312:
 1918              	.LBB292:
 1919              	.LBB288:
 1920              	.LBB289:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 1921              		.loc 1 744 0
 1922 03f2 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1923 03f4 064F     		ldr	r7, .L225+4
 1924 03f6 04F13001 		add	r1, r4, #48
 1925 03fa 4A46     		mov	r2, r9
 1926 03fc 0123     		movs	r3, #1
 1927 03fe B847     		blx	r7
 1928              	.LVL227:
 1929 0400 0028     		cmp	r0, #0
 1930 0402 40F09880 		bne	.L143
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1931              		.loc 1 746 0
 1932 0406 C4F82C90 		str	r9, [r4, #44]
 1933 040a 6FE7     		b	.L172
 1934              	.L226:
 1935              		.align	2
 1936              	.L225:
 1937 040c 00000000 		.word	disk_write
 1938 0410 00000000 		.word	disk_read
 1939              	.LVL228:
 1940              	.L216:
 1941              	.LBE289:
 1942              	.LBE288:
 1943              	.LBE292:
 1944              	.LBE312:
 1945              	.LBB313:
 1946              	.LBB283:
 1947              	.LBB279:
 1948              	.LBB280:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 1949              		.loc 1 744 0
 1950 0414 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1951 0416 664F     		ldr	r7, .L227
 1952 0418 04F13001 		add	r1, r4, #48
 1953 041c 4A46     		mov	r2, r9
 1954 041e 0123     		movs	r3, #1
 1955 0420 B847     		blx	r7
 1956              	.LVL229:
 1957 0422 0028     		cmp	r0, #0
 1958 0424 40F08780 		bne	.L143
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 1959              		.loc 1 746 0
 1960 0428 C4F82C90 		str	r9, [r4, #44]
 1961 042c 36E7     		b	.L173
 1962              	.LVL230:
 1963              	.L219:
 1964              	.LBE280:
 1965              	.LBE279:
 1966              	.LBE283:
 1967              	.LBE313:
 883:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? ((BYTE)(*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 1968              		.loc 1 883 0
 1969 042e E118     		adds	r1, r4, r3
 1970              	.LBE320:
 1971 0430 91F83000 		ldrb	r0, [r1, #48]	@ zero_extendqisi2
 1972 0434 00F00F00 		and	r0, r0, #15
 1973 0438 7EE7     		b	.L146
 1974              	.LVL231:
 1975              	.L160:
 1976              	.LBB321:
 1977              	.LBB314:
 1978              	.LBB284:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 1979              		.loc 1 731 0
 1980 043a 04F1300B 		add	fp, r4, #48
 1981 043e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1982 0440 5C4F     		ldr	r7, .L227+4
 1983 0442 5946     		mov	r1, fp
 1984 0444 4246     		mov	r2, r8
 1985 0446 0123     		movs	r3, #1
 1986 0448 B847     		blx	r7
 1987              	.LVL232:
 1988 044a 0028     		cmp	r0, #0
 1989 044c 73D1     		bne	.L143
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1990              		.loc 1 734 0
 1991 044e E369     		ldr	r3, [r4, #28]
 1992 0450 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 1993              		.loc 1 733 0
 1994 0452 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 1995              		.loc 1 734 0
 1996 0454 9A18     		adds	r2, r3, r2
 1997 0456 9045     		cmp	r8, r2
 1998 0458 BFF41CAF 		bcs	.L162
 1999              	.LBB281:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2000              		.loc 1 736 0
 2001 045c 94F803A0 		ldrb	sl, [r4, #3]	@ zero_extendqisi2
 2002              	.LVL233:
 2003 0460 BAF1010F 		cmp	sl, #1
 2004 0464 01D8     		bhi	.L199
 2005 0466 15E7     		b	.L162
 2006              	.LVL234:
 2007              	.L221:
 2008 0468 E369     		ldr	r3, [r4, #28]
 2009              	.LVL235:
 2010              	.L199:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 2011              		.loc 1 737 0
 2012 046a 9844     		add	r8, r8, r3
 2013              	.LVL236:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2014              		.loc 1 736 0
 2015 046c 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2016              		.loc 1 738 0
 2017 0470 0123     		movs	r3, #1
 2018 0472 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2019 0474 5946     		mov	r1, fp
 2020 0476 4246     		mov	r2, r8
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2021              		.loc 1 736 0
 2022 0478 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2023              		.loc 1 738 0
 2024 047c B847     		blx	r7
 2025              	.LVL237:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2026              		.loc 1 736 0
 2027 047e BAF1010F 		cmp	sl, #1
 2028 0482 F1D8     		bhi	.L221
 2029              	.LBE281:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 2030              		.loc 1 743 0
 2031 0484 B9F1000F 		cmp	r9, #0
 2032 0488 3FF408AF 		beq	.L173
 2033 048c C2E7     		b	.L216
 2034              	.LVL238:
 2035              	.L155:
 2036              	.LBE284:
 2037              	.LBE314:
 2038              	.LBB315:
 2039              	.LBB293:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 2040              		.loc 1 731 0
 2041 048e 04F1300B 		add	fp, r4, #48
 2042 0492 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2043 0494 474F     		ldr	r7, .L227+4
 2044 0496 5946     		mov	r1, fp
 2045 0498 4246     		mov	r2, r8
 2046 049a 0123     		movs	r3, #1
 2047 049c B847     		blx	r7
 2048              	.LVL239:
 2049 049e 0028     		cmp	r0, #0
 2050 04a0 49D1     		bne	.L143
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2051              		.loc 1 734 0
 2052 04a2 E369     		ldr	r3, [r4, #28]
 2053 04a4 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 2054              		.loc 1 733 0
 2055 04a6 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2056              		.loc 1 734 0
 2057 04a8 9A18     		adds	r2, r3, r2
 2058 04aa 9045     		cmp	r8, r2
 2059 04ac BFF41AAF 		bcs	.L157
 2060              	.LBB290:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2061              		.loc 1 736 0
 2062 04b0 94F803A0 		ldrb	sl, [r4, #3]	@ zero_extendqisi2
 2063              	.LVL240:
 2064 04b4 BAF1010F 		cmp	sl, #1
 2065 04b8 01D8     		bhi	.L198
 2066 04ba 13E7     		b	.L157
 2067              	.LVL241:
 2068              	.L222:
 2069 04bc E369     		ldr	r3, [r4, #28]
 2070              	.LVL242:
 2071              	.L198:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 2072              		.loc 1 737 0
 2073 04be 9844     		add	r8, r8, r3
 2074              	.LVL243:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2075              		.loc 1 736 0
 2076 04c0 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2077              		.loc 1 738 0
 2078 04c4 0123     		movs	r3, #1
 2079 04c6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2080 04c8 5946     		mov	r1, fp
 2081 04ca 4246     		mov	r2, r8
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2082              		.loc 1 736 0
 2083 04cc 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2084              		.loc 1 738 0
 2085 04d0 B847     		blx	r7
 2086              	.LVL244:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2087              		.loc 1 736 0
 2088 04d2 BAF1010F 		cmp	sl, #1
 2089 04d6 F1D8     		bhi	.L222
 2090              	.LBE290:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 2091              		.loc 1 743 0
 2092 04d8 B9F1000F 		cmp	r9, #0
 2093 04dc 3FF406AF 		beq	.L172
 2094 04e0 87E7     		b	.L217
 2095              	.LVL245:
 2096              	.L140:
 2097              	.LBE293:
 2098              	.LBE315:
 2099              	.LBB316:
 2100              	.LBB302:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 2101              		.loc 1 731 0
 2102 04e2 04F13003 		add	r3, r4, #48
 2103 04e6 0193     		str	r3, [sp, #4]
 2104 04e8 1946     		mov	r1, r3
 2105 04ea 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2106 04ec 314F     		ldr	r7, .L227+4
 2107 04ee 4A46     		mov	r2, r9
 2108 04f0 0123     		movs	r3, #1
 2109 04f2 B847     		blx	r7
 2110              	.LVL246:
 2111 04f4 F8B9     		cbnz	r0, .L143
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2112              		.loc 1 734 0
 2113 04f6 E369     		ldr	r3, [r4, #28]
 2114 04f8 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 2115              		.loc 1 733 0
 2116 04fa 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2117              		.loc 1 734 0
 2118 04fc 9A18     		adds	r2, r3, r2
 2119 04fe 9145     		cmp	r9, r2
 2120 0500 BFF40CAF 		bcs	.L144
 2121              	.LBB299:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2122              		.loc 1 736 0
 2123 0504 94F803B0 		ldrb	fp, [r4, #3]	@ zero_extendqisi2
 2124              	.LVL247:
 2125 0508 BBF1010F 		cmp	fp, #1
 2126 050c 01D8     		bhi	.L196
 2127 050e 05E7     		b	.L144
 2128              	.LVL248:
 2129              	.L223:
 2130 0510 E369     		ldr	r3, [r4, #28]
 2131              	.LVL249:
 2132              	.L196:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 2133              		.loc 1 737 0
 2134 0512 9944     		add	r9, r9, r3
 2135              	.LVL250:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2136              		.loc 1 738 0
 2137 0514 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2138 0516 0199     		ldr	r1, [sp, #4]
 2139 0518 0123     		movs	r3, #1
 2140 051a 4A46     		mov	r2, r9
 2141 051c B847     		blx	r7
 2142              	.LVL251:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2143              		.loc 1 736 0
 2144 051e 0BF1FF3C 		add	ip, fp, #-1
 2145 0522 5FFA8CFB 		uxtb	fp, ip
 2146              	.LVL252:
 2147 0526 BBF1010F 		cmp	fp, #1
 2148 052a F1D8     		bhi	.L223
 2149              	.LBE299:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 2150              		.loc 1 743 0
 2151 052c B8F1000F 		cmp	r8, #0
 2152 0530 3FF4F7AE 		beq	.L195
 2153 0534 4FE7     		b	.L218
 2154              	.LVL253:
 2155              	.L143:
 2156              	.LBE302:
 2157              	.LBE316:
 911:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->wflag = 1;
 2158              		.loc 1 911 0
 2159 0536 0120     		movs	r0, #1
 2160 0538 2071     		strb	r0, [r4, #4]
 2161              	.LVL254:
 2162 053a B1E5     		b	.L193
 2163              	.LVL255:
 2164              	.L208:
 2165              	.LBE321:
 2166              	.LBE326:
 2167              	.LBE332:
 2168              	.LBE340:
 2169              	.LBB341:
 2170              	.LBB270:
 2171              	.LBB265:
 2172              	.LBB241:
 2173              	.LBB237:
 2174              	.LBB238:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 2175              		.loc 1 744 0
 2176 053c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2177 053e 1C4F     		ldr	r7, .L227
 2178 0540 04F13001 		add	r1, r4, #48
 2179 0544 3246     		mov	r2, r6
 2180 0546 0123     		movs	r3, #1
 2181 0548 B847     		blx	r7
 2182              	.LVL256:
 2183 054a 0028     		cmp	r0, #0
 2184 054c 7FF469AD 		bne	.L179
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 2185              		.loc 1 746 0
 2186 0550 E662     		str	r6, [r4, #44]
 2187 0552 8EE5     		b	.L167
 2188              	.LVL257:
 2189              	.L183:
 2190              	.LBE238:
 2191              	.LBE237:
 2192              	.LBE241:
 2193              	.LBE265:
 2194              	.LBE270:
 2195              	.LBE341:
 2196              	.LBB342:
 2197              	.LBB333:
 2198              	.LBB327:
 2199              	.LBB322:
 889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((BYTE)(*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2200              		.loc 1 889 0
 2201 0554 0023     		movs	r3, #0
 2202 0556 A244     		add	sl, r4, sl
 2203 0558 3AE7     		b	.L152
 2204              	.LVL258:
 2205              	.L117:
 2206              	.LBE322:
 2207              	.LBE327:
 2208              	.LBE333:
 2209              	.LBE342:
 2210              	.LBB343:
 2211              	.LBB271:
 2212              	.LBB266:
 2213              	.LBB242:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 2214              		.loc 1 731 0
 2215 055a 04F13003 		add	r3, r4, #48
 2216 055e 0193     		str	r3, [sp, #4]
 2217 0560 1946     		mov	r1, r3
 2218 0562 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2219 0564 134F     		ldr	r7, .L227+4
 2220 0566 4246     		mov	r2, r8
 2221 0568 0123     		movs	r3, #1
 2222 056a B847     		blx	r7
 2223              	.LVL259:
 2224 056c 0028     		cmp	r0, #0
 2225 056e 7FF458AD 		bne	.L179
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2226              		.loc 1 734 0
 2227 0572 E369     		ldr	r3, [r4, #28]
 2228 0574 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 2229              		.loc 1 733 0
 2230 0576 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2231              		.loc 1 734 0
 2232 0578 9A18     		adds	r2, r3, r2
 2233 057a 4245     		cmp	r2, r8
 2234 057c 7FF676AD 		bls	.L119
 2235              	.LBB239:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2236              		.loc 1 736 0
 2237 0580 94F803B0 		ldrb	fp, [r4, #3]	@ zero_extendqisi2
 2238              	.LVL260:
 2239 0584 BBF1010F 		cmp	fp, #1
 2240 0588 01D8     		bhi	.L190
 2241 058a 6FE5     		b	.L119
 2242              	.LVL261:
 2243              	.L224:
 2244 058c E369     		ldr	r3, [r4, #28]
 2245              	.LVL262:
 2246              	.L190:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 2247              		.loc 1 737 0
 2248 058e 9844     		add	r8, r8, r3
 2249              	.LVL263:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2250              		.loc 1 738 0
 2251 0590 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2252 0592 0199     		ldr	r1, [sp, #4]
 2253 0594 0123     		movs	r3, #1
 2254 0596 4246     		mov	r2, r8
 2255 0598 B847     		blx	r7
 2256              	.LVL264:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2257              		.loc 1 736 0
 2258 059a 0BF1FF3C 		add	ip, fp, #-1
 2259 059e 5FFA8CFB 		uxtb	fp, ip
 2260              	.LVL265:
 2261 05a2 BBF1010F 		cmp	fp, #1
 2262 05a6 F1D8     		bhi	.L224
 2263 05a8 60E5     		b	.L119
 2264              	.LVL266:
 2265              	.L121:
 2266              	.LBE239:
 2267              	.LBE242:
 2268              	.LBE266:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2269              		.loc 1 838 0
 2270 05aa 3605     		lsls	r6, r6, #20
 2271              	.LVL267:
 2272 05ac 360D     		lsrs	r6, r6, #20
 2273 05ae 6DE5     		b	.L122
 2274              	.L228:
 2275              		.align	2
 2276              	.L227:
 2277 05b0 00000000 		.word	disk_read
 2278 05b4 00000000 		.word	disk_write
 2279              	.LBE271:
 2280              	.LBE343:
 2281              		.cfi_endproc
 2282              	.LFE57:
 2284              		.section	.text.dir_sdi,"ax",%progbits
 2285              		.align	2
 2286              		.thumb
 2287              		.thumb_func
 2289              	dir_sdi:
 2290              	.LFB11:
1070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2291              		.loc 1 1070 0
 2292              		.cfi_startproc
 2293              		@ args = 0, pretend = 0, frame = 16
 2294              		@ frame_needed = 0, uses_anonymous_args = 0
 2295              	.LVL268:
 2296 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 2297              	.LCFI8:
 2298              		.cfi_def_cfa_offset 36
 2299              		.cfi_offset 4, -36
 2300              		.cfi_offset 5, -32
 2301              		.cfi_offset 6, -28
 2302              		.cfi_offset 7, -24
 2303              		.cfi_offset 8, -20
 2304              		.cfi_offset 9, -16
 2305              		.cfi_offset 10, -12
 2306              		.cfi_offset 11, -8
 2307              		.cfi_offset 14, -4
1076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst = dj->sclust;
 2308              		.loc 1 1076 0
 2309 0004 8768     		ldr	r7, [r0, #8]
 2310              	.LVL269:
1070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2311              		.loc 1 1070 0
 2312 0006 0646     		mov	r6, r0
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 2313              		.loc 1 1077 0
 2314 0008 012F     		cmp	r7, #1
1070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2315              		.loc 1 1070 0
 2316 000a 85B0     		sub	sp, sp, #20
 2317              	.LCFI9:
 2318              		.cfi_def_cfa_offset 56
1070:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2319              		.loc 1 1070 0
 2320 000c 0C46     		mov	r4, r1
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 2321              		.loc 1 1075 0
 2322 000e F180     		strh	r1, [r6, #6]	@ movhi
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 2323              		.loc 1 1077 0
 2324 0010 03D0     		beq	.L255
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 2325              		.loc 1 1077 0 is_stmt 0 discriminator 1
 2326 0012 0568     		ldr	r5, [r0, #0]
 2327 0014 AB69     		ldr	r3, [r5, #24]
 2328 0016 9F42     		cmp	r7, r3
 2329 0018 03D3     		bcc	.L263
 2330              	.LVL270:
 2331              	.L255:
 2332              	.LBB358:
 2333              	.LBB359:
1094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_INT_ERR;
 2334              		.loc 1 1094 0 is_stmt 1
 2335 001a 0220     		movs	r0, #2
 2336              	.L259:
 2337              	.LBE359:
 2338              	.LBE358:
1104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 2339              		.loc 1 1104 0
 2340 001c 05B0     		add	sp, sp, #20
 2341 001e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 2342              	.LVL271:
 2343              	.L263:
1079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!clst && dj->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 2344              		.loc 1 1079 0
 2345 0022 B7B9     		cbnz	r7, .L233
1079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!clst && dj->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 2346              		.loc 1 1079 0 is_stmt 0 discriminator 1
 2347 0024 2A78     		ldrb	r2, [r5, #0]	@ zero_extendqisi2
 2348 0026 032A     		cmp	r2, #3
 2349 0028 10D0     		beq	.L264
 2350              	.L234:
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 2351              		.loc 1 1084 0 is_stmt 1
 2352 002a 2B89     		ldrh	r3, [r5, #8]
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 2353              		.loc 1 1083 0
 2354 002c 0022     		movs	r2, #0
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 2355              		.loc 1 1084 0
 2356 002e A342     		cmp	r3, r4
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 2357              		.loc 1 1083 0
 2358 0030 F260     		str	r2, [r6, #12]
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 2359              		.loc 1 1084 0
 2360 0032 F2D9     		bls	.L255
1086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = dj->fs->dirbase + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 2361              		.loc 1 1086 0
 2362 0034 6B6A     		ldr	r3, [r5, #36]
 2363 0036 03EB1413 		add	r3, r3, r4, lsr #4
 2364 003a 3361     		str	r3, [r6, #16]
 2365              	.LVL272:
 2366              	.L235:
1101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (idx % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 2367              		.loc 1 1101 0
 2368 003c 04F00F04 		and	r4, r4, #15
 2369              	.LVL273:
 2370 0040 05EB4415 		add	r5, r5, r4, lsl #5
 2371 0044 3035     		adds	r5, r5, #48
 2372 0046 7561     		str	r5, [r6, #20]
1103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;	/* Seek succeeded */
 2373              		.loc 1 1103 0
 2374 0048 0020     		movs	r0, #0
 2375 004a E7E7     		b	.L259
 2376              	.LVL274:
 2377              	.L264:
1080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		clst = dj->fs->dirbase;
 2378              		.loc 1 1080 0
 2379 004c 6F6A     		ldr	r7, [r5, #36]
 2380              	.LVL275:
1082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {	/* Static table (root-dir in FAT12/16) */
 2381              		.loc 1 1082 0
 2382 004e 002F     		cmp	r7, #0
 2383 0050 EBD0     		beq	.L234
 2384              	.L233:
1089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ic = SS(dj->fs) / SZ_DIR * dj->fs->csize;	/* Entries per cluster */
 2385              		.loc 1 1089 0
 2386 0052 95F80280 		ldrb	r8, [r5, #2]	@ zero_extendqisi2
 2387 0056 4FEA0818 		lsl	r8, r8, #4
 2388              	.LVL276:
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 2389              		.loc 1 1090 0
 2390 005a 4445     		cmp	r4, r8
 2391 005c 4BD3     		bcc	.L236
 2392              	.LVL277:
 2393              	.LBB376:
 2394              	.LBB373:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 2395              		.loc 1 828 0
 2396 005e 012F     		cmp	r7, #1
 2397 0060 DBD9     		bls	.L255
 2398 0062 BB42     		cmp	r3, r7
 2399 0064 D9D9     		bls	.L255
 2400              	.LVL278:
 2401              	.L257:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 2402              		.loc 1 831 0
 2403 0066 95F800A0 		ldrb	sl, [r5, #0]	@ zero_extendqisi2
 2404 006a BAF1020F 		cmp	sl, #2
 2405 006e 6DD0     		beq	.L239
 2406 0070 BAF1030F 		cmp	sl, #3
 2407 0074 4ED0     		beq	.L240
 2408 0076 BAF1010F 		cmp	sl, #1
 2409 007a 01D0     		beq	.L265
 2410              	.L237:
 2411              	.LVL279:
 2412              	.LBE373:
 2413              	.LBE376:
1092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 2414              		.loc 1 1092 0
 2415 007c 0120     		movs	r0, #1
 2416 007e CDE7     		b	.L259
 2417              	.LVL280:
 2418              	.L265:
 2419              	.LBB377:
 2420              	.LBB374:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2421              		.loc 1 834 0
 2422 0080 296A     		ldr	r1, [r5, #32]
 2423 0082 5C4A     		ldr	r2, .L268
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 2424              		.loc 1 833 0
 2425 0084 07EB570B 		add	fp, r7, r7, lsr #1
 2426              	.LVL281:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2427              		.loc 1 834 0
 2428 0088 2846     		mov	r0, r5
 2429 008a 01EB5B21 		add	r1, r1, fp, lsr #9
 2430 008e 9047     		blx	r2
 2431              	.LVL282:
 2432 0090 0028     		cmp	r0, #0
 2433 0092 F3D1     		bne	.L237
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 2434              		.loc 1 835 0
 2435 0094 4FEACB52 		lsl	r2, fp, #23
 2436 0098 D20D     		lsrs	r2, r2, #23
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2437              		.loc 1 836 0
 2438 009a 296A     		ldr	r1, [r5, #32]
 2439              	.LBB360:
 2440              	.LBB361:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 2441              		.loc 1 727 0
 2442 009c D5F82C90 		ldr	r9, [r5, #44]
 2443              	.LBE361:
 2444              	.LBE360:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 2445              		.loc 1 835 0
 2446 00a0 AA18     		adds	r2, r5, r2
 2447 00a2 0BF1010B 		add	fp, fp, #1
 2448              	.LVL283:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2449              		.loc 1 836 0
 2450 00a6 01EB5B21 		add	r1, r1, fp, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 2451              		.loc 1 835 0
 2452 00aa 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2453              		.loc 1 836 0
 2454 00ae 0091     		str	r1, [sp, #0]
 2455              	.LBB368:
 2456              	.LBB365:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 2457              		.loc 1 728 0
 2458 00b0 4945     		cmp	r1, r9
 2459              	.LBE365:
 2460              	.LBE368:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 2461              		.loc 1 835 0
 2462 00b2 0192     		str	r2, [sp, #4]
 2463              	.LVL284:
 2464              	.LBB369:
 2465              	.LBB366:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 2466              		.loc 1 728 0
 2467 00b4 05D0     		beq	.L252
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 2468              		.loc 1 730 0
 2469 00b6 2A79     		ldrb	r2, [r5, #4]	@ zero_extendqisi2
 2470 00b8 002A     		cmp	r2, #0
 2471 00ba 68D1     		bne	.L243
 2472              	.LVL285:
 2473              	.L246:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 2474              		.loc 1 743 0
 2475 00bc 009A     		ldr	r2, [sp, #0]
 2476 00be 002A     		cmp	r2, #0
 2477 00c0 57D1     		bne	.L266
 2478              	.L252:
 2479              	.LBE366:
 2480              	.LBE369:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 2481              		.loc 1 837 0
 2482 00c2 4FEACB5B 		lsl	fp, fp, #23
 2483              	.LVL286:
 2484 00c6 4FEADB5B 		lsr	fp, fp, #23
 2485 00ca 5D44     		add	r5, r5, fp
 2486              	.LVL287:
 2487 00cc DDF804C0 		ldr	ip, [sp, #4]
 2488 00d0 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2489              		.loc 1 838 0
 2490 00d4 FF07     		lsls	r7, r7, #31
 2491              	.LVL288:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 2492              		.loc 1 837 0
 2493 00d6 4CEA0323 		orr	r3, ip, r3, lsl #8
 2494              	.LVL289:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2495              		.loc 1 838 0
 2496 00da 40F18880 		bpl	.L248
 2497 00de 1F09     		lsrs	r7, r3, #4
 2498              	.LVL290:
 2499              	.L249:
 2500              	.LBE374:
 2501              	.LBE377:
1093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst < 2 || clst >= dj->fs->n_fatent)	/* Reached to end of table or int error */
 2502              		.loc 1 1093 0
 2503 00e0 012F     		cmp	r7, #1
 2504 00e2 9AD9     		bls	.L255
1093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst < 2 || clst >= dj->fs->n_fatent)	/* Reached to end of table or int error */
 2505              		.loc 1 1093 0 is_stmt 0 discriminator 1
 2506 00e4 3568     		ldr	r5, [r6, #0]
 2507 00e6 AB69     		ldr	r3, [r5, #24]
 2508 00e8 BB42     		cmp	r3, r7
 2509 00ea 96D9     		bls	.L255
1095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			idx -= ic;
 2510              		.loc 1 1095 0 is_stmt 1
 2511 00ec C8EB0404 		rsb	r4, r8, r4
 2512 00f0 A4B2     		uxth	r4, r4
 2513              	.LVL291:
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 2514              		.loc 1 1090 0
 2515 00f2 A045     		cmp	r8, r4
 2516 00f4 B7D9     		bls	.L257
 2517              	.LVL292:
 2518              	.L236:
 2519              	.LBB378:
 2520              	.LBB379:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 2521              		.loc 1 807 0
 2522 00f6 AB69     		ldr	r3, [r5, #24]
 2523              	.LBE379:
 2524              	.LBE378:
1097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 2525              		.loc 1 1097 0
 2526 00f8 F760     		str	r7, [r6, #12]
 2527              	.LVL293:
 2528              	.LBB381:
 2529              	.LBB380:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 2530              		.loc 1 807 0
 2531 00fa 023B     		subs	r3, r3, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 2532              		.loc 1 806 0
 2533 00fc 023F     		subs	r7, r7, #2
 2534              	.LVL294:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 2535              		.loc 1 807 0
 2536 00fe 9F42     		cmp	r7, r3
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 2537              		.loc 1 808 0
 2538 0100 3DBF     		ittte	cc
 2539 0102 AA78     		ldrbcc	r2, [r5, #2]	@ zero_extendqisi2
 2540 0104 AB6A     		ldrcc	r3, [r5, #40]
 2541 0106 02FB0737 		mlacc	r7, r2, r7, r3
 2542              	.LVL295:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 2543              		.loc 1 807 0
 2544 010a 0027     		movcs	r7, #0
 2545              	.LBE380:
 2546              	.LBE381:
1098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = clust2sect(dj->fs, clst) + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 2547              		.loc 1 1098 0
 2548 010c 07EB1417 		add	r7, r7, r4, lsr #4
 2549 0110 3761     		str	r7, [r6, #16]
 2550 0112 93E7     		b	.L235
 2551              	.LVL296:
 2552              	.L240:
 2553              	.LBB382:
 2554              	.LBB375:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 2555              		.loc 1 846 0
 2556 0114 296A     		ldr	r1, [r5, #32]
 2557 0116 374B     		ldr	r3, .L268
 2558 0118 2846     		mov	r0, r5
 2559 011a 01EBD711 		add	r1, r1, r7, lsr #7
 2560 011e 9847     		blx	r3
 2561              	.LVL297:
 2562 0120 0028     		cmp	r0, #0
 2563 0122 ABD1     		bne	.L237
 2564              	.LVL298:
 2565              	.LBB370:
 2566              	.LBB371:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 2567              		.loc 1 847 0
 2568 0124 7F06     		lsls	r7, r7, #25
 2569              	.LVL299:
 2570 0126 FF0D     		lsrs	r7, r7, #23
 2571 0128 07F13003 		add	r3, r7, #48
 2572 012c EB18     		adds	r3, r5, r3
 2573              	.LVL300:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 2574              		.loc 1 848 0
 2575 012e ED19     		adds	r5, r5, r7
 2576              	.LVL301:
 2577 0130 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 2578 0132 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 2579 0134 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 2580 0136 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 2581              	.LVL302:
 2582 013a 1206     		lsls	r2, r2, #24
 2583 013c 42EA0042 		orr	r2, r2, r0, lsl #16
 2584 0140 42EA0127 		orr	r7, r2, r1, lsl #8
 2585 0144 1F43     		orrs	r7, r7, r3
 2586 0146 27F07047 		bic	r7, r7, #-268435456
 2587 014a C9E7     		b	.L249
 2588              	.LVL303:
 2589              	.L239:
 2590              	.LBE371:
 2591              	.LBE370:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 2592              		.loc 1 841 0
 2593 014c 296A     		ldr	r1, [r5, #32]
 2594 014e 294B     		ldr	r3, .L268
 2595 0150 2846     		mov	r0, r5
 2596 0152 01EB1721 		add	r1, r1, r7, lsr #8
 2597 0156 9847     		blx	r3
 2598              	.LVL304:
 2599 0158 0028     		cmp	r0, #0
 2600 015a 8FD1     		bne	.L237
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 2601              		.loc 1 842 0
 2602 015c 3F06     		lsls	r7, r7, #24
 2603              	.LVL305:
 2604 015e FF0D     		lsrs	r7, r7, #23
 2605              	.LVL306:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 2606              		.loc 1 843 0
 2607 0160 EB19     		adds	r3, r5, r7
 2608 0162 1D46     		mov	r5, r3
 2609              	.LVL307:
 2610 0164 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 2611 0168 95F83170 		ldrb	r7, [r5, #49]	@ zero_extendqisi2
 2612 016c 43EA0727 		orr	r7, r3, r7, lsl #8
 2613 0170 B6E7     		b	.L249
 2614              	.LVL308:
 2615              	.L266:
 2616              	.LBB372:
 2617              	.LBB367:
 2618              	.LBB362:
 2619              	.LBB363:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 2620              		.loc 1 744 0
 2621 0172 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 2622 0174 009A     		ldr	r2, [sp, #0]
 2623 0176 DFF880C0 		ldr	ip, .L268+4
 2624 017a 05F13001 		add	r1, r5, #48
 2625 017e 0123     		movs	r3, #1
 2626 0180 E047     		blx	ip
 2627              	.LVL309:
 2628 0182 0028     		cmp	r0, #0
 2629 0184 7FF47AAF 		bne	.L237
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 2630              		.loc 1 746 0
 2631 0188 009A     		ldr	r2, [sp, #0]
 2632 018a EA62     		str	r2, [r5, #44]
 2633 018c 99E7     		b	.L252
 2634              	.LVL310:
 2635              	.L243:
 2636              	.LBE363:
 2637              	.LBE362:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 2638              		.loc 1 731 0
 2639 018e 05F1300C 		add	ip, r5, #48
 2640 0192 CDF808C0 		str	ip, [sp, #8]
 2641 0196 6146     		mov	r1, ip
 2642              	.LVL311:
 2643 0198 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 2644 019a DFF860C0 		ldr	ip, .L268+8
 2645 019e 4A46     		mov	r2, r9
 2646 01a0 5346     		mov	r3, sl
 2647 01a2 E047     		blx	ip
 2648              	.LVL312:
 2649 01a4 0028     		cmp	r0, #0
 2650 01a6 7FF469AF 		bne	.L237
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2651              		.loc 1 734 0
 2652 01aa EB69     		ldr	r3, [r5, #28]
 2653 01ac 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 2654              		.loc 1 733 0
 2655 01ae 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 2656              		.loc 1 734 0
 2657 01b0 9A18     		adds	r2, r3, r2
 2658 01b2 9145     		cmp	r9, r2
 2659 01b4 82D2     		bcs	.L246
 2660              	.LBB364:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2661              		.loc 1 736 0
 2662 01b6 95F803C0 		ldrb	ip, [r5, #3]	@ zero_extendqisi2
 2663              	.LVL313:
 2664 01ba BCF1010F 		cmp	ip, #1
 2665 01be 7FF67DAF 		bls	.L246
 2666 01c2 0394     		str	r4, [sp, #12]
 2667 01c4 E246     		mov	sl, ip
 2668 01c6 029C     		ldr	r4, [sp, #8]
 2669 01c8 00E0     		b	.L260
 2670              	.LVL314:
 2671              	.L267:
 2672 01ca EB69     		ldr	r3, [r5, #28]
 2673              	.LVL315:
 2674              	.L260:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 2675              		.loc 1 737 0
 2676 01cc 9944     		add	r9, r9, r3
 2677              	.LVL316:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2678              		.loc 1 736 0
 2679 01ce 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2680              		.loc 1 738 0
 2681 01d2 0123     		movs	r3, #1
 2682 01d4 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 2683 01d6 DFF824C0 		ldr	ip, .L268+8
 2684 01da 2146     		mov	r1, r4
 2685 01dc 4A46     		mov	r2, r9
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2686              		.loc 1 736 0
 2687 01de 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 2688              		.loc 1 738 0
 2689 01e2 E047     		blx	ip
 2690              	.LVL317:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 2691              		.loc 1 736 0
 2692 01e4 BAF1010F 		cmp	sl, #1
 2693 01e8 EFD8     		bhi	.L267
 2694 01ea 039C     		ldr	r4, [sp, #12]
 2695 01ec 66E7     		b	.L246
 2696              	.LVL318:
 2697              	.L248:
 2698              	.LBE364:
 2699              	.LBE367:
 2700              	.LBE372:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2701              		.loc 1 838 0
 2702 01ee 1F05     		lsls	r7, r3, #20
 2703 01f0 3F0D     		lsrs	r7, r7, #20
 2704 01f2 75E7     		b	.L249
 2705              	.L269:
 2706              		.align	2
 2707              	.L268:
 2708 01f4 00000000 		.word	move_window
 2709 01f8 00000000 		.word	disk_read
 2710 01fc 00000000 		.word	disk_write
 2711              	.LBE375:
 2712              	.LBE382:
 2713              		.cfi_endproc
 2714              	.LFE11:
 2716              		.section	.text.clust2sect,"ax",%progbits
 2717              		.align	2
 2718              		.global	clust2sect
 2719              		.thumb
 2720              		.thumb_func
 2722              	clust2sect:
 2723              	.LFB6:
 805:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2724              		.loc 1 805 0
 2725              		.cfi_startproc
 2726              		@ args = 0, pretend = 0, frame = 0
 2727              		@ frame_needed = 0, uses_anonymous_args = 0
 2728              		@ link register save eliminated.
 2729              	.LVL319:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 2730              		.loc 1 807 0
 2731 0000 8369     		ldr	r3, [r0, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 2732              		.loc 1 806 0
 2733 0002 0239     		subs	r1, r1, #2
 2734              	.LVL320:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 2735              		.loc 1 807 0
 2736 0004 023B     		subs	r3, r3, #2
 2737 0006 9942     		cmp	r1, r3
 2738 0008 04D2     		bcs	.L272
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 2739              		.loc 1 808 0
 2740 000a 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 2741 000c 836A     		ldr	r3, [r0, #40]
 2742 000e 02FB0130 		mla	r0, r2, r1, r3
 2743              	.LVL321:
 2744 0012 7047     		bx	lr
 2745              	.LVL322:
 2746              	.L272:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 2747              		.loc 1 807 0
 2748 0014 0020     		movs	r0, #0
 2749              	.LVL323:
 809:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 2750              		.loc 1 809 0
 2751 0016 7047     		bx	lr
 2752              		.cfi_endproc
 2753              	.LFE6:
 2755              		.section	.text.get_fat,"ax",%progbits
 2756              		.align	2
 2757              		.global	get_fat
 2758              		.thumb
 2759              		.thumb_func
 2761              	get_fat:
 2762              	.LFB7:
 823:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2763              		.loc 1 823 0
 2764              		.cfi_startproc
 2765              		@ args = 0, pretend = 0, frame = 0
 2766              		@ frame_needed = 0, uses_anonymous_args = 0
 2767              	.LVL324:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 2768              		.loc 1 828 0
 2769 0000 0129     		cmp	r1, #1
 823:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2770              		.loc 1 823 0
 2771 0002 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2772              	.LCFI10:
 2773              		.cfi_def_cfa_offset 24
 2774              		.cfi_offset 4, -24
 2775              		.cfi_offset 5, -20
 2776              		.cfi_offset 6, -16
 2777              		.cfi_offset 7, -12
 2778              		.cfi_offset 8, -8
 2779              		.cfi_offset 14, -4
 823:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2780              		.loc 1 823 0
 2781 0006 0C46     		mov	r4, r1
 2782 0008 0546     		mov	r5, r0
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 2783              		.loc 1 828 0
 2784 000a 0DD9     		bls	.L282
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 2785              		.loc 1 828 0 is_stmt 0 discriminator 1
 2786 000c 8369     		ldr	r3, [r0, #24]
 2787 000e 9942     		cmp	r1, r3
 2788 0010 0AD2     		bcs	.L282
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 2789              		.loc 1 831 0 is_stmt 1
 2790 0012 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 2791 0014 022B     		cmp	r3, #2
 2792 0016 48D0     		beq	.L276
 2793 0018 032B     		cmp	r3, #3
 2794 001a 2AD0     		beq	.L277
 2795 001c 012B     		cmp	r3, #1
 2796 001e 06D0     		beq	.L285
 2797              	.LVL325:
 2798              	.L284:
 851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return 0xFFFFFFFF;	/* An error occurred at the disk I/O layer */
 2799              		.loc 1 851 0
 2800 0020 4FF0FF30 		mov	r0, #-1
 852:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 2801              		.loc 1 852 0
 2802 0024 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2803              	.LVL326:
 2804              	.L282:
 829:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 1;
 2805              		.loc 1 829 0
 2806 0028 0120     		movs	r0, #1
 2807              	.LVL327:
 2808 002a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2809              	.LVL328:
 2810              	.L285:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2811              		.loc 1 834 0
 2812 002e 016A     		ldr	r1, [r0, #32]
 2813              	.LVL329:
 2814 0030 294F     		ldr	r7, .L286
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 2815              		.loc 1 833 0
 2816 0032 04EB5406 		add	r6, r4, r4, lsr #1
 2817              	.LVL330:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2818              		.loc 1 834 0
 2819 0036 01EB5621 		add	r1, r1, r6, lsr #9
 2820 003a B847     		blx	r7
 2821              	.LVL331:
 2822 003c 0028     		cmp	r0, #0
 2823 003e EFD1     		bne	.L284
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 2824              		.loc 1 835 0
 2825 0040 F305     		lsls	r3, r6, #23
 2826 0042 DB0D     		lsrs	r3, r3, #23
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2827              		.loc 1 836 0
 2828 0044 296A     		ldr	r1, [r5, #32]
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 2829              		.loc 1 835 0
 2830 0046 EB18     		adds	r3, r5, r3
 2831 0048 0136     		adds	r6, r6, #1
 2832              	.LVL332:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2833              		.loc 1 836 0
 2834 004a 2846     		mov	r0, r5
 2835 004c 01EB5621 		add	r1, r1, r6, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 2836              		.loc 1 835 0
 2837 0050 93F83080 		ldrb	r8, [r3, #48]	@ zero_extendqisi2
 2838              	.LVL333:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 2839              		.loc 1 836 0
 2840 0054 B847     		blx	r7
 2841              	.LVL334:
 2842 0056 0028     		cmp	r0, #0
 2843 0058 E2D1     		bne	.L284
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 2844              		.loc 1 837 0
 2845 005a F605     		lsls	r6, r6, #23
 2846              	.LVL335:
 2847 005c F60D     		lsrs	r6, r6, #23
 2848 005e AD19     		adds	r5, r5, r6
 2849              	.LVL336:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2850              		.loc 1 838 0
 2851 0060 E307     		lsls	r3, r4, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 2852              		.loc 1 837 0
 2853 0062 95F83000 		ldrb	r0, [r5, #48]	@ zero_extendqisi2
 2854 0066 48EA0020 		orr	r0, r8, r0, lsl #8
 2855              	.LVL337:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2856              		.loc 1 838 0
 2857 006a 31D5     		bpl	.L280
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2858              		.loc 1 838 0 is_stmt 0 discriminator 1
 2859 006c 0009     		lsrs	r0, r0, #4
 2860              	.LVL338:
 2861 006e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2862              	.LVL339:
 2863              	.L277:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 2864              		.loc 1 846 0 is_stmt 1
 2865 0072 016A     		ldr	r1, [r0, #32]
 2866              	.LVL340:
 2867 0074 184B     		ldr	r3, .L286
 2868 0076 01EBD411 		add	r1, r1, r4, lsr #7
 2869 007a 9847     		blx	r3
 2870              	.LVL341:
 2871 007c 0028     		cmp	r0, #0
 2872 007e CFD1     		bne	.L284
 2873              	.LVL342:
 2874              	.LBB385:
 2875              	.LBB386:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 2876              		.loc 1 847 0
 2877 0080 6406     		lsls	r4, r4, #25
 2878              	.LVL343:
 2879 0082 E40D     		lsrs	r4, r4, #23
 2880 0084 04F13003 		add	r3, r4, #48
 2881 0088 EB18     		adds	r3, r5, r3
 2882              	.LVL344:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 2883              		.loc 1 848 0
 2884 008a 2C19     		adds	r4, r5, r4
 2885 008c DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 2886 008e 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 2887 0090 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 2888 0092 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 2889              	.LVL345:
 2890 0096 1206     		lsls	r2, r2, #24
 2891 0098 42EA0142 		orr	r2, r2, r1, lsl #16
 2892 009c 42EA0020 		orr	r0, r2, r0, lsl #8
 2893 00a0 1843     		orrs	r0, r0, r3
 2894 00a2 20F07040 		bic	r0, r0, #-268435456
 2895 00a6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2896              	.LVL346:
 2897              	.L276:
 2898              	.LBE386:
 2899              	.LBE385:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 2900              		.loc 1 841 0
 2901 00aa 016A     		ldr	r1, [r0, #32]
 2902              	.LVL347:
 2903 00ac 0A4B     		ldr	r3, .L286
 2904 00ae 01EB1421 		add	r1, r1, r4, lsr #8
 2905 00b2 9847     		blx	r3
 2906              	.LVL348:
 2907 00b4 0028     		cmp	r0, #0
 2908 00b6 B3D1     		bne	.L284
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 2909              		.loc 1 842 0
 2910 00b8 2406     		lsls	r4, r4, #24
 2911              	.LVL349:
 2912 00ba E40D     		lsrs	r4, r4, #23
 2913              	.LVL350:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 2914              		.loc 1 843 0
 2915 00bc 2B19     		adds	r3, r5, r4
 2916 00be 1C46     		mov	r4, r3
 2917              	.LVL351:
 2918 00c0 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 2919 00c4 94F83100 		ldrb	r0, [r4, #49]	@ zero_extendqisi2
 2920 00c8 43EA0020 		orr	r0, r3, r0, lsl #8
 2921 00cc BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2922              	.LVL352:
 2923              	.L280:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 2924              		.loc 1 838 0 discriminator 2
 2925 00d0 0005     		lsls	r0, r0, #20
 2926              	.LVL353:
 2927 00d2 000D     		lsrs	r0, r0, #20
 2928 00d4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2929              	.L287:
 2930              		.align	2
 2931              	.L286:
 2932 00d8 00000000 		.word	move_window
 2933              		.cfi_endproc
 2934              	.LFE7:
 2936              		.section	.text.create_chain,"ax",%progbits
 2937              		.align	2
 2938              		.thumb
 2939              		.thumb_func
 2941              	create_chain:
 2942              	.LFB10:
 983:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 2943              		.loc 1 983 0
 2944              		.cfi_startproc
 2945              		@ args = 0, pretend = 0, frame = 16
 2946              		@ frame_needed = 0, uses_anonymous_args = 0
 2947              	.LVL354:
 2948 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 2949              	.LCFI11:
 2950              		.cfi_def_cfa_offset 36
 2951              		.cfi_offset 4, -36
 2952              		.cfi_offset 5, -32
 2953              		.cfi_offset 6, -28
 2954              		.cfi_offset 7, -24
 2955              		.cfi_offset 8, -20
 2956              		.cfi_offset 9, -16
 2957              		.cfi_offset 10, -12
 2958              		.cfi_offset 11, -8
 2959              		.cfi_offset 14, -4
 2960 0004 0546     		mov	r5, r0
 2961 0006 85B0     		sub	sp, sp, #20
 2962              	.LCFI12:
 2963              		.cfi_def_cfa_offset 56
 988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {		/* Create a new chain */
 2964              		.loc 1 988 0
 2965 0008 8A46     		mov	sl, r1
 2966 000a 0029     		cmp	r1, #0
 2967 000c 40F09180 		bne	.L289
 989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 2968              		.loc 1 989 0
 2969 0010 C668     		ldr	r6, [r0, #12]
 2970              	.LVL355:
 2971 0012 8369     		ldr	r3, [r0, #24]
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 2972              		.loc 1 990 0
 2973 0014 BEB1     		cbz	r6, .L368
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 2974              		.loc 1 990 0 is_stmt 0 discriminator 2
 2975 0016 9E42     		cmp	r6, r3
 2976 0018 28BF     		it	cs
 2977 001a 0126     		movcs	r6, #1
 2978              	.LVL356:
 2979              	.L291:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 2980              		.loc 1 990 0
 2981 001c 3446     		mov	r4, r6
 2982              	.LVL357:
 2983              	.L323:
1001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl++;							/* Next cluster */
 2984              		.loc 1 1001 0 is_stmt 1
 2985 001e 0134     		adds	r4, r4, #1
 2986              	.LVL358:
1002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Wrap around */
 2987              		.loc 1 1002 0
 2988 0020 9C42     		cmp	r4, r3
 2989 0022 12D3     		bcc	.L294
 2990              	.LVL359:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 2991              		.loc 1 1004 0
 2992 0024 012E     		cmp	r6, #1
 2993 0026 14D9     		bls	.L322
 2994              	.LVL360:
 2995              	.LBB413:
 2996              	.LBB414:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 2997              		.loc 1 828 0
 2998 0028 022B     		cmp	r3, #2
 2999 002a 10D9     		bls	.L346
1003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ncl = 2;
 3000              		.loc 1 1003 0
 3001 002c 0224     		movs	r4, #2
 3002              	.LVL361:
 3003              	.L297:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 3004              		.loc 1 831 0
 3005 002e 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 3006 0030 022B     		cmp	r3, #2
 3007 0032 68D0     		beq	.L299
 3008 0034 032B     		cmp	r3, #3
 3009 0036 44D0     		beq	.L300
 3010 0038 012B     		cmp	r3, #1
 3011 003a 0CD0     		beq	.L369
 3012              	.L329:
 3013              	.LBE414:
 3014              	.LBE413:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 3015              		.loc 1 1024 0
 3016 003c 4FF0FF30 		mov	r0, #-1
 3017              	.L351:
1028:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 3018              		.loc 1 1028 0
 3019 0040 05B0     		add	sp, sp, #20
 3020 0042 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 3021              	.LVL362:
 3022              	.L368:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 3023              		.loc 1 990 0
 3024 0046 0126     		movs	r6, #1
 3025              	.LVL363:
 3026 0048 E8E7     		b	.L291
 3027              	.LVL364:
 3028              	.L294:
 3029              	.LBB449:
 3030              	.LBB444:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 3031              		.loc 1 828 0
 3032 004a 012C     		cmp	r4, #1
 3033 004c EFD8     		bhi	.L297
 3034              	.LVL365:
 3035              	.L346:
 3036              	.LBE444:
 3037              	.LBE449:
 3038              	.LBB450:
 3039              	.LBB451:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 3040              		.loc 1 1024 0
 3041 004e 0120     		movs	r0, #1
 3042 0050 F6E7     		b	.L351
 3043              	.L322:
 3044              	.LBE451:
 3045              	.LBE450:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 3046              		.loc 1 1004 0
 3047 0052 0020     		movs	r0, #0
 3048 0054 F4E7     		b	.L351
 3049              	.L369:
 3050              	.LVL366:
 3051              	.LBB454:
 3052              	.LBB445:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3053              		.loc 1 834 0
 3054 0056 296A     		ldr	r1, [r5, #32]
 3055              	.LBB415:
 3056              	.LBB416:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 3057              		.loc 1 727 0
 3058 0058 EF6A     		ldr	r7, [r5, #44]
 3059              	.LBE416:
 3060              	.LBE415:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 3061              		.loc 1 833 0
 3062 005a 04EB540B 		add	fp, r4, r4, lsr #1
 3063              	.LVL367:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3064              		.loc 1 834 0
 3065 005e 01EB5B29 		add	r9, r1, fp, lsr #9
 3066              	.LVL368:
 3067              	.LBB422:
 3068              	.LBB420:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 3069              		.loc 1 728 0
 3070 0062 B945     		cmp	r9, r7
 3071 0064 08D0     		beq	.L330
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 3072              		.loc 1 730 0
 3073 0066 2A79     		ldrb	r2, [r5, #4]	@ zero_extendqisi2
 3074 0068 002A     		cmp	r2, #0
 3075 006a 40F0AA80 		bne	.L302
 3076              	.L305:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 3077              		.loc 1 743 0
 3078 006e B9F1000F 		cmp	r9, #0
 3079 0072 40F0D780 		bne	.L370
 3080              	.L359:
 3081 0076 296A     		ldr	r1, [r5, #32]
 3082              	.LVL369:
 3083              	.L330:
 3084              	.LBE420:
 3085              	.LBE422:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 3086              		.loc 1 835 0
 3087 0078 4FEACB53 		lsl	r3, fp, #23
 3088 007c DB0D     		lsrs	r3, r3, #23
 3089 007e EB18     		adds	r3, r5, r3
 3090 0080 0BF1010B 		add	fp, fp, #1
 3091              	.LVL370:
 3092 0084 93F83070 		ldrb	r7, [r3, #48]	@ zero_extendqisi2
 3093              	.LVL371:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3094              		.loc 1 836 0
 3095 0088 A54B     		ldr	r3, .L377
 3096 008a 2846     		mov	r0, r5
 3097 008c 01EB5B21 		add	r1, r1, fp, lsr #9
 3098 0090 9847     		blx	r3
 3099              	.LVL372:
 3100 0092 0028     		cmp	r0, #0
 3101 0094 D2D1     		bne	.L329
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 3102              		.loc 1 837 0
 3103 0096 4FEACB5B 		lsl	fp, fp, #23
 3104              	.LVL373:
 3105 009a 4FEADB5B 		lsr	fp, fp, #23
 3106 009e AB44     		add	fp, r5, fp
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3107              		.loc 1 838 0
 3108 00a0 E107     		lsls	r1, r4, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 3109              		.loc 1 837 0
 3110 00a2 9BF83030 		ldrb	r3, [fp, #48]	@ zero_extendqisi2
 3111 00a6 47EA0323 		orr	r3, r7, r3, lsl #8
 3112              	.LVL374:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3113              		.loc 1 838 0
 3114 00aa 40F13581 		bpl	.L307
 3115 00ae 1B09     		lsrs	r3, r3, #4
 3116              	.LVL375:
 3117              	.L308:
 3118              	.LBE445:
 3119              	.LBE454:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 3120              		.loc 1 1007 0
 3121 00b0 002B     		cmp	r3, #0
 3122 00b2 00F00681 		beq	.L371
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 3123              		.loc 1 1008 0 discriminator 1
 3124 00b6 012B     		cmp	r3, #1
 3125 00b8 C9D0     		beq	.L346
1010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
 3126              		.loc 1 1010 0
 3127 00ba B442     		cmp	r4, r6
 3128 00bc C9D0     		beq	.L322
 3129 00be AB69     		ldr	r3, [r5, #24]
 3130 00c0 ADE7     		b	.L323
 3131              	.L300:
 3132              	.LBB455:
 3133              	.LBB446:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 3134              		.loc 1 846 0
 3135 00c2 2B6A     		ldr	r3, [r5, #32]
 3136              	.LBB423:
 3137              	.LBB424:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 3138              		.loc 1 727 0
 3139 00c4 EF6A     		ldr	r7, [r5, #44]
 3140              	.LBE424:
 3141              	.LBE423:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 3142              		.loc 1 846 0
 3143 00c6 03EBD419 		add	r9, r3, r4, lsr #7
 3144              	.LVL376:
 3145              	.LBB430:
 3146              	.LBB428:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 3147              		.loc 1 728 0
 3148 00ca B945     		cmp	r9, r7
 3149 00cc 07D0     		beq	.L332
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 3150              		.loc 1 730 0
 3151 00ce 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 3152 00d0 002B     		cmp	r3, #0
 3153 00d2 40F0B580 		bne	.L315
 3154              	.L317:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 3155              		.loc 1 743 0
 3156 00d6 B9F1000F 		cmp	r9, #0
 3157 00da 40F0E580 		bne	.L372
 3158              	.LVL377:
 3159              	.L332:
 3160              	.LBE428:
 3161              	.LBE430:
 3162              	.LBB431:
 3163              	.LBB432:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 3164              		.loc 1 847 0
 3165 00de 6206     		lsls	r2, r4, #25
 3166 00e0 D20D     		lsrs	r2, r2, #23
 3167 00e2 02F13003 		add	r3, r2, #48
 3168 00e6 EB18     		adds	r3, r5, r3
 3169              	.LVL378:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 3170              		.loc 1 848 0
 3171 00e8 AA18     		adds	r2, r5, r2
 3172 00ea DF78     		ldrb	r7, [r3, #3]	@ zero_extendqisi2
 3173 00ec 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 3174 00ee 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 3175 00f0 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 3176 00f4 3B06     		lsls	r3, r7, #24
 3177              	.LVL379:
 3178 00f6 43EA0043 		orr	r3, r3, r0, lsl #16
 3179 00fa 43EA0123 		orr	r3, r3, r1, lsl #8
 3180 00fe 1343     		orrs	r3, r3, r2
 3181 0100 23F07043 		bic	r3, r3, #-268435456
 3182 0104 D4E7     		b	.L308
 3183              	.LVL380:
 3184              	.L299:
 3185              	.LBE432:
 3186              	.LBE431:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 3187              		.loc 1 841 0
 3188 0106 2B6A     		ldr	r3, [r5, #32]
 3189              	.LBB433:
 3190              	.LBB434:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 3191              		.loc 1 727 0
 3192 0108 EF6A     		ldr	r7, [r5, #44]
 3193              	.LBE434:
 3194              	.LBE433:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 3195              		.loc 1 841 0
 3196 010a 03EB1429 		add	r9, r3, r4, lsr #8
 3197              	.LVL381:
 3198              	.LBB440:
 3199              	.LBB438:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 3200              		.loc 1 728 0
 3201 010e B945     		cmp	r9, r7
 3202 0110 04D0     		beq	.L331
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 3203              		.loc 1 730 0
 3204 0112 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 3205 0114 BBB9     		cbnz	r3, .L310
 3206              	.L312:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 3207              		.loc 1 743 0
 3208 0116 B9F1000F 		cmp	r9, #0
 3209 011a 45D1     		bne	.L373
 3210              	.LVL382:
 3211              	.L331:
 3212              	.LBE438:
 3213              	.LBE440:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 3214              		.loc 1 842 0
 3215 011c 2306     		lsls	r3, r4, #24
 3216 011e DB0D     		lsrs	r3, r3, #23
 3217              	.LVL383:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 3218              		.loc 1 843 0
 3219 0120 EA18     		adds	r2, r5, r3
 3220 0122 1346     		mov	r3, r2
 3221              	.LVL384:
 3222 0124 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 3223 0128 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 3224 012c 42EA0323 		orr	r3, r2, r3, lsl #8
 3225 0130 BEE7     		b	.L308
 3226              	.LVL385:
 3227              	.L289:
 3228              	.LBE446:
 3229              	.LBE455:
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 3230              		.loc 1 993 0
 3231 0132 7C4B     		ldr	r3, .L377+4
 3232 0134 9847     		blx	r3
 3233              	.LVL386:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 3234              		.loc 1 994 0
 3235 0136 0128     		cmp	r0, #1
 3236 0138 89D9     		bls	.L346
 995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3237              		.loc 1 995 0
 3238 013a AB69     		ldr	r3, [r5, #24]
 3239 013c 9842     		cmp	r0, r3
 3240 013e FFF47FAF 		bcc	.L351
 3241 0142 5646     		mov	r6, sl
 3242 0144 6AE7     		b	.L291
 3243              	.LVL387:
 3244              	.L310:
 3245              	.LBB456:
 3246              	.LBB447:
 3247              	.LBB441:
 3248              	.LBB439:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 3249              		.loc 1 731 0
 3250 0146 05F1300C 		add	ip, r5, #48
 3251 014a 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3252 014c DFF8E081 		ldr	r8, .L377+16
 3253 0150 CDF800C0 		str	ip, [sp, #0]
 3254 0154 6146     		mov	r1, ip
 3255 0156 3A46     		mov	r2, r7
 3256 0158 0123     		movs	r3, #1
 3257 015a C047     		blx	r8
 3258              	.LVL388:
 3259 015c DDF800C0 		ldr	ip, [sp, #0]
 3260 0160 0028     		cmp	r0, #0
 3261 0162 7FF46BAF 		bne	.L329
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 3262              		.loc 1 734 0
 3263 0166 EB69     		ldr	r3, [r5, #28]
 3264 0168 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 3265              		.loc 1 733 0
 3266 016a 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 3267              		.loc 1 734 0
 3268 016c 9A18     		adds	r2, r3, r2
 3269 016e 9742     		cmp	r7, r2
 3270 0170 D1D2     		bcs	.L312
 3271              	.LBB435:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3272              		.loc 1 736 0
 3273 0172 95F803B0 		ldrb	fp, [r5, #3]	@ zero_extendqisi2
 3274              	.LVL389:
 3275 0176 BBF1010F 		cmp	fp, #1
 3276 017a CCD9     		bls	.L312
 3277 017c 0194     		str	r4, [sp, #4]
 3278 017e 4446     		mov	r4, r8
 3279 0180 E046     		mov	r8, ip
 3280 0182 00E0     		b	.L361
 3281              	.LVL390:
 3282              	.L374:
 3283 0184 EB69     		ldr	r3, [r5, #28]
 3284              	.LVL391:
 3285              	.L361:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 3286              		.loc 1 737 0
 3287 0186 FF18     		adds	r7, r7, r3
 3288              	.LVL392:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3289              		.loc 1 736 0
 3290 0188 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 3291              		.loc 1 738 0
 3292 018c 0123     		movs	r3, #1
 3293 018e 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3294 0190 4146     		mov	r1, r8
 3295 0192 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3296              		.loc 1 736 0
 3297 0194 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 3298              		.loc 1 738 0
 3299 0198 A047     		blx	r4
 3300              	.LVL393:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3301              		.loc 1 736 0
 3302 019a BBF1010F 		cmp	fp, #1
 3303 019e F1D8     		bhi	.L374
 3304 01a0 019C     		ldr	r4, [sp, #4]
 3305              	.LBE435:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 3306              		.loc 1 743 0
 3307 01a2 B9F1000F 		cmp	r9, #0
 3308 01a6 B9D0     		beq	.L331
 3309              	.LVL394:
 3310              	.L373:
 3311              	.LBB436:
 3312              	.LBB437:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 3313              		.loc 1 744 0
 3314 01a8 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3315 01aa 5F4F     		ldr	r7, .L377+8
 3316              	.LVL395:
 3317 01ac 05F13001 		add	r1, r5, #48
 3318 01b0 4A46     		mov	r2, r9
 3319 01b2 0123     		movs	r3, #1
 3320 01b4 B847     		blx	r7
 3321              	.LVL396:
 3322 01b6 0028     		cmp	r0, #0
 3323 01b8 7FF440AF 		bne	.L329
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 3324              		.loc 1 746 0
 3325 01bc C5F82C90 		str	r9, [r5, #44]
 3326 01c0 ACE7     		b	.L331
 3327              	.LVL397:
 3328              	.L302:
 3329              	.LBE437:
 3330              	.LBE436:
 3331              	.LBE439:
 3332              	.LBE441:
 3333              	.LBB442:
 3334              	.LBB421:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 3335              		.loc 1 731 0
 3336 01c2 05F13002 		add	r2, r5, #48
 3337 01c6 0192     		str	r2, [sp, #4]
 3338 01c8 1146     		mov	r1, r2
 3339 01ca 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3340 01cc DFF86081 		ldr	r8, .L377+16
 3341 01d0 3A46     		mov	r2, r7
 3342 01d2 C047     		blx	r8
 3343              	.LVL398:
 3344 01d4 0028     		cmp	r0, #0
 3345 01d6 7FF431AF 		bne	.L329
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 3346              		.loc 1 734 0
 3347 01da EB69     		ldr	r3, [r5, #28]
 3348 01dc 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 3349              		.loc 1 733 0
 3350 01de 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 3351              		.loc 1 734 0
 3352 01e0 9A18     		adds	r2, r3, r2
 3353 01e2 9742     		cmp	r7, r2
 3354 01e4 BFF443AF 		bcs	.L305
 3355              	.LBB417:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3356              		.loc 1 736 0
 3357 01e8 95F803C0 		ldrb	ip, [r5, #3]	@ zero_extendqisi2
 3358              	.LVL399:
 3359 01ec BCF1010F 		cmp	ip, #1
 3360 01f0 7FF63DAF 		bls	.L305
 3361 01f4 0296     		str	r6, [sp, #8]
 3362 01f6 0394     		str	r4, [sp, #12]
 3363 01f8 6646     		mov	r6, ip
 3364 01fa 4446     		mov	r4, r8
 3365 01fc DDF80480 		ldr	r8, [sp, #4]
 3366 0200 00E0     		b	.L360
 3367              	.LVL400:
 3368              	.L375:
 3369 0202 EB69     		ldr	r3, [r5, #28]
 3370              	.LVL401:
 3371              	.L360:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 3372              		.loc 1 737 0
 3373 0204 FF18     		adds	r7, r7, r3
 3374              	.LVL402:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3375              		.loc 1 736 0
 3376 0206 013E     		subs	r6, r6, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 3377              		.loc 1 738 0
 3378 0208 0123     		movs	r3, #1
 3379 020a 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3380 020c 4146     		mov	r1, r8
 3381 020e 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3382              		.loc 1 736 0
 3383 0210 F6B2     		uxtb	r6, r6
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 3384              		.loc 1 738 0
 3385 0212 A047     		blx	r4
 3386              	.LVL403:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3387              		.loc 1 736 0
 3388 0214 012E     		cmp	r6, #1
 3389 0216 F4D8     		bhi	.L375
 3390 0218 029E     		ldr	r6, [sp, #8]
 3391              	.LVL404:
 3392 021a 039C     		ldr	r4, [sp, #12]
 3393              	.LBE417:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 3394              		.loc 1 743 0
 3395 021c B9F1000F 		cmp	r9, #0
 3396 0220 3FF429AF 		beq	.L359
 3397              	.L370:
 3398              	.LVL405:
 3399              	.LBB418:
 3400              	.LBB419:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 3401              		.loc 1 744 0
 3402 0224 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3403 0226 404F     		ldr	r7, .L377+8
 3404              	.LVL406:
 3405 0228 05F13001 		add	r1, r5, #48
 3406 022c 4A46     		mov	r2, r9
 3407 022e 0123     		movs	r3, #1
 3408 0230 B847     		blx	r7
 3409              	.LVL407:
 3410 0232 0028     		cmp	r0, #0
 3411 0234 7FF402AF 		bne	.L329
 3412 0238 296A     		ldr	r1, [r5, #32]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 3413              		.loc 1 746 0
 3414 023a C5F82C90 		str	r9, [r5, #44]
 3415 023e 1BE7     		b	.L330
 3416              	.LVL408:
 3417              	.L315:
 3418              	.LBE419:
 3419              	.LBE418:
 3420              	.LBE421:
 3421              	.LBE442:
 3422              	.LBB443:
 3423              	.LBB429:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 3424              		.loc 1 731 0
 3425 0240 05F1300C 		add	ip, r5, #48
 3426 0244 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3427 0246 DFF8E880 		ldr	r8, .L377+16
 3428 024a CDF800C0 		str	ip, [sp, #0]
 3429 024e 6146     		mov	r1, ip
 3430 0250 3A46     		mov	r2, r7
 3431 0252 0123     		movs	r3, #1
 3432 0254 C047     		blx	r8
 3433              	.LVL409:
 3434 0256 DDF800C0 		ldr	ip, [sp, #0]
 3435 025a 0028     		cmp	r0, #0
 3436 025c 7FF4EEAE 		bne	.L329
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 3437              		.loc 1 734 0
 3438 0260 EB69     		ldr	r3, [r5, #28]
 3439 0262 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 3440              		.loc 1 733 0
 3441 0264 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 3442              		.loc 1 734 0
 3443 0266 9A18     		adds	r2, r3, r2
 3444 0268 9742     		cmp	r7, r2
 3445 026a BFF434AF 		bcs	.L317
 3446              	.LBB425:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3447              		.loc 1 736 0
 3448 026e 95F803B0 		ldrb	fp, [r5, #3]	@ zero_extendqisi2
 3449              	.LVL410:
 3450 0272 BBF1010F 		cmp	fp, #1
 3451 0276 7FF62EAF 		bls	.L317
 3452 027a 0194     		str	r4, [sp, #4]
 3453 027c 4446     		mov	r4, r8
 3454 027e E046     		mov	r8, ip
 3455 0280 00E0     		b	.L362
 3456              	.LVL411:
 3457              	.L376:
 3458 0282 EB69     		ldr	r3, [r5, #28]
 3459              	.LVL412:
 3460              	.L362:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 3461              		.loc 1 737 0
 3462 0284 FF18     		adds	r7, r7, r3
 3463              	.LVL413:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3464              		.loc 1 736 0
 3465 0286 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 3466              		.loc 1 738 0
 3467 028a 0123     		movs	r3, #1
 3468 028c 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3469 028e 4146     		mov	r1, r8
 3470 0290 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3471              		.loc 1 736 0
 3472 0292 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 3473              		.loc 1 738 0
 3474 0296 A047     		blx	r4
 3475              	.LVL414:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 3476              		.loc 1 736 0
 3477 0298 BBF1010F 		cmp	fp, #1
 3478 029c F1D8     		bhi	.L376
 3479 029e 019C     		ldr	r4, [sp, #4]
 3480              	.LBE425:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 3481              		.loc 1 743 0
 3482 02a0 B9F1000F 		cmp	r9, #0
 3483 02a4 3FF41BAF 		beq	.L332
 3484              	.LVL415:
 3485              	.L372:
 3486              	.LBB426:
 3487              	.LBB427:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 3488              		.loc 1 744 0
 3489 02a8 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3490 02aa 1F4F     		ldr	r7, .L377+8
 3491              	.LVL416:
 3492 02ac 05F13001 		add	r1, r5, #48
 3493 02b0 4A46     		mov	r2, r9
 3494 02b2 0123     		movs	r3, #1
 3495 02b4 B847     		blx	r7
 3496              	.LVL417:
 3497 02b6 0028     		cmp	r0, #0
 3498 02b8 7FF4C0AE 		bne	.L329
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 3499              		.loc 1 746 0
 3500 02bc C5F82C90 		str	r9, [r5, #44]
 3501 02c0 0DE7     		b	.L332
 3502              	.LVL418:
 3503              	.L371:
 3504              	.LBE427:
 3505              	.LBE426:
 3506              	.LBE429:
 3507              	.LBE443:
 3508              	.LBE447:
 3509              	.LBE456:
 3510              	.LBB457:
 3511              	.LBB458:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 3512              		.loc 1 873 0
 3513 02c2 AB69     		ldr	r3, [r5, #24]
 3514 02c4 A342     		cmp	r3, r4
 3515 02c6 7FF6C2AE 		bls	.L346
 3516 02ca 2846     		mov	r0, r5
 3517 02cc 2146     		mov	r1, r4
 3518 02ce 6FF07042 		mvn	r2, #-268435456
 3519 02d2 164E     		ldr	r6, .L377+12
 3520 02d4 B047     		blx	r6
 3521              	.LVL419:
 3522              	.LBE458:
 3523              	.LBE457:
1014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && clst != 0) {
 3524              		.loc 1 1014 0
 3525 02d6 D0B9     		cbnz	r0, .L328
1014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && clst != 0) {
 3526              		.loc 1 1014 0 is_stmt 0 discriminator 1
 3527 02d8 BAF1000F 		cmp	sl, #0
 3528 02dc 09D1     		bne	.L325
 3529              	.LVL420:
 3530              	.L327:
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 3531              		.loc 1 1019 0 is_stmt 1
 3532 02de 2B69     		ldr	r3, [r5, #16]
1018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 3533              		.loc 1 1018 0
 3534 02e0 EC60     		str	r4, [r5, #12]
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 3535              		.loc 1 1019 0
 3536 02e2 5A1C     		adds	r2, r3, #1
 3537 02e4 03D0     		beq	.L367
1020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->free_clust--;
 3538              		.loc 1 1020 0
 3539 02e6 013B     		subs	r3, r3, #1
 3540 02e8 2B61     		str	r3, [r5, #16]
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
 3541              		.loc 1 1021 0
 3542 02ea 0123     		movs	r3, #1
 3543 02ec 6B71     		strb	r3, [r5, #5]
 3544              	.L367:
 3545 02ee 2046     		mov	r0, r4
 3546 02f0 A6E6     		b	.L351
 3547              	.LVL421:
 3548              	.L325:
 3549              	.LBB459:
 3550              	.LBB452:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 3551              		.loc 1 873 0
 3552 02f2 BAF1010F 		cmp	sl, #1
 3553 02f6 7FF6AAAE 		bls	.L346
 3554 02fa AB69     		ldr	r3, [r5, #24]
 3555 02fc 9A45     		cmp	sl, r3
 3556 02fe BFF4A6AE 		bcs	.L346
 3557 0302 2846     		mov	r0, r5
 3558              	.LVL422:
 3559 0304 5146     		mov	r1, sl
 3560 0306 2246     		mov	r2, r4
 3561 0308 B047     		blx	r6
 3562              	.LVL423:
 3563              	.LBE452:
 3564              	.LBE459:
1017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 3565              		.loc 1 1017 0
 3566 030a 0028     		cmp	r0, #0
 3567 030c E7D0     		beq	.L327
 3568              	.LVL424:
 3569              	.L328:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 3570              		.loc 1 1024 0
 3571 030e 0128     		cmp	r0, #1
 3572 0310 3FF494AE 		beq	.L329
 3573              	.LBB460:
 3574              	.LBB453:
 3575 0314 0120     		movs	r0, #1
 3576 0316 93E6     		b	.L351
 3577              	.LVL425:
 3578              	.L307:
 3579              	.LBE453:
 3580              	.LBE460:
 3581              	.LBB461:
 3582              	.LBB448:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3583              		.loc 1 838 0
 3584 0318 1B05     		lsls	r3, r3, #20
 3585              	.LVL426:
 3586 031a 1B0D     		lsrs	r3, r3, #20
 3587 031c C8E6     		b	.L308
 3588              	.L378:
 3589 031e 00BF     		.align	2
 3590              	.L377:
 3591 0320 00000000 		.word	move_window
 3592 0324 00000000 		.word	get_fat
 3593 0328 00000000 		.word	disk_read
 3594 032c 00000000 		.word	put_fat.part.4
 3595 0330 00000000 		.word	disk_write
 3596              	.LBE448:
 3597              	.LBE461:
 3598              		.cfi_endproc
 3599              	.LFE10:
 3601              		.section	.text.follow_path,"ax",%progbits
 3602              		.align	2
 3603              		.thumb
 3604              		.thumb_func
 3606              	follow_path:
 3607              	.LFB24:
1923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 3608              		.loc 1 1923 0
 3609              		.cfi_startproc
 3610              		@ args = 0, pretend = 0, frame = 16
 3611              		@ frame_needed = 0, uses_anonymous_args = 0
 3612              	.LVL427:
 3613 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 3614              	.LCFI13:
 3615              		.cfi_def_cfa_offset 36
 3616              		.cfi_offset 4, -36
 3617              		.cfi_offset 5, -32
 3618              		.cfi_offset 6, -28
 3619              		.cfi_offset 7, -24
 3620              		.cfi_offset 8, -20
 3621              		.cfi_offset 9, -16
 3622              		.cfi_offset 10, -12
 3623              		.cfi_offset 11, -8
 3624              		.cfi_offset 14, -4
1935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (*path == '/' || *path == '\\')	/* Strip heading separator if exist */
 3625              		.loc 1 1935 0
 3626 0004 0B78     		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 3627 0006 2F2B     		cmp	r3, #47
1923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 3628              		.loc 1 1923 0
 3629 0008 85B0     		sub	sp, sp, #20
 3630              	.LCFI14:
 3631              		.cfi_def_cfa_offset 56
1923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 3632              		.loc 1 1923 0
 3633 000a 0C46     		mov	r4, r1
 3634 000c 0546     		mov	r5, r0
1935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (*path == '/' || *path == '\\')	/* Strip heading separator if exist */
 3635              		.loc 1 1935 0
 3636 000e 00F06281 		beq	.L380
1935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (*path == '/' || *path == '\\')	/* Strip heading separator if exist */
 3637              		.loc 1 1935 0 is_stmt 0 discriminator 1
 3638 0012 5C2B     		cmp	r3, #92
 3639 0014 00F05F81 		beq	.L380
1937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->sclust = 0;						/* Start from the root dir */
 3640              		.loc 1 1937 0 is_stmt 1
 3641 0018 0026     		movs	r6, #0
 3642 001a AE60     		str	r6, [r5, #8]
1940:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((UINT)*path < ' ') {			/* Nul path means the start directory itself */
 3643              		.loc 1 1940 0
 3644 001c 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 3645 001e 1F2B     		cmp	r3, #31
 3646 0020 40F26081 		bls	.L628
 3647              	.LVL428:
 3648              	.L602:
 3649              	.LBB521:
 3650              	.LBB522:
1639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
 3651              		.loc 1 1639 0
 3652 0024 2078     		ldrb	r0, [r4, #0]	@ zero_extendqisi2
 3653 0026 2F28     		cmp	r0, #47
 3654 0028 01D0     		beq	.L386
 3655 002a 5C28     		cmp	r0, #92
 3656 002c 01D1     		bne	.L629
 3657              	.L386:
 3658 002e 0134     		adds	r4, r4, #1
 3659              	.LVL429:
 3660 0030 F8E7     		b	.L602
 3661              	.LVL430:
 3662              	.L629:
1641:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	si = di = 0;
 3663              		.loc 1 1641 0
 3664 0032 0026     		movs	r6, #0
1644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 3665              		.loc 1 1644 0
 3666 0034 1F28     		cmp	r0, #31
1640:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	lfn = dj->lfn;
 3667              		.loc 1 1640 0
 3668 0036 D5F81C90 		ldr	r9, [r5, #28]
 3669              	.LVL431:
1643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = p[si++];					/* Get a character */
 3670              		.loc 1 1643 0
 3671 003a 4FF00108 		mov	r8, #1
1644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 3672              		.loc 1 1644 0
 3673 003e 40F20681 		bls	.L387
 3674 0042 2F28     		cmp	r0, #47
 3675 0044 23D0     		beq	.L388
 3676 0046 AE4F     		ldr	r7, .L653
 3677              	.LVL432:
 3678              	.L389:
1655:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
 3679              		.loc 1 1655 0
 3680 0048 0121     		movs	r1, #1
 3681 004a B847     		blx	r7
 3682              	.LVL433:
1656:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
 3683              		.loc 1 1656 0
 3684 004c D8B1     		cbz	r0, .L390
1658:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal chars for LFN */
 3685              		.loc 1 1658 0
 3686 004e 7F28     		cmp	r0, #127
 3687 0050 09D8     		bhi	.L391
 3688              	.LVL434:
 3689              	.LBB523:
 3690              	.LBB524:
 566:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (*str && *str != chr) str++;
 3691              		.loc 1 566 0
 3692 0052 2228     		cmp	r0, #34
 3693 0054 17D0     		beq	.L390
 3694 0056 AB4A     		ldr	r2, .L653+4
 3695 0058 01E0     		b	.L392
 3696              	.LVL435:
 3697              	.L630:
 3698 005a 9842     		cmp	r0, r3
 3699 005c 13D0     		beq	.L390
 3700              	.LVL436:
 3701              	.L392:
 3702 005e 12F8013F 		ldrb	r3, [r2, #1]!	@ zero_extendqisi2
 3703              	.LVL437:
 3704 0062 002B     		cmp	r3, #0
 3705 0064 F9D1     		bne	.L630
 3706              	.LVL438:
 3707              	.L391:
 3708              	.LBE524:
 3709              	.LBE523:
1660:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		lfn[di++] = w;					/* Store the Unicode char */
 3710              		.loc 1 1660 0
 3711 0066 29F81600 		strh	r0, [r9, r6, lsl #1]	@ movhi
1643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = p[si++];					/* Get a character */
 3712              		.loc 1 1643 0
 3713 006a 14F80800 		ldrb	r0, [r4, r8]	@ zero_extendqisi2
 3714              	.LVL439:
1660:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		lfn[di++] = w;					/* Store the Unicode char */
 3715              		.loc 1 1660 0
 3716 006e 0136     		adds	r6, r6, #1
 3717              	.LVL440:
1644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 3718              		.loc 1 1644 0
 3719 0070 1F28     		cmp	r0, #31
1643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = p[si++];					/* Get a character */
 3720              		.loc 1 1643 0
 3721 0072 08F10108 		add	r8, r8, #1
 3722              	.LVL441:
1644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 3723              		.loc 1 1644 0
 3724 0076 40F2EA80 		bls	.L387
 3725 007a 2F28     		cmp	r0, #47
 3726 007c 07D0     		beq	.L388
 3727 007e 5C28     		cmp	r0, #92
 3728 0080 05D0     		beq	.L388
1645:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
 3729              		.loc 1 1645 0
 3730 0082 FF2E     		cmp	r6, #255
 3731 0084 E0D1     		bne	.L389
 3732              	.LVL442:
 3733              	.L390:
 3734              	.LBE522:
 3735              	.LBE521:
 3736              	.LBB539:
 3737              	.LBB540:
 3738              	.LBB541:
 3739              	.LBB542:
 3740              	.LBB543:
 3741              	.LBB544:
 3742              	.LBB545:
 3743              	.LBB546:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 3744              		.loc 1 807 0
 3745 0086 0620     		movs	r0, #6
 3746              	.LVL443:
 3747              	.L548:
 3748              	.LBE546:
 3749              	.LBE545:
 3750              	.LBE544:
 3751              	.LBE543:
 3752              	.LBE542:
 3753              	.LBE541:
 3754              	.LBE540:
 3755              	.LBE539:
1972:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 3756              		.loc 1 1972 0
 3757 0088 05B0     		add	sp, sp, #20
 3758 008a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 3759              	.LVL444:
 3760              	.L388:
 3761              	.LBB638:
 3762              	.LBB531:
1662:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
 3763              		.loc 1 1662 0
 3764 008e 4444     		add	r4, r4, r8
 3765              	.LVL445:
1663:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 3766              		.loc 1 1663 0
 3767 0090 4FF00008 		mov	r8, #0
 3768              	.L482:
 3769              	.LVL446:
1674:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (di) {						/* Strip trailing spaces and dots */
 3770              		.loc 1 1674 0
 3771 0094 002E     		cmp	r6, #0
 3772 0096 F6D0     		beq	.L390
 3773              	.L573:
1675:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = lfn[di-1];
 3774              		.loc 1 1675 0
 3775 0098 731E     		subs	r3, r6, #1
 3776              	.LVL447:
 3777 009a 39F81320 		ldrh	r2, [r9, r3, lsl #1]
 3778              	.LVL448:
1676:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w != ' ' && w != '.') break;
 3779              		.loc 1 1676 0
 3780 009e 202A     		cmp	r2, #32
 3781 00a0 01D0     		beq	.L394
 3782 00a2 2E2A     		cmp	r2, #46
 3783 00a4 03D1     		bne	.L395
 3784              	.L394:
1674:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (di) {						/* Strip trailing spaces and dots */
 3785              		.loc 1 1674 0
 3786 00a6 1E46     		mov	r6, r3
 3787 00a8 002B     		cmp	r3, #0
 3788 00aa F5D1     		bne	.L573
 3789 00ac EBE7     		b	.L390
 3790              	.L395:
1684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_set(dj->fn, ' ', 11);
 3791              		.loc 1 1684 0
 3792 00ae AA69     		ldr	r2, [r5, #24]
 3793              	.LVL449:
 3794              	.LBB525:
 3795              	.LBB526:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 3796              		.loc 1 550 0
 3797 00b0 2021     		movs	r1, #32
 3798              	.LBE526:
 3799              	.LBE525:
1681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	lfn[di] = 0;						/* LFN is created */
 3800              		.loc 1 1681 0
 3801 00b2 0027     		movs	r7, #0
 3802 00b4 29F81670 		strh	r7, [r9, r6, lsl #1]	@ movhi
 3803              	.LBB528:
 3804              	.LBB527:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 3805              		.loc 1 550 0
 3806 00b8 1170     		strb	r1, [r2, #0]
 3807              	.LVL450:
 3808 00ba 5170     		strb	r1, [r2, #1]
 3809              	.LVL451:
 3810 00bc 9170     		strb	r1, [r2, #2]
 3811              	.LVL452:
 3812 00be D170     		strb	r1, [r2, #3]
 3813              	.LVL453:
 3814 00c0 1171     		strb	r1, [r2, #4]
 3815              	.LVL454:
 3816 00c2 5171     		strb	r1, [r2, #5]
 3817              	.LVL455:
 3818 00c4 9171     		strb	r1, [r2, #6]
 3819              	.LVL456:
 3820 00c6 D171     		strb	r1, [r2, #7]
 3821              	.LVL457:
 3822 00c8 1172     		strb	r1, [r2, #8]
 3823              	.LVL458:
 3824 00ca 5172     		strb	r1, [r2, #9]
 3825              	.LVL459:
 3826 00cc 9172     		strb	r1, [r2, #10]
 3827              	.LVL460:
 3828              	.L483:
 3829              	.LBE527:
 3830              	.LBE528:
1685:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
 3831              		.loc 1 1685 0
 3832 00ce 39F81700 		ldrh	r0, [r9, r7, lsl #1]
 3833 00d2 2028     		cmp	r0, #32
 3834 00d4 01D0     		beq	.L397
 3835 00d6 2E28     		cmp	r0, #46
 3836 00d8 01D1     		bne	.L631
 3837              	.L397:
 3838 00da 0137     		adds	r7, r7, #1
 3839              	.LVL461:
 3840 00dc F7E7     		b	.L483
 3841              	.L631:
1686:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 3842              		.loc 1 1686 0
 3843 00de 1FB1     		cbz	r7, .L577
 3844 00e0 48F00308 		orr	r8, r8, #3
 3845              	.LVL462:
 3846 00e4 00E0     		b	.L577
 3847              	.LVL463:
 3848              	.L632:
 3849 00e6 013B     		subs	r3, r3, #1
 3850              	.LVL464:
 3851              	.L577:
1687:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 3852              		.loc 1 1687 0
 3853 00e8 39F81320 		ldrh	r2, [r9, r3, lsl #1]
 3854 00ec 2E2A     		cmp	r2, #46
 3855 00ee 02D0     		beq	.L402
 3856 00f0 1E46     		mov	r6, r3
 3857              	.LVL465:
 3858 00f2 002B     		cmp	r3, #0
 3859 00f4 F7D1     		bne	.L632
 3860              	.LVL466:
 3861              	.L402:
1703:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
 3862              		.loc 1 1703 0
 3863 00f6 4FF0000B 		mov	fp, #0
 3864 00fa 4FF0080A 		mov	sl, #8
 3865 00fe 5A46     		mov	r2, fp
 3866              	.LVL467:
 3867              	.L400:
1691:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = lfn[si++];					/* Get an LFN char */
 3868              		.loc 1 1691 0
 3869 0100 0137     		adds	r7, r7, #1
 3870              	.LVL468:
1692:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 3871              		.loc 1 1692 0
 3872 0102 88B3     		cbz	r0, .L403
1693:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
 3873              		.loc 1 1693 0
 3874 0104 2028     		cmp	r0, #32
 3875 0106 20D0     		beq	.L404
 3876 0108 2E28     		cmp	r0, #46
 3877 010a 1BD0     		beq	.L633
1697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
 3878              		.loc 1 1697 0
 3879 010c D345     		cmp	fp, sl
 3880 010e 21D2     		bcs	.L408
 3881 0110 BE42     		cmp	r6, r7
 3882 0112 00F0A080 		beq	.L406
1707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w >= 0x80) {				/* Non ASCII char */
 3883              		.loc 1 1707 0
 3884 0116 7F28     		cmp	r0, #127
 3885 0118 00F2A980 		bhi	.L634
 3886              	.LVL469:
 3887              	.L413:
 3888              	.LBB529:
 3889              	.LBB530:
 566:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (*str && *str != chr) str++;
 3890              		.loc 1 566 0
 3891 011c 2B28     		cmp	r0, #43
 3892 011e 00F0B780 		beq	.L415
 3893 0122 7949     		ldr	r1, .L653+8
 3894 0124 02E0     		b	.L417
 3895              	.LVL470:
 3896              	.L635:
 3897 0126 9842     		cmp	r0, r3
 3898 0128 00F0B280 		beq	.L415
 3899              	.LVL471:
 3900              	.L417:
 3901 012c 11F8013F 		ldrb	r3, [r1, #1]!	@ zero_extendqisi2
 3902              	.LVL472:
 3903 0130 002B     		cmp	r3, #0
 3904 0132 F8D1     		bne	.L635
 3905              	.LBE530:
 3906              	.LBE529:
1726:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
 3907              		.loc 1 1726 0
 3908 0134 A0F14103 		sub	r3, r0, #65
 3909 0138 192B     		cmp	r3, #25
 3910 013a 00F24482 		bhi	.L636
1727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					b |= 2;
 3911              		.loc 1 1727 0
 3912 013e 42F00202 		orr	r2, r2, #2
 3913              	.LVL473:
 3914 0142 A8E0     		b	.L418
 3915              	.LVL474:
 3916              	.L633:
1693:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
 3917              		.loc 1 1693 0
 3918 0144 BE42     		cmp	r6, r7
 3919 0146 00F08680 		beq	.L406
 3920              	.L404:
1694:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
 3921              		.loc 1 1694 0
 3922 014a 48F00308 		orr	r8, r8, #3
 3923              	.LVL475:
 3924              	.L407:
 3925 014e 39F81700 		ldrh	r0, [r9, r7, lsl #1]
 3926 0152 D5E7     		b	.L400
 3927              	.LVL476:
 3928              	.L408:
1698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ni == 11) {				/* Long extension */
 3929              		.loc 1 1698 0
 3930 0154 BAF10B0F 		cmp	sl, #11
 3931 0158 00F04082 		beq	.L492
1701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
 3932              		.loc 1 1701 0
 3933 015c BE42     		cmp	r6, r7
 3934 015e 7ED0     		beq	.L412
1702:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (si > di) break;			/* No extension */
 3935              		.loc 1 1702 0
 3936 0160 B742     		cmp	r7, r6
1701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
 3937              		.loc 1 1701 0
 3938 0162 48F00308 		orr	r8, r8, #3
 3939              	.LVL477:
1702:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (si > di) break;			/* No extension */
 3940              		.loc 1 1702 0
 3941 0166 7AD9     		bls	.L412
 3942              	.LVL478:
 3943              	.L403:
1738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->fn[0] == DDE) dj->fn[0] = NDDE;	/* If the first char collides with deleted mark, replace i
 3944              		.loc 1 1738 0
 3945 0168 AB69     		ldr	r3, [r5, #24]
 3946 016a 1978     		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 3947 016c E529     		cmp	r1, #229
 3948 016e 00F0C280 		beq	.L637
 3949              	.L420:
1740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (ni == 8) b <<= 2;
 3950              		.loc 1 1740 0
 3951 0172 BAF1080F 		cmp	sl, #8
 3952 0176 00F0BB80 		beq	.L638
 3953              	.LVL479:
 3954              	.L421:
 3955              	.LBE531:
1741:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
 3956              		.loc 1 1741 0
 3957 017a 02F00C01 		and	r1, r2, #12
 3958              	.LBB532:
 3959 017e 0C29     		cmp	r1, #12
 3960 0180 00F08F80 		beq	.L422
 3961 0184 02F00300 		and	r0, r2, #3
 3962              	.LVL480:
 3963 0188 0328     		cmp	r0, #3
 3964 018a 00F08A80 		beq	.L422
 3965              	.LVL481:
 3966              	.L423:
1743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended char, NT flags are create
 3967              		.loc 1 1743 0
 3968 018e 08F00200 		and	r0, r8, #2
 3969 0192 C0B2     		uxtb	r0, r0
 3970 0194 48B9     		cbnz	r0, .L424
1744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
 3971              		.loc 1 1744 0
 3972 0196 02F00302 		and	r2, r2, #3
 3973              	.LVL482:
 3974 019a 012A     		cmp	r2, #1
 3975 019c 08BF     		it	eq
 3976 019e 48F01008 		orreq	r8, r8, #16
 3977              	.LVL483:
1745:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 3978              		.loc 1 1745 0
 3979 01a2 0429     		cmp	r1, #4
 3980 01a4 08BF     		it	eq
 3981 01a6 48F00808 		orreq	r8, r8, #8
 3982              	.LVL484:
 3983              	.L424:
1748:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->fn[NS] = cf;	/* SFN is created */
 3984              		.loc 1 1748 0
 3985 01aa 83F80B80 		strb	r8, [r3, #11]
 3986              	.LVL485:
 3987              	.LBE532:
 3988              	.LBE638:
 3989              	.LBB639:
 3990              	.LBB631:
 3991              	.LBB577:
 3992              	.LBB578:
1076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst = dj->sclust;
 3993              		.loc 1 1076 0
 3994 01ae AF68     		ldr	r7, [r5, #8]
 3995              	.LVL486:
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 3996              		.loc 1 1075 0
 3997 01b0 0023     		movs	r3, #0
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 3998              		.loc 1 1077 0
 3999 01b2 012F     		cmp	r7, #1
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 4000              		.loc 1 1075 0
 4001 01b4 EB80     		strh	r3, [r5, #6]	@ movhi
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 4002              		.loc 1 1077 0
 4003 01b6 03D0     		beq	.L499
 4004 01b8 2E68     		ldr	r6, [r5, #0]
 4005 01ba B369     		ldr	r3, [r6, #24]
 4006 01bc 9F42     		cmp	r7, r3
 4007 01be 01D3     		bcc	.L639
 4008              	.LVL487:
 4009              	.L499:
 4010              	.LBB579:
 4011              	.LBB580:
1094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_INT_ERR;
 4012              		.loc 1 1094 0
 4013 01c0 0220     		movs	r0, #2
 4014              	.LVL488:
 4015 01c2 61E7     		b	.L548
 4016              	.LVL489:
 4017              	.L639:
 4018              	.LBE580:
 4019              	.LBE579:
1079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!clst && dj->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 4020              		.loc 1 1079 0
 4021 01c4 002F     		cmp	r7, #0
 4022 01c6 72D1     		bne	.L429
 4023 01c8 3278     		ldrb	r2, [r6, #0]	@ zero_extendqisi2
 4024 01ca 032A     		cmp	r2, #3
 4025 01cc 6CD0     		beq	.L640
 4026              	.L430:
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 4027              		.loc 1 1084 0
 4028 01ce 3389     		ldrh	r3, [r6, #8]
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 4029              		.loc 1 1083 0
 4030 01d0 0022     		movs	r2, #0
 4031 01d2 EA60     		str	r2, [r5, #12]
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 4032              		.loc 1 1084 0
 4033 01d4 002B     		cmp	r3, #0
 4034 01d6 F3D0     		beq	.L499
1086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = dj->fs->dirbase + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 4035              		.loc 1 1086 0
 4036 01d8 D6F82480 		ldr	r8, [r6, #36]
 4037              	.LVL490:
 4038 01dc C5F81080 		str	r8, [r5, #16]
 4039              	.L431:
1101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (idx % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 4040              		.loc 1 1101 0
 4041 01e0 FF22     		movs	r2, #255
 4042 01e2 06F13003 		add	r3, r6, #48
 4043 01e6 0292     		str	r2, [sp, #8]
 4044 01e8 6B61     		str	r3, [r5, #20]
 4045 01ea 9146     		mov	r9, r2
 4046              	.LVL491:
 4047 01ec 4746     		mov	r7, r8
 4048              	.LVL492:
 4049 01ee 0394     		str	r4, [sp, #12]
 4050              	.LVL493:
 4051              	.L481:
 4052              	.LBE578:
 4053              	.LBE577:
 4054              	.LBB623:
 4055              	.LBB572:
 4056              	.LBB555:
 4057              	.LBB556:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 4058              		.loc 1 727 0
 4059 01f0 F46A     		ldr	r4, [r6, #44]
 4060              	.LVL494:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 4061              		.loc 1 728 0
 4062 01f2 A742     		cmp	r7, r4
 4063 01f4 06D0     		beq	.L490
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 4064              		.loc 1 730 0
 4065 01f6 3379     		ldrb	r3, [r6, #4]	@ zero_extendqisi2
 4066 01f8 002B     		cmp	r3, #0
 4067 01fa 40F09980 		bne	.L460
 4068              	.L463:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 4069              		.loc 1 743 0
 4070 01fe 002F     		cmp	r7, #0
 4071 0200 40F0C580 		bne	.L641
 4072              	.LVL495:
 4073              	.L490:
 4074              	.LBE556:
 4075              	.LBE555:
1372:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dir = dj->dir;					/* Ptr to the directory entry of current index */
 4076              		.loc 1 1372 0
 4077 0204 6969     		ldr	r1, [r5, #20]
 4078              	.LVL496:
1373:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = dir[DIR_Name];
 4079              		.loc 1 1373 0
 4080 0206 0C78     		ldrb	r4, [r1, #0]	@ zero_extendqisi2
 4081              	.LVL497:
1374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4082              		.loc 1 1374 0
 4083 0208 A4B1     		cbz	r4, .L501
1376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 4084              		.loc 1 1376 0
 4085 020a CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
1377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 4086              		.loc 1 1377 0
 4087 020c E52C     		cmp	r4, #229
1376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 4088              		.loc 1 1376 0
 4089 020e 03F03F02 		and	r2, r3, #63
 4090              	.LVL498:
1377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 4091              		.loc 1 1377 0
 4092 0212 08D0     		beq	.L517
 4093 0214 03F00803 		and	r3, r3, #8
 4094 0218 DBB2     		uxtb	r3, r3
 4095 021a 002B     		cmp	r3, #0
 4096 021c 00F0C680 		beq	.L467
 4097 0220 0F2A     		cmp	r2, #15
 4098 0222 00F07781 		beq	.L468
 4099              	.LVL499:
 4100              	.L517:
 4101              	.LBB561:
 4102              	.LBB562:
1392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = 0xFF; dj->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 4103              		.loc 1 1392 0
 4104 0226 4FF0FF09 		mov	r9, #255
 4105              	.L466:
 4106              	.LVL500:
 4107              	.LBE562:
 4108              	.LBE561:
 4109              	.LBB564:
 4110              	.LBB551:
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
 4111              		.loc 1 1123 0
 4112 022a EC88     		ldrh	r4, [r5, #6]
 4113 022c 0134     		adds	r4, r4, #1
 4114 022e A4B2     		uxth	r4, r4
 4115              	.LVL501:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 4116              		.loc 1 1124 0
 4117 0230 002C     		cmp	r4, #0
 4118 0232 6FD1     		bne	.L642
 4119              	.LVL502:
 4120              	.L501:
 4121              	.LBE551:
 4122              	.LBE564:
1374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4123              		.loc 1 1374 0
 4124 0234 0420     		movs	r0, #4
 4125              	.L465:
 4126              	.LVL503:
 4127              	.LBE572:
 4128              	.LBE623:
 4129              	.LBE631:
 4130              	.LBE639:
1949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ns = *(dj->fn+NS);
 4131              		.loc 1 1949 0
 4132 0236 AB69     		ldr	r3, [r5, #24]
1951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res != FR_NO_FILE) break;	/* Abort if any hard error occurred */
 4133              		.loc 1 1951 0
 4134 0238 0428     		cmp	r0, #4
1949:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ns = *(dj->fn+NS);
 4135              		.loc 1 1949 0
 4136 023a DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 4137              	.LVL504:
1951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res != FR_NO_FILE) break;	/* Abort if any hard error occurred */
 4138              		.loc 1 1951 0
 4139 023c 7FF424AF 		bne	.L548
1958:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!(ns & NS_LAST)) res = FR_NO_PATH;
 4140              		.loc 1 1958 0
 4141 0240 03F00403 		and	r3, r3, #4
 4142 0244 DBB2     		uxtb	r3, r3
 4143 0246 002B     		cmp	r3, #0
 4144 0248 08BF     		it	eq
 4145 024a 0520     		moveq	r0, #5
 4146              	.LVL505:
 4147 024c 1CE7     		b	.L548
 4148              	.LVL506:
 4149              	.L387:
 4150              	.LBB640:
 4151              	.LBB533:
1662:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
 4152              		.loc 1 1662 0
 4153 024e 4444     		add	r4, r4, r8
 4154              	.LVL507:
1663:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 4155              		.loc 1 1663 0
 4156 0250 4FF00408 		mov	r8, #4
 4157 0254 1EE7     		b	.L482
 4158              	.LVL508:
 4159              	.L406:
1698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ni == 11) {				/* Long extension */
 4160              		.loc 1 1698 0
 4161 0256 BAF10B0F 		cmp	sl, #11
 4162 025a 00F0BF81 		beq	.L492
 4163              	.LVL509:
 4164              	.L412:
1704:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			b <<= 2; continue;
 4165              		.loc 1 1704 0
 4166 025e 9200     		lsls	r2, r2, #2
 4167              	.LVL510:
 4168 0260 D2B2     		uxtb	r2, r2
 4169              	.LVL511:
 4170 0262 3746     		mov	r7, r6
1703:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
 4171              		.loc 1 1703 0
 4172 0264 4FF00B0A 		mov	sl, #11
 4173 0268 4FF0080B 		mov	fp, #8
 4174 026c 6FE7     		b	.L407
 4175              	.LVL512:
 4176              	.L634:
1709:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
 4177              		.loc 1 1709 0
 4178 026e 0092     		str	r2, [sp, #0]
 4179 0270 0021     		movs	r1, #0
 4180 0272 234B     		ldr	r3, .L653
 4181 0274 9847     		blx	r3
 4182              	.LVL513:
1710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (w) w = excvt[w - 0x80];	/* Convert extended char to upper (SBCS) */
 4183              		.loc 1 1710 0
 4184 0276 009A     		ldr	r2, [sp, #0]
 4185 0278 0028     		cmp	r0, #0
 4186 027a 00F09480 		beq	.L414
 4187 027e 234B     		ldr	r3, .L653+12
 4188 0280 1818     		adds	r0, r3, r0
 4189              	.LVL514:
1714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
 4190              		.loc 1 1714 0
 4191 0282 48F00208 		orr	r8, r8, #2
 4192              	.LVL515:
1710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (w) w = excvt[w - 0x80];	/* Convert extended char to upper (SBCS) */
 4193              		.loc 1 1710 0
 4194 0286 10F8800C 		ldrb	r0, [r0, #-128]	@ zero_extendqisi2
 4195              	.LVL516:
1723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal chars for SFN */
 4196              		.loc 1 1723 0
 4197 028a 0028     		cmp	r0, #0
 4198 028c 7FF446AF 		bne	.L413
 4199              	.LVL517:
 4200              	.L415:
1724:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 4201              		.loc 1 1724 0
 4202 0290 48F00308 		orr	r8, r8, #3
 4203              	.LVL518:
 4204 0294 5F20     		movs	r0, #95
 4205              	.LVL519:
 4206              	.L418:
1735:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->fn[i++] = (BYTE)w;
 4207              		.loc 1 1735 0
 4208 0296 AB69     		ldr	r3, [r5, #24]
 4209 0298 03F80B00 		strb	r0, [r3, fp]
 4210 029c 0BF1010B 		add	fp, fp, #1
 4211              	.LVL520:
 4212 02a0 55E7     		b	.L407
 4213              	.LVL521:
 4214              	.L422:
1742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cf |= NS_LFN;
 4215              		.loc 1 1742 0
 4216 02a2 48F00208 		orr	r8, r8, #2
 4217              	.LVL522:
 4218 02a6 72E7     		b	.L423
 4219              	.LVL523:
 4220              	.L640:
 4221              	.LBE533:
 4222              	.LBE640:
 4223              	.LBB641:
 4224              	.LBB632:
 4225              	.LBB624:
 4226              	.LBB620:
1080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		clst = dj->fs->dirbase;
 4227              		.loc 1 1080 0
 4228 02a8 776A     		ldr	r7, [r6, #36]
 4229              	.LVL524:
1082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {	/* Static table (root-dir in FAT12/16) */
 4230              		.loc 1 1082 0
 4231 02aa 002F     		cmp	r7, #0
 4232 02ac 8FD0     		beq	.L430
 4233              	.L429:
 4234              	.LVL525:
1089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ic = SS(dj->fs) / SZ_DIR * dj->fs->csize;	/* Entries per cluster */
 4235              		.loc 1 1089 0
 4236 02ae B278     		ldrb	r2, [r6, #2]	@ zero_extendqisi2
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 4237              		.loc 1 1090 0
 4238 02b0 002A     		cmp	r2, #0
 4239 02b2 40F07781 		bne	.L432
 4240              	.LVL526:
 4241              	.LBB613:
 4242              	.LBB610:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 4243              		.loc 1 828 0
 4244 02b6 012F     		cmp	r7, #1
 4245 02b8 82D9     		bls	.L499
 4246 02ba BB42     		cmp	r3, r7
 4247 02bc 80D9     		bls	.L499
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 4248              		.loc 1 831 0
 4249 02be 3378     		ldrb	r3, [r6, #0]	@ zero_extendqisi2
 4250 02c0 022B     		cmp	r3, #2
 4251 02c2 00F0D781 		beq	.L435
 4252              	.LVL527:
 4253              	.L647:
 4254 02c6 032B     		cmp	r3, #3
 4255 02c8 00F02782 		beq	.L436
 4256 02cc 012B     		cmp	r3, #1
 4257 02ce 00F09981 		beq	.L643
 4258              	.L433:
 4259              	.LBE610:
 4260              	.LBE613:
 4261              	.LBE620:
 4262              	.LBE624:
 4263              	.LBE632:
 4264              	.LBE641:
 4265              	.LBB642:
 4266              	.LBB534:
1092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4267              		.loc 1 1092 0
 4268 02d2 0120     		movs	r0, #1
 4269 02d4 D8E6     		b	.L548
 4270              	.LVL528:
 4271              	.L380:
 4272              	.LBE534:
 4273              	.LBE642:
1936:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		path++;
 4274              		.loc 1 1936 0
 4275 02d6 0134     		adds	r4, r4, #1
 4276              	.LVL529:
1937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->sclust = 0;						/* Start from the root dir */
 4277              		.loc 1 1937 0
 4278 02d8 0026     		movs	r6, #0
 4279 02da AE60     		str	r6, [r5, #8]
1940:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((UINT)*path < ' ') {			/* Nul path means the start directory itself */
 4280              		.loc 1 1940 0
 4281 02dc 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 4282 02de 1F2B     		cmp	r3, #31
 4283 02e0 3FF6A0AE 		bhi	.L602
 4284              	.L628:
 4285              	.LVL530:
 4286              	.LBB643:
 4287              	.LBB644:
1941:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dir_sdi(dj, 0);
 4288              		.loc 1 1941 0
 4289 02e4 2846     		mov	r0, r5
 4290              	.LVL531:
 4291 02e6 3146     		mov	r1, r6
 4292 02e8 094B     		ldr	r3, .L653+16
 4293 02ea 9847     		blx	r3
 4294              	.LVL532:
1942:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->dir = 0;
 4295              		.loc 1 1942 0
 4296 02ec 6E61     		str	r6, [r5, #20]
 4297 02ee CBE6     		b	.L548
 4298              	.LVL533:
 4299              	.L638:
 4300              	.LBE644:
 4301              	.LBE643:
 4302              	.LBB645:
 4303              	.LBB535:
1740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (ni == 8) b <<= 2;
 4304              		.loc 1 1740 0
 4305 02f0 9200     		lsls	r2, r2, #2
 4306              	.LVL534:
 4307 02f2 D2B2     		uxtb	r2, r2
 4308              	.LVL535:
 4309 02f4 41E7     		b	.L421
 4310              	.L637:
1738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->fn[0] == DDE) dj->fn[0] = NDDE;	/* If the first char collides with deleted mark, replace i
 4311              		.loc 1 1738 0
 4312 02f6 0521     		movs	r1, #5
 4313 02f8 1970     		strb	r1, [r3, #0]
 4314 02fa AB69     		ldr	r3, [r5, #24]
 4315 02fc 39E7     		b	.L420
 4316              	.L654:
 4317 02fe 00BF     		.align	2
 4318              	.L653:
 4319 0300 00000000 		.word	ff_convert
 4320 0304 00000000 		.word	.LC0
 4321 0308 0C000000 		.word	.LC1
 4322 030c 00000000 		.word	.LANCHOR1
 4323 0310 00000000 		.word	dir_sdi
 4324              	.LVL536:
 4325              	.L642:
 4326              	.LBE535:
 4327              	.LBE645:
 4328              	.LBB646:
 4329              	.LBB633:
 4330              	.LBB625:
 4331              	.LBB573:
 4332              	.LBB565:
 4333              	.LBB552:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 4334              		.loc 1 1124 0
 4335 0314 2F69     		ldr	r7, [r5, #16]
 4336 0316 002F     		cmp	r7, #0
 4337 0318 8CD0     		beq	.L501
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
 4338              		.loc 1 1127 0
 4339 031a 14F00F08 		ands	r8, r4, #15
 4340 031e 00F01981 		beq	.L476
 4341 0322 2E68     		ldr	r6, [r5, #0]
 4342              	.L477:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 4343              		.loc 1 1168 0
 4344 0324 06EB4813 		add	r3, r6, r8, lsl #5
 4345 0328 3033     		adds	r3, r3, #48
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 4346              		.loc 1 1167 0
 4347 032a EC80     		strh	r4, [r5, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 4348              		.loc 1 1168 0
 4349 032c 6B61     		str	r3, [r5, #20]
 4350 032e 5FE7     		b	.L481
 4351              	.LVL537:
 4352              	.L460:
 4353              	.LBE552:
 4354              	.LBE565:
 4355              	.LBB566:
 4356              	.LBB560:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 4357              		.loc 1 731 0
 4358 0330 06F13008 		add	r8, r6, #48
 4359 0334 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 4360 0336 DFF8C8A2 		ldr	sl, .L655+12
 4361 033a 4146     		mov	r1, r8
 4362 033c 2246     		mov	r2, r4
 4363 033e 0123     		movs	r3, #1
 4364 0340 D047     		blx	sl
 4365              	.LVL538:
 4366 0342 0028     		cmp	r0, #0
 4367 0344 40F0E480 		bne	.L462
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 4368              		.loc 1 734 0
 4369 0348 F369     		ldr	r3, [r6, #28]
 4370 034a 326A     		ldr	r2, [r6, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 4371              		.loc 1 733 0
 4372 034c 3071     		strb	r0, [r6, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 4373              		.loc 1 734 0
 4374 034e 9A18     		adds	r2, r3, r2
 4375 0350 9442     		cmp	r4, r2
 4376 0352 BFF454AF 		bcs	.L463
 4377              	.LBB557:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 4378              		.loc 1 736 0
 4379 0356 96F803B0 		ldrb	fp, [r6, #3]	@ zero_extendqisi2
 4380              	.LVL539:
 4381 035a BBF1010F 		cmp	fp, #1
 4382 035e 7FF64EAF 		bls	.L463
 4383 0362 5246     		mov	r2, sl
 4384 0364 AA46     		mov	sl, r5
 4385 0366 1546     		mov	r5, r2
 4386              	.LVL540:
 4387 0368 00E0     		b	.L610
 4388              	.LVL541:
 4389              	.L644:
 4390 036a F369     		ldr	r3, [r6, #28]
 4391              	.LVL542:
 4392              	.L610:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 4393              		.loc 1 737 0
 4394 036c E418     		adds	r4, r4, r3
 4395              	.LVL543:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 4396              		.loc 1 736 0
 4397 036e 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 4398              		.loc 1 738 0
 4399 0372 0123     		movs	r3, #1
 4400 0374 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 4401 0376 4146     		mov	r1, r8
 4402 0378 2246     		mov	r2, r4
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 4403              		.loc 1 736 0
 4404 037a 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 4405              		.loc 1 738 0
 4406 037e A847     		blx	r5
 4407              	.LVL544:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 4408              		.loc 1 736 0
 4409 0380 BBF1010F 		cmp	fp, #1
 4410 0384 F1D8     		bhi	.L644
 4411 0386 5546     		mov	r5, sl
 4412              	.LBE557:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 4413              		.loc 1 743 0
 4414 0388 002F     		cmp	r7, #0
 4415 038a 3FF43BAF 		beq	.L490
 4416              	.LVL545:
 4417              	.L641:
 4418              	.LBB558:
 4419              	.LBB559:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 4420              		.loc 1 744 0
 4421 038e 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 4422 0390 984C     		ldr	r4, .L655
 4423              	.LVL546:
 4424 0392 06F13001 		add	r1, r6, #48
 4425 0396 3A46     		mov	r2, r7
 4426 0398 0123     		movs	r3, #1
 4427 039a A047     		blx	r4
 4428              	.LVL547:
 4429 039c 0028     		cmp	r0, #0
 4430 039e 40F0B780 		bne	.L462
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 4431              		.loc 1 746 0
 4432 03a2 F762     		str	r7, [r6, #44]
 4433 03a4 2EE7     		b	.L490
 4434              	.LVL548:
 4435              	.L414:
 4436              	.LBE559:
 4437              	.LBE558:
 4438              	.LBE560:
 4439              	.LBE566:
 4440              	.LBE573:
 4441              	.LBE625:
 4442              	.LBE633:
 4443              	.LBE646:
 4444              	.LBB647:
 4445              	.LBB536:
1714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
 4446              		.loc 1 1714 0
 4447 03a6 48F00208 		orr	r8, r8, #2
 4448              	.LVL549:
 4449 03aa 71E7     		b	.L415
 4450              	.LVL550:
 4451              	.L467:
 4452              	.LBE536:
 4453              	.LBE647:
 4454              	.LBB648:
 4455              	.LBB634:
 4456              	.LBB626:
 4457              	.LBB574:
1380:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
 4458              		.loc 1 1380 0
 4459 03ac 0F2A     		cmp	r2, #15
 4460 03ae 00F0B180 		beq	.L468
1391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
 4461              		.loc 1 1391 0
 4462 03b2 B9F1000F 		cmp	r9, #0
 4463 03b6 53D1     		bne	.L472
 4464              	.LVL551:
 4465              	.LBB567:
 4466              	.LBB568:
1340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
 4467              		.loc 1 1340 0
 4468 03b8 91F801A0 		ldrb	sl, [r1, #1]	@ zero_extendqisi2
 4469 03bc 91F80290 		ldrb	r9, [r1, #2]	@ zero_extendqisi2
 4470              	.LVL552:
 4471 03c0 91F80380 		ldrb	r8, [r1, #3]	@ zero_extendqisi2
 4472 03c4 91F804C0 		ldrb	ip, [r1, #4]	@ zero_extendqisi2
 4473 03c8 4F79     		ldrb	r7, [r1, #5]	@ zero_extendqisi2
 4474              	.LVL553:
 4475 03ca 8E79     		ldrb	r6, [r1, #6]	@ zero_extendqisi2
 4476              	.LVL554:
 4477 03cc C879     		ldrb	r0, [r1, #7]	@ zero_extendqisi2
 4478 03ce 0B7A     		ldrb	r3, [r1, #8]	@ zero_extendqisi2
 4479 03d0 4A7A     		ldrb	r2, [r1, #9]	@ zero_extendqisi2
 4480              	.LVL555:
 4481 03d2 0193     		str	r3, [sp, #4]
 4482 03d4 4FEAC41B 		lsl	fp, r4, #7
 4483 03d8 4BEA5404 		orr	r4, fp, r4, lsr #1
 4484              	.LVL556:
 4485 03dc 5444     		add	r4, r4, sl
 4486 03de E4B2     		uxtb	r4, r4
 4487              	.LVL557:
 4488 03e0 4FEAC41A 		lsl	sl, r4, #7
 4489 03e4 4AEA5404 		orr	r4, sl, r4, lsr #1
 4490              	.LVL558:
 4491 03e8 59FA84F4 		uxtab	r4, r9, r4
 4492 03ec E4B2     		uxtb	r4, r4
 4493              	.LVL559:
 4494 03ee 4FEAC419 		lsl	r9, r4, #7
 4495 03f2 49EA5404 		orr	r4, r9, r4, lsr #1
 4496              	.LVL560:
 4497 03f6 58FA84F4 		uxtab	r4, r8, r4
 4498 03fa E4B2     		uxtb	r4, r4
 4499              	.LVL561:
 4500 03fc 4FEAC418 		lsl	r8, r4, #7
 4501 0400 48EA5404 		orr	r4, r8, r4, lsr #1
 4502              	.LVL562:
 4503 0404 5CFA84F4 		uxtab	r4, ip, r4
 4504 0408 E4B2     		uxtb	r4, r4
 4505              	.LVL563:
 4506 040a 4FEAC41C 		lsl	ip, r4, #7
 4507 040e 4CEA5404 		orr	r4, ip, r4, lsr #1
 4508              	.LVL564:
 4509 0412 57FA84F4 		uxtab	r4, r7, r4
 4510 0416 E4B2     		uxtb	r4, r4
 4511              	.LVL565:
 4512 0418 E701     		lsls	r7, r4, #7
 4513 041a 47EA5404 		orr	r4, r7, r4, lsr #1
 4514              	.LVL566:
 4515 041e 56FA84F4 		uxtab	r4, r6, r4
 4516 0422 E4B2     		uxtb	r4, r4
 4517              	.LVL567:
 4518 0424 E601     		lsls	r6, r4, #7
 4519 0426 46EA5404 		orr	r4, r6, r4, lsr #1
 4520              	.LVL568:
 4521 042a 50FA84F0 		uxtab	r0, r0, r4
 4522 042e C0B2     		uxtb	r0, r0
 4523              	.LVL569:
 4524 0430 C401     		lsls	r4, r0, #7
 4525 0432 44EA5000 		orr	r0, r4, r0, lsr #1
 4526              	.LVL570:
 4527 0436 019C     		ldr	r4, [sp, #4]
 4528 0438 8B7A     		ldrb	r3, [r1, #10]	@ zero_extendqisi2
 4529 043a 54FA80F0 		uxtab	r0, r4, r0
 4530 043e C0B2     		uxtb	r0, r0
 4531              	.LVL571:
 4532 0440 C401     		lsls	r4, r0, #7
 4533 0442 44EA5000 		orr	r0, r4, r0, lsr #1
 4534              	.LVL572:
 4535 0446 52FA80F2 		uxtab	r2, r2, r0
 4536 044a D2B2     		uxtb	r2, r2
 4537              	.LVL573:
 4538 044c D001     		lsls	r0, r2, #7
 4539 044e 40EA5202 		orr	r2, r0, r2, lsr #1
 4540              	.LVL574:
 4541 0452 53FA82F3 		uxtab	r3, r3, r2
 4542              	.LBE568:
 4543              	.LBE567:
1391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
 4544              		.loc 1 1391 0
 4545 0456 029C     		ldr	r4, [sp, #8]
 4546 0458 DBB2     		uxtb	r3, r3
 4547 045a A342     		cmp	r3, r4
 4548 045c 00F0C380 		beq	.L473
 4549              	.LVL575:
 4550              	.L472:
1392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = 0xFF; dj->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 4551              		.loc 1 1392 0
 4552 0460 4FF6FF72 		movw	r2, #65535
1393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!(dj->fn[NS] & NS_LOSS) && !mem_cmp(dir, dj->fn, 11)) break;	/* SFN matched? */
 4553              		.loc 1 1393 0
 4554 0464 AB69     		ldr	r3, [r5, #24]
1392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = 0xFF; dj->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 4555              		.loc 1 1392 0
 4556 0466 2A84     		strh	r2, [r5, #32]	@ movhi
1393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!(dj->fn[NS] & NS_LOSS) && !mem_cmp(dir, dj->fn, 11)) break;	/* SFN matched? */
 4557              		.loc 1 1393 0
 4558 0468 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 4559 046a D007     		lsls	r0, r2, #31
 4560 046c 3FF5DBAE 		bmi	.L517
 4561              	.LVL576:
 4562              	.LBB569:
 4563              	.LBB563:
 559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt-- && (r = *d++ - *s++) == 0) ;
 4564              		.loc 1 559 0
 4565 0470 0C78     		ldrb	r4, [r1, #0]	@ zero_extendqisi2
 4566              	.LVL577:
 4567 0472 1878     		ldrb	r0, [r3, #0]	@ zero_extendqisi2
 4568              	.LVL578:
 4569 0474 8442     		cmp	r4, r0
 4570 0476 7FF4D6AE 		bne	.L517
 4571              	.LVL579:
 4572 047a 4C78     		ldrb	r4, [r1, #1]	@ zero_extendqisi2
 4573              	.LVL580:
 4574 047c 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 4575              	.LVL581:
 4576 047e 8442     		cmp	r4, r0
 4577 0480 7FF4D1AE 		bne	.L517
 4578              	.LVL582:
 4579 0484 8C78     		ldrb	r4, [r1, #2]	@ zero_extendqisi2
 4580              	.LVL583:
 4581 0486 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 4582              	.LVL584:
 4583 0488 8442     		cmp	r4, r0
 4584 048a 7FF4CCAE 		bne	.L517
 4585              	.LVL585:
 4586 048e CC78     		ldrb	r4, [r1, #3]	@ zero_extendqisi2
 4587              	.LVL586:
 4588 0490 D878     		ldrb	r0, [r3, #3]	@ zero_extendqisi2
 4589              	.LVL587:
 4590 0492 8442     		cmp	r4, r0
 4591 0494 7FF4C7AE 		bne	.L517
 4592              	.LVL588:
 4593 0498 0C79     		ldrb	r4, [r1, #4]	@ zero_extendqisi2
 4594              	.LVL589:
 4595 049a 1879     		ldrb	r0, [r3, #4]	@ zero_extendqisi2
 4596              	.LVL590:
 4597 049c 8442     		cmp	r4, r0
 4598 049e 7FF4C2AE 		bne	.L517
 4599              	.LVL591:
 4600 04a2 4C79     		ldrb	r4, [r1, #5]	@ zero_extendqisi2
 4601              	.LVL592:
 4602 04a4 5879     		ldrb	r0, [r3, #5]	@ zero_extendqisi2
 4603              	.LVL593:
 4604 04a6 8442     		cmp	r4, r0
 4605 04a8 7FF4BDAE 		bne	.L517
 4606              	.LVL594:
 4607 04ac 8C79     		ldrb	r4, [r1, #6]	@ zero_extendqisi2
 4608              	.LVL595:
 4609 04ae 9879     		ldrb	r0, [r3, #6]	@ zero_extendqisi2
 4610              	.LVL596:
 4611 04b0 8442     		cmp	r4, r0
 4612 04b2 7FF4B8AE 		bne	.L517
 4613              	.LVL597:
 4614 04b6 CC79     		ldrb	r4, [r1, #7]	@ zero_extendqisi2
 4615              	.LVL598:
 4616 04b8 D879     		ldrb	r0, [r3, #7]	@ zero_extendqisi2
 4617              	.LVL599:
 4618 04ba 8442     		cmp	r4, r0
 4619 04bc 7FF4B3AE 		bne	.L517
 4620              	.LVL600:
 4621 04c0 0C7A     		ldrb	r4, [r1, #8]	@ zero_extendqisi2
 4622              	.LVL601:
 4623 04c2 187A     		ldrb	r0, [r3, #8]	@ zero_extendqisi2
 4624              	.LVL602:
 4625 04c4 8442     		cmp	r4, r0
 4626 04c6 7FF4AEAE 		bne	.L517
 4627              	.LVL603:
 4628 04ca 4C7A     		ldrb	r4, [r1, #9]	@ zero_extendqisi2
 4629              	.LVL604:
 4630 04cc 587A     		ldrb	r0, [r3, #9]	@ zero_extendqisi2
 4631              	.LVL605:
 4632 04ce 8442     		cmp	r4, r0
 4633 04d0 7FF4A9AE 		bne	.L517
 4634              	.LVL606:
 4635 04d4 887A     		ldrb	r0, [r1, #10]	@ zero_extendqisi2
 4636              	.LVL607:
 4637 04d6 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 4638              	.LVL608:
 4639 04d8 9842     		cmp	r0, r3
 4640 04da 7FF4A4AE 		bne	.L517
 4641 04de 039C     		ldr	r4, [sp, #12]
 4642              	.LVL609:
 4643              	.L474:
 4644              	.LBE563:
 4645              	.LBE569:
 4646              	.LBE574:
 4647              	.LBE626:
 4648              	.LBE634:
 4649              	.LBE648:
1962:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment match. Function completed. */
 4650              		.loc 1 1962 0
 4651 04e0 02F00403 		and	r3, r2, #4
 4652 04e4 DBB2     		uxtb	r3, r3
 4653 04e6 002B     		cmp	r3, #0
 4654 04e8 40F08180 		bne	.L645
 4655              	.LVL610:
1964:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* Cannot follow because it is a file */
 4656              		.loc 1 1964 0
 4657 04ec CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 4658 04ee 03F01003 		and	r3, r3, #16
 4659 04f2 DBB2     		uxtb	r3, r3
 4660 04f4 002B     		cmp	r3, #0
 4661 04f6 64D0     		beq	.L522
1967:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->sclust = LD_CLUST(dir);
 4662              		.loc 1 1967 0
 4663 04f8 487D     		ldrb	r0, [r1, #21]	@ zero_extendqisi2
 4664 04fa 0A7D     		ldrb	r2, [r1, #20]	@ zero_extendqisi2
 4665              	.LVL611:
 4666 04fc CB7E     		ldrb	r3, [r1, #27]	@ zero_extendqisi2
 4667 04fe 897E     		ldrb	r1, [r1, #26]	@ zero_extendqisi2
 4668              	.LVL612:
 4669 0500 42EA0022 		orr	r2, r2, r0, lsl #8
 4670 0504 41EA0323 		orr	r3, r1, r3, lsl #8
 4671 0508 43EA0243 		orr	r3, r3, r2, lsl #16
 4672 050c AB60     		str	r3, [r5, #8]
 4673              	.LVL613:
1968:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		}
 4674              		.loc 1 1968 0
 4675 050e 89E5     		b	.L602
 4676              	.LVL614:
 4677              	.L462:
 4678              	.LBB649:
 4679              	.LBB635:
 4680              	.LBB627:
 4681              	.LBB575:
1374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4682              		.loc 1 1374 0
 4683 0510 0120     		movs	r0, #1
 4684 0512 90E6     		b	.L465
 4685              	.LVL615:
 4686              	.L468:
1381:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj->lfn) {
 4687              		.loc 1 1381 0
 4688 0514 E869     		ldr	r0, [r5, #28]
 4689 0516 0028     		cmp	r0, #0
 4690 0518 3FF487AE 		beq	.L466
1382:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (c & LLE) {		/* Is it start of LFN sequence? */
 4691              		.loc 1 1382 0
 4692 051c 04F04003 		and	r3, r4, #64
 4693 0520 DBB2     		uxtb	r3, r3
 4694 0522 9BB1     		cbz	r3, .L470
1383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						sum = dir[LDIR_Chksum];
 4695              		.loc 1 1383 0
 4696 0524 4A7B     		ldrb	r2, [r1, #13]	@ zero_extendqisi2
 4697              	.LVL616:
1385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->lfn_idx = dj->index;
 4698              		.loc 1 1385 0
 4699 0526 EB88     		ldrh	r3, [r5, #6]
1383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						sum = dir[LDIR_Chksum];
 4700              		.loc 1 1383 0
 4701 0528 0292     		str	r2, [sp, #8]
1385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->lfn_idx = dj->index;
 4702              		.loc 1 1385 0
 4703 052a 2B84     		strh	r3, [r5, #32]	@ movhi
1384:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						c &= ~LLE; ord = c;	/* LFN start order */
 4704              		.loc 1 1384 0
 4705 052c 04F0BF04 		and	r4, r4, #191
 4706              	.LVL617:
 4707              	.L471:
1388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 4708              		.loc 1 1388 0
 4709 0530 4B7B     		ldrb	r3, [r1, #13]	@ zero_extendqisi2
 4710 0532 029A     		ldr	r2, [sp, #8]
 4711 0534 9342     		cmp	r3, r2
 4712 0536 7FF476AE 		bne	.L517
 4713 053a 2F4B     		ldr	r3, .L655+4
 4714 053c 9847     		blx	r3
 4715              	.LVL618:
 4716 053e 0028     		cmp	r0, #0
 4717 0540 3FF471AE 		beq	.L517
 4718 0544 013C     		subs	r4, r4, #1
 4719 0546 5FFA84F9 		uxtb	r9, r4
 4720 054a 6EE6     		b	.L466
 4721              	.LVL619:
 4722              	.L470:
 4723 054c 4C45     		cmp	r4, r9
 4724 054e 7FF46AAE 		bne	.L517
 4725 0552 EDE7     		b	.L471
 4726              	.LVL620:
 4727              	.L476:
 4728              	.LBB570:
 4729              	.LBB553:
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 4730              		.loc 1 1130 0
 4731 0554 E968     		ldr	r1, [r5, #12]
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 4732              		.loc 1 1131 0
 4733 0556 2E68     		ldr	r6, [r5, #0]
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
 4734              		.loc 1 1128 0
 4735 0558 0137     		adds	r7, r7, #1
 4736 055a 2F61     		str	r7, [r5, #16]
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 4737              		.loc 1 1130 0
 4738 055c 21B9     		cbnz	r1, .L478
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 4739              		.loc 1 1131 0
 4740 055e 3389     		ldrh	r3, [r6, #8]
 4741 0560 A342     		cmp	r3, r4
 4742 0562 7FF667AE 		bls	.L501
 4743 0566 DDE6     		b	.L477
 4744              	.L478:
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
 4745              		.loc 1 1135 0
 4746 0568 B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 4747 056a 013B     		subs	r3, r3, #1
 4748 056c 13EA1413 		ands	r3, r3, r4, lsr #4
 4749 0570 7FF4D8AE 		bne	.L477
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
 4750              		.loc 1 1136 0
 4751 0574 3046     		mov	r0, r6
 4752 0576 214B     		ldr	r3, .L655+8
 4753 0578 9847     		blx	r3
 4754              	.LVL621:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 4755              		.loc 1 1137 0
 4756 057a 0128     		cmp	r0, #1
 4757 057c 2CD9     		bls	.L518
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4758              		.loc 1 1138 0
 4759 057e 431C     		adds	r3, r0, #1
 4760 0580 C6D0     		beq	.L462
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
 4761              		.loc 1 1139 0
 4762 0582 2E68     		ldr	r6, [r5, #0]
 4763 0584 B269     		ldr	r2, [r6, #24]
 4764 0586 9042     		cmp	r0, r2
 4765 0588 BFF454AE 		bcs	.L501
 4766              	.LBB549:
 4767              	.LBB547:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 4768              		.loc 1 807 0
 4769 058c 023A     		subs	r2, r2, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 4770              		.loc 1 806 0
 4771 058e 831E     		subs	r3, r0, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 4772              		.loc 1 807 0
 4773 0590 9342     		cmp	r3, r2
 4774              	.LBE547:
 4775              	.LBE549:
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
 4776              		.loc 1 1161 0
 4777 0592 E860     		str	r0, [r5, #12]
 4778              	.LVL622:
 4779              	.LBB550:
 4780              	.LBB548:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 4781              		.loc 1 808 0
 4782 0594 3BBF     		ittet	cc
 4783 0596 B778     		ldrbcc	r7, [r6, #2]	@ zero_extendqisi2
 4784 0598 B26A     		ldrcc	r2, [r6, #40]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 4785              		.loc 1 807 0
 4786 059a 4746     		movcs	r7, r8
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 4787              		.loc 1 808 0
 4788 059c 07FB0327 		mlacc	r7, r7, r3, r2
 4789              	.LBE548:
 4790              	.LBE550:
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
 4791              		.loc 1 1162 0
 4792 05a0 2F61     		str	r7, [r5, #16]
 4793 05a2 BFE6     		b	.L477
 4794              	.LVL623:
 4795              	.L432:
 4796              	.LBE553:
 4797              	.LBE570:
 4798              	.LBE575:
 4799              	.LBE627:
 4800              	.LBB628:
 4801              	.LBB621:
 4802              	.LBB614:
 4803              	.LBB615:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 4804              		.loc 1 807 0
 4805 05a4 023B     		subs	r3, r3, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 4806              		.loc 1 806 0
 4807 05a6 BA1E     		subs	r2, r7, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 4808              		.loc 1 807 0
 4809 05a8 9A42     		cmp	r2, r3
 4810              	.LBE615:
 4811              	.LBE614:
1097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 4812              		.loc 1 1097 0
 4813 05aa EF60     		str	r7, [r5, #12]
 4814              	.LVL624:
 4815              	.LBB617:
 4816              	.LBB616:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 4817              		.loc 1 808 0
 4818 05ac 3BBF     		ittet	cc
 4819 05ae 96F80280 		ldrbcc	r8, [r6, #2]	@ zero_extendqisi2
 4820              	.LVL625:
 4821 05b2 B36A     		ldrcc	r3, [r6, #40]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 4822              		.loc 1 807 0
 4823 05b4 4FF00008 		movcs	r8, #0
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 4824              		.loc 1 808 0
 4825 05b8 08FB0238 		mlacc	r8, r8, r2, r3
 4826              	.LBE616:
 4827              	.LBE617:
1098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = clust2sect(dj->fs, clst) + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 4828              		.loc 1 1098 0
 4829 05bc C5F81080 		str	r8, [r5, #16]
 4830 05c0 0EE6     		b	.L431
 4831              	.LVL626:
 4832              	.L522:
 4833              	.LBE621:
 4834              	.LBE628:
 4835              	.LBE635:
 4836              	.LBE649:
1965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NO_PATH; break;
 4837              		.loc 1 1965 0
 4838 05c2 0520     		movs	r0, #5
 4839 05c4 60E5     		b	.L548
 4840              	.LVL627:
 4841              	.L636:
 4842              	.LBB650:
 4843              	.LBB537:
1729:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
 4844              		.loc 1 1729 0
 4845 05c6 A0F16103 		sub	r3, r0, #97
 4846 05ca 192B     		cmp	r3, #25
 4847 05cc 3FF663AE 		bhi	.L418
 4848 05d0 2038     		subs	r0, r0, #32
 4849              	.LVL628:
1730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						b |= 1; w -= 0x20;
 4850              		.loc 1 1730 0
 4851 05d2 42F00102 		orr	r2, r2, #1
 4852              	.LVL629:
 4853 05d6 5EE6     		b	.L418
 4854              	.LVL630:
 4855              	.L518:
 4856              	.LBE537:
 4857              	.LBE650:
 4858              	.LBB651:
 4859              	.LBB636:
 4860              	.LBB629:
 4861              	.LBB576:
 4862              	.LBB571:
 4863              	.LBB554:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 4864              		.loc 1 1137 0
 4865 05d8 0220     		movs	r0, #2
 4866              	.LVL631:
 4867 05da 2CE6     		b	.L465
 4868              	.LVL632:
 4869              	.L492:
 4870              	.LBE554:
 4871              	.LBE571:
 4872              	.LBE576:
 4873              	.LBE629:
 4874              	.LBE636:
 4875              	.LBE651:
 4876              	.LBB652:
 4877              	.LBB538:
1699:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
 4878              		.loc 1 1699 0
 4879 05dc 48F00308 		orr	r8, r8, #3
 4880              	.LVL633:
 4881 05e0 4FF00B0A 		mov	sl, #11
 4882              	.LVL634:
 4883 05e4 C0E5     		b	.L403
 4884              	.LVL635:
 4885              	.L473:
 4886 05e6 AB69     		ldr	r3, [r5, #24]
 4887 05e8 039C     		ldr	r4, [sp, #12]
 4888 05ea DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 4889              	.LVL636:
 4890 05ec 78E7     		b	.L474
 4891              	.LVL637:
 4892              	.L645:
 4893              	.LBE538:
 4894              	.LBE652:
1962:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment match. Function completed. */
 4895              		.loc 1 1962 0
 4896 05ee 0020     		movs	r0, #0
 4897 05f0 4AE5     		b	.L548
 4898              	.L656:
 4899 05f2 00BF     		.align	2
 4900              	.L655:
 4901 05f4 00000000 		.word	disk_read
 4902 05f8 00000000 		.word	cmp_lfn
 4903 05fc 00000000 		.word	get_fat
 4904 0600 00000000 		.word	disk_write
 4905              	.LVL638:
 4906              	.L643:
 4907              	.LBB653:
 4908              	.LBB637:
 4909              	.LBB630:
 4910              	.LBB622:
 4911              	.LBB618:
 4912              	.LBB611:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 4913              		.loc 1 834 0
 4914 0604 316A     		ldr	r1, [r6, #32]
 4915              	.LBB581:
 4916              	.LBB582:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 4917              		.loc 1 727 0
 4918 0606 D6F82C80 		ldr	r8, [r6, #44]
 4919              	.LBE582:
 4920              	.LBE581:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 4921              		.loc 1 833 0
 4922 060a 07EB570B 		add	fp, r7, r7, lsr #1
 4923              	.LVL639:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 4924              		.loc 1 834 0
 4925 060e 01EB5B29 		add	r9, r1, fp, lsr #9
 4926              	.LVL640:
 4927              	.LBB588:
 4928              	.LBB586:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 4929              		.loc 1 728 0
 4930 0612 C145     		cmp	r9, r8
 4931 0614 06D0     		beq	.L486
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 4932              		.loc 1 730 0
 4933 0616 3279     		ldrb	r2, [r6, #4]	@ zero_extendqisi2
 4934 0618 002A     		cmp	r2, #0
 4935 061a 45D1     		bne	.L438
 4936              	.L442:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 4937              		.loc 1 743 0
 4938 061c B9F1000F 		cmp	r9, #0
 4939 0620 6DD1     		bne	.L646
 4940              	.L605:
 4941 0622 316A     		ldr	r1, [r6, #32]
 4942              	.L486:
 4943              	.LBE586:
 4944              	.LBE588:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 4945              		.loc 1 835 0
 4946 0624 4FEACB53 		lsl	r3, fp, #23
 4947 0628 DB0D     		lsrs	r3, r3, #23
 4948 062a F318     		adds	r3, r6, r3
 4949 062c 0BF1010B 		add	fp, fp, #1
 4950              	.LVL641:
 4951 0630 93F83040 		ldrb	r4, [r3, #48]	@ zero_extendqisi2
 4952              	.LVL642:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 4953              		.loc 1 836 0
 4954 0634 804B     		ldr	r3, .L657
 4955 0636 3046     		mov	r0, r6
 4956 0638 01EB5B21 		add	r1, r1, fp, lsr #9
 4957 063c 9847     		blx	r3
 4958              	.LVL643:
 4959 063e 0028     		cmp	r0, #0
 4960 0640 7FF447AE 		bne	.L433
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 4961              		.loc 1 837 0
 4962 0644 4FEACB53 		lsl	r3, fp, #23
 4963 0648 DB0D     		lsrs	r3, r3, #23
 4964 064a F318     		adds	r3, r6, r3
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 4965              		.loc 1 838 0
 4966 064c FF07     		lsls	r7, r7, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 4967              		.loc 1 837 0
 4968 064e 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 4969 0652 44EA0323 		orr	r3, r4, r3, lsl #8
 4970              	.LVL644:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 4971              		.loc 1 838 0
 4972 0656 40F1EC80 		bpl	.L445
 4973 065a 1F09     		lsrs	r7, r3, #4
 4974              	.LVL645:
 4975              	.L446:
 4976              	.LBE611:
 4977              	.LBE618:
1093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst < 2 || clst >= dj->fs->n_fatent)	/* Reached to end of table or int error */
 4978              		.loc 1 1093 0
 4979 065c 012F     		cmp	r7, #1
 4980 065e 7FF6AFAD 		bls	.L499
 4981 0662 2E68     		ldr	r6, [r5, #0]
 4982 0664 B369     		ldr	r3, [r6, #24]
 4983 0666 BB42     		cmp	r3, r7
 4984 0668 7FF6AAAD 		bls	.L499
 4985              	.LBB619:
 4986              	.LBB612:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 4987              		.loc 1 831 0
 4988 066c 3378     		ldrb	r3, [r6, #0]	@ zero_extendqisi2
 4989 066e 022B     		cmp	r3, #2
 4990 0670 7FF429AE 		bne	.L647
 4991              	.L435:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 4992              		.loc 1 841 0
 4993 0674 336A     		ldr	r3, [r6, #32]
 4994              	.LBB589:
 4995              	.LBB590:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 4996              		.loc 1 727 0
 4997 0676 D6F82C80 		ldr	r8, [r6, #44]
 4998              	.LBE590:
 4999              	.LBE589:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 5000              		.loc 1 841 0
 5001 067a 03EB1729 		add	r9, r3, r7, lsr #8
 5002              	.LVL646:
 5003              	.LBB596:
 5004              	.LBB594:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 5005              		.loc 1 728 0
 5006 067e C145     		cmp	r9, r8
 5007 0680 07D0     		beq	.L487
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 5008              		.loc 1 730 0
 5009 0682 3379     		ldrb	r3, [r6, #4]	@ zero_extendqisi2
 5010 0684 002B     		cmp	r3, #0
 5011 0686 40F09D80 		bne	.L448
 5012              	.L450:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 5013              		.loc 1 743 0
 5014 068a B9F1000F 		cmp	r9, #0
 5015 068e 40F0C380 		bne	.L648
 5016              	.L487:
 5017              	.LBE594:
 5018              	.LBE596:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 5019              		.loc 1 842 0
 5020 0692 3B06     		lsls	r3, r7, #24
 5021 0694 DB0D     		lsrs	r3, r3, #23
 5022              	.LVL647:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 5023              		.loc 1 843 0
 5024 0696 F218     		adds	r2, r6, r3
 5025 0698 1346     		mov	r3, r2
 5026              	.LVL648:
 5027 069a 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 5028 069e 93F83170 		ldrb	r7, [r3, #49]	@ zero_extendqisi2
 5029              	.LVL649:
 5030 06a2 42EA0727 		orr	r7, r2, r7, lsl #8
 5031 06a6 D9E7     		b	.L446
 5032              	.LVL650:
 5033              	.L438:
 5034              	.LBB597:
 5035              	.LBB587:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 5036              		.loc 1 731 0
 5037 06a8 06F1300A 		add	sl, r6, #48
 5038 06ac 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5039 06ae 634C     		ldr	r4, .L657+4
 5040 06b0 5146     		mov	r1, sl
 5041 06b2 4246     		mov	r2, r8
 5042 06b4 A047     		blx	r4
 5043              	.LVL651:
 5044 06b6 0028     		cmp	r0, #0
 5045 06b8 7FF40BAE 		bne	.L433
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5046              		.loc 1 734 0
 5047 06bc F369     		ldr	r3, [r6, #28]
 5048 06be 326A     		ldr	r2, [r6, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 5049              		.loc 1 733 0
 5050 06c0 3071     		strb	r0, [r6, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5051              		.loc 1 734 0
 5052 06c2 9A18     		adds	r2, r3, r2
 5053 06c4 9045     		cmp	r8, r2
 5054 06c6 A9D2     		bcs	.L442
 5055              	.LBB583:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5056              		.loc 1 736 0
 5057 06c8 96F803C0 		ldrb	ip, [r6, #3]	@ zero_extendqisi2
 5058              	.LVL652:
 5059 06cc BCF1010F 		cmp	ip, #1
 5060 06d0 01D8     		bhi	.L606
 5061 06d2 A3E7     		b	.L442
 5062              	.LVL653:
 5063              	.L649:
 5064 06d4 F369     		ldr	r3, [r6, #28]
 5065              	.LVL654:
 5066              	.L606:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 5067              		.loc 1 737 0
 5068 06d6 9844     		add	r8, r8, r3
 5069              	.LVL655:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 5070              		.loc 1 738 0
 5071 06d8 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5072 06da CDF800C0 		str	ip, [sp, #0]
 5073 06de 0123     		movs	r3, #1
 5074 06e0 5146     		mov	r1, sl
 5075 06e2 4246     		mov	r2, r8
 5076 06e4 A047     		blx	r4
 5077              	.LVL656:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5078              		.loc 1 736 0
 5079 06e6 DDF800C0 		ldr	ip, [sp, #0]
 5080 06ea 0CF1FF3C 		add	ip, ip, #-1
 5081 06ee 5FFA8CFC 		uxtb	ip, ip
 5082              	.LVL657:
 5083 06f2 BCF1010F 		cmp	ip, #1
 5084 06f6 EDD8     		bhi	.L649
 5085              	.LBE583:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 5086              		.loc 1 743 0
 5087 06f8 B9F1000F 		cmp	r9, #0
 5088 06fc 91D0     		beq	.L605
 5089              	.LVL658:
 5090              	.L646:
 5091              	.LBB584:
 5092              	.LBB585:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 5093              		.loc 1 744 0
 5094 06fe 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5095 0700 4F4C     		ldr	r4, .L657+8
 5096 0702 06F13001 		add	r1, r6, #48
 5097 0706 4A46     		mov	r2, r9
 5098 0708 0123     		movs	r3, #1
 5099 070a A047     		blx	r4
 5100              	.LVL659:
 5101 070c 0028     		cmp	r0, #0
 5102 070e 7FF4E0AD 		bne	.L433
 5103 0712 316A     		ldr	r1, [r6, #32]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 5104              		.loc 1 746 0
 5105 0714 C6F82C90 		str	r9, [r6, #44]
 5106 0718 84E7     		b	.L486
 5107              	.LVL660:
 5108              	.L436:
 5109              	.LBE585:
 5110              	.LBE584:
 5111              	.LBE587:
 5112              	.LBE597:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 5113              		.loc 1 846 0
 5114 071a 336A     		ldr	r3, [r6, #32]
 5115              	.LBB598:
 5116              	.LBB599:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 5117              		.loc 1 727 0
 5118 071c D6F82C80 		ldr	r8, [r6, #44]
 5119              	.LBE599:
 5120              	.LBE598:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 5121              		.loc 1 846 0
 5122 0720 03EBD719 		add	r9, r3, r7, lsr #7
 5123              	.LVL661:
 5124              	.LBB605:
 5125              	.LBB603:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 5126              		.loc 1 728 0
 5127 0724 C145     		cmp	r9, r8
 5128 0726 04D0     		beq	.L488
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 5129              		.loc 1 730 0
 5130 0728 3379     		ldrb	r3, [r6, #4]	@ zero_extendqisi2
 5131 072a B3B9     		cbnz	r3, .L453
 5132              	.L455:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 5133              		.loc 1 743 0
 5134 072c B9F1000F 		cmp	r9, #0
 5135 0730 3BD1     		bne	.L650
 5136              	.L488:
 5137              	.LVL662:
 5138              	.LBE603:
 5139              	.LBE605:
 5140              	.LBB606:
 5141              	.LBB607:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 5142              		.loc 1 847 0
 5143 0732 7A06     		lsls	r2, r7, #25
 5144 0734 D20D     		lsrs	r2, r2, #23
 5145 0736 02F13003 		add	r3, r2, #48
 5146 073a F318     		adds	r3, r6, r3
 5147              	.LVL663:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 5148              		.loc 1 848 0
 5149 073c B618     		adds	r6, r6, r2
 5150              	.LVL664:
 5151 073e DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 5152 0740 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 5153 0742 5F78     		ldrb	r7, [r3, #1]	@ zero_extendqisi2
 5154              	.LVL665:
 5155 0744 96F83030 		ldrb	r3, [r6, #48]	@ zero_extendqisi2
 5156              	.LVL666:
 5157 0748 1206     		lsls	r2, r2, #24
 5158 074a 42EA0142 		orr	r2, r2, r1, lsl #16
 5159 074e 42EA0727 		orr	r7, r2, r7, lsl #8
 5160 0752 1F43     		orrs	r7, r7, r3
 5161 0754 27F07047 		bic	r7, r7, #-268435456
 5162 0758 80E7     		b	.L446
 5163              	.LVL667:
 5164              	.L453:
 5165              	.LBE607:
 5166              	.LBE606:
 5167              	.LBB608:
 5168              	.LBB604:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 5169              		.loc 1 731 0
 5170 075a 06F1300B 		add	fp, r6, #48
 5171 075e 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5172 0760 364C     		ldr	r4, .L657+4
 5173 0762 5946     		mov	r1, fp
 5174 0764 4246     		mov	r2, r8
 5175 0766 0123     		movs	r3, #1
 5176 0768 A047     		blx	r4
 5177              	.LVL668:
 5178 076a 0028     		cmp	r0, #0
 5179 076c 7FF4B1AD 		bne	.L433
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5180              		.loc 1 734 0
 5181 0770 F369     		ldr	r3, [r6, #28]
 5182 0772 326A     		ldr	r2, [r6, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 5183              		.loc 1 733 0
 5184 0774 3071     		strb	r0, [r6, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5185              		.loc 1 734 0
 5186 0776 9A18     		adds	r2, r3, r2
 5187 0778 9045     		cmp	r8, r2
 5188 077a D7D2     		bcs	.L455
 5189              	.LBB600:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5190              		.loc 1 736 0
 5191 077c 96F803A0 		ldrb	sl, [r6, #3]	@ zero_extendqisi2
 5192              	.LVL669:
 5193 0780 BAF1010F 		cmp	sl, #1
 5194 0784 01D8     		bhi	.L608
 5195 0786 D1E7     		b	.L455
 5196              	.LVL670:
 5197              	.L651:
 5198 0788 F369     		ldr	r3, [r6, #28]
 5199              	.LVL671:
 5200              	.L608:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 5201              		.loc 1 737 0
 5202 078a 9844     		add	r8, r8, r3
 5203              	.LVL672:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5204              		.loc 1 736 0
 5205 078c 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 5206              		.loc 1 738 0
 5207 0790 0123     		movs	r3, #1
 5208 0792 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5209 0794 5946     		mov	r1, fp
 5210 0796 4246     		mov	r2, r8
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5211              		.loc 1 736 0
 5212 0798 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 5213              		.loc 1 738 0
 5214 079c A047     		blx	r4
 5215              	.LVL673:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5216              		.loc 1 736 0
 5217 079e BAF1010F 		cmp	sl, #1
 5218 07a2 F1D8     		bhi	.L651
 5219              	.LBE600:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 5220              		.loc 1 743 0
 5221 07a4 B9F1000F 		cmp	r9, #0
 5222 07a8 C3D0     		beq	.L488
 5223              	.LVL674:
 5224              	.L650:
 5225              	.LBB601:
 5226              	.LBB602:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 5227              		.loc 1 744 0
 5228 07aa 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5229 07ac 244C     		ldr	r4, .L657+8
 5230 07ae 06F13001 		add	r1, r6, #48
 5231 07b2 4A46     		mov	r2, r9
 5232 07b4 0123     		movs	r3, #1
 5233 07b6 A047     		blx	r4
 5234              	.LVL675:
 5235 07b8 0028     		cmp	r0, #0
 5236 07ba 7FF48AAD 		bne	.L433
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 5237              		.loc 1 746 0
 5238 07be C6F82C90 		str	r9, [r6, #44]
 5239 07c2 B6E7     		b	.L488
 5240              	.LVL676:
 5241              	.L448:
 5242              	.LBE602:
 5243              	.LBE601:
 5244              	.LBE604:
 5245              	.LBE608:
 5246              	.LBB609:
 5247              	.LBB595:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 5248              		.loc 1 731 0
 5249 07c4 06F1300B 		add	fp, r6, #48
 5250 07c8 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5251 07ca 1C4C     		ldr	r4, .L657+4
 5252 07cc 5946     		mov	r1, fp
 5253 07ce 4246     		mov	r2, r8
 5254 07d0 0123     		movs	r3, #1
 5255 07d2 A047     		blx	r4
 5256              	.LVL677:
 5257 07d4 0028     		cmp	r0, #0
 5258 07d6 7FF47CAD 		bne	.L433
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5259              		.loc 1 734 0
 5260 07da F369     		ldr	r3, [r6, #28]
 5261 07dc 326A     		ldr	r2, [r6, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 5262              		.loc 1 733 0
 5263 07de 3071     		strb	r0, [r6, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5264              		.loc 1 734 0
 5265 07e0 9A18     		adds	r2, r3, r2
 5266 07e2 9045     		cmp	r8, r2
 5267 07e4 BFF451AF 		bcs	.L450
 5268              	.LBB591:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5269              		.loc 1 736 0
 5270 07e8 96F803A0 		ldrb	sl, [r6, #3]	@ zero_extendqisi2
 5271              	.LVL678:
 5272 07ec BAF1010F 		cmp	sl, #1
 5273 07f0 01D8     		bhi	.L607
 5274 07f2 4AE7     		b	.L450
 5275              	.LVL679:
 5276              	.L652:
 5277 07f4 F369     		ldr	r3, [r6, #28]
 5278              	.LVL680:
 5279              	.L607:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 5280              		.loc 1 737 0
 5281 07f6 9844     		add	r8, r8, r3
 5282              	.LVL681:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5283              		.loc 1 736 0
 5284 07f8 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 5285              		.loc 1 738 0
 5286 07fc 0123     		movs	r3, #1
 5287 07fe 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5288 0800 5946     		mov	r1, fp
 5289 0802 4246     		mov	r2, r8
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5290              		.loc 1 736 0
 5291 0804 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 5292              		.loc 1 738 0
 5293 0808 A047     		blx	r4
 5294              	.LVL682:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5295              		.loc 1 736 0
 5296 080a BAF1010F 		cmp	sl, #1
 5297 080e F1D8     		bhi	.L652
 5298              	.LBE591:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 5299              		.loc 1 743 0
 5300 0810 B9F1000F 		cmp	r9, #0
 5301 0814 3FF43DAF 		beq	.L487
 5302              	.LVL683:
 5303              	.L648:
 5304              	.LBB592:
 5305              	.LBB593:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 5306              		.loc 1 744 0
 5307 0818 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 5308 081a 094C     		ldr	r4, .L657+8
 5309 081c 06F13001 		add	r1, r6, #48
 5310 0820 4A46     		mov	r2, r9
 5311 0822 0123     		movs	r3, #1
 5312 0824 A047     		blx	r4
 5313              	.LVL684:
 5314 0826 0028     		cmp	r0, #0
 5315 0828 7FF453AD 		bne	.L433
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 5316              		.loc 1 746 0
 5317 082c C6F82C90 		str	r9, [r6, #44]
 5318 0830 2FE7     		b	.L487
 5319              	.LVL685:
 5320              	.L445:
 5321              	.LBE593:
 5322              	.LBE592:
 5323              	.LBE595:
 5324              	.LBE609:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 5325              		.loc 1 838 0
 5326 0832 1F05     		lsls	r7, r3, #20
 5327 0834 3F0D     		lsrs	r7, r7, #20
 5328 0836 11E7     		b	.L446
 5329              	.L658:
 5330              		.align	2
 5331              	.L657:
 5332 0838 00000000 		.word	move_window
 5333 083c 00000000 		.word	disk_write
 5334 0840 00000000 		.word	disk_read
 5335              	.LBE612:
 5336              	.LBE619:
 5337              	.LBE622:
 5338              	.LBE630:
 5339              	.LBE637:
 5340              	.LBE653:
 5341              		.cfi_endproc
 5342              	.LFE24:
 5344              		.section	.text.dir_read,"ax",%progbits
 5345              		.align	2
 5346              		.thumb
 5347              		.thumb_func
 5349              	dir_read:
 5350              	.LFB19:
1417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 5351              		.loc 1 1417 0
 5352              		.cfi_startproc
 5353              		@ args = 0, pretend = 0, frame = 8
 5354              		@ frame_needed = 0, uses_anonymous_args = 0
 5355              	.LVL686:
 5356 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 5357              	.LCFI15:
 5358              		.cfi_def_cfa_offset 36
 5359              		.cfi_offset 4, -36
 5360              		.cfi_offset 5, -32
 5361              		.cfi_offset 6, -28
 5362              		.cfi_offset 7, -24
 5363              		.cfi_offset 8, -20
 5364              		.cfi_offset 9, -16
 5365              		.cfi_offset 10, -12
 5366              		.cfi_offset 11, -8
 5367              		.cfi_offset 14, -4
1425:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (dj->sect) {
 5368              		.loc 1 1425 0
 5369 0004 0769     		ldr	r7, [r0, #16]
1417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 5370              		.loc 1 1417 0
 5371 0006 83B0     		sub	sp, sp, #12
 5372              	.LCFI16:
 5373              		.cfi_def_cfa_offset 48
1417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 5374              		.loc 1 1417 0
 5375 0008 0646     		mov	r6, r0
1425:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (dj->sect) {
 5376              		.loc 1 1425 0
 5377 000a 002F     		cmp	r7, #0
 5378 000c 2DD0     		beq	.L723
1421:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE a, ord = 0xFF, sum = 0xFF;
 5379              		.loc 1 1421 0
 5380 000e FF20     		movs	r0, #255
 5381              	.LVL687:
 5382 0010 3468     		ldr	r4, [r6, #0]
 5383 0012 0190     		str	r0, [sp, #4]
 5384 0014 8046     		mov	r8, r0
 5385              	.LVL688:
 5386              	.L787:
 5387              	.LBB673:
 5388              	.LBB674:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 5389              		.loc 1 727 0
 5390 0016 E56A     		ldr	r5, [r4, #44]
 5391              	.LVL689:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 5392              		.loc 1 728 0
 5393 0018 AF42     		cmp	r7, r5
 5394 001a 0FD0     		beq	.L662
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 5395              		.loc 1 730 0
 5396 001c 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 5397              		.loc 1 731 0
 5398 001e 04F1300A 		add	sl, r4, #48
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 5399              		.loc 1 730 0
 5400 0022 002B     		cmp	r3, #0
 5401 0024 40F02B81 		bne	.L663
 5402              	.L668:
 5403              	.LVL690:
 5404              	.LBB675:
 5405              	.LBB676:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 5406              		.loc 1 744 0
 5407 0028 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 5408 002a BC4D     		ldr	r5, .L808
 5409              	.LVL691:
 5410 002c 5146     		mov	r1, sl
 5411 002e 3A46     		mov	r2, r7
 5412 0030 0123     		movs	r3, #1
 5413 0032 A847     		blx	r5
 5414              	.LVL692:
 5415 0034 0028     		cmp	r0, #0
 5416 0036 40F02081 		bne	.L731
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 5417              		.loc 1 746 0
 5418 003a E762     		str	r7, [r4, #44]
 5419              	.LVL693:
 5420              	.L662:
 5421              	.LBE676:
 5422              	.LBE675:
 5423              	.LBE674:
 5424              	.LBE673:
1428:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dir = dj->dir;					/* Ptr to the directory entry of current index */
 5425              		.loc 1 1428 0
 5426 003c 7269     		ldr	r2, [r6, #20]
 5427              	.LVL694:
1429:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = dir[DIR_Name];
 5428              		.loc 1 1429 0
 5429 003e 1378     		ldrb	r3, [r2, #0]	@ zero_extendqisi2
 5430              	.LVL695:
1430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5431              		.loc 1 1430 0
 5432 0040 9BB1     		cbz	r3, .L723
1433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || (!_FS_RPATH && c == '.') || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without 
 5433              		.loc 1 1433 0
 5434 0042 E52B     		cmp	r3, #229
1432:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 5435              		.loc 1 1432 0
 5436 0044 D17A     		ldrb	r1, [r2, #11]	@ zero_extendqisi2
 5437              	.LVL696:
1433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || (!_FS_RPATH && c == '.') || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without 
 5438              		.loc 1 1433 0
 5439 0046 0AD0     		beq	.L729
1433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || (!_FS_RPATH && c == '.') || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without 
 5440              		.loc 1 1433 0 is_stmt 0 discriminator 1
 5441 0048 2E2B     		cmp	r3, #46
 5442 004a 08D0     		beq	.L729
 5443 004c 01F00800 		and	r0, r1, #8
 5444 0050 C0B2     		uxtb	r0, r0
1432:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 5445              		.loc 1 1432 0 is_stmt 1 discriminator 1
 5446 0052 01F03F01 		and	r1, r1, #63
 5447              	.LVL697:
1433:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || (!_FS_RPATH && c == '.') || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without 
 5448              		.loc 1 1433 0 discriminator 1
 5449 0056 0028     		cmp	r0, #0
 5450 0058 2AD0     		beq	.L671
 5451 005a 0F29     		cmp	r1, #15
 5452 005c 2BD0     		beq	.L672
 5453              	.LVL698:
 5454              	.L729:
1443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 5455              		.loc 1 1443 0
 5456 005e 4FF0FF08 		mov	r8, #255
 5457              	.LVL699:
 5458              	.L670:
 5459              	.LBB679:
 5460              	.LBB680:
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
 5461              		.loc 1 1123 0
 5462 0062 F588     		ldrh	r5, [r6, #6]
 5463 0064 0135     		adds	r5, r5, #1
 5464 0066 ADB2     		uxth	r5, r5
 5465              	.LVL700:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 5466              		.loc 1 1124 0
 5467 0068 2DB9     		cbnz	r5, .L802
 5468              	.LVL701:
 5469              	.L723:
 5470              	.LBE680:
 5471              	.LBE679:
1424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = FR_NO_FILE;
 5472              		.loc 1 1424 0
 5473 006a 0420     		movs	r0, #4
 5474              	.L660:
1458:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res != FR_OK) dj->sect = 0;
 5475              		.loc 1 1458 0 discriminator 1
 5476 006c 0023     		movs	r3, #0
 5477 006e 3361     		str	r3, [r6, #16]
 5478              	.L801:
1461:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 5479              		.loc 1 1461 0
 5480 0070 03B0     		add	sp, sp, #12
 5481 0072 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 5482              	.LVL702:
 5483              	.L802:
 5484              	.LBB689:
 5485              	.LBB685:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 5486              		.loc 1 1124 0
 5487 0076 3769     		ldr	r7, [r6, #16]
 5488 0078 002F     		cmp	r7, #0
 5489 007a F6D0     		beq	.L723
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
 5490              		.loc 1 1127 0
 5491 007c 15F00F03 		ands	r3, r5, #15
 5492 0080 40F02681 		bne	.L803
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 5493              		.loc 1 1130 0
 5494 0084 F168     		ldr	r1, [r6, #12]
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 5495              		.loc 1 1131 0
 5496 0086 3468     		ldr	r4, [r6, #0]
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
 5497              		.loc 1 1128 0
 5498 0088 0137     		adds	r7, r7, #1
 5499 008a 3761     		str	r7, [r6, #16]
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 5500              		.loc 1 1130 0
 5501 008c 0029     		cmp	r1, #0
 5502 008e 00F02681 		beq	.L804
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
 5503              		.loc 1 1135 0
 5504 0092 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 5505 0094 013B     		subs	r3, r3, #1
 5506 0096 13EA151A 		ands	sl, r3, r5, lsr #4
 5507 009a 00F0A481 		beq	.L805
 5508              	.LVL703:
 5509              	.L709:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 5510              		.loc 1 1168 0
 5511 009e 04F1300A 		add	sl, r4, #48
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 5512              		.loc 1 1167 0
 5513 00a2 F580     		strh	r5, [r6, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 5514              		.loc 1 1168 0
 5515 00a4 C6F814A0 		str	sl, [r6, #20]
 5516              	.LVL704:
 5517              	.LBE685:
 5518              	.LBE689:
1425:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (dj->sect) {
 5519              		.loc 1 1425 0
 5520 00a8 002F     		cmp	r7, #0
 5521 00aa B4D1     		bne	.L787
 5522              	.LVL705:
 5523              	.L704:
1424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = FR_NO_FILE;
 5524              		.loc 1 1424 0
 5525 00ac 0020     		movs	r0, #0
 5526 00ae DFE7     		b	.L801
 5527              	.LVL706:
 5528              	.L671:
1436:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
 5529              		.loc 1 1436 0
 5530 00b0 0F29     		cmp	r1, #15
 5531 00b2 40F01981 		bne	.L673
 5532              	.L672:
1437:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c & LLE) {			/* Is it start of LFN sequence? */
 5533              		.loc 1 1437 0
 5534 00b6 03F04001 		and	r1, r3, #64
 5535 00ba C9B2     		uxtb	r1, r1
 5536 00bc 0029     		cmp	r1, #0
 5537 00be 00F00381 		beq	.L674
1438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					sum = dir[LDIR_Chksum];
 5538              		.loc 1 1438 0
 5539 00c2 507B     		ldrb	r0, [r2, #13]	@ zero_extendqisi2
1440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->lfn_idx = dj->index;
 5540              		.loc 1 1440 0
 5541 00c4 F188     		ldrh	r1, [r6, #6]
1438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					sum = dir[LDIR_Chksum];
 5542              		.loc 1 1438 0
 5543 00c6 0190     		str	r0, [sp, #4]
 5544              	.LVL707:
1440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->lfn_idx = dj->index;
 5545              		.loc 1 1440 0
 5546 00c8 3184     		strh	r1, [r6, #32]	@ movhi
1439:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					c &= ~LLE; ord = c;
 5547              		.loc 1 1439 0
 5548 00ca 03F0BF08 		and	r8, r3, #191
 5549              	.LVL708:
 5550              	.L675:
1443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 5551              		.loc 1 1443 0 discriminator 1
 5552 00ce 537B     		ldrb	r3, [r2, #13]	@ zero_extendqisi2
 5553 00d0 0199     		ldr	r1, [sp, #4]
 5554 00d2 8B42     		cmp	r3, r1
 5555 00d4 C3D1     		bne	.L729
 5556              	.LBB690:
1225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
 5557              		.loc 1 1225 0 discriminator 1
 5558 00d6 1178     		ldrb	r1, [r2, #0]	@ zero_extendqisi2
 5559              	.LBE690:
1443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 5560              		.loc 1 1443 0 discriminator 1
 5561 00d8 F469     		ldr	r4, [r6, #28]
 5562              	.LVL709:
 5563              	.LBB694:
 5564              	.LBB691:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5565              		.loc 1 1229 0 discriminator 1
 5566 00da 9778     		ldrb	r7, [r2, #2]	@ zero_extendqisi2
 5567              	.LVL710:
 5568 00dc 5578     		ldrb	r5, [r2, #1]	@ zero_extendqisi2
1225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
 5569              		.loc 1 1225 0 discriminator 1
 5570 00de 01F03F01 		and	r1, r1, #63
 5571 00e2 0139     		subs	r1, r1, #1
 5572 00e4 01EB4100 		add	r0, r1, r1, lsl #1
 5573 00e8 01EB8000 		add	r0, r1, r0, lsl #2
 5574              	.LVL711:
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5575              		.loc 1 1231 0 discriminator 1
 5576 00ec FE28     		cmp	r0, #254
 5577 00ee 00F27681 		bhi	.L676
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5578              		.loc 1 1229 0
 5579 00f2 45EA0725 		orr	r5, r5, r7, lsl #8
 5580              	.LVL712:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5581              		.loc 1 1232 0
 5582 00f6 24F81050 		strh	r5, [r4, r0, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5583              		.loc 1 1229 0
 5584 00fa 92F804C0 		ldrb	ip, [r2, #4]	@ zero_extendqisi2
 5585 00fe D778     		ldrb	r7, [r2, #3]	@ zero_extendqisi2
 5586              	.LVL713:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5587              		.loc 1 1232 0
 5588 0100 411C     		adds	r1, r0, #1
 5589              	.LVL714:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5590              		.loc 1 1229 0
 5591 0102 47EA0C27 		orr	r7, r7, ip, lsl #8
 5592              	.LVL715:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5593              		.loc 1 1230 0
 5594 0106 002D     		cmp	r5, #0
 5595 0108 00F00C81 		beq	.L806
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5596              		.loc 1 1231 0
 5597 010c FF29     		cmp	r1, #255
 5598 010e 00F06681 		beq	.L676
 5599              	.LVL716:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5600              		.loc 1 1232 0
 5601 0112 24F81170 		strh	r7, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5602              		.loc 1 1229 0
 5603 0116 92F806C0 		ldrb	ip, [r2, #6]	@ zero_extendqisi2
 5604 011a 5579     		ldrb	r5, [r2, #5]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5605              		.loc 1 1232 0
 5606 011c 811C     		adds	r1, r0, #2
 5607              	.LVL717:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5608              		.loc 1 1229 0
 5609 011e 45EA0C25 		orr	r5, r5, ip, lsl #8
 5610              	.LVL718:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5611              		.loc 1 1230 0
 5612 0122 002F     		cmp	r7, #0
 5613 0124 00F00681 		beq	.L713
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5614              		.loc 1 1231 0
 5615 0128 FF29     		cmp	r1, #255
 5616 012a 00F05881 		beq	.L676
 5617              	.LVL719:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5618              		.loc 1 1232 0
 5619 012e 24F81150 		strh	r5, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5620              		.loc 1 1229 0
 5621 0132 92F808C0 		ldrb	ip, [r2, #8]	@ zero_extendqisi2
 5622 0136 D779     		ldrb	r7, [r2, #7]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5623              		.loc 1 1232 0
 5624 0138 C11C     		adds	r1, r0, #3
 5625              	.LVL720:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5626              		.loc 1 1229 0
 5627 013a 47EA0C27 		orr	r7, r7, ip, lsl #8
 5628              	.LVL721:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5629              		.loc 1 1230 0
 5630 013e 002D     		cmp	r5, #0
 5631 0140 00F00081 		beq	.L714
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5632              		.loc 1 1231 0
 5633 0144 FF29     		cmp	r1, #255
 5634 0146 00F04A81 		beq	.L676
 5635              	.LVL722:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5636              		.loc 1 1232 0
 5637 014a 24F81170 		strh	r7, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5638              		.loc 1 1229 0
 5639 014e 92F80AC0 		ldrb	ip, [r2, #10]	@ zero_extendqisi2
 5640 0152 557A     		ldrb	r5, [r2, #9]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5641              		.loc 1 1232 0
 5642 0154 011D     		adds	r1, r0, #4
 5643              	.LVL723:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5644              		.loc 1 1229 0
 5645 0156 45EA0C25 		orr	r5, r5, ip, lsl #8
 5646              	.LVL724:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5647              		.loc 1 1230 0
 5648 015a 002F     		cmp	r7, #0
 5649 015c 00F0FA80 		beq	.L715
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5650              		.loc 1 1231 0
 5651 0160 FF29     		cmp	r1, #255
 5652 0162 00F03C81 		beq	.L676
 5653              	.LVL725:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5654              		.loc 1 1232 0
 5655 0166 24F81150 		strh	r5, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5656              		.loc 1 1229 0
 5657 016a 92F80FC0 		ldrb	ip, [r2, #15]	@ zero_extendqisi2
 5658 016e 977B     		ldrb	r7, [r2, #14]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5659              		.loc 1 1232 0
 5660 0170 411D     		adds	r1, r0, #5
 5661              	.LVL726:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5662              		.loc 1 1229 0
 5663 0172 47EA0C27 		orr	r7, r7, ip, lsl #8
 5664              	.LVL727:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5665              		.loc 1 1230 0
 5666 0176 002D     		cmp	r5, #0
 5667 0178 00F0F480 		beq	.L716
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5668              		.loc 1 1231 0
 5669 017c FF29     		cmp	r1, #255
 5670 017e 00F02E81 		beq	.L676
 5671              	.LVL728:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5672              		.loc 1 1232 0
 5673 0182 24F81170 		strh	r7, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5674              		.loc 1 1229 0
 5675 0186 92F811C0 		ldrb	ip, [r2, #17]	@ zero_extendqisi2
 5676 018a 157C     		ldrb	r5, [r2, #16]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5677              		.loc 1 1232 0
 5678 018c 811D     		adds	r1, r0, #6
 5679              	.LVL729:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5680              		.loc 1 1229 0
 5681 018e 45EA0C25 		orr	r5, r5, ip, lsl #8
 5682              	.LVL730:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5683              		.loc 1 1230 0
 5684 0192 002F     		cmp	r7, #0
 5685 0194 00F0EE80 		beq	.L717
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5686              		.loc 1 1231 0
 5687 0198 FF29     		cmp	r1, #255
 5688 019a 00F02081 		beq	.L676
 5689              	.LVL731:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5690              		.loc 1 1232 0
 5691 019e 24F81150 		strh	r5, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5692              		.loc 1 1229 0
 5693 01a2 92F813C0 		ldrb	ip, [r2, #19]	@ zero_extendqisi2
 5694 01a6 977C     		ldrb	r7, [r2, #18]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5695              		.loc 1 1232 0
 5696 01a8 C11D     		adds	r1, r0, #7
 5697              	.LVL732:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5698              		.loc 1 1229 0
 5699 01aa 47EA0C27 		orr	r7, r7, ip, lsl #8
 5700              	.LVL733:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5701              		.loc 1 1230 0
 5702 01ae 002D     		cmp	r5, #0
 5703 01b0 00F0E880 		beq	.L718
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5704              		.loc 1 1231 0
 5705 01b4 FF29     		cmp	r1, #255
 5706 01b6 00F01281 		beq	.L676
 5707              	.LVL734:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5708              		.loc 1 1232 0
 5709 01ba 24F81170 		strh	r7, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5710              		.loc 1 1229 0
 5711 01be 92F815C0 		ldrb	ip, [r2, #21]	@ zero_extendqisi2
 5712 01c2 157D     		ldrb	r5, [r2, #20]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5713              		.loc 1 1232 0
 5714 01c4 00F10801 		add	r1, r0, #8
 5715              	.LVL735:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5716              		.loc 1 1229 0
 5717 01c8 45EA0C25 		orr	r5, r5, ip, lsl #8
 5718              	.LVL736:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5719              		.loc 1 1230 0
 5720 01cc 002F     		cmp	r7, #0
 5721 01ce 00F0E180 		beq	.L719
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5722              		.loc 1 1231 0
 5723 01d2 FF29     		cmp	r1, #255
 5724 01d4 00F00381 		beq	.L676
 5725              	.LVL737:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5726              		.loc 1 1232 0
 5727 01d8 24F81150 		strh	r5, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5728              		.loc 1 1229 0
 5729 01dc 92F817C0 		ldrb	ip, [r2, #23]	@ zero_extendqisi2
 5730 01e0 977D     		ldrb	r7, [r2, #22]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5731              		.loc 1 1232 0
 5732 01e2 00F10901 		add	r1, r0, #9
 5733              	.LVL738:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5734              		.loc 1 1229 0
 5735 01e6 47EA0C27 		orr	r7, r7, ip, lsl #8
 5736              	.LVL739:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5737              		.loc 1 1230 0
 5738 01ea 002D     		cmp	r5, #0
 5739 01ec 00F0DA80 		beq	.L720
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5740              		.loc 1 1231 0
 5741 01f0 FF29     		cmp	r1, #255
 5742 01f2 00F0F480 		beq	.L676
 5743              	.LVL740:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5744              		.loc 1 1232 0
 5745 01f6 24F81170 		strh	r7, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5746              		.loc 1 1229 0
 5747 01fa 92F819C0 		ldrb	ip, [r2, #25]	@ zero_extendqisi2
 5748 01fe 157E     		ldrb	r5, [r2, #24]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5749              		.loc 1 1232 0
 5750 0200 00F10A01 		add	r1, r0, #10
 5751              	.LVL741:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5752              		.loc 1 1229 0
 5753 0204 45EA0C25 		orr	r5, r5, ip, lsl #8
 5754              	.LVL742:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5755              		.loc 1 1230 0
 5756 0208 002F     		cmp	r7, #0
 5757 020a 00F0D380 		beq	.L721
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5758              		.loc 1 1231 0
 5759 020e FF29     		cmp	r1, #255
 5760 0210 00F0E580 		beq	.L676
 5761              	.LVL743:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5762              		.loc 1 1232 0
 5763 0214 24F81150 		strh	r5, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5764              		.loc 1 1229 0
 5765 0218 92F81DC0 		ldrb	ip, [r2, #29]	@ zero_extendqisi2
 5766 021c 177F     		ldrb	r7, [r2, #28]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5767              		.loc 1 1232 0
 5768 021e 00F10B01 		add	r1, r0, #11
 5769              	.LVL744:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5770              		.loc 1 1229 0
 5771 0222 47EA0C27 		orr	r7, r7, ip, lsl #8
 5772              	.LVL745:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5773              		.loc 1 1230 0
 5774 0226 002D     		cmp	r5, #0
 5775 0228 00F0CC80 		beq	.L722
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5776              		.loc 1 1231 0
 5777 022c FF29     		cmp	r1, #255
 5778 022e 00F0D680 		beq	.L676
 5779              	.LVL746:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5780              		.loc 1 1232 0
 5781 0232 24F81170 		strh	r7, [r4, r1, lsl #1]	@ movhi
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5782              		.loc 1 1229 0
 5783 0236 92F81FC0 		ldrb	ip, [r2, #31]	@ zero_extendqisi2
 5784 023a 957F     		ldrb	r5, [r2, #30]	@ zero_extendqisi2
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5785              		.loc 1 1232 0
 5786 023c 00F10C01 		add	r1, r0, #12
 5787              	.LVL747:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5788              		.loc 1 1229 0
 5789 0240 45EA0C25 		orr	r5, r5, ip, lsl #8
 5790              	.LVL748:
1230:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc) {	/* Last char has not been processed */
 5791              		.loc 1 1230 0
 5792 0244 002F     		cmp	r7, #0
 5793 0246 00F0C580 		beq	.L699
1231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 5794              		.loc 1 1231 0
 5795 024a FF29     		cmp	r1, #255
 5796 024c 00F0C780 		beq	.L676
 5797              	.LVL749:
1232:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 5798              		.loc 1 1232 0
 5799 0250 24F81150 		strh	r5, [r4, r1, lsl #1]	@ movhi
 5800 0254 00F10D01 		add	r1, r0, #13
 5801              	.LVL750:
 5802              	.L700:
 5803              	.LBE691:
1238:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dir[LDIR_Ord] & LLE) {				/* Put terminator if it is the last LFN part */
 5804              		.loc 1 1238 0
 5805 0258 1278     		ldrb	r2, [r2, #0]	@ zero_extendqisi2
 5806              	.LVL751:
 5807              	.LBB692:
 5808 025a 02F04002 		and	r2, r2, #64
 5809 025e D2B2     		uxtb	r2, r2
 5810 0260 2AB1     		cbz	r2, .L701
1239:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
 5811              		.loc 1 1239 0
 5812 0262 FF29     		cmp	r1, #255
 5813 0264 00F0BB80 		beq	.L676
1240:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		lfnbuf[i] = 0;
 5814              		.loc 1 1240 0
 5815 0268 0022     		movs	r2, #0
 5816 026a 24F81120 		strh	r2, [r4, r1, lsl #1]	@ movhi
 5817              	.L701:
 5818              	.LBE692:
 5819              	.LBE694:
1443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 5820              		.loc 1 1443 0
 5821 026e 08F1FF38 		add	r8, r8, #-1
 5822 0272 5FFA88F8 		uxtb	r8, r8
 5823 0276 0193     		str	r3, [sp, #4]
 5824 0278 F3E6     		b	.L670
 5825              	.LVL752:
 5826              	.L731:
 5827              	.LBB695:
 5828              	.LBB686:
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 5829              		.loc 1 1138 0
 5830 027a 0120     		movs	r0, #1
 5831 027c F6E6     		b	.L660
 5832              	.LVL753:
 5833              	.L663:
 5834              	.LBE686:
 5835              	.LBE695:
 5836              	.LBB696:
 5837              	.LBB678:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 5838              		.loc 1 731 0
 5839 027e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 5840 0280 DFF89CB0 		ldr	fp, .L808+4
 5841 0284 5146     		mov	r1, sl
 5842 0286 2A46     		mov	r2, r5
 5843 0288 0123     		movs	r3, #1
 5844 028a D847     		blx	fp
 5845              	.LVL754:
 5846 028c 0028     		cmp	r0, #0
 5847 028e F4D1     		bne	.L731
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5848              		.loc 1 734 0
 5849 0290 E369     		ldr	r3, [r4, #28]
 5850 0292 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 5851              		.loc 1 733 0
 5852 0294 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 5853              		.loc 1 734 0
 5854 0296 9A18     		adds	r2, r3, r2
 5855 0298 9542     		cmp	r5, r2
 5856 029a BFF4C5AE 		bcs	.L668
 5857              	.LBB677:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5858              		.loc 1 736 0
 5859 029e 94F80390 		ldrb	r9, [r4, #3]	@ zero_extendqisi2
 5860              	.LVL755:
 5861 02a2 B9F1010F 		cmp	r9, #1
 5862 02a6 01D8     		bhi	.L789
 5863 02a8 BEE6     		b	.L668
 5864              	.LVL756:
 5865              	.L807:
 5866 02aa E369     		ldr	r3, [r4, #28]
 5867              	.LVL757:
 5868              	.L789:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 5869              		.loc 1 737 0
 5870 02ac ED18     		adds	r5, r5, r3
 5871              	.LVL758:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 5872              		.loc 1 738 0
 5873 02ae 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 5874 02b0 0123     		movs	r3, #1
 5875 02b2 5146     		mov	r1, sl
 5876 02b4 2A46     		mov	r2, r5
 5877 02b6 D847     		blx	fp
 5878              	.LVL759:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 5879              		.loc 1 736 0
 5880 02b8 09F1FF3C 		add	ip, r9, #-1
 5881 02bc 5FFA8CF9 		uxtb	r9, ip
 5882              	.LVL760:
 5883 02c0 B9F1010F 		cmp	r9, #1
 5884 02c4 F1D8     		bhi	.L807
 5885 02c6 AFE6     		b	.L668
 5886              	.LVL761:
 5887              	.L674:
 5888              	.LBE677:
 5889              	.LBE678:
 5890              	.LBE696:
1443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 5891              		.loc 1 1443 0
 5892 02c8 4345     		cmp	r3, r8
 5893 02ca 7FF4C8AE 		bne	.L729
 5894 02ce FEE6     		b	.L675
 5895              	.LVL762:
 5896              	.L803:
 5897 02d0 3468     		ldr	r4, [r6, #0]
 5898              	.LBB697:
 5899              	.LBB687:
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 5900              		.loc 1 1167 0
 5901 02d2 F580     		strh	r5, [r6, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 5902              		.loc 1 1168 0
 5903 02d4 04EB4313 		add	r3, r4, r3, lsl #5
 5904 02d8 3033     		adds	r3, r3, #48
 5905 02da 7361     		str	r3, [r6, #20]
 5906              	.LVL763:
 5907 02dc 9BE6     		b	.L787
 5908              	.LVL764:
 5909              	.L804:
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 5910              		.loc 1 1131 0
 5911 02de 2389     		ldrh	r3, [r4, #8]
 5912 02e0 AB42     		cmp	r3, r5
 5913 02e2 7FF6C2AE 		bls	.L723
 5914 02e6 DAE6     		b	.L709
 5915              	.LVL765:
 5916              	.L673:
 5917              	.LBE687:
 5918              	.LBE697:
1445:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
 5919              		.loc 1 1445 0
 5920 02e8 B8F1000F 		cmp	r8, #0
 5921 02ec 10D1     		bne	.L702
 5922 02ee 0B23     		movs	r3, #11
 5923              	.LVL766:
 5924              	.L703:
 5925              	.LBB698:
 5926              	.LBB699:
1340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
 5927              		.loc 1 1340 0
 5928 02f0 4FEAC810 		lsl	r0, r8, #7
 5929 02f4 12F8011B 		ldrb	r1, [r2], #1	@ zero_extendqisi2
 5930              	.LVL767:
 5931 02f8 40EA5808 		orr	r8, r0, r8, lsr #1
 5932              	.LVL768:
 5933 02fc 51FA88F8 		uxtab	r8, r1, r8
 5934 0300 013B     		subs	r3, r3, #1
 5935              	.LVL769:
 5936 0302 5FFA88F8 		uxtb	r8, r8
 5937              	.LVL770:
 5938 0306 F3D1     		bne	.L703
 5939              	.LBE699:
 5940              	.LBE698:
1445:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
 5941              		.loc 1 1445 0
 5942 0308 019B     		ldr	r3, [sp, #4]
 5943 030a 9845     		cmp	r8, r3
 5944 030c 3FF4CEAE 		beq	.L704
 5945              	.LVL771:
 5946              	.L702:
1446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->lfn_idx = 0xFFFF;		/* It has no LFN. */
 5947              		.loc 1 1446 0
 5948 0310 4FF6FF73 		movw	r3, #65535
 5949 0314 3384     		strh	r3, [r6, #32]	@ movhi
 5950              	.LVL772:
1424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = FR_NO_FILE;
 5951              		.loc 1 1424 0
 5952 0316 0020     		movs	r0, #0
 5953 0318 AAE6     		b	.L801
 5954              	.L809:
 5955 031a 00BF     		.align	2
 5956              	.L808:
 5957 031c 00000000 		.word	disk_read
 5958 0320 00000000 		.word	disk_write
 5959              	.LVL773:
 5960              	.L806:
 5961              	.LBB700:
 5962              	.LBB693:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 5963              		.loc 1 1234 0
 5964 0324 4FF6FF70 		movw	r0, #65535
 5965 0328 8742     		cmp	r7, r0
 5966 032a 58D1     		bne	.L676
 5967              	.LVL774:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5968              		.loc 1 1229 0
 5969 032c 9579     		ldrb	r5, [r2, #6]	@ zero_extendqisi2
 5970 032e 5079     		ldrb	r0, [r2, #5]	@ zero_extendqisi2
 5971 0330 40EA0525 		orr	r5, r0, r5, lsl #8
 5972              	.LVL775:
 5973              	.L713:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 5974              		.loc 1 1234 0
 5975 0334 4FF6FF70 		movw	r0, #65535
 5976 0338 8542     		cmp	r5, r0
 5977 033a 50D1     		bne	.L676
 5978              	.LVL776:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5979              		.loc 1 1229 0
 5980 033c 177A     		ldrb	r7, [r2, #8]	@ zero_extendqisi2
 5981 033e D079     		ldrb	r0, [r2, #7]	@ zero_extendqisi2
 5982 0340 40EA0727 		orr	r7, r0, r7, lsl #8
 5983              	.LVL777:
 5984              	.L714:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 5985              		.loc 1 1234 0
 5986 0344 4FF6FF70 		movw	r0, #65535
 5987 0348 8742     		cmp	r7, r0
 5988 034a 48D1     		bne	.L676
 5989              	.LVL778:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 5990              		.loc 1 1229 0
 5991 034c 957A     		ldrb	r5, [r2, #10]	@ zero_extendqisi2
 5992 034e 507A     		ldrb	r0, [r2, #9]	@ zero_extendqisi2
 5993 0350 40EA0525 		orr	r5, r0, r5, lsl #8
 5994              	.LVL779:
 5995              	.L715:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 5996              		.loc 1 1234 0
 5997 0354 4FF6FF70 		movw	r0, #65535
 5998 0358 8542     		cmp	r5, r0
 5999 035a 40D1     		bne	.L676
 6000              	.LVL780:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6001              		.loc 1 1229 0
 6002 035c D77B     		ldrb	r7, [r2, #15]	@ zero_extendqisi2
 6003 035e 907B     		ldrb	r0, [r2, #14]	@ zero_extendqisi2
 6004 0360 40EA0727 		orr	r7, r0, r7, lsl #8
 6005              	.LVL781:
 6006              	.L716:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6007              		.loc 1 1234 0
 6008 0364 4FF6FF70 		movw	r0, #65535
 6009 0368 8742     		cmp	r7, r0
 6010 036a 38D1     		bne	.L676
 6011              	.LVL782:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6012              		.loc 1 1229 0
 6013 036c 557C     		ldrb	r5, [r2, #17]	@ zero_extendqisi2
 6014 036e 107C     		ldrb	r0, [r2, #16]	@ zero_extendqisi2
 6015 0370 40EA0525 		orr	r5, r0, r5, lsl #8
 6016              	.LVL783:
 6017              	.L717:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6018              		.loc 1 1234 0
 6019 0374 4FF6FF70 		movw	r0, #65535
 6020 0378 8542     		cmp	r5, r0
 6021 037a 30D1     		bne	.L676
 6022              	.LVL784:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6023              		.loc 1 1229 0
 6024 037c D77C     		ldrb	r7, [r2, #19]	@ zero_extendqisi2
 6025 037e 907C     		ldrb	r0, [r2, #18]	@ zero_extendqisi2
 6026 0380 40EA0727 		orr	r7, r0, r7, lsl #8
 6027              	.LVL785:
 6028              	.L718:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6029              		.loc 1 1234 0
 6030 0384 4FF6FF70 		movw	r0, #65535
 6031 0388 8742     		cmp	r7, r0
 6032 038a 28D1     		bne	.L676
 6033              	.LVL786:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6034              		.loc 1 1229 0
 6035 038c 557D     		ldrb	r5, [r2, #21]	@ zero_extendqisi2
 6036 038e 107D     		ldrb	r0, [r2, #20]	@ zero_extendqisi2
 6037 0390 40EA0525 		orr	r5, r0, r5, lsl #8
 6038              	.LVL787:
 6039              	.L719:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6040              		.loc 1 1234 0
 6041 0394 4FF6FF70 		movw	r0, #65535
 6042 0398 8542     		cmp	r5, r0
 6043 039a 20D1     		bne	.L676
 6044              	.LVL788:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6045              		.loc 1 1229 0
 6046 039c D77D     		ldrb	r7, [r2, #23]	@ zero_extendqisi2
 6047 039e 907D     		ldrb	r0, [r2, #22]	@ zero_extendqisi2
 6048 03a0 40EA0727 		orr	r7, r0, r7, lsl #8
 6049              	.LVL789:
 6050              	.L720:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6051              		.loc 1 1234 0
 6052 03a4 4FF6FF70 		movw	r0, #65535
 6053 03a8 8742     		cmp	r7, r0
 6054 03aa 18D1     		bne	.L676
 6055              	.LVL790:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6056              		.loc 1 1229 0
 6057 03ac 557E     		ldrb	r5, [r2, #25]	@ zero_extendqisi2
 6058 03ae 107E     		ldrb	r0, [r2, #24]	@ zero_extendqisi2
 6059 03b0 40EA0525 		orr	r5, r0, r5, lsl #8
 6060              	.LVL791:
 6061              	.L721:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6062              		.loc 1 1234 0
 6063 03b4 4FF6FF70 		movw	r0, #65535
 6064 03b8 8542     		cmp	r5, r0
 6065 03ba 10D1     		bne	.L676
 6066              	.LVL792:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6067              		.loc 1 1229 0
 6068 03bc 577F     		ldrb	r7, [r2, #29]	@ zero_extendqisi2
 6069 03be 107F     		ldrb	r0, [r2, #28]	@ zero_extendqisi2
 6070 03c0 40EA0727 		orr	r7, r0, r7, lsl #8
 6071              	.LVL793:
 6072              	.L722:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6073              		.loc 1 1234 0
 6074 03c4 4FF6FF70 		movw	r0, #65535
 6075 03c8 8742     		cmp	r7, r0
 6076 03ca 08D1     		bne	.L676
 6077              	.LVL794:
1229:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
 6078              		.loc 1 1229 0
 6079 03cc D57F     		ldrb	r5, [r2, #31]	@ zero_extendqisi2
 6080 03ce 907F     		ldrb	r0, [r2, #30]	@ zero_extendqisi2
 6081 03d0 40EA0525 		orr	r5, r0, r5, lsl #8
 6082              	.LVL795:
 6083              	.L699:
1234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 6084              		.loc 1 1234 0
 6085 03d4 4FF6FF70 		movw	r0, #65535
 6086 03d8 8542     		cmp	r5, r0
 6087 03da 3FF43DAF 		beq	.L700
 6088              	.LVL796:
 6089              	.L676:
 6090              	.LBE693:
 6091              	.LBE700:
1443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 6092              		.loc 1 1443 0
 6093 03de 0193     		str	r3, [sp, #4]
 6094 03e0 4FF0FF08 		mov	r8, #255
 6095 03e4 3DE6     		b	.L670
 6096              	.LVL797:
 6097              	.L805:
 6098              	.LBB701:
 6099              	.LBB688:
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
 6100              		.loc 1 1136 0
 6101 03e6 2046     		mov	r0, r4
 6102 03e8 0C4B     		ldr	r3, .L810
 6103 03ea 9847     		blx	r3
 6104              	.LVL798:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 6105              		.loc 1 1137 0
 6106 03ec 0128     		cmp	r0, #1
 6107 03ee 13D9     		bls	.L730
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 6108              		.loc 1 1138 0
 6109 03f0 431C     		adds	r3, r0, #1
 6110 03f2 3FF442AF 		beq	.L731
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
 6111              		.loc 1 1139 0
 6112 03f6 3468     		ldr	r4, [r6, #0]
 6113 03f8 A369     		ldr	r3, [r4, #24]
 6114 03fa 9842     		cmp	r0, r3
 6115 03fc BFF435AE 		bcs	.L723
 6116              	.LBB681:
 6117              	.LBB682:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6118              		.loc 1 807 0
 6119 0400 023B     		subs	r3, r3, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 6120              		.loc 1 806 0
 6121 0402 821E     		subs	r2, r0, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6122              		.loc 1 807 0
 6123 0404 9A42     		cmp	r2, r3
 6124              	.LBE682:
 6125              	.LBE681:
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
 6126              		.loc 1 1161 0
 6127 0406 F060     		str	r0, [r6, #12]
 6128              	.LVL799:
 6129              	.LBB684:
 6130              	.LBB683:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 6131              		.loc 1 808 0
 6132 0408 3BBF     		ittet	cc
 6133 040a A778     		ldrbcc	r7, [r4, #2]	@ zero_extendqisi2
 6134 040c A36A     		ldrcc	r3, [r4, #40]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6135              		.loc 1 807 0
 6136 040e 5746     		movcs	r7, sl
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 6137              		.loc 1 808 0
 6138 0410 07FB0237 		mlacc	r7, r7, r2, r3
 6139              	.LBE683:
 6140              	.LBE684:
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
 6141              		.loc 1 1162 0
 6142 0414 3761     		str	r7, [r6, #16]
 6143 0416 42E6     		b	.L709
 6144              	.LVL800:
 6145              	.L730:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 6146              		.loc 1 1137 0
 6147 0418 0220     		movs	r0, #2
 6148              	.LVL801:
 6149 041a 27E6     		b	.L660
 6150              	.L811:
 6151              		.align	2
 6152              	.L810:
 6153 041c 00000000 		.word	get_fat
 6154              	.LBE688:
 6155              	.LBE701:
 6156              		.cfi_endproc
 6157              	.LFE19:
 6159              		.section	.text.dir_remove,"ax",%progbits
 6160              		.align	2
 6161              		.thumb
 6162              		.thumb_func
 6164              	dir_remove:
 6165              	.LFB21:
1581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 6166              		.loc 1 1581 0
 6167              		.cfi_startproc
 6168              		@ args = 0, pretend = 0, frame = 8
 6169              		@ frame_needed = 0, uses_anonymous_args = 0
 6170              	.LVL802:
 6171 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 6172              	.LCFI17:
 6173              		.cfi_def_cfa_offset 36
 6174              		.cfi_offset 4, -36
 6175              		.cfi_offset 5, -32
 6176              		.cfi_offset 6, -28
 6177              		.cfi_offset 7, -24
 6178              		.cfi_offset 8, -20
 6179              		.cfi_offset 9, -16
 6180              		.cfi_offset 10, -12
 6181              		.cfi_offset 11, -8
 6182              		.cfi_offset 14, -4
1586:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index;	/* SFN index */
 6183              		.loc 1 1586 0
 6184 0004 B0F80690 		ldrh	r9, [r0, #6]
 6185              	.LVL803:
1587:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = dir_sdi(dj, (WORD)((dj->lfn_idx == 0xFFFF) ? i : dj->lfn_idx));	/* Goto the SFN or top of th
 6186              		.loc 1 1587 0
 6187 0008 068C     		ldrh	r6, [r0, #32]
 6188              	.LBB725:
 6189              	.LBB726:
1076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst = dj->sclust;
 6190              		.loc 1 1076 0
 6191 000a 8768     		ldr	r7, [r0, #8]
 6192              	.LBE726:
 6193              	.LBE725:
1587:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = dir_sdi(dj, (WORD)((dj->lfn_idx == 0xFFFF) ? i : dj->lfn_idx));	/* Goto the SFN or top of th
 6194              		.loc 1 1587 0
 6195 000c 4FF6FF73 		movw	r3, #65535
 6196 0010 9E42     		cmp	r6, r3
 6197 0012 08BF     		it	eq
 6198 0014 4E46     		moveq	r6, r9
 6199              	.LVL804:
 6200              	.LBB744:
 6201              	.LBB739:
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 6202              		.loc 1 1077 0
 6203 0016 012F     		cmp	r7, #1
 6204              	.LBE739:
 6205              	.LBE744:
1581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 6206              		.loc 1 1581 0
 6207 0018 83B0     		sub	sp, sp, #12
 6208              	.LCFI18:
 6209              		.cfi_def_cfa_offset 48
1581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 6210              		.loc 1 1581 0
 6211 001a 0546     		mov	r5, r0
 6212              	.LBB745:
 6213              	.LBB740:
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 6214              		.loc 1 1075 0
 6215 001c C680     		strh	r6, [r0, #6]	@ movhi
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 6216              		.loc 1 1077 0
 6217 001e 03D0     		beq	.L839
 6218 0020 0468     		ldr	r4, [r0, #0]
 6219 0022 A369     		ldr	r3, [r4, #24]
 6220 0024 9F42     		cmp	r7, r3
 6221 0026 03D3     		bcc	.L871
 6222              	.LVL805:
 6223              	.L839:
 6224              	.LBE740:
 6225              	.LBE745:
 6226              	.LBB746:
 6227              	.LBB747:
 6228              	.LBB748:
 6229              	.LBB749:
1597:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
 6230              		.loc 1 1597 0
 6231 0028 0220     		movs	r0, #2
 6232              	.LVL806:
 6233              	.L866:
 6234              	.LBE749:
 6235              	.LBE748:
 6236              	.LBE747:
 6237              	.LBE746:
1612:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 6238              		.loc 1 1612 0
 6239 002a 03B0     		add	sp, sp, #12
 6240 002c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 6241              	.LVL807:
 6242              	.L871:
 6243              	.LBB757:
 6244              	.LBB741:
1079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!clst && dj->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 6245              		.loc 1 1079 0
 6246 0030 002F     		cmp	r7, #0
 6247 0032 3CD1     		bne	.L817
 6248 0034 2278     		ldrb	r2, [r4, #0]	@ zero_extendqisi2
 6249 0036 032A     		cmp	r2, #3
 6250 0038 36D0     		beq	.L872
 6251              	.L818:
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 6252              		.loc 1 1084 0
 6253 003a 2389     		ldrh	r3, [r4, #8]
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 6254              		.loc 1 1083 0
 6255 003c 0022     		movs	r2, #0
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 6256              		.loc 1 1084 0
 6257 003e B342     		cmp	r3, r6
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 6258              		.loc 1 1083 0
 6259 0040 EA60     		str	r2, [r5, #12]
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 6260              		.loc 1 1084 0
 6261 0042 F1D9     		bls	.L839
1086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = dj->fs->dirbase + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 6262              		.loc 1 1086 0
 6263 0044 636A     		ldr	r3, [r4, #36]
 6264 0046 C6F30F17 		ubfx	r7, r6, #4, #16
 6265              	.LVL808:
 6266 004a FF18     		adds	r7, r7, r3
 6267 004c 2F61     		str	r7, [r5, #16]
 6268              	.LVL809:
 6269              	.L819:
1101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (idx % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 6270              		.loc 1 1101 0
 6271 004e 06F00F02 		and	r2, r6, #15
 6272 0052 04EB4212 		add	r2, r4, r2, lsl #5
 6273 0056 3032     		adds	r2, r2, #48
 6274 0058 6A61     		str	r2, [r5, #20]
 6275              	.LVL810:
 6276              	.L845:
 6277              	.LBE741:
 6278              	.LBE757:
 6279              	.LBB758:
 6280              	.LBB759:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 6281              		.loc 1 727 0
 6282 005a E66A     		ldr	r6, [r4, #44]
 6283              	.LVL811:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 6284              		.loc 1 728 0
 6285 005c BE42     		cmp	r6, r7
 6286 005e 06D0     		beq	.L848
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 6287              		.loc 1 730 0
 6288 0060 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 6289 0062 002B     		cmp	r3, #0
 6290 0064 6ED1     		bne	.L832
 6291              	.L836:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 6292              		.loc 1 743 0
 6293 0066 002F     		cmp	r7, #0
 6294 0068 40F09580 		bne	.L873
 6295              	.L867:
 6296 006c 6A69     		ldr	r2, [r5, #20]
 6297              	.LVL812:
 6298              	.L848:
 6299              	.LBE759:
 6300              	.LBE758:
1592:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*dj->dir = DDE;			/* Mark the entry "deleted" */
 6301              		.loc 1 1592 0
 6302 006e E523     		movs	r3, #229
 6303 0070 1370     		strb	r3, [r2, #0]
1593:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->fs->wflag = 1;
 6304              		.loc 1 1593 0
 6305 0072 2B68     		ldr	r3, [r5, #0]
 6306 0074 4FF00108 		mov	r8, #1
 6307 0078 83F80480 		strb	r8, [r3, #4]
1594:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
 6308              		.loc 1 1594 0
 6309 007c EB88     		ldrh	r3, [r5, #6]
 6310 007e 9945     		cmp	r9, r3
 6311 0080 40F29F80 		bls	.L854
 6312              	.LVL813:
 6313              	.LBB764:
 6314              	.LBB754:
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
 6315              		.loc 1 1123 0
 6316 0084 4344     		add	r3, r3, r8
 6317 0086 9EB2     		uxth	r6, r3
 6318              	.LVL814:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 6319              		.loc 1 1124 0
 6320 0088 002E     		cmp	r6, #0
 6321 008a CDD0     		beq	.L839
 6322 008c 2F69     		ldr	r7, [r5, #16]
 6323              	.LVL815:
 6324 008e 002F     		cmp	r7, #0
 6325 0090 CAD0     		beq	.L839
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
 6326              		.loc 1 1127 0
 6327 0092 16F00F0A 		ands	sl, r6, #15
 6328 0096 00F08A80 		beq	.L840
 6329 009a 2C68     		ldr	r4, [r5, #0]
 6330              	.LVL816:
 6331              	.L841:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 6332              		.loc 1 1168 0
 6333 009c 04EB4A12 		add	r2, r4, sl, lsl #5
 6334 00a0 3032     		adds	r2, r2, #48
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 6335              		.loc 1 1167 0
 6336 00a2 EE80     		strh	r6, [r5, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 6337              		.loc 1 1168 0
 6338 00a4 6A61     		str	r2, [r5, #20]
 6339 00a6 D8E7     		b	.L845
 6340              	.LVL817:
 6341              	.L872:
 6342              	.LBE754:
 6343              	.LBE764:
 6344              	.LBB765:
 6345              	.LBB742:
1080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		clst = dj->fs->dirbase;
 6346              		.loc 1 1080 0
 6347 00a8 676A     		ldr	r7, [r4, #36]
 6348              	.LVL818:
1082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {	/* Static table (root-dir in FAT12/16) */
 6349              		.loc 1 1082 0
 6350 00aa 002F     		cmp	r7, #0
 6351 00ac C5D0     		beq	.L818
 6352              	.L817:
1089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ic = SS(dj->fs) / SZ_DIR * dj->fs->csize;	/* Entries per cluster */
 6353              		.loc 1 1089 0
 6354 00ae 94F80280 		ldrb	r8, [r4, #2]	@ zero_extendqisi2
 6355 00b2 4FEA0818 		lsl	r8, r8, #4
 6356              	.LVL819:
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 6357              		.loc 1 1090 0
 6358 00b6 4645     		cmp	r6, r8
 6359 00b8 C0F0A480 		bcc	.L820
 6360              	.LVL820:
 6361              	.LBB727:
 6362              	.LBB728:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 6363              		.loc 1 828 0
 6364 00bc 012F     		cmp	r7, #1
 6365 00be B3D9     		bls	.L839
 6366 00c0 BB42     		cmp	r3, r7
 6367 00c2 B1D9     		bls	.L839
 6368 00c4 34E0     		b	.L862
 6369              	.LVL821:
 6370              	.L874:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 6371              		.loc 1 834 0
 6372 00c6 216A     		ldr	r1, [r4, #32]
 6373 00c8 DFF8C0B1 		ldr	fp, .L876+8
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 6374              		.loc 1 833 0
 6375 00cc 07EB570A 		add	sl, r7, r7, lsr #1
 6376              	.LVL822:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 6377              		.loc 1 834 0
 6378 00d0 2046     		mov	r0, r4
 6379 00d2 01EB5A21 		add	r1, r1, sl, lsr #9
 6380 00d6 D847     		blx	fp
 6381              	.LVL823:
 6382 00d8 0028     		cmp	r0, #0
 6383 00da 31D1     		bne	.L835
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 6384              		.loc 1 835 0
 6385 00dc 4FEACA53 		lsl	r3, sl, #23
 6386 00e0 DB0D     		lsrs	r3, r3, #23
 6387 00e2 E318     		adds	r3, r4, r3
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 6388              		.loc 1 836 0
 6389 00e4 216A     		ldr	r1, [r4, #32]
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 6390              		.loc 1 835 0
 6391 00e6 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 6392 00ea 0AF1010A 		add	sl, sl, #1
 6393              	.LVL824:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 6394              		.loc 1 836 0
 6395 00ee 2046     		mov	r0, r4
 6396 00f0 01EB5A21 		add	r1, r1, sl, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 6397              		.loc 1 835 0
 6398 00f4 0193     		str	r3, [sp, #4]
 6399              	.LVL825:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 6400              		.loc 1 836 0
 6401 00f6 D847     		blx	fp
 6402              	.LVL826:
 6403 00f8 10BB     		cbnz	r0, .L835
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 6404              		.loc 1 837 0
 6405 00fa 4FEACA52 		lsl	r2, sl, #23
 6406 00fe D20D     		lsrs	r2, r2, #23
 6407 0100 A218     		adds	r2, r4, r2
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 6408              		.loc 1 838 0
 6409 0102 F907     		lsls	r1, r7, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 6410              		.loc 1 837 0
 6411 0104 92F83030 		ldrb	r3, [r2, #48]	@ zero_extendqisi2
 6412 0108 019A     		ldr	r2, [sp, #4]
 6413 010a 42EA032A 		orr	sl, r2, r3, lsl #8
 6414              	.LVL827:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 6415              		.loc 1 838 0
 6416 010e 4EBF     		itee	mi
 6417 0110 4FEA1A17 		lsrmi	r7, sl, #4
 6418              	.LVL828:
 6419 0114 4FEA0A57 		lslpl	r7, sl, #20
 6420 0118 3F0D     		lsrpl	r7, r7, #20
 6421              	.LVL829:
 6422              	.L828:
 6423              	.LBE728:
 6424              	.LBE727:
1093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst < 2 || clst >= dj->fs->n_fatent)	/* Reached to end of table or int error */
 6425              		.loc 1 1093 0
 6426 011a 012F     		cmp	r7, #1
 6427 011c 84D9     		bls	.L839
 6428 011e 2C68     		ldr	r4, [r5, #0]
 6429 0120 A369     		ldr	r3, [r4, #24]
 6430 0122 BB42     		cmp	r3, r7
 6431 0124 80D9     		bls	.L839
1095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			idx -= ic;
 6432              		.loc 1 1095 0
 6433 0126 C8EB0606 		rsb	r6, r8, r6
 6434 012a B6B2     		uxth	r6, r6
 6435              	.LVL830:
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 6436              		.loc 1 1090 0
 6437 012c B045     		cmp	r8, r6
 6438 012e 69D8     		bhi	.L820
 6439              	.LVL831:
 6440              	.L862:
 6441              	.LBB733:
 6442              	.LBB731:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 6443              		.loc 1 831 0
 6444 0130 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 6445 0132 022B     		cmp	r3, #2
 6446 0134 76D0     		beq	.L823
 6447 0136 032B     		cmp	r3, #3
 6448 0138 00F08780 		beq	.L824
 6449 013c 012B     		cmp	r3, #1
 6450 013e C2D0     		beq	.L874
 6451              	.LVL832:
 6452              	.L835:
 6453              	.LBE731:
 6454              	.LBE733:
 6455              	.LBE742:
 6456              	.LBE765:
1594:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
 6457              		.loc 1 1594 0
 6458 0140 0120     		movs	r0, #1
 6459 0142 72E7     		b	.L866
 6460              	.LVL833:
 6461              	.L832:
 6462              	.LBB766:
 6463              	.LBB763:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 6464              		.loc 1 731 0
 6465 0144 04F1300A 		add	sl, r4, #48
 6466 0148 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 6467 014a DFF844B1 		ldr	fp, .L876+12
 6468 014e 5146     		mov	r1, sl
 6469 0150 3246     		mov	r2, r6
 6470 0152 0123     		movs	r3, #1
 6471 0154 D847     		blx	fp
 6472              	.LVL834:
 6473 0156 0028     		cmp	r0, #0
 6474 0158 F2D1     		bne	.L835
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 6475              		.loc 1 734 0
 6476 015a E369     		ldr	r3, [r4, #28]
 6477 015c 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 6478              		.loc 1 733 0
 6479 015e 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 6480              		.loc 1 734 0
 6481 0160 9A18     		adds	r2, r3, r2
 6482 0162 9642     		cmp	r6, r2
 6483 0164 BFF47FAF 		bcs	.L836
 6484              	.LBB760:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 6485              		.loc 1 736 0
 6486 0168 94F80380 		ldrb	r8, [r4, #3]	@ zero_extendqisi2
 6487              	.LVL835:
 6488 016c B8F1010F 		cmp	r8, #1
 6489 0170 01D8     		bhi	.L868
 6490 0172 78E7     		b	.L836
 6491              	.LVL836:
 6492              	.L875:
 6493 0174 E369     		ldr	r3, [r4, #28]
 6494              	.LVL837:
 6495              	.L868:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 6496              		.loc 1 737 0
 6497 0176 F618     		adds	r6, r6, r3
 6498              	.LVL838:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 6499              		.loc 1 736 0
 6500 0178 08F1FF38 		add	r8, r8, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 6501              		.loc 1 738 0
 6502 017c 0123     		movs	r3, #1
 6503 017e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 6504 0180 5146     		mov	r1, sl
 6505 0182 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 6506              		.loc 1 736 0
 6507 0184 5FFA88F8 		uxtb	r8, r8
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 6508              		.loc 1 738 0
 6509 0188 D847     		blx	fp
 6510              	.LVL839:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 6511              		.loc 1 736 0
 6512 018a B8F1010F 		cmp	r8, #1
 6513 018e F1D8     		bhi	.L875
 6514              	.LBE760:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 6515              		.loc 1 743 0
 6516 0190 002F     		cmp	r7, #0
 6517 0192 3FF46BAF 		beq	.L867
 6518              	.LVL840:
 6519              	.L873:
 6520              	.LBB761:
 6521              	.LBB762:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 6522              		.loc 1 744 0
 6523 0196 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 6524 0198 3A4E     		ldr	r6, .L876
 6525              	.LVL841:
 6526 019a 04F13001 		add	r1, r4, #48
 6527 019e 3A46     		mov	r2, r7
 6528 01a0 0123     		movs	r3, #1
 6529 01a2 B047     		blx	r6
 6530              	.LVL842:
 6531 01a4 0028     		cmp	r0, #0
 6532 01a6 CBD1     		bne	.L835
 6533 01a8 6A69     		ldr	r2, [r5, #20]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 6534              		.loc 1 746 0
 6535 01aa E762     		str	r7, [r4, #44]
 6536 01ac 5FE7     		b	.L848
 6537              	.LVL843:
 6538              	.L840:
 6539              	.LBE762:
 6540              	.LBE761:
 6541              	.LBE763:
 6542              	.LBE766:
 6543              	.LBB767:
 6544              	.LBB755:
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 6545              		.loc 1 1130 0
 6546 01ae E968     		ldr	r1, [r5, #12]
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 6547              		.loc 1 1131 0
 6548 01b0 2C68     		ldr	r4, [r5, #0]
 6549              	.LVL844:
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
 6550              		.loc 1 1128 0
 6551 01b2 0137     		adds	r7, r7, #1
 6552 01b4 2F61     		str	r7, [r5, #16]
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 6553              		.loc 1 1130 0
 6554 01b6 31B9     		cbnz	r1, .L842
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 6555              		.loc 1 1131 0
 6556 01b8 2389     		ldrh	r3, [r4, #8]
 6557              	.LVL845:
 6558 01ba B342     		cmp	r3, r6
 6559 01bc 7FF634AF 		bls	.L839
 6560 01c0 6CE7     		b	.L841
 6561              	.LVL846:
 6562              	.L854:
 6563              	.LBE755:
 6564              	.LBE767:
1594:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
 6565              		.loc 1 1594 0
 6566 01c2 0020     		movs	r0, #0
 6567              	.LVL847:
 6568 01c4 31E7     		b	.L866
 6569              	.LVL848:
 6570              	.L842:
 6571              	.LBB768:
 6572              	.LBB756:
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
 6573              		.loc 1 1135 0
 6574 01c6 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 6575              	.LVL849:
 6576 01c8 013B     		subs	r3, r3, #1
 6577 01ca 13EA1613 		ands	r3, r3, r6, lsr #4
 6578 01ce 7FF465AF 		bne	.L841
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
 6579              		.loc 1 1136 0
 6580 01d2 2046     		mov	r0, r4
 6581 01d4 2C4B     		ldr	r3, .L876+4
 6582 01d6 9847     		blx	r3
 6583              	.LVL850:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 6584              		.loc 1 1137 0
 6585 01d8 0128     		cmp	r0, #1
 6586 01da 7FF625AF 		bls	.L839
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 6587              		.loc 1 1138 0
 6588 01de 421C     		adds	r2, r0, #1
 6589 01e0 AED0     		beq	.L835
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
 6590              		.loc 1 1139 0
 6591 01e2 2C68     		ldr	r4, [r5, #0]
 6592 01e4 A369     		ldr	r3, [r4, #24]
 6593 01e6 9842     		cmp	r0, r3
 6594 01e8 BFF41EAF 		bcs	.L839
 6595              	.LBB752:
 6596              	.LBB750:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6597              		.loc 1 807 0
 6598 01ec 023B     		subs	r3, r3, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 6599              		.loc 1 806 0
 6600 01ee 821E     		subs	r2, r0, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6601              		.loc 1 807 0
 6602 01f0 9A42     		cmp	r2, r3
 6603              	.LBE750:
 6604              	.LBE752:
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
 6605              		.loc 1 1161 0
 6606 01f2 E860     		str	r0, [r5, #12]
 6607              	.LVL851:
 6608              	.LBB753:
 6609              	.LBB751:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 6610              		.loc 1 808 0
 6611 01f4 3DBF     		ittte	cc
 6612 01f6 A778     		ldrbcc	r7, [r4, #2]	@ zero_extendqisi2
 6613 01f8 A36A     		ldrcc	r3, [r4, #40]
 6614 01fa 07FB0237 		mlacc	r7, r7, r2, r3
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6615              		.loc 1 807 0
 6616 01fe 0027     		movcs	r7, #0
 6617              	.LBE751:
 6618              	.LBE753:
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
 6619              		.loc 1 1162 0
 6620 0200 2F61     		str	r7, [r5, #16]
 6621 0202 4BE7     		b	.L841
 6622              	.LVL852:
 6623              	.L820:
 6624              	.LBE756:
 6625              	.LBE768:
 6626              	.LBB769:
 6627              	.LBB743:
 6628              	.LBB734:
 6629              	.LBB735:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6630              		.loc 1 807 0
 6631 0204 A369     		ldr	r3, [r4, #24]
 6632              	.LBE735:
 6633              	.LBE734:
1097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 6634              		.loc 1 1097 0
 6635 0206 EF60     		str	r7, [r5, #12]
 6636              	.LVL853:
 6637              	.LBB737:
 6638              	.LBB736:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6639              		.loc 1 807 0
 6640 0208 023B     		subs	r3, r3, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 6641              		.loc 1 806 0
 6642 020a 023F     		subs	r7, r7, #2
 6643              	.LVL854:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6644              		.loc 1 807 0
 6645 020c 9F42     		cmp	r7, r3
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 6646              		.loc 1 808 0
 6647 020e 3DBF     		ittte	cc
 6648 0210 A36A     		ldrcc	r3, [r4, #40]
 6649 0212 A278     		ldrbcc	r2, [r4, #2]	@ zero_extendqisi2
 6650 0214 02FB0737 		mlacc	r7, r2, r7, r3
 6651              	.LVL855:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 6652              		.loc 1 807 0
 6653 0218 0027     		movcs	r7, #0
 6654              	.LBE736:
 6655              	.LBE737:
1098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = clust2sect(dj->fs, clst) + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 6656              		.loc 1 1098 0
 6657 021a C6F30F13 		ubfx	r3, r6, #4, #16
 6658 021e FF18     		adds	r7, r7, r3
 6659 0220 2F61     		str	r7, [r5, #16]
 6660 0222 14E7     		b	.L819
 6661              	.LVL856:
 6662              	.L823:
 6663              	.LBB738:
 6664              	.LBB732:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 6665              		.loc 1 841 0
 6666 0224 216A     		ldr	r1, [r4, #32]
 6667 0226 194B     		ldr	r3, .L876+8
 6668 0228 2046     		mov	r0, r4
 6669 022a 01EB1721 		add	r1, r1, r7, lsr #8
 6670 022e 9847     		blx	r3
 6671              	.LVL857:
 6672 0230 0028     		cmp	r0, #0
 6673 0232 85D1     		bne	.L835
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 6674              		.loc 1 842 0
 6675 0234 3B06     		lsls	r3, r7, #24
 6676 0236 DB0D     		lsrs	r3, r3, #23
 6677              	.LVL858:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 6678              		.loc 1 843 0
 6679 0238 E218     		adds	r2, r4, r3
 6680 023a 1346     		mov	r3, r2
 6681              	.LVL859:
 6682 023c 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 6683 0240 93F83170 		ldrb	r7, [r3, #49]	@ zero_extendqisi2
 6684              	.LVL860:
 6685 0244 42EA0727 		orr	r7, r2, r7, lsl #8
 6686 0248 67E7     		b	.L828
 6687              	.LVL861:
 6688              	.L824:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 6689              		.loc 1 846 0
 6690 024a 216A     		ldr	r1, [r4, #32]
 6691 024c 0F4B     		ldr	r3, .L876+8
 6692 024e 2046     		mov	r0, r4
 6693 0250 01EBD711 		add	r1, r1, r7, lsr #7
 6694 0254 9847     		blx	r3
 6695              	.LVL862:
 6696 0256 0028     		cmp	r0, #0
 6697 0258 7FF472AF 		bne	.L835
 6698              	.LVL863:
 6699              	.LBB729:
 6700              	.LBB730:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 6701              		.loc 1 847 0
 6702 025c 7A06     		lsls	r2, r7, #25
 6703 025e D20D     		lsrs	r2, r2, #23
 6704 0260 02F13003 		add	r3, r2, #48
 6705 0264 E318     		adds	r3, r4, r3
 6706              	.LVL864:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 6707              		.loc 1 848 0
 6708 0266 A418     		adds	r4, r4, r2
 6709              	.LVL865:
 6710 0268 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 6711 026a 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 6712 026c 5F78     		ldrb	r7, [r3, #1]	@ zero_extendqisi2
 6713              	.LVL866:
 6714 026e 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 6715              	.LVL867:
 6716 0272 1206     		lsls	r2, r2, #24
 6717 0274 42EA0142 		orr	r2, r2, r1, lsl #16
 6718 0278 42EA0727 		orr	r7, r2, r7, lsl #8
 6719 027c 1F43     		orrs	r7, r7, r3
 6720 027e 27F07047 		bic	r7, r7, #-268435456
 6721 0282 4AE7     		b	.L828
 6722              	.L877:
 6723              		.align	2
 6724              	.L876:
 6725 0284 00000000 		.word	disk_read
 6726 0288 00000000 		.word	get_fat
 6727 028c 00000000 		.word	move_window
 6728 0290 00000000 		.word	disk_write
 6729              	.LBE730:
 6730              	.LBE729:
 6731              	.LBE732:
 6732              	.LBE738:
 6733              	.LBE743:
 6734              	.LBE769:
 6735              		.cfi_endproc
 6736              	.LFE21:
 6738              		.section	.text.dir_register,"ax",%progbits
 6739              		.align	2
 6740              		.thumb
 6741              		.thumb_func
 6743              	dir_register:
 6744              	.LFB20:
1474:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 6745              		.loc 1 1474 0
 6746              		.cfi_startproc
 6747              		@ args = 0, pretend = 0, frame = 64
 6748              		@ frame_needed = 0, uses_anonymous_args = 0
 6749              	.LVL868:
 6750 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 6751              	.LCFI19:
 6752              		.cfi_def_cfa_offset 36
 6753              		.cfi_offset 4, -36
 6754              		.cfi_offset 5, -32
 6755              		.cfi_offset 6, -28
 6756              		.cfi_offset 7, -24
 6757              		.cfi_offset 8, -20
 6758              		.cfi_offset 9, -16
 6759              		.cfi_offset 10, -12
 6760              		.cfi_offset 11, -8
 6761              		.cfi_offset 14, -4
1483:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fn = dj->fn; lfn = dj->lfn;
 6762              		.loc 1 1483 0
 6763 0004 D0F81880 		ldr	r8, [r0, #24]
 6764              	.LVL869:
 6765 0008 C469     		ldr	r4, [r0, #28]
1474:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 6766              		.loc 1 1474 0
 6767 000a 91B0     		sub	sp, sp, #68
 6768              	.LCFI20:
 6769              		.cfi_def_cfa_offset 104
1474:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 6770              		.loc 1 1474 0
 6771 000c 8346     		mov	fp, r0
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 6772              		.loc 1 540 0
 6773 000e 0B23     		movs	r3, #11
1483:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fn = dj->fn; lfn = dj->lfn;
 6774              		.loc 1 1483 0
 6775 0010 0494     		str	r4, [sp, #16]
 6776              	.LVL870:
 6777 0012 4146     		mov	r1, r8
1484:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mem_cpy(sn, fn, 12);
 6778              		.loc 1 1484 0
 6779 0014 0DAA     		add	r2, sp, #52
 6780              	.LVL871:
 6781 0016 00E0     		b	.L879
 6782              	.LVL872:
 6783              	.L1066:
 6784              	.LBB887:
 6785              	.LBB888:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 6786              		.loc 1 540 0
 6787 0018 2346     		mov	r3, r4
 6788              	.LVL873:
 6789              	.L879:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 6790              		.loc 1 541 0
 6791 001a 11F8010B 		ldrb	r0, [r1], #1	@ zero_extendqisi2
 6792              	.LVL874:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 6793              		.loc 1 540 0
 6794 001e 5C1E     		subs	r4, r3, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 6795              		.loc 1 541 0
 6796 0020 02F8010B 		strb	r0, [r2], #1
 6797              	.LVL875:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 6798              		.loc 1 540 0
 6799 0024 002B     		cmp	r3, #0
 6800 0026 F7D1     		bne	.L1066
 6801              	.LBE888:
 6802              	.LBE887:
1489:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (sn[NS] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
 6803              		.loc 1 1489 0
 6804 0028 9DF83F20 		ldrb	r2, [sp, #63]	@ zero_extendqisi2
 6805              	.LVL876:
 6806 002c D107     		lsls	r1, r2, #31
 6807              	.LVL877:
 6808 002e 40F1D580 		bpl	.L880
1491:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < 100; n++) {
 6809              		.loc 1 1491 0
 6810 0032 0125     		movs	r5, #1
1490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fn[NS] = 0; dj->lfn = 0;			/* Find only SFN */
 6811              		.loc 1 1490 0
 6812 0034 88F80B30 		strb	r3, [r8, #11]
 6813 0038 DA46     		mov	sl, fp
 6814 003a CBF81C30 		str	r3, [fp, #28]
 6815              	.LVL878:
1491:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < 100; n++) {
 6816              		.loc 1 1491 0
 6817 003e 0295     		str	r5, [sp, #8]
 6818 0040 C346     		mov	fp, r8
 6819              	.LVL879:
 6820              	.L881:
 6821              	.LBB889:
 6822              	.LBB890:
 6823              	.LBB891:
 6824              	.LBB892:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 6825              		.loc 1 541 0
 6826 0042 9DF83A50 		ldrb	r5, [sp, #58]	@ zero_extendqisi2
 6827 0046 9DF83D10 		ldrb	r1, [sp, #61]	@ zero_extendqisi2
 6828 004a 8BF80650 		strb	r5, [fp, #6]
 6829              	.LBE892:
 6830              	.LBE891:
1298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
 6831              		.loc 1 1298 0
 6832 004e 029D     		ldr	r5, [sp, #8]
 6833              	.LBB895:
 6834              	.LBB893:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 6835              		.loc 1 541 0
 6836 0050 9DF83430 		ldrb	r3, [sp, #52]	@ zero_extendqisi2
 6837 0054 9DF83590 		ldrb	r9, [sp, #53]	@ zero_extendqisi2
 6838 0058 9DF83680 		ldrb	r8, [sp, #54]	@ zero_extendqisi2
 6839 005c 9DF837C0 		ldrb	ip, [sp, #55]	@ zero_extendqisi2
 6840 0060 9DF83870 		ldrb	r7, [sp, #56]	@ zero_extendqisi2
 6841 0064 9DF83960 		ldrb	r6, [sp, #57]	@ zero_extendqisi2
 6842 0068 9DF83B40 		ldrb	r4, [sp, #59]	@ zero_extendqisi2
 6843 006c 9DF83C00 		ldrb	r0, [sp, #60]	@ zero_extendqisi2
 6844 0070 9DF83E20 		ldrb	r2, [sp, #62]	@ zero_extendqisi2
 6845 0074 8BF80910 		strb	r1, [fp, #9]
 6846              	.LBE893:
 6847              	.LBE895:
1298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
 6848              		.loc 1 1298 0
 6849 0078 052D     		cmp	r5, #5
 6850              	.LBB896:
 6851              	.LBB894:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 6852              		.loc 1 541 0
 6853 007a 8BF80030 		strb	r3, [fp, #0]
 6854              	.LVL880:
 6855 007e 8BF80190 		strb	r9, [fp, #1]
 6856              	.LVL881:
 6857 0082 8BF80280 		strb	r8, [fp, #2]
 6858              	.LVL882:
 6859 0086 8BF803C0 		strb	ip, [fp, #3]
 6860              	.LVL883:
 6861 008a 8BF80470 		strb	r7, [fp, #4]
 6862              	.LVL884:
 6863 008e 8BF80560 		strb	r6, [fp, #5]
 6864              	.LVL885:
 6865 0092 8BF80740 		strb	r4, [fp, #7]
 6866              	.LVL886:
 6867 0096 8BF80800 		strb	r0, [fp, #8]
 6868              	.LVL887:
 6869 009a 8BF80A20 		strb	r2, [fp, #10]
 6870              	.LVL888:
 6871 009e 2946     		mov	r1, r5
 6872              	.LBE894:
 6873              	.LBE896:
1298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
 6874              		.loc 1 1298 0
 6875 00a0 0BD9     		bls	.L962
 6876 00a2 049A     		ldr	r2, [sp, #16]
 6877              	.L882:
 6878              	.LVL889:
1299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do seq = (seq >> 1) + (seq << 15) + (WORD)*lfn++; while (*lfn);
 6879              		.loc 1 1299 0
 6880 00a4 1488     		ldrh	r4, [r2, #0]
 6881 00a6 32F8020F 		ldrh	r0, [r2, #2]!
 6882              	.LVL890:
 6883 00aa CD03     		lsls	r5, r1, #15
 6884 00ac 45EA5101 		orr	r1, r5, r1, lsr #1
 6885              	.LVL891:
 6886 00b0 14FA81F1 		uxtah	r1, r4, r1
 6887 00b4 89B2     		uxth	r1, r1
 6888              	.LVL892:
 6889 00b6 0028     		cmp	r0, #0
 6890 00b8 F4D1     		bne	.L882
 6891              	.LVL893:
 6892              	.L962:
1298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
 6893              		.loc 1 1298 0
 6894 00ba 0722     		movs	r2, #7
 6895              	.L884:
 6896              	.LVL894:
1305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = (seq % 16) + '0';
 6897              		.loc 1 1305 0
 6898 00bc 01F00F04 		and	r4, r1, #15
 6899 00c0 04F13000 		add	r0, r4, #48
 6900              	.LVL895:
1306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c > '9') c += 7;
 6901              		.loc 1 1306 0
 6902 00c4 3928     		cmp	r0, #57
1307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ns[i--] = c;
 6903              		.loc 1 1307 0
 6904 00c6 10AE     		add	r6, sp, #64
1306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c > '9') c += 7;
 6905              		.loc 1 1306 0
 6906 00c8 88BF     		it	hi
 6907 00ca 04F13700 		addhi	r0, r4, #55
 6908              	.LVL896:
1307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ns[i--] = c;
 6909              		.loc 1 1307 0
 6910 00ce B418     		adds	r4, r6, r2
1308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		seq /= 16;
 6911              		.loc 1 1308 0
 6912 00d0 C1F30F11 		ubfx	r1, r1, #4, #16
 6913              	.LVL897:
1307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ns[i--] = c;
 6914              		.loc 1 1307 0
 6915 00d4 04F8140C 		strb	r0, [r4, #-20]
 6916 00d8 013A     		subs	r2, r2, #1
 6917              	.LVL898:
1309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (seq);
 6918              		.loc 1 1309 0
 6919 00da 0029     		cmp	r1, #0
 6920 00dc EED1     		bne	.L884
1310:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ns[i] = '~';
 6921              		.loc 1 1310 0
 6922 00de B018     		adds	r0, r6, r2
 6923              	.LVL899:
 6924 00e0 7E24     		movs	r4, #126
 6925 00e2 00F8144C 		strb	r4, [r0, #-20]
 6926              	.LVL900:
1313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 6927              		.loc 1 1313 0
 6928 00e6 002A     		cmp	r2, #0
 6929 00e8 00F08A82 		beq	.L1067
 6930 00ec 202B     		cmp	r3, #32
 6931 00ee 0B46     		mov	r3, r1
 6932 00f0 04D1     		bne	.L886
 6933 00f2 13E0     		b	.L1158
 6934              	.LVL901:
 6935              	.L1224:
 6936 00f4 1BF80310 		ldrb	r1, [fp, r3]	@ zero_extendqisi2
 6937 00f8 2029     		cmp	r1, #32
 6938 00fa 0FD0     		beq	.L1158
 6939              	.LVL902:
 6940              	.L886:
 6941 00fc 0133     		adds	r3, r3, #1
 6942              	.LVL903:
 6943 00fe 9342     		cmp	r3, r2
 6944 0100 F8D3     		bcc	.L1224
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 6945              		.loc 1 1320 0
 6946 0102 072A     		cmp	r2, #7
 6947 0104 0BEB0301 		add	r1, fp, r3
 6948 0108 0CD8     		bhi	.L1069
 6949              	.L1226:
 6950 010a 10AC     		add	r4, sp, #64
 6951 010c A018     		adds	r0, r4, r2
 6952 010e 0133     		adds	r3, r3, #1
 6953              	.LVL904:
 6954 0110 10F8140C 		ldrb	r0, [r0, #-20]	@ zero_extendqisi2
 6955 0114 0132     		adds	r2, r2, #1
 6956              	.LVL905:
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 6957              		.loc 1 1321 0
 6958 0116 072B     		cmp	r3, #7
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 6959              		.loc 1 1320 0
 6960 0118 0870     		strb	r0, [r1, #0]
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 6961              		.loc 1 1321 0
 6962 011a 08D8     		bhi	.L1225
 6963              	.LVL906:
 6964              	.L1158:
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 6965              		.loc 1 1320 0
 6966 011c 072A     		cmp	r2, #7
 6967 011e 0BEB0301 		add	r1, fp, r3
 6968 0122 F2D9     		bls	.L1226
 6969              	.L1069:
 6970 0124 0133     		adds	r3, r3, #1
 6971              	.LVL907:
 6972 0126 2020     		movs	r0, #32
 6973              	.LVL908:
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 6974              		.loc 1 1321 0
 6975 0128 072B     		cmp	r3, #7
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 6976              		.loc 1 1320 0
 6977 012a 0870     		strb	r0, [r1, #0]
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 6978              		.loc 1 1321 0
 6979 012c F6D9     		bls	.L1158
 6980              	.L1225:
 6981              	.LVL909:
 6982              	.LBE890:
 6983              	.LBE889:
 6984              	.LBB898:
 6985              	.LBB899:
 6986              	.LBB900:
 6987              	.LBB901:
1076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst = dj->sclust;
 6988              		.loc 1 1076 0
 6989 012e DAF80850 		ldr	r5, [sl, #8]
 6990              	.LVL910:
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 6991              		.loc 1 1075 0
 6992 0132 0023     		movs	r3, #0
 6993              	.LVL911:
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 6994              		.loc 1 1077 0
 6995 0134 012D     		cmp	r5, #1
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 6996              		.loc 1 1075 0
 6997 0136 AAF80630 		strh	r3, [sl, #6]	@ movhi
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 6998              		.loc 1 1077 0
 6999 013a 04D0     		beq	.L1101
 7000 013c DAF80040 		ldr	r4, [sl, #0]
 7001 0140 A369     		ldr	r3, [r4, #24]
 7002 0142 9D42     		cmp	r5, r3
 7003 0144 03D3     		bcc	.L1227
 7004              	.LVL912:
 7005              	.L1101:
 7006              	.LBE901:
 7007              	.LBE900:
 7008              	.LBE899:
 7009              	.LBE898:
 7010              	.LBB1027:
 7011              	.LBB1028:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 7012              		.loc 1 1137 0
 7013 0146 0220     		movs	r0, #2
 7014              	.L1131:
 7015              	.LBE1028:
 7016              	.LBE1027:
1567:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 7017              		.loc 1 1567 0
 7018 0148 11B0     		add	sp, sp, #68
 7019 014a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 7020              	.LVL913:
 7021              	.L1227:
 7022              	.LBB1039:
 7023              	.LBB1018:
 7024              	.LBB945:
 7025              	.LBB941:
1079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!clst && dj->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 7026              		.loc 1 1079 0
 7027 014e 002D     		cmp	r5, #0
 7028 0150 62D1     		bne	.L892
 7029 0152 2278     		ldrb	r2, [r4, #0]	@ zero_extendqisi2
 7030              	.LVL914:
 7031 0154 032A     		cmp	r2, #3
 7032 0156 5CD0     		beq	.L1228
 7033              	.L893:
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 7034              		.loc 1 1084 0
 7035 0158 2389     		ldrh	r3, [r4, #8]
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 7036              		.loc 1 1083 0
 7037 015a 0022     		movs	r2, #0
 7038 015c CAF80C20 		str	r2, [sl, #12]
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 7039              		.loc 1 1084 0
 7040 0160 002B     		cmp	r3, #0
 7041 0162 F0D0     		beq	.L1101
1086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = dj->fs->dirbase + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 7042              		.loc 1 1086 0
 7043 0164 D4F82490 		ldr	r9, [r4, #36]
 7044 0168 CAF81090 		str	r9, [sl, #16]
 7045              	.L894:
1101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (idx % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 7046              		.loc 1 1101 0
 7047 016c FF25     		movs	r5, #255
 7048              	.LVL915:
 7049 016e 04F13001 		add	r1, r4, #48
 7050 0172 0395     		str	r5, [sp, #12]
 7051 0174 CAF81410 		str	r1, [sl, #20]
 7052 0178 2E46     		mov	r6, r5
 7053 017a CDF814B0 		str	fp, [sp, #20]
 7054 017e 4F46     		mov	r7, r9
 7055              	.LVL916:
 7056              	.L960:
 7057              	.LBE941:
 7058              	.LBE945:
 7059              	.LBB946:
 7060              	.LBB947:
 7061              	.LBB948:
 7062              	.LBB949:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 7063              		.loc 1 727 0
 7064 0180 E56A     		ldr	r5, [r4, #44]
 7065              	.LVL917:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 7066              		.loc 1 728 0
 7067 0182 AF42     		cmp	r7, r5
 7068 0184 08D0     		beq	.L1055
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 7069              		.loc 1 730 0
 7070 0186 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 7071 0188 002B     		cmp	r3, #0
 7072 018a 40F0F080 		bne	.L923
 7073              	.L927:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 7074              		.loc 1 743 0
 7075 018e 002F     		cmp	r7, #0
 7076 0190 40F01E81 		bne	.L1229
 7077              	.L1200:
 7078 0194 DAF81410 		ldr	r1, [sl, #20]
 7079              	.LVL918:
 7080              	.L1055:
 7081              	.LBE949:
 7082              	.LBE948:
1373:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = dir[DIR_Name];
 7083              		.loc 1 1373 0
 7084 0198 0C78     		ldrb	r4, [r1, #0]	@ zero_extendqisi2
 7085              	.LVL919:
1374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 7086              		.loc 1 1374 0
 7087 019a ACB1     		cbz	r4, .L1157
1376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 7088              		.loc 1 1376 0
 7089 019c CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
1377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 7090              		.loc 1 1377 0
 7091 019e E52C     		cmp	r4, #229
1376:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 7092              		.loc 1 1376 0
 7093 01a0 03F03F02 		and	r2, r3, #63
 7094              	.LVL920:
1377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 7095              		.loc 1 1377 0
 7096 01a4 08D0     		beq	.L1089
 7097 01a6 03F00803 		and	r3, r3, #8
 7098 01aa DBB2     		uxtb	r3, r3
 7099 01ac 002B     		cmp	r3, #0
 7100 01ae 00F04781 		beq	.L931
 7101 01b2 0F2A     		cmp	r2, #15
 7102 01b4 00F01A81 		beq	.L932
 7103              	.LVL921:
 7104              	.L1089:
 7105              	.LBB954:
 7106              	.LBB955:
1392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = 0xFF; dj->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 7107              		.loc 1 1392 0
 7108 01b8 FF26     		movs	r6, #255
 7109              	.L930:
 7110              	.LVL922:
 7111              	.LBE955:
 7112              	.LBE954:
 7113              	.LBB957:
 7114              	.LBB958:
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
 7115              		.loc 1 1123 0
 7116 01ba BAF80650 		ldrh	r5, [sl, #6]
 7117 01be 0135     		adds	r5, r5, #1
 7118 01c0 ADB2     		uxth	r5, r5
 7119              	.LVL923:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 7120              		.loc 1 1124 0
 7121 01c2 002D     		cmp	r5, #0
 7122 01c4 40F0DE81 		bne	.L1230
 7123              	.LVL924:
 7124              	.L1157:
 7125 01c8 DDF81480 		ldr	r8, [sp, #20]
 7126              	.LBE958:
 7127              	.LBE957:
 7128              	.LBE947:
 7129              	.LBE946:
 7130              	.LBE1018:
 7131              	.LBE1039:
1498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fn[NS] = sn[NS]; dj->lfn = lfn;
 7132              		.loc 1 1498 0
 7133 01cc 9DF83F20 		ldrb	r2, [sp, #63]	@ zero_extendqisi2
 7134 01d0 049E     		ldr	r6, [sp, #16]
 7135 01d2 88F80B20 		strb	r2, [r8, #11]
 7136 01d6 D346     		mov	fp, sl
 7137 01d8 CAF81C60 		str	r6, [sl, #28]
 7138              	.LVL925:
 7139              	.L880:
1501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (sn[NS] & NS_LFN) {			/* When LFN is to be created, reserve an SFN + LFN entries. */
 7140              		.loc 1 1501 0
 7141 01dc 02F00203 		and	r3, r2, #2
 7142 01e0 DBB2     		uxtb	r3, r3
 7143 01e2 002B     		cmp	r3, #0
 7144 01e4 7CD0     		beq	.L1091
 7145              	.LVL926:
1502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (ne = 0; lfn[ne]; ne++) ;
 7146              		.loc 1 1502 0 discriminator 1
 7147 01e6 049C     		ldr	r4, [sp, #16]
 7148 01e8 2388     		ldrh	r3, [r4, #0]
 7149 01ea 002B     		cmp	r3, #0
 7150 01ec 78D0     		beq	.L1091
1502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (ne = 0; lfn[ne]; ne++) ;
 7151              		.loc 1 1502 0 is_stmt 0
 7152 01ee 0023     		movs	r3, #0
 7153 01f0 2146     		mov	r1, r4
 7154              	.LVL927:
 7155              	.L965:
1502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (ne = 0; lfn[ne]; ne++) ;
 7156              		.loc 1 1502 0 discriminator 2
 7157 01f2 0133     		adds	r3, r3, #1
 7158 01f4 9BB2     		uxth	r3, r3
 7159              	.LVL928:
 7160 01f6 31F81320 		ldrh	r2, [r1, r3, lsl #1]
 7161 01fa 002A     		cmp	r2, #0
 7162 01fc F9D1     		bne	.L965
 7163 01fe 8B4A     		ldr	r2, .L1252
 7164 0200 1933     		adds	r3, r3, #25
 7165              	.LVL929:
 7166 0202 82FB035A 		smull	r5, sl, r2, r3
 7167 0206 DB17     		asrs	r3, r3, #31
 7168              	.LVL930:
 7169 0208 C3EBAA0A 		rsb	sl, r3, sl, asr #2
 7170 020c 1FFA8AFA 		uxth	sl, sl
 7171 0210 68E0     		b	.L963
 7172              	.LVL931:
 7173              	.L1228:
 7174              	.LBB1040:
 7175              	.LBB1019:
 7176              	.LBB1009:
 7177              	.LBB942:
1080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		clst = dj->fs->dirbase;
 7178              		.loc 1 1080 0 is_stmt 1
 7179 0212 656A     		ldr	r5, [r4, #36]
 7180              	.LVL932:
1082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {	/* Static table (root-dir in FAT12/16) */
 7181              		.loc 1 1082 0
 7182 0214 002D     		cmp	r5, #0
 7183 0216 9FD0     		beq	.L893
 7184              	.L892:
 7185              	.LVL933:
1089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ic = SS(dj->fs) / SZ_DIR * dj->fs->csize;	/* Entries per cluster */
 7186              		.loc 1 1089 0
 7187 0218 A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 7188              		.loc 1 1090 0
 7189 021a 002A     		cmp	r2, #0
 7190 021c 40F0F281 		bne	.L895
 7191              	.LBB902:
 7192              	.LBB903:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 7193              		.loc 1 828 0
 7194 0220 012D     		cmp	r5, #1
 7195 0222 D346     		mov	fp, sl
 7196              	.LVL934:
 7197 0224 8FD9     		bls	.L1101
 7198 0226 AB42     		cmp	r3, r5
 7199 0228 8DD9     		bls	.L1101
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 7200              		.loc 1 831 0
 7201 022a 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 7202 022c 022B     		cmp	r3, #2
 7203 022e 3ED0     		beq	.L898
 7204              	.LVL935:
 7205              	.L1232:
 7206 0230 032B     		cmp	r3, #3
 7207 0232 00F03D86 		beq	.L899
 7208 0236 012B     		cmp	r3, #1
 7209 0238 40F0CD81 		bne	.L926
 7210              	.LVL936:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 7211              		.loc 1 834 0
 7212 023c 216A     		ldr	r1, [r4, #32]
 7213              	.LBB904:
 7214              	.LBB905:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 7215              		.loc 1 727 0
 7216 023e E66A     		ldr	r6, [r4, #44]
 7217              	.LBE905:
 7218              	.LBE904:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 7219              		.loc 1 833 0
 7220 0240 05EB550A 		add	sl, r5, r5, lsr #1
 7221              	.LVL937:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 7222              		.loc 1 834 0
 7223 0244 01EB5A28 		add	r8, r1, sl, lsr #9
 7224              	.LVL938:
 7225              	.LBB911:
 7226              	.LBB909:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 7227              		.loc 1 728 0
 7228 0248 B045     		cmp	r8, r6
 7229 024a 08D0     		beq	.L1050
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 7230              		.loc 1 730 0
 7231 024c 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 7232 024e 002A     		cmp	r2, #0
 7233 0250 40F0EA85 		bne	.L901
 7234              	.L905:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 7235              		.loc 1 743 0
 7236 0254 B8F1000F 		cmp	r8, #0
 7237 0258 40F01086 		bne	.L1231
 7238              	.L1195:
 7239 025c 216A     		ldr	r1, [r4, #32]
 7240              	.LVL939:
 7241              	.L1050:
 7242              	.LBE909:
 7243              	.LBE911:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 7244              		.loc 1 835 0
 7245 025e 4FEACA53 		lsl	r3, sl, #23
 7246 0262 DB0D     		lsrs	r3, r3, #23
 7247 0264 E318     		adds	r3, r4, r3
 7248 0266 0AF1010A 		add	sl, sl, #1
 7249              	.LVL940:
 7250 026a 93F83060 		ldrb	r6, [r3, #48]	@ zero_extendqisi2
 7251              	.LVL941:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 7252              		.loc 1 836 0
 7253 026e 704B     		ldr	r3, .L1252+4
 7254 0270 2046     		mov	r0, r4
 7255 0272 01EB5A21 		add	r1, r1, sl, lsr #9
 7256 0276 9847     		blx	r3
 7257              	.LVL942:
 7258 0278 0028     		cmp	r0, #0
 7259 027a 40F0AC81 		bne	.L926
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 7260              		.loc 1 837 0
 7261 027e 4FEACA53 		lsl	r3, sl, #23
 7262 0282 DB0D     		lsrs	r3, r3, #23
 7263 0284 E318     		adds	r3, r4, r3
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 7264              		.loc 1 838 0
 7265 0286 ED07     		lsls	r5, r5, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 7266              		.loc 1 837 0
 7267 0288 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 7268 028c 46EA0323 		orr	r3, r6, r3, lsl #8
 7269              	.LVL943:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 7270              		.loc 1 838 0
 7271 0290 40F19C86 		bpl	.L908
 7272 0294 1D09     		lsrs	r5, r3, #4
 7273              	.LVL944:
 7274              	.L909:
 7275              	.LBE903:
 7276              	.LBE902:
1093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst < 2 || clst >= dj->fs->n_fatent)	/* Reached to end of table or int error */
 7277              		.loc 1 1093 0
 7278 0296 012D     		cmp	r5, #1
 7279 0298 7FF655AF 		bls	.L1101
 7280 029c DBF80040 		ldr	r4, [fp, #0]
 7281 02a0 A369     		ldr	r3, [r4, #24]
 7282 02a2 AB42     		cmp	r3, r5
 7283 02a4 7FF64FAF 		bls	.L1101
 7284              	.LBB935:
 7285              	.LBB933:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 7286              		.loc 1 831 0
 7287 02a8 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 7288 02aa 022B     		cmp	r3, #2
 7289 02ac C0D1     		bne	.L1232
 7290              	.L898:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 7291              		.loc 1 841 0
 7292 02ae 236A     		ldr	r3, [r4, #32]
 7293              	.LBB912:
 7294              	.LBB913:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 7295              		.loc 1 727 0
 7296 02b0 E66A     		ldr	r6, [r4, #44]
 7297              	.LBE913:
 7298              	.LBE912:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 7299              		.loc 1 841 0
 7300 02b2 03EB1528 		add	r8, r3, r5, lsr #8
 7301              	.LVL945:
 7302              	.LBB919:
 7303              	.LBB917:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 7304              		.loc 1 728 0
 7305 02b6 B045     		cmp	r8, r6
 7306 02b8 07D0     		beq	.L1051
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 7307              		.loc 1 730 0
 7308 02ba 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 7309 02bc 002B     		cmp	r3, #0
 7310 02be 40F04C86 		bne	.L911
 7311              	.L913:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 7312              		.loc 1 743 0
 7313 02c2 B8F1000F 		cmp	r8, #0
 7314 02c6 40F07386 		bne	.L1233
 7315              	.LVL946:
 7316              	.L1051:
 7317              	.LBE917:
 7318              	.LBE919:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 7319              		.loc 1 842 0
 7320 02ca 2B06     		lsls	r3, r5, #24
 7321 02cc DB0D     		lsrs	r3, r3, #23
 7322              	.LVL947:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 7323              		.loc 1 843 0
 7324 02ce E218     		adds	r2, r4, r3
 7325 02d0 1346     		mov	r3, r2
 7326              	.LVL948:
 7327 02d2 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 7328 02d6 93F83150 		ldrb	r5, [r3, #49]	@ zero_extendqisi2
 7329              	.LVL949:
 7330 02da 42EA0525 		orr	r5, r2, r5, lsl #8
 7331 02de DAE7     		b	.L909
 7332              	.LVL950:
 7333              	.L1091:
 7334              	.LBE933:
 7335              	.LBE935:
 7336              	.LBE942:
 7337              	.LBE1009:
 7338              	.LBE1019:
 7339              	.LBE1040:
1505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ne = 1;
 7340              		.loc 1 1505 0
 7341 02e0 4FF0010A 		mov	sl, #1
 7342              	.L963:
 7343              	.LVL951:
 7344              	.LBB1041:
 7345              	.LBB1042:
1076:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst = dj->sclust;
 7346              		.loc 1 1076 0
 7347 02e4 DBF80850 		ldr	r5, [fp, #8]
 7348              	.LVL952:
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 7349              		.loc 1 1075 0
 7350 02e8 0023     		movs	r3, #0
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 7351              		.loc 1 1077 0
 7352 02ea 012D     		cmp	r5, #1
1075:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = idx;
 7353              		.loc 1 1075 0
 7354 02ec ABF80630 		strh	r3, [fp, #6]	@ movhi
1077:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 1 || clst >= dj->fs->n_fatent)	/* Check start cluster range */
 7355              		.loc 1 1077 0
 7356 02f0 3FF429AF 		beq	.L1101
 7357 02f4 DBF80040 		ldr	r4, [fp, #0]
 7358 02f8 A369     		ldr	r3, [r4, #24]
 7359 02fa 9D42     		cmp	r5, r3
 7360 02fc BFF423AF 		bcs	.L1101
1079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!clst && dj->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 7361              		.loc 1 1079 0
 7362 0300 002D     		cmp	r5, #0
 7363 0302 40F09381 		bne	.L969
 7364 0306 2278     		ldrb	r2, [r4, #0]	@ zero_extendqisi2
 7365 0308 032A     		cmp	r2, #3
 7366 030a 00F08B81 		beq	.L1234
 7367              	.L970:
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 7368              		.loc 1 1084 0
 7369 030e 2389     		ldrh	r3, [r4, #8]
1083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 7370              		.loc 1 1083 0
 7371 0310 0022     		movs	r2, #0
 7372 0312 CBF80C20 		str	r2, [fp, #12]
1084:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (idx >= dj->fs->n_rootdir)		/* Index is out of range */
 7373              		.loc 1 1084 0
 7374 0316 002B     		cmp	r3, #0
 7375 0318 3FF415AF 		beq	.L1101
1086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = dj->fs->dirbase + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 7376              		.loc 1 1086 0
 7377 031c 666A     		ldr	r6, [r4, #36]
 7378 031e CBF81060 		str	r6, [fp, #16]
 7379              	.L971:
1101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (idx % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 7380              		.loc 1 1101 0
 7381 0322 0025     		movs	r5, #0
 7382              	.LVL953:
 7383 0324 04F13003 		add	r3, r4, #48
 7384 0328 0295     		str	r5, [sp, #8]
 7385 032a CBF81430 		str	r3, [fp, #20]
 7386 032e 2F46     		mov	r7, r5
 7387 0330 CDF804A0 		str	sl, [sp, #4]
 7388              	.LVL954:
 7389              	.L1016:
 7390              	.LBE1042:
 7391              	.LBE1041:
 7392              	.LBB1067:
 7393              	.LBB1068:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 7394              		.loc 1 727 0
 7395 0334 E56A     		ldr	r5, [r4, #44]
 7396              	.LVL955:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 7397              		.loc 1 728 0
 7398 0336 B542     		cmp	r5, r6
 7399 0338 08D0     		beq	.L1060
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 7400              		.loc 1 730 0
 7401 033a 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 7402 033c 002B     		cmp	r3, #0
 7403 033e 40F0D481 		bne	.L989
 7404              	.L993:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 7405              		.loc 1 743 0
 7406 0342 002E     		cmp	r6, #0
 7407 0344 40F00282 		bne	.L1235
 7408              	.L1205:
 7409 0348 DBF81430 		ldr	r3, [fp, #20]
 7410              	.L1060:
 7411              	.LBE1068:
 7412              	.LBE1067:
1515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *dj->dir;				/* Check the entry status */
 7413              		.loc 1 1515 0
 7414 034c 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 7415              	.LVL956:
1516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || c == 0) {	/* Is it a blank entry? */
 7416              		.loc 1 1516 0
 7417 034e E52B     		cmp	r3, #229
 7418 0350 00F00D82 		beq	.L995
 7419              	.LVL957:
 7420              	.L1241:
1516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || c == 0) {	/* Is it a blank entry? */
 7421              		.loc 1 1516 0 is_stmt 0 discriminator 1
 7422 0354 002B     		cmp	r3, #0
 7423 0356 00F00A82 		beq	.L995
1520:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = 0;					/* Not a blank entry. Restart to search */
 7424              		.loc 1 1520 0 is_stmt 1
 7425 035a 0027     		movs	r7, #0
 7426              	.LVL958:
 7427              	.L996:
 7428              	.LBB1073:
 7429              	.LBB1074:
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
 7430              		.loc 1 1123 0
 7431 035c BBF80650 		ldrh	r5, [fp, #6]
 7432 0360 0135     		adds	r5, r5, #1
 7433 0362 ADB2     		uxth	r5, r5
 7434              	.LVL959:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 7435              		.loc 1 1124 0
 7436 0364 002D     		cmp	r5, #0
 7437 0366 40F0AD81 		bne	.L1236
 7438              	.LVL960:
 7439              	.L1040:
 7440              	.LBB1075:
1125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NO_FILE;
 7441              		.loc 1 1125 0
 7442 036a 0420     		movs	r0, #4
 7443 036c ECE6     		b	.L1131
 7444              	.LVL961:
 7445              	.L923:
 7446              	.LBE1075:
 7447              	.LBE1074:
 7448              	.LBE1073:
 7449              	.LBB1091:
 7450              	.LBB1020:
 7451              	.LBB1010:
 7452              	.LBB1002:
 7453              	.LBB992:
 7454              	.LBB953:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 7455              		.loc 1 731 0
 7456 036e 04F13009 		add	r9, r4, #48
 7457 0372 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 7458 0374 DFF8C480 		ldr	r8, .L1252+16
 7459 0378 4946     		mov	r1, r9
 7460 037a 2A46     		mov	r2, r5
 7461 037c 0123     		movs	r3, #1
 7462 037e C047     		blx	r8
 7463              	.LVL962:
 7464 0380 0028     		cmp	r0, #0
 7465 0382 40F02881 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 7466              		.loc 1 734 0
 7467 0386 E369     		ldr	r3, [r4, #28]
 7468 0388 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 7469              		.loc 1 733 0
 7470 038a 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 7471              		.loc 1 734 0
 7472 038c 9A18     		adds	r2, r3, r2
 7473 038e 9542     		cmp	r5, r2
 7474 0390 BFF4FDAE 		bcs	.L927
 7475              	.LBB950:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 7476              		.loc 1 736 0
 7477 0394 94F803B0 		ldrb	fp, [r4, #3]	@ zero_extendqisi2
 7478              	.LVL963:
 7479 0398 BBF1010F 		cmp	fp, #1
 7480 039c 7FF6F7AE 		bls	.L927
 7481 03a0 4246     		mov	r2, r8
 7482 03a2 A046     		mov	r8, r4
 7483 03a4 1446     		mov	r4, r2
 7484              	.LVL964:
 7485 03a6 01E0     		b	.L1201
 7486              	.LVL965:
 7487              	.L1237:
 7488 03a8 D8F81C30 		ldr	r3, [r8, #28]
 7489              	.LVL966:
 7490              	.L1201:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 7491              		.loc 1 737 0
 7492 03ac ED18     		adds	r5, r5, r3
 7493              	.LVL967:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 7494              		.loc 1 736 0
 7495 03ae 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 7496              		.loc 1 738 0
 7497 03b2 0123     		movs	r3, #1
 7498 03b4 98F80100 		ldrb	r0, [r8, #1]	@ zero_extendqisi2
 7499 03b8 4946     		mov	r1, r9
 7500 03ba 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 7501              		.loc 1 736 0
 7502 03bc 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 7503              		.loc 1 738 0
 7504 03c0 A047     		blx	r4
 7505              	.LVL968:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 7506              		.loc 1 736 0
 7507 03c2 BBF1010F 		cmp	fp, #1
 7508 03c6 EFD8     		bhi	.L1237
 7509 03c8 4446     		mov	r4, r8
 7510              	.LBE950:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 7511              		.loc 1 743 0
 7512 03ca 002F     		cmp	r7, #0
 7513 03cc 3FF4E2AE 		beq	.L1200
 7514              	.LVL969:
 7515              	.L1229:
 7516              	.LBB951:
 7517              	.LBB952:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 7518              		.loc 1 744 0
 7519 03d0 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 7520 03d2 184D     		ldr	r5, .L1252+8
 7521              	.LVL970:
 7522 03d4 04F13001 		add	r1, r4, #48
 7523 03d8 3A46     		mov	r2, r7
 7524 03da 0123     		movs	r3, #1
 7525 03dc A847     		blx	r5
 7526              	.LVL971:
 7527 03de 0028     		cmp	r0, #0
 7528 03e0 40F0F980 		bne	.L926
 7529 03e4 DAF81410 		ldr	r1, [sl, #20]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 7530              		.loc 1 746 0
 7531 03e8 E762     		str	r7, [r4, #44]
 7532 03ea D5E6     		b	.L1055
 7533              	.LVL972:
 7534              	.L932:
 7535              	.LBE952:
 7536              	.LBE951:
 7537              	.LBE953:
 7538              	.LBE992:
1381:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj->lfn) {
 7539              		.loc 1 1381 0
 7540 03ec DAF81C00 		ldr	r0, [sl, #28]
 7541 03f0 0028     		cmp	r0, #0
 7542 03f2 3FF4E2AE 		beq	.L930
1382:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (c & LLE) {		/* Is it start of LFN sequence? */
 7543              		.loc 1 1382 0
 7544 03f6 04F04003 		and	r3, r4, #64
 7545 03fa DBB2     		uxtb	r3, r3
 7546 03fc 002B     		cmp	r3, #0
 7547 03fe 00F0EC80 		beq	.L934
1383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						sum = dir[LDIR_Chksum];
 7548              		.loc 1 1383 0
 7549 0402 4E7B     		ldrb	r6, [r1, #13]	@ zero_extendqisi2
 7550              	.LVL973:
1385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->lfn_idx = dj->index;
 7551              		.loc 1 1385 0
 7552 0404 BAF80630 		ldrh	r3, [sl, #6]
1383:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						sum = dir[LDIR_Chksum];
 7553              		.loc 1 1383 0
 7554 0408 0396     		str	r6, [sp, #12]
1385:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->lfn_idx = dj->index;
 7555              		.loc 1 1385 0
 7556 040a AAF82030 		strh	r3, [sl, #32]	@ movhi
1384:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						c &= ~LLE; ord = c;	/* LFN start order */
 7557              		.loc 1 1384 0
 7558 040e 04F0BF04 		and	r4, r4, #191
 7559              	.LVL974:
 7560              	.L935:
1388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 7561              		.loc 1 1388 0
 7562 0412 4B7B     		ldrb	r3, [r1, #13]	@ zero_extendqisi2
 7563 0414 039D     		ldr	r5, [sp, #12]
 7564 0416 AB42     		cmp	r3, r5
 7565 0418 7FF4CEAE 		bne	.L1089
 7566 041c 064B     		ldr	r3, .L1252+12
 7567 041e 9847     		blx	r3
 7568              	.LVL975:
 7569 0420 0028     		cmp	r0, #0
 7570 0422 3FF4C9AE 		beq	.L1089
 7571 0426 013C     		subs	r4, r4, #1
 7572 0428 E6B2     		uxtb	r6, r4
 7573 042a C6E6     		b	.L930
 7574              	.L1253:
 7575              		.align	2
 7576              	.L1252:
 7577 042c 4FECC44E 		.word	1321528399
 7578 0430 00000000 		.word	move_window
 7579 0434 00000000 		.word	disk_read
 7580 0438 00000000 		.word	cmp_lfn
 7581 043c 00000000 		.word	disk_write
 7582              	.LVL976:
 7583              	.L931:
1380:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
 7584              		.loc 1 1380 0
 7585 0440 0F2A     		cmp	r2, #15
 7586 0442 D3D0     		beq	.L932
1391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
 7587              		.loc 1 1391 0
 7588 0444 002E     		cmp	r6, #0
 7589 0446 51D1     		bne	.L936
 7590              	.LVL977:
 7591              	.LBB993:
 7592              	.LBB994:
1340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
 7593              		.loc 1 1340 0
 7594 0448 4FEAC419 		lsl	r9, r4, #7
 7595 044c 91F80180 		ldrb	r8, [r1, #1]	@ zero_extendqisi2
 7596 0450 91F802C0 		ldrb	ip, [r1, #2]	@ zero_extendqisi2
 7597 0454 CF78     		ldrb	r7, [r1, #3]	@ zero_extendqisi2
 7598              	.LVL978:
 7599 0456 0E79     		ldrb	r6, [r1, #4]	@ zero_extendqisi2
 7600              	.LVL979:
 7601 0458 4A79     		ldrb	r2, [r1, #5]	@ zero_extendqisi2
 7602              	.LVL980:
 7603 045a 91F806B0 		ldrb	fp, [r1, #6]	@ zero_extendqisi2
 7604 045e 0192     		str	r2, [sp, #4]
 7605 0460 49EA5404 		orr	r4, r9, r4, lsr #1
 7606              	.LVL981:
 7607 0464 A044     		add	r8, r4, r8
 7608 0466 5FFA88F8 		uxtb	r8, r8
 7609              	.LVL982:
 7610 046a 4FEAC814 		lsl	r4, r8, #7
 7611 046e 44EA5804 		orr	r4, r4, r8, lsr #1
 7612 0472 5CFA84FC 		uxtab	ip, ip, r4
 7613 0476 5FFA8CFC 		uxtb	ip, ip
 7614              	.LVL983:
 7615 047a 4FEACC14 		lsl	r4, ip, #7
 7616 047e 44EA5C04 		orr	r4, r4, ip, lsr #1
 7617 0482 57FA84F7 		uxtab	r7, r7, r4
 7618 0486 FFB2     		uxtb	r7, r7
 7619              	.LVL984:
 7620 0488 FC01     		lsls	r4, r7, #7
 7621 048a 44EA5707 		orr	r7, r4, r7, lsr #1
 7622              	.LVL985:
 7623 048e 56FA87F6 		uxtab	r6, r6, r7
 7624 0492 F6B2     		uxtb	r6, r6
 7625              	.LVL986:
 7626 0494 F401     		lsls	r4, r6, #7
 7627 0496 44EA5604 		orr	r4, r4, r6, lsr #1
 7628 049a 019E     		ldr	r6, [sp, #4]
 7629              	.LVL987:
 7630 049c CD79     		ldrb	r5, [r1, #7]	@ zero_extendqisi2
 7631 049e 087A     		ldrb	r0, [r1, #8]	@ zero_extendqisi2
 7632 04a0 4A7A     		ldrb	r2, [r1, #9]	@ zero_extendqisi2
 7633 04a2 8B7A     		ldrb	r3, [r1, #10]	@ zero_extendqisi2
 7634 04a4 56FA84F4 		uxtab	r4, r6, r4
 7635 04a8 E4B2     		uxtb	r4, r4
 7636              	.LVL988:
 7637 04aa E601     		lsls	r6, r4, #7
 7638 04ac 46EA5404 		orr	r4, r6, r4, lsr #1
 7639              	.LVL989:
 7640 04b0 5BFA84F4 		uxtab	r4, fp, r4
 7641 04b4 E4B2     		uxtb	r4, r4
 7642              	.LVL990:
 7643 04b6 E601     		lsls	r6, r4, #7
 7644 04b8 46EA5404 		orr	r4, r6, r4, lsr #1
 7645              	.LVL991:
 7646 04bc 55FA84F5 		uxtab	r5, r5, r4
 7647 04c0 EDB2     		uxtb	r5, r5
 7648              	.LVL992:
 7649 04c2 EC01     		lsls	r4, r5, #7
 7650 04c4 44EA5505 		orr	r5, r4, r5, lsr #1
 7651              	.LVL993:
 7652 04c8 50FA85F0 		uxtab	r0, r0, r5
 7653 04cc C0B2     		uxtb	r0, r0
 7654              	.LVL994:
 7655 04ce C401     		lsls	r4, r0, #7
 7656 04d0 44EA5000 		orr	r0, r4, r0, lsr #1
 7657              	.LVL995:
 7658 04d4 52FA80F2 		uxtab	r2, r2, r0
 7659 04d8 D2B2     		uxtb	r2, r2
 7660              	.LVL996:
 7661 04da D001     		lsls	r0, r2, #7
 7662 04dc 40EA5202 		orr	r2, r0, r2, lsr #1
 7663              	.LVL997:
 7664 04e0 53FA82F3 		uxtab	r3, r3, r2
 7665              	.LBE994:
 7666              	.LBE993:
1391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
 7667              		.loc 1 1391 0
 7668 04e4 039C     		ldr	r4, [sp, #12]
 7669 04e6 DBB2     		uxtb	r3, r3
 7670 04e8 A342     		cmp	r3, r4
 7671 04ea 40D0     		beq	.L937
 7672              	.LVL998:
 7673              	.L936:
1392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = 0xFF; dj->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 7674              		.loc 1 1392 0
 7675 04ec 4FF6FF72 		movw	r2, #65535
1393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!(dj->fn[NS] & NS_LOSS) && !mem_cmp(dir, dj->fn, 11)) break;	/* SFN matched? */
 7676              		.loc 1 1393 0
 7677 04f0 DAF81830 		ldr	r3, [sl, #24]
1392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ord = 0xFF; dj->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 7678              		.loc 1 1392 0
 7679 04f4 AAF82020 		strh	r2, [sl, #32]	@ movhi
 7680              	.LBE1002:
1393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!(dj->fn[NS] & NS_LOSS) && !mem_cmp(dir, dj->fn, 11)) break;	/* SFN matched? */
 7681              		.loc 1 1393 0
 7682 04f8 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 7683              	.LBB1003:
 7684 04fa D007     		lsls	r0, r2, #31
 7685 04fc 3FF55CAE 		bmi	.L1089
 7686              	.LVL999:
 7687              	.LBB995:
 7688              	.LBB956:
 559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt-- && (r = *d++ - *s++) == 0) ;
 7689              		.loc 1 559 0
 7690 0500 0878     		ldrb	r0, [r1, #0]	@ zero_extendqisi2
 7691              	.LVL1000:
 7692 0502 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 7693              	.LVL1001:
 7694 0504 9042     		cmp	r0, r2
 7695 0506 7FF457AE 		bne	.L1089
 7696              	.LVL1002:
 7697 050a 4878     		ldrb	r0, [r1, #1]	@ zero_extendqisi2
 7698              	.LVL1003:
 7699 050c 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 7700              	.LVL1004:
 7701 050e 9042     		cmp	r0, r2
 7702 0510 7FF452AE 		bne	.L1089
 7703              	.LVL1005:
 7704 0514 8878     		ldrb	r0, [r1, #2]	@ zero_extendqisi2
 7705              	.LVL1006:
 7706 0516 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 7707              	.LVL1007:
 7708 0518 9042     		cmp	r0, r2
 7709 051a 7FF44DAE 		bne	.L1089
 7710              	.LVL1008:
 7711 051e C878     		ldrb	r0, [r1, #3]	@ zero_extendqisi2
 7712              	.LVL1009:
 7713 0520 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 7714              	.LVL1010:
 7715 0522 9042     		cmp	r0, r2
 7716 0524 7FF448AE 		bne	.L1089
 7717              	.LVL1011:
 7718 0528 0879     		ldrb	r0, [r1, #4]	@ zero_extendqisi2
 7719              	.LVL1012:
 7720 052a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 7721              	.LVL1013:
 7722 052c 9042     		cmp	r0, r2
 7723 052e 7FF443AE 		bne	.L1089
 7724              	.LVL1014:
 7725 0532 4879     		ldrb	r0, [r1, #5]	@ zero_extendqisi2
 7726              	.LVL1015:
 7727 0534 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 7728              	.LVL1016:
 7729 0536 9042     		cmp	r0, r2
 7730 0538 7FF43EAE 		bne	.L1089
 7731              	.LVL1017:
 7732 053c 8879     		ldrb	r0, [r1, #6]	@ zero_extendqisi2
 7733              	.LVL1018:
 7734 053e 9A79     		ldrb	r2, [r3, #6]	@ zero_extendqisi2
 7735              	.LVL1019:
 7736 0540 9042     		cmp	r0, r2
 7737 0542 7FF439AE 		bne	.L1089
 7738              	.LVL1020:
 7739 0546 C879     		ldrb	r0, [r1, #7]	@ zero_extendqisi2
 7740              	.LVL1021:
 7741 0548 DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 7742              	.LVL1022:
 7743 054a 9042     		cmp	r0, r2
 7744 054c 7FF434AE 		bne	.L1089
 7745              	.LVL1023:
 7746 0550 087A     		ldrb	r0, [r1, #8]	@ zero_extendqisi2
 7747              	.LVL1024:
 7748 0552 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 7749              	.LVL1025:
 7750 0554 9042     		cmp	r0, r2
 7751 0556 7FF42FAE 		bne	.L1089
 7752              	.LVL1026:
 7753 055a 487A     		ldrb	r0, [r1, #9]	@ zero_extendqisi2
 7754              	.LVL1027:
 7755 055c 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 7756              	.LVL1028:
 7757 055e 9042     		cmp	r0, r2
 7758 0560 7FF42AAE 		bne	.L1089
 7759              	.LVL1029:
 7760 0564 8A7A     		ldrb	r2, [r1, #10]	@ zero_extendqisi2
 7761              	.LVL1030:
 7762 0566 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 7763              	.LVL1031:
 7764 0568 9A42     		cmp	r2, r3
 7765 056a 7FF425AE 		bne	.L1089
 7766              	.LVL1032:
 7767              	.L937:
 7768              	.LBE956:
 7769              	.LBE995:
 7770              	.LBE1003:
 7771              	.LBE1010:
 7772              	.LBE1020:
 7773              	.LBE1091:
1491:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < 100; n++) {
 7774              		.loc 1 1491 0
 7775 056e 029D     		ldr	r5, [sp, #8]
 7776 0570 DDF814B0 		ldr	fp, [sp, #20]
 7777              	.LVL1033:
 7778 0574 6B1C     		adds	r3, r5, #1
 7779 0576 9BB2     		uxth	r3, r3
 7780 0578 642B     		cmp	r3, #100
 7781 057a 0293     		str	r3, [sp, #8]
 7782              	.LVL1034:
 7783 057c 7FF461AD 		bne	.L881
 7784              	.LVL1035:
 7785              	.L1216:
1496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
 7786              		.loc 1 1496 0
 7787 0580 0720     		movs	r0, #7
 7788 0582 E1E5     		b	.L1131
 7789              	.LVL1036:
 7790              	.L1230:
 7791              	.LBB1092:
 7792              	.LBB1021:
 7793              	.LBB1011:
 7794              	.LBB1004:
 7795              	.LBB996:
 7796              	.LBB986:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 7797              		.loc 1 1124 0
 7798 0584 DAF81070 		ldr	r7, [sl, #16]
 7799 0588 002F     		cmp	r7, #0
 7800 058a 3FF41DAE 		beq	.L1157
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
 7801              		.loc 1 1127 0
 7802 058e 15F00F09 		ands	r9, r5, #15
 7803 0592 26D0     		beq	.L941
 7804 0594 DAF80040 		ldr	r4, [sl, #0]
 7805              	.L942:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 7806              		.loc 1 1168 0
 7807 0598 04EB4911 		add	r1, r4, r9, lsl #5
 7808 059c 3031     		adds	r1, r1, #48
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 7809              		.loc 1 1167 0
 7810 059e AAF80650 		strh	r5, [sl, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 7811              		.loc 1 1168 0
 7812 05a2 CAF81410 		str	r1, [sl, #20]
 7813 05a6 EBE5     		b	.L960
 7814              	.L943:
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
 7815              		.loc 1 1135 0
 7816 05a8 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 7817 05aa 013B     		subs	r3, r3, #1
 7818 05ac 13EA1513 		ands	r3, r3, r5, lsr #4
 7819 05b0 F2D1     		bne	.L942
 7820              	.LVL1037:
 7821              	.LBB959:
 7822              	.LBB960:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 7823              		.loc 1 828 0
 7824 05b2 BCF1010F 		cmp	ip, #1
 7825 05b6 7FF6C6AD 		bls	.L1101
 7826 05ba A369     		ldr	r3, [r4, #24]
 7827 05bc 9C45     		cmp	ip, r3
 7828 05be BFF4C2AD 		bcs	.L1101
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 7829              		.loc 1 831 0
 7830 05c2 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 7831 05c4 022B     		cmp	r3, #2
 7832 05c6 00F08383 		beq	.L948
 7833 05ca 032B     		cmp	r3, #3
 7834 05cc 00F05E83 		beq	.L949
 7835 05d0 012B     		cmp	r3, #1
 7836 05d2 00F00A81 		beq	.L1238
 7837              	.LVL1038:
 7838              	.L926:
 7839              	.LBE960:
 7840              	.LBE959:
 7841              	.LBE986:
 7842              	.LBE996:
1374:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 7843              		.loc 1 1374 0
 7844 05d6 0120     		movs	r0, #1
 7845 05d8 B6E5     		b	.L1131
 7846              	.LVL1039:
 7847              	.L934:
1388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dj->lfn, dir)) ? ord - 1 : 0xFF;
 7848              		.loc 1 1388 0
 7849 05da B442     		cmp	r4, r6
 7850 05dc 7FF4ECAD 		bne	.L1089
 7851 05e0 17E7     		b	.L935
 7852              	.LVL1040:
 7853              	.L941:
 7854              	.LBB997:
 7855              	.LBB987:
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 7856              		.loc 1 1130 0
 7857 05e2 DAF80CC0 		ldr	ip, [sl, #12]
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 7858              		.loc 1 1131 0
 7859 05e6 DAF80040 		ldr	r4, [sl, #0]
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
 7860              		.loc 1 1128 0
 7861 05ea 0137     		adds	r7, r7, #1
 7862 05ec CAF81070 		str	r7, [sl, #16]
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 7863              		.loc 1 1130 0
 7864 05f0 BCF1000F 		cmp	ip, #0
 7865 05f4 D8D1     		bne	.L943
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 7866              		.loc 1 1131 0
 7867 05f6 2389     		ldrh	r3, [r4, #8]
 7868 05f8 AB42     		cmp	r3, r5
 7869 05fa 7FF6E5AD 		bls	.L1157
 7870 05fe CBE7     		b	.L942
 7871              	.LVL1041:
 7872              	.L1067:
 7873              	.LBE987:
 7874              	.LBE997:
 7875              	.LBE1004:
 7876              	.LBE1011:
 7877              	.LBE1021:
 7878              	.LBE1092:
 7879              	.LBB1093:
 7880              	.LBB897:
1313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 7881              		.loc 1 1313 0
 7882 0600 1346     		mov	r3, r2
 7883 0602 8BE5     		b	.L1158
 7884              	.LVL1042:
 7885              	.L895:
 7886              	.LBE897:
 7887              	.LBE1093:
 7888              	.LBB1094:
 7889              	.LBB1022:
 7890              	.LBB1012:
 7891              	.LBB943:
 7892              	.LBB936:
 7893              	.LBB937:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 7894              		.loc 1 807 0
 7895 0604 023B     		subs	r3, r3, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 7896              		.loc 1 806 0
 7897 0606 AA1E     		subs	r2, r5, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 7898              		.loc 1 807 0
 7899 0608 9A42     		cmp	r2, r3
 7900              	.LBE937:
 7901              	.LBE936:
1097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 7902              		.loc 1 1097 0
 7903 060a CAF80C50 		str	r5, [sl, #12]
 7904              	.LVL1043:
 7905              	.LBB939:
 7906              	.LBB938:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 7907              		.loc 1 808 0
 7908 060e 3BBF     		ittet	cc
 7909 0610 94F80290 		ldrbcc	r9, [r4, #2]	@ zero_extendqisi2
 7910 0614 A36A     		ldrcc	r3, [r4, #40]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 7911              		.loc 1 807 0
 7912 0616 4FF00009 		movcs	r9, #0
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 7913              		.loc 1 808 0
 7914 061a 09FB0239 		mlacc	r9, r9, r2, r3
 7915              	.LBE938:
 7916              	.LBE939:
1098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = clust2sect(dj->fs, clst) + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 7917              		.loc 1 1098 0
 7918 061e CAF81090 		str	r9, [sl, #16]
 7919 0622 A3E5     		b	.L894
 7920              	.LVL1044:
 7921              	.L1234:
 7922              	.LBE943:
 7923              	.LBE1012:
 7924              	.LBE1022:
 7925              	.LBE1094:
 7926              	.LBB1095:
 7927              	.LBB1064:
1080:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		clst = dj->fs->dirbase;
 7928              		.loc 1 1080 0
 7929 0624 656A     		ldr	r5, [r4, #36]
 7930              	.LVL1045:
1082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {	/* Static table (root-dir in FAT12/16) */
 7931              		.loc 1 1082 0
 7932 0626 002D     		cmp	r5, #0
 7933 0628 3FF471AE 		beq	.L970
 7934              	.L969:
 7935              	.LVL1046:
1089:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ic = SS(dj->fs) / SZ_DIR * dj->fs->csize;	/* Entries per cluster */
 7936              		.loc 1 1089 0
 7937 062c A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
1090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 7938              		.loc 1 1090 0
 7939 062e 002A     		cmp	r2, #0
 7940 0630 40F06783 		bne	.L972
 7941              	.LVL1047:
 7942              	.LBB1043:
 7943              	.LBB1044:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 7944              		.loc 1 828 0
 7945 0634 012D     		cmp	r5, #1
 7946 0636 7FF686AD 		bls	.L1101
 7947 063a AB42     		cmp	r3, r5
 7948 063c 7FF683AD 		bls	.L1101
 7949              	.LVL1048:
 7950              	.L1204:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 7951              		.loc 1 831 0
 7952 0640 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 7953 0642 022B     		cmp	r3, #2
 7954 0644 00F0E484 		beq	.L975
 7955 0648 032B     		cmp	r3, #3
 7956 064a 00F0C384 		beq	.L976
 7957 064e 012B     		cmp	r3, #1
 7958 0650 C1D1     		bne	.L926
 7959              	.LVL1049:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 7960              		.loc 1 834 0
 7961 0652 216A     		ldr	r1, [r4, #32]
 7962 0654 934A     		ldr	r2, .L1254
 7963 0656 0093     		str	r3, [sp, #0]
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 7964              		.loc 1 833 0
 7965 0658 05EB5508 		add	r8, r5, r5, lsr #1
 7966              	.LVL1050:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 7967              		.loc 1 834 0
 7968 065c 2046     		mov	r0, r4
 7969 065e 01EB5821 		add	r1, r1, r8, lsr #9
 7970 0662 9047     		blx	r2
 7971              	.LVL1051:
 7972 0664 009B     		ldr	r3, [sp, #0]
 7973 0666 0028     		cmp	r0, #0
 7974 0668 B5D1     		bne	.L926
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 7975              		.loc 1 835 0
 7976 066a 4FEAC852 		lsl	r2, r8, #23
 7977 066e D20D     		lsrs	r2, r2, #23
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 7978              		.loc 1 836 0
 7979 0670 276A     		ldr	r7, [r4, #32]
 7980              	.LBB1045:
 7981              	.LBB1046:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 7982              		.loc 1 727 0
 7983 0672 E66A     		ldr	r6, [r4, #44]
 7984              	.LBE1046:
 7985              	.LBE1045:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 7986              		.loc 1 835 0
 7987 0674 A218     		adds	r2, r4, r2
 7988 0676 08F10108 		add	r8, r8, #1
 7989              	.LVL1052:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 7990              		.loc 1 836 0
 7991 067a 07EB5827 		add	r7, r7, r8, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 7992              		.loc 1 835 0
 7993 067e 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 7994              	.LBB1053:
 7995              	.LBB1050:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 7996              		.loc 1 728 0
 7997 0682 B742     		cmp	r7, r6
 7998              	.LBE1050:
 7999              	.LBE1053:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 8000              		.loc 1 835 0
 8001 0684 0192     		str	r2, [sp, #4]
 8002              	.LVL1053:
 8003              	.LBB1054:
 8004              	.LBB1051:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 8005              		.loc 1 728 0
 8006 0686 06D0     		beq	.L1058
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 8007              		.loc 1 730 0
 8008 0688 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 8009 068a 002A     		cmp	r2, #0
 8010 068c 40F0EA84 		bne	.L979
 8011              	.L982:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 8012              		.loc 1 743 0
 8013 0690 002F     		cmp	r7, #0
 8014 0692 40F0DA84 		bne	.L1239
 8015              	.LVL1054:
 8016              	.L1058:
 8017              	.LBE1051:
 8018              	.LBE1054:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 8019              		.loc 1 837 0
 8020 0696 4FEAC858 		lsl	r8, r8, #23
 8021              	.LVL1055:
 8022 069a 4FEAD858 		lsr	r8, r8, #23
 8023 069e 4444     		add	r4, r4, r8
 8024              	.LVL1056:
 8025 06a0 019E     		ldr	r6, [sp, #4]
 8026 06a2 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 8027              		.loc 1 838 0
 8028 06a6 EA07     		lsls	r2, r5, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 8029              		.loc 1 837 0
 8030 06a8 46EA0323 		orr	r3, r6, r3, lsl #8
 8031              	.LVL1057:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 8032              		.loc 1 838 0
 8033 06ac 40F1C584 		bpl	.L984
 8034 06b0 1D09     		lsrs	r5, r3, #4
 8035              	.LVL1058:
 8036              	.L985:
 8037              	.LBE1044:
 8038              	.LBE1043:
1093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst < 2 || clst >= dj->fs->n_fatent)	/* Reached to end of table or int error */
 8039              		.loc 1 1093 0
 8040 06b2 012D     		cmp	r5, #1
 8041 06b4 7FF647AD 		bls	.L1101
 8042 06b8 DBF80040 		ldr	r4, [fp, #0]
 8043 06bc A369     		ldr	r3, [r4, #24]
 8044 06be AB42     		cmp	r3, r5
 8045 06c0 BED8     		bhi	.L1204
 8046 06c2 40E5     		b	.L1101
 8047              	.LVL1059:
 8048              	.L1236:
 8049              	.LBE1064:
 8050              	.LBE1095:
 8051              	.LBB1096:
 8052              	.LBB1087:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 8053              		.loc 1 1124 0
 8054 06c4 DBF81060 		ldr	r6, [fp, #16]
 8055 06c8 002E     		cmp	r6, #0
 8056 06ca 3FF44EAE 		beq	.L1040
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
 8057              		.loc 1 1127 0
 8058 06ce 15F00F08 		ands	r8, r5, #15
 8059 06d2 00F0D680 		beq	.L1000
 8060 06d6 DBF80040 		ldr	r4, [fp, #0]
 8061              	.L1001:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 8062              		.loc 1 1168 0
 8063 06da 04EB4813 		add	r3, r4, r8, lsl #5
 8064 06de 3033     		adds	r3, r3, #48
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 8065              		.loc 1 1167 0
 8066 06e0 ABF80650 		strh	r5, [fp, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 8067              		.loc 1 1168 0
 8068 06e4 CBF81430 		str	r3, [fp, #20]
 8069 06e8 24E6     		b	.L1016
 8070              	.LVL1060:
 8071              	.L989:
 8072              	.LBE1087:
 8073              	.LBE1096:
 8074              	.LBB1097:
 8075              	.LBB1072:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 8076              		.loc 1 731 0
 8077 06ea 04F13008 		add	r8, r4, #48
 8078 06ee 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 8079 06f0 DFF8B891 		ldr	r9, .L1254+8
 8080 06f4 4146     		mov	r1, r8
 8081 06f6 2A46     		mov	r2, r5
 8082 06f8 0123     		movs	r3, #1
 8083 06fa C847     		blx	r9
 8084              	.LVL1061:
 8085 06fc 0028     		cmp	r0, #0
 8086 06fe 7FF46AAF 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 8087              		.loc 1 734 0
 8088 0702 E369     		ldr	r3, [r4, #28]
 8089 0704 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 8090              		.loc 1 733 0
 8091 0706 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 8092              		.loc 1 734 0
 8093 0708 9A18     		adds	r2, r3, r2
 8094 070a 9542     		cmp	r5, r2
 8095 070c BFF419AE 		bcs	.L993
 8096              	.LBB1069:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 8097              		.loc 1 736 0
 8098 0710 94F803A0 		ldrb	sl, [r4, #3]	@ zero_extendqisi2
 8099              	.LVL1062:
 8100 0714 BAF1010F 		cmp	sl, #1
 8101 0718 7FF613AE 		bls	.L993
 8102 071c 4A46     		mov	r2, r9
 8103 071e A146     		mov	r9, r4
 8104 0720 1446     		mov	r4, r2
 8105              	.LVL1063:
 8106 0722 01E0     		b	.L1206
 8107              	.LVL1064:
 8108              	.L1240:
 8109 0724 D9F81C30 		ldr	r3, [r9, #28]
 8110              	.LVL1065:
 8111              	.L1206:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 8112              		.loc 1 737 0
 8113 0728 ED18     		adds	r5, r5, r3
 8114              	.LVL1066:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 8115              		.loc 1 736 0
 8116 072a 0AF1FF3A 		add	sl, sl, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 8117              		.loc 1 738 0
 8118 072e 0123     		movs	r3, #1
 8119 0730 99F80100 		ldrb	r0, [r9, #1]	@ zero_extendqisi2
 8120 0734 4146     		mov	r1, r8
 8121 0736 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 8122              		.loc 1 736 0
 8123 0738 5FFA8AFA 		uxtb	sl, sl
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 8124              		.loc 1 738 0
 8125 073c A047     		blx	r4
 8126              	.LVL1067:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 8127              		.loc 1 736 0
 8128 073e BAF1010F 		cmp	sl, #1
 8129 0742 EFD8     		bhi	.L1240
 8130 0744 4C46     		mov	r4, r9
 8131              	.LBE1069:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 8132              		.loc 1 743 0
 8133 0746 002E     		cmp	r6, #0
 8134 0748 3FF4FEAD 		beq	.L1205
 8135              	.LVL1068:
 8136              	.L1235:
 8137              	.LBB1070:
 8138              	.LBB1071:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 8139              		.loc 1 744 0
 8140 074c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 8141 074e 564D     		ldr	r5, .L1254+4
 8142              	.LVL1069:
 8143 0750 04F13001 		add	r1, r4, #48
 8144 0754 3246     		mov	r2, r6
 8145 0756 0123     		movs	r3, #1
 8146 0758 A847     		blx	r5
 8147              	.LVL1070:
 8148 075a 0028     		cmp	r0, #0
 8149 075c 7FF43BAF 		bne	.L926
 8150 0760 DBF81430 		ldr	r3, [fp, #20]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 8151              		.loc 1 746 0
 8152 0764 E662     		str	r6, [r4, #44]
 8153              	.LBE1071:
 8154              	.LBE1070:
 8155              	.LBE1072:
 8156              	.LBE1097:
1515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *dj->dir;				/* Check the entry status */
 8157              		.loc 1 1515 0
 8158 0766 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 8159              	.LVL1071:
1516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == DDE || c == 0) {	/* Is it a blank entry? */
 8160              		.loc 1 1516 0
 8161 0768 E52B     		cmp	r3, #229
 8162 076a 7FF4F3AD 		bne	.L1241
 8163              	.LVL1072:
 8164              	.L995:
1517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (n == 0) is = dj->index;	/* First index of the contiguous entry */
 8165              		.loc 1 1517 0
 8166 076e 17B9     		cbnz	r7, .L997
1517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (n == 0) is = dj->index;	/* First index of the contiguous entry */
 8167              		.loc 1 1517 0 is_stmt 0 discriminator 1
 8168 0770 BBF80660 		ldrh	r6, [fp, #6]
 8169              	.LVL1073:
 8170 0774 0296     		str	r6, [sp, #8]
 8171              	.L997:
1518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (++n == ne) break;	/* A contiguous entry that required count is found */
 8172              		.loc 1 1518 0 is_stmt 1
 8173 0776 0137     		adds	r7, r7, #1
 8174              	.LVL1074:
 8175 0778 019C     		ldr	r4, [sp, #4]
 8176              	.LVL1075:
 8177 077a BFB2     		uxth	r7, r7
 8178              	.LVL1076:
 8179 077c A742     		cmp	r7, r4
 8180 077e 7FF4EDAD 		bne	.L996
1525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && ne > 1) {	/* Initialize LFN entry if needed */
 8181              		.loc 1 1525 0
 8182 0782 012F     		cmp	r7, #1
 8183 0784 DDF804A0 		ldr	sl, [sp, #4]
 8184              	.LVL1077:
 8185 0788 40F09280 		bne	.L1062
 8186 078c DBF80040 		ldr	r4, [fp, #0]
 8187 0790 DBF81050 		ldr	r5, [fp, #16]
 8188              	.LVL1078:
 8189              	.L1047:
1554:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = move_window(dj->fs, dj->sect);
 8190              		.loc 1 1554 0
 8191 0794 2046     		mov	r0, r4
 8192 0796 2946     		mov	r1, r5
 8193 0798 424B     		ldr	r3, .L1254
 8194 079a 9847     		blx	r3
 8195              	.LVL1079:
1555:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
 8196              		.loc 1 1555 0
 8197 079c 0028     		cmp	r0, #0
 8198 079e 7FF4D3AC 		bne	.L1131
1556:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj->dir;
 8199              		.loc 1 1556 0
 8200 07a2 DBF81460 		ldr	r6, [fp, #20]
 8201              	.LVL1080:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 8202              		.loc 1 549 0
 8203 07a6 1F23     		movs	r3, #31
1556:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj->dir;
 8204              		.loc 1 1556 0
 8205 07a8 3246     		mov	r2, r6
 8206 07aa 00E0     		b	.L1048
 8207              	.LVL1081:
 8208              	.L1104:
 8209              	.LBB1098:
 8210              	.LBB1099:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 8211              		.loc 1 549 0
 8212 07ac 2346     		mov	r3, r4
 8213              	.LVL1082:
 8214              	.L1048:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 8215              		.loc 1 550 0
 8216 07ae 0021     		movs	r1, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 8217              		.loc 1 549 0
 8218 07b0 5C1E     		subs	r4, r3, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 8219              		.loc 1 550 0
 8220 07b2 02F8011B 		strb	r1, [r2], #1
 8221              	.LVL1083:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 8222              		.loc 1 549 0
 8223 07b6 002B     		cmp	r3, #0
 8224 07b8 F8D1     		bne	.L1104
 8225              	.LBE1099:
 8226              	.LBE1098:
1558:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mem_cpy(dir, dj->fn, 11);	/* Put SFN */
 8227              		.loc 1 1558 0
 8228 07ba DBF81810 		ldr	r1, [fp, #24]
 8229              	.LVL1084:
1556:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj->dir;
 8230              		.loc 1 1556 0
 8231 07be 3246     		mov	r2, r6
 8232              	.LVL1085:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 8233              		.loc 1 540 0
 8234 07c0 0A23     		movs	r3, #10
 8235 07c2 00E0     		b	.L1049
 8236              	.LVL1086:
 8237              	.L1105:
 8238              	.LBB1100:
 8239              	.LBB1101:
 8240 07c4 2B46     		mov	r3, r5
 8241              	.LVL1087:
 8242              	.L1049:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 8243              		.loc 1 541 0
 8244 07c6 11F8014B 		ldrb	r4, [r1], #1	@ zero_extendqisi2
 8245              	.LVL1088:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 8246              		.loc 1 540 0
 8247 07ca 5D1E     		subs	r5, r3, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 8248              		.loc 1 541 0
 8249 07cc 02F8014B 		strb	r4, [r2], #1
 8250              	.LVL1089:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 8251              		.loc 1 540 0
 8252 07d0 002B     		cmp	r3, #0
 8253 07d2 F7D1     		bne	.L1105
 8254              	.LBE1101:
 8255              	.LBE1100:
1560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir[DIR_NTres] = *(dj->fn+NS) & (NS_BODY | NS_EXT);	/* Put NT flag */
 8256              		.loc 1 1560 0
 8257 07d4 DBF81830 		ldr	r3, [fp, #24]
 8258 07d8 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 8259 07da 03F01803 		and	r3, r3, #24
 8260 07de 3373     		strb	r3, [r6, #12]
1562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj->fs->wflag = 1;
 8261              		.loc 1 1562 0
 8262 07e0 DBF80030 		ldr	r3, [fp, #0]
 8263 07e4 0122     		movs	r2, #1
 8264              	.LVL1090:
 8265 07e6 1A71     		strb	r2, [r3, #4]
 8266 07e8 AEE4     		b	.L1131
 8267              	.LVL1091:
 8268              	.L1238:
 8269              	.LBB1102:
 8270              	.LBB1023:
 8271              	.LBB1013:
 8272              	.LBB1005:
 8273              	.LBB998:
 8274              	.LBB988:
 8275              	.LBB978:
 8276              	.LBB974:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 8277              		.loc 1 834 0
 8278 07ea 216A     		ldr	r1, [r4, #32]
 8279 07ec 2D4B     		ldr	r3, .L1254
 8280 07ee CDF800C0 		str	ip, [sp, #0]
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 8281              		.loc 1 833 0
 8282 07f2 0CEB5C07 		add	r7, ip, ip, lsr #1
 8283              	.LVL1092:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 8284              		.loc 1 834 0
 8285 07f6 2046     		mov	r0, r4
 8286 07f8 01EB5721 		add	r1, r1, r7, lsr #9
 8287 07fc 9847     		blx	r3
 8288              	.LVL1093:
 8289 07fe DDF800C0 		ldr	ip, [sp, #0]
 8290 0802 0028     		cmp	r0, #0
 8291 0804 7FF4E7AE 		bne	.L926
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 8292              		.loc 1 835 0
 8293 0808 FB05     		lsls	r3, r7, #23
 8294 080a DB0D     		lsrs	r3, r3, #23
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 8295              		.loc 1 836 0
 8296 080c 226A     		ldr	r2, [r4, #32]
 8297              	.LBB961:
 8298              	.LBB962:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 8299              		.loc 1 727 0
 8300 080e E16A     		ldr	r1, [r4, #44]
 8301              	.LBE962:
 8302              	.LBE961:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 8303              		.loc 1 835 0
 8304 0810 E318     		adds	r3, r4, r3
 8305 0812 0137     		adds	r7, r7, #1
 8306              	.LVL1094:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 8307              		.loc 1 836 0
 8308 0814 02EB5722 		add	r2, r2, r7, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 8309              		.loc 1 835 0
 8310 0818 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 8311              	.LBB969:
 8312              	.LBB966:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 8313              		.loc 1 727 0
 8314 081c 0191     		str	r1, [sp, #4]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 8315              		.loc 1 728 0
 8316 081e 8A42     		cmp	r2, r1
 8317              	.LBE966:
 8318              	.LBE969:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 8319              		.loc 1 835 0
 8320 0820 0797     		str	r7, [sp, #28]
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 8321              		.loc 1 836 0
 8322 0822 0692     		str	r2, [sp, #24]
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 8323              		.loc 1 835 0
 8324 0824 0993     		str	r3, [sp, #36]
 8325              	.LVL1095:
 8326              	.LBB970:
 8327              	.LBB967:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 8328              		.loc 1 728 0
 8329 0826 07D0     		beq	.L1056
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 8330              		.loc 1 730 0
 8331 0828 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 8332              	.LVL1096:
 8333 082a 002B     		cmp	r3, #0
 8334 082c 40F0CF82 		bne	.L952
 8335              	.LVL1097:
 8336              	.L955:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 8337              		.loc 1 743 0
 8338 0830 069A     		ldr	r2, [sp, #24]
 8339 0832 002A     		cmp	r2, #0
 8340 0834 40F0BA82 		bne	.L1242
 8341              	.L1056:
 8342              	.LBE967:
 8343              	.LBE970:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 8344              		.loc 1 837 0
 8345 0838 0799     		ldr	r1, [sp, #28]
 8346 083a CB05     		lsls	r3, r1, #23
 8347 083c DB0D     		lsrs	r3, r3, #23
 8348 083e E318     		adds	r3, r4, r3
 8349 0840 099C     		ldr	r4, [sp, #36]
 8350              	.LVL1098:
 8351 0842 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 8352              		.loc 1 838 0
 8353 0846 1CF0010F 		tst	ip, #1
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 8354              		.loc 1 837 0
 8355 084a 44EA0323 		orr	r3, r4, r3, lsl #8
 8356              	.LVL1099:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 8357              		.loc 1 838 0
 8358 084e 00F0A782 		beq	.L957
 8359 0852 1B09     		lsrs	r3, r3, #4
 8360              	.LVL1100:
 8361              	.L958:
 8362              	.LBE974:
 8363              	.LBE978:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 8364              		.loc 1 1137 0
 8365 0854 012B     		cmp	r3, #1
 8366 0856 7FF676AC 		bls	.L1101
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
 8367              		.loc 1 1139 0
 8368 085a DAF80040 		ldr	r4, [sl, #0]
 8369 085e A169     		ldr	r1, [r4, #24]
 8370 0860 9942     		cmp	r1, r3
 8371 0862 7FF6B1AC 		bls	.L1157
 8372              	.LVL1101:
 8373              	.LBB979:
 8374              	.LBB980:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 8375              		.loc 1 806 0
 8376 0866 9A1E     		subs	r2, r3, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 8377              		.loc 1 807 0
 8378 0868 0239     		subs	r1, r1, #2
 8379 086a 8A42     		cmp	r2, r1
 8380              	.LBE980:
 8381              	.LBE979:
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
 8382              		.loc 1 1161 0
 8383 086c CAF80C30 		str	r3, [sl, #12]
 8384              	.LVL1102:
 8385              	.LBB982:
 8386              	.LBB981:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 8387              		.loc 1 808 0
 8388 0870 3DBF     		ittte	cc
 8389 0872 A778     		ldrbcc	r7, [r4, #2]	@ zero_extendqisi2
 8390 0874 A36A     		ldrcc	r3, [r4, #40]
 8391              	.LVL1103:
 8392 0876 07FB0237 		mlacc	r7, r7, r2, r3
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 8393              		.loc 1 807 0
 8394 087a 0027     		movcs	r7, #0
 8395              	.LBE981:
 8396              	.LBE982:
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
 8397              		.loc 1 1162 0
 8398 087c CAF81070 		str	r7, [sl, #16]
 8399 0880 8AE6     		b	.L942
 8400              	.LVL1104:
 8401              	.L1000:
 8402              	.LBE988:
 8403              	.LBE998:
 8404              	.LBE1005:
 8405              	.LBE1013:
 8406              	.LBE1023:
 8407              	.LBE1102:
 8408              	.LBB1103:
 8409              	.LBB1088:
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 8410              		.loc 1 1130 0
 8411 0882 DBF80C10 		ldr	r1, [fp, #12]
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 8412              		.loc 1 1131 0
 8413 0886 DBF80040 		ldr	r4, [fp, #0]
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
 8414              		.loc 1 1128 0
 8415 088a 0136     		adds	r6, r6, #1
 8416 088c CBF81060 		str	r6, [fp, #16]
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 8417              		.loc 1 1130 0
 8418 0890 0029     		cmp	r1, #0
 8419 0892 40F09581 		bne	.L1002
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 8420              		.loc 1 1131 0
 8421 0896 2389     		ldrh	r3, [r4, #8]
 8422 0898 AB42     		cmp	r3, r5
 8423 089a 3FF61EAF 		bhi	.L1001
 8424              	.LBB1080:
1125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NO_FILE;
 8425              		.loc 1 1125 0
 8426 089e 0420     		movs	r0, #4
 8427 08a0 52E4     		b	.L1131
 8428              	.L1255:
 8429 08a2 00BF     		.align	2
 8430              	.L1254:
 8431 08a4 00000000 		.word	move_window
 8432 08a8 00000000 		.word	disk_read
 8433 08ac 00000000 		.word	disk_write
 8434              	.LVL1105:
 8435              	.L1062:
 8436              	.LBE1080:
 8437              	.LBE1088:
 8438              	.LBE1103:
1526:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = dir_sdi(dj, is);
 8439              		.loc 1 1526 0
 8440 08b0 5846     		mov	r0, fp
 8441 08b2 0299     		ldr	r1, [sp, #8]
 8442 08b4 BF4B     		ldr	r3, .L1256
 8443 08b6 9847     		blx	r3
 8444              	.LVL1106:
1527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
 8445              		.loc 1 1527 0
 8446 08b8 0028     		cmp	r0, #0
 8447 08ba 7FF445AC 		bne	.L1131
1528:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sum = sum_sfn(dj->fn);	/* Sum of the SFN tied to the LFN */
 8448              		.loc 1 1528 0
 8449 08be DBF81820 		ldr	r2, [fp, #24]
 8450              	.LVL1107:
1338:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	UINT n = 11;
 8451              		.loc 1 1338 0
 8452 08c2 0B23     		movs	r3, #11
1337:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE sum = 0;
 8453              		.loc 1 1337 0
 8454 08c4 0646     		mov	r6, r0
 8455              	.LVL1108:
 8456              	.L1018:
 8457              	.LBB1104:
 8458              	.LBB1105:
1340:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
 8459              		.loc 1 1340 0
 8460 08c6 F001     		lsls	r0, r6, #7
 8461 08c8 12F8011B 		ldrb	r1, [r2], #1	@ zero_extendqisi2
 8462              	.LVL1109:
 8463 08cc 40EA5606 		orr	r6, r0, r6, lsr #1
 8464              	.LVL1110:
 8465 08d0 51FA86F6 		uxtab	r6, r1, r6
 8466 08d4 013B     		subs	r3, r3, #1
 8467              	.LVL1111:
 8468 08d6 F6B2     		uxtb	r6, r6
 8469              	.LVL1112:
 8470 08d8 F5D1     		bne	.L1018
 8471              	.LBE1105:
 8472              	.LBE1104:
1529:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ne--;
 8473              		.loc 1 1529 0
 8474 08da 0AF1FF37 		add	r7, sl, #-1
 8475              	.LVL1113:
 8476 08de DBF80040 		ldr	r4, [fp, #0]
 8477 08e2 DBF81050 		ldr	r5, [fp, #16]
 8478 08e6 BFB2     		uxth	r7, r7
 8479              	.LVL1114:
 8480              	.L1046:
 8481              	.LBB1106:
 8482              	.LBB1107:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 8483              		.loc 1 727 0
 8484 08e8 D4F82C80 		ldr	r8, [r4, #44]
 8485              	.LVL1115:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 8486              		.loc 1 728 0
 8487 08ec A845     		cmp	r8, r5
 8488 08ee 05D0     		beq	.L1063
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 8489              		.loc 1 730 0
 8490 08f0 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 8491 08f2 002B     		cmp	r3, #0
 8492 08f4 68D1     		bne	.L1020
 8493              	.L1023:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 8494              		.loc 1 743 0
 8495 08f6 002D     		cmp	r5, #0
 8496 08f8 40F04F81 		bne	.L1243
 8497              	.L1063:
 8498              	.LBE1107:
 8499              	.LBE1106:
1533:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fit_lfn(dj->lfn, dj->dir, (BYTE)ne, sum);
 8500              		.loc 1 1533 0
 8501 08fc FCB2     		uxtb	r4, r7
 8502              	.LVL1116:
 8503              	.LBB1113:
 8504              	.LBB1114:
1265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
 8505              		.loc 1 1265 0
 8506 08fe 611E     		subs	r1, r4, #1
 8507              	.LBE1114:
 8508              	.LBE1113:
1533:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fit_lfn(dj->lfn, dj->dir, (BYTE)ne, sum);
 8509              		.loc 1 1533 0
 8510 0900 DBF81430 		ldr	r3, [fp, #20]
 8511 0904 DBF81C20 		ldr	r2, [fp, #28]
 8512              	.LVL1117:
 8513              	.LBB1117:
 8514              	.LBB1115:
1260:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set check sum */
 8515              		.loc 1 1260 0
 8516 0908 5E73     		strb	r6, [r3, #13]
1265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
 8517              		.loc 1 1265 0
 8518 090a 01EB4105 		add	r5, r1, r1, lsl #1
 8519              	.LVL1118:
1262:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Type] = 0;
 8520              		.loc 1 1262 0
 8521 090e 0020     		movs	r0, #0
1265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
 8522              		.loc 1 1265 0
 8523 0910 01EB8501 		add	r1, r1, r5, lsl #2
 8524              	.LVL1119:
1261:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
 8525              		.loc 1 1261 0
 8526 0914 0F25     		movs	r5, #15
 8527 0916 DD72     		strb	r5, [r3, #11]
1262:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Type] = 0;
 8528              		.loc 1 1262 0
 8529 0918 1873     		strb	r0, [r3, #12]
1263:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(dir+LDIR_FstClusLO, 0);
 8530              		.loc 1 1263 0
 8531 091a 9876     		strb	r0, [r3, #26]
 8532 091c D876     		strb	r0, [r3, #27]
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8533              		.loc 1 1268 0
 8534 091e 32F81100 		ldrh	r0, [r2, r1, lsl #1]
 8535              	.LVL1120:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8536              		.loc 1 1269 0
 8537 0922 050A     		lsrs	r5, r0, #8
 8538 0924 5870     		strb	r0, [r3, #1]
 8539 0926 9D70     		strb	r5, [r3, #2]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8540              		.loc 1 1270 0
 8541 0928 0028     		cmp	r0, #0
 8542 092a 78D1     		bne	.L1244
 8543              	.LVL1121:
 8544              	.L1026:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8545              		.loc 1 1269 0
 8546 092c FF22     		movs	r2, #255
 8547              	.LVL1122:
 8548 092e DA70     		strb	r2, [r3, #3]
 8549 0930 1A71     		strb	r2, [r3, #4]
 8550              	.LVL1123:
 8551              	.L1027:
 8552 0932 FF22     		movs	r2, #255
 8553 0934 5A71     		strb	r2, [r3, #5]
 8554 0936 9A71     		strb	r2, [r3, #6]
 8555              	.LVL1124:
 8556              	.L1028:
 8557 0938 FF22     		movs	r2, #255
 8558 093a DA71     		strb	r2, [r3, #7]
 8559 093c 1A72     		strb	r2, [r3, #8]
 8560              	.LVL1125:
 8561              	.L1029:
 8562 093e FF22     		movs	r2, #255
 8563 0940 5A72     		strb	r2, [r3, #9]
 8564 0942 9A72     		strb	r2, [r3, #10]
 8565              	.LVL1126:
 8566              	.L1030:
 8567 0944 FF22     		movs	r2, #255
 8568 0946 9A73     		strb	r2, [r3, #14]
 8569 0948 DA73     		strb	r2, [r3, #15]
 8570              	.LVL1127:
 8571              	.L1031:
 8572 094a FF22     		movs	r2, #255
 8573 094c 1A74     		strb	r2, [r3, #16]
 8574 094e 5A74     		strb	r2, [r3, #17]
 8575              	.LVL1128:
 8576              	.L1032:
 8577 0950 FF22     		movs	r2, #255
 8578 0952 9A74     		strb	r2, [r3, #18]
 8579 0954 DA74     		strb	r2, [r3, #19]
 8580              	.LVL1129:
 8581              	.L1033:
 8582 0956 FF22     		movs	r2, #255
 8583 0958 1A75     		strb	r2, [r3, #20]
 8584 095a 5A75     		strb	r2, [r3, #21]
 8585              	.LVL1130:
 8586              	.L1034:
 8587 095c FF22     		movs	r2, #255
 8588 095e 9A75     		strb	r2, [r3, #22]
 8589 0960 DA75     		strb	r2, [r3, #23]
 8590              	.LVL1131:
 8591              	.L1035:
 8592 0962 FF22     		movs	r2, #255
 8593 0964 1A76     		strb	r2, [r3, #24]
 8594 0966 5A76     		strb	r2, [r3, #25]
 8595              	.LVL1132:
 8596              	.L1036:
 8597 0968 FF22     		movs	r2, #255
 8598 096a 1A77     		strb	r2, [r3, #28]
 8599 096c 5A77     		strb	r2, [r3, #29]
 8600              	.LVL1133:
 8601              	.L1037:
 8602 096e FF22     		movs	r2, #255
 8603 0970 9A77     		strb	r2, [r3, #30]
 8604 0972 DA77     		strb	r2, [r3, #31]
 8605              	.LVL1134:
 8606              	.L1038:
1272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLE;	/* Bottom LFN part is the start of LFN sequence */
 8607              		.loc 1 1272 0
 8608 0974 47F04004 		orr	r4, r7, #64
 8609 0978 E4B2     		uxtb	r4, r4
 8610              	.LVL1135:
 8611              	.L1039:
1273:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
 8612              		.loc 1 1273 0
 8613 097a 1C70     		strb	r4, [r3, #0]
 8614              	.LBE1115:
 8615              	.LBE1117:
1534:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->fs->wflag = 1;
 8616              		.loc 1 1534 0
 8617 097c DBF80030 		ldr	r3, [fp, #0]
 8618              	.LVL1136:
 8619 0980 4FF00109 		mov	r9, #1
 8620 0984 83F80490 		strb	r9, [r3, #4]
 8621              	.LVL1137:
 8622              	.LBB1118:
 8623              	.LBB1033:
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
 8624              		.loc 1 1123 0
 8625 0988 BBF80680 		ldrh	r8, [fp, #6]
 8626 098c C844     		add	r8, r8, r9
 8627 098e 1FFA88F8 		uxth	r8, r8
 8628              	.LVL1138:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 8629              		.loc 1 1124 0
 8630 0992 B8F1000F 		cmp	r8, #0
 8631 0996 3FF4E8AC 		beq	.L1040
 8632 099a DBF81050 		ldr	r5, [fp, #16]
 8633 099e 002D     		cmp	r5, #0
 8634 09a0 3FF4E3AC 		beq	.L1040
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
 8635              		.loc 1 1127 0
 8636 09a4 18F00F0A 		ands	sl, r8, #15
 8637 09a8 00F0BA81 		beq	.L1041
 8638 09ac DBF80040 		ldr	r4, [fp, #0]
 8639              	.LVL1139:
 8640              	.L1042:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 8641              		.loc 1 1168 0
 8642 09b0 04EB4A13 		add	r3, r4, sl, lsl #5
 8643              	.LBE1033:
 8644              	.LBE1118:
1536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} while (res == FR_OK && --ne);
 8645              		.loc 1 1536 0
 8646 09b4 013F     		subs	r7, r7, #1
 8647              	.LVL1140:
 8648              	.LBB1119:
 8649              	.LBB1034:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 8650              		.loc 1 1168 0
 8651 09b6 3033     		adds	r3, r3, #48
 8652              	.LBE1034:
 8653              	.LBE1119:
1536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} while (res == FR_OK && --ne);
 8654              		.loc 1 1536 0
 8655 09b8 BFB2     		uxth	r7, r7
 8656              	.LVL1141:
 8657              	.LBB1120:
 8658              	.LBB1035:
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 8659              		.loc 1 1167 0
 8660 09ba ABF80680 		strh	r8, [fp, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 8661              		.loc 1 1168 0
 8662 09be CBF81430 		str	r3, [fp, #20]
 8663              	.LVL1142:
 8664              	.LBE1035:
 8665              	.LBE1120:
1536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			} while (res == FR_OK && --ne);
 8666              		.loc 1 1536 0
 8667 09c2 002F     		cmp	r7, #0
 8668 09c4 90D1     		bne	.L1046
 8669 09c6 E5E6     		b	.L1047
 8670              	.LVL1143:
 8671              	.L1020:
 8672              	.LBB1121:
 8673              	.LBB1111:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 8674              		.loc 1 731 0
 8675 09c8 04F13009 		add	r9, r4, #48
 8676 09cc 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 8677 09ce DFF8E8A1 		ldr	sl, .L1256+4
 8678 09d2 4946     		mov	r1, r9
 8679 09d4 4246     		mov	r2, r8
 8680 09d6 0123     		movs	r3, #1
 8681 09d8 D047     		blx	sl
 8682              	.LVL1144:
 8683 09da 0028     		cmp	r0, #0
 8684 09dc 7FF4FBAD 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 8685              		.loc 1 734 0
 8686 09e0 E369     		ldr	r3, [r4, #28]
 8687 09e2 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 8688              		.loc 1 733 0
 8689 09e4 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 8690              		.loc 1 734 0
 8691 09e6 9A18     		adds	r2, r3, r2
 8692 09e8 9045     		cmp	r8, r2
 8693 09ea 84D2     		bcs	.L1023
 8694              	.LBB1108:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 8695              		.loc 1 736 0
 8696 09ec 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 8697              	.LVL1145:
 8698 09f0 BCF1010F 		cmp	ip, #1
 8699 09f4 01D8     		bhi	.L1207
 8700 09f6 7EE7     		b	.L1023
 8701              	.LVL1146:
 8702              	.L1245:
 8703 09f8 E369     		ldr	r3, [r4, #28]
 8704              	.LVL1147:
 8705              	.L1207:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 8706              		.loc 1 737 0
 8707 09fa 9844     		add	r8, r8, r3
 8708              	.LVL1148:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 8709              		.loc 1 738 0
 8710 09fc 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 8711 09fe CDF800C0 		str	ip, [sp, #0]
 8712 0a02 0123     		movs	r3, #1
 8713 0a04 4946     		mov	r1, r9
 8714 0a06 4246     		mov	r2, r8
 8715 0a08 D047     		blx	sl
 8716              	.LVL1149:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 8717              		.loc 1 736 0
 8718 0a0a DDF800C0 		ldr	ip, [sp, #0]
 8719 0a0e 0CF1FF3C 		add	ip, ip, #-1
 8720 0a12 5FFA8CFC 		uxtb	ip, ip
 8721              	.LVL1150:
 8722 0a16 BCF1010F 		cmp	ip, #1
 8723 0a1a EDD8     		bhi	.L1245
 8724 0a1c 6BE7     		b	.L1023
 8725              	.LVL1151:
 8726              	.L1244:
 8727              	.LBE1108:
 8728              	.LBE1111:
 8729              	.LBE1121:
 8730              	.LBB1122:
 8731              	.LBB1116:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8732              		.loc 1 1268 0
 8733 0a1e 4FF6FF75 		movw	r5, #65535
 8734 0a22 A842     		cmp	r0, r5
 8735 0a24 82D0     		beq	.L1026
 8736 0a26 481C     		adds	r0, r1, #1
 8737              	.LVL1152:
 8738 0a28 01F1020C 		add	ip, r1, #2
 8739 0a2c 32F81000 		ldrh	r0, [r2, r0, lsl #1]
 8740              	.LVL1153:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8741              		.loc 1 1269 0
 8742 0a30 4FEA1028 		lsr	r8, r0, #8
 8743              	.LVL1154:
 8744 0a34 D870     		strb	r0, [r3, #3]
 8745 0a36 83F80480 		strb	r8, [r3, #4]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8746              		.loc 1 1270 0
 8747 0a3a 0028     		cmp	r0, #0
 8748 0a3c 3FF479AF 		beq	.L1027
 8749              	.LVL1155:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8750              		.loc 1 1268 0
 8751 0a40 A842     		cmp	r0, r5
 8752 0a42 3FF476AF 		beq	.L1027
 8753 0a46 32F81C00 		ldrh	r0, [r2, ip, lsl #1]
 8754              	.LVL1156:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8755              		.loc 1 1269 0
 8756 0a4a 4FEA1028 		lsr	r8, r0, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8757              		.loc 1 1268 0
 8758 0a4e 01F1030C 		add	ip, r1, #3
 8759              	.LVL1157:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8760              		.loc 1 1269 0
 8761 0a52 5871     		strb	r0, [r3, #5]
 8762 0a54 83F80680 		strb	r8, [r3, #6]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8763              		.loc 1 1270 0
 8764 0a58 0028     		cmp	r0, #0
 8765 0a5a 3FF46DAF 		beq	.L1028
 8766              	.LVL1158:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8767              		.loc 1 1268 0
 8768 0a5e A842     		cmp	r0, r5
 8769 0a60 3FF46AAF 		beq	.L1028
 8770 0a64 32F81C00 		ldrh	r0, [r2, ip, lsl #1]
 8771              	.LVL1159:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8772              		.loc 1 1269 0
 8773 0a68 4FEA1028 		lsr	r8, r0, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8774              		.loc 1 1268 0
 8775 0a6c 01F1040C 		add	ip, r1, #4
 8776              	.LVL1160:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8777              		.loc 1 1269 0
 8778 0a70 D871     		strb	r0, [r3, #7]
 8779 0a72 83F80880 		strb	r8, [r3, #8]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8780              		.loc 1 1270 0
 8781 0a76 0028     		cmp	r0, #0
 8782 0a78 3FF461AF 		beq	.L1029
 8783              	.LVL1161:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8784              		.loc 1 1268 0
 8785 0a7c A842     		cmp	r0, r5
 8786 0a7e 3FF45EAF 		beq	.L1029
 8787 0a82 32F81C00 		ldrh	r0, [r2, ip, lsl #1]
 8788              	.LVL1162:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8789              		.loc 1 1269 0
 8790 0a86 4FEA1028 		lsr	r8, r0, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8791              		.loc 1 1268 0
 8792 0a8a 01F1050C 		add	ip, r1, #5
 8793              	.LVL1163:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8794              		.loc 1 1269 0
 8795 0a8e 5872     		strb	r0, [r3, #9]
 8796 0a90 83F80A80 		strb	r8, [r3, #10]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8797              		.loc 1 1270 0
 8798 0a94 0028     		cmp	r0, #0
 8799 0a96 3FF455AF 		beq	.L1030
 8800              	.LVL1164:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8801              		.loc 1 1268 0
 8802 0a9a A842     		cmp	r0, r5
 8803 0a9c 3FF452AF 		beq	.L1030
 8804 0aa0 32F81C50 		ldrh	r5, [r2, ip, lsl #1]
 8805              	.LVL1165:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8806              		.loc 1 1269 0
 8807 0aa4 280A     		lsrs	r0, r5, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8808              		.loc 1 1268 0
 8809 0aa6 01F1060C 		add	ip, r1, #6
 8810              	.LVL1166:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8811              		.loc 1 1269 0
 8812 0aaa 9D73     		strb	r5, [r3, #14]
 8813 0aac D873     		strb	r0, [r3, #15]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8814              		.loc 1 1270 0
 8815 0aae 002D     		cmp	r5, #0
 8816 0ab0 3FF44BAF 		beq	.L1031
 8817              	.LVL1167:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8818              		.loc 1 1268 0
 8819 0ab4 4FF6FF70 		movw	r0, #65535
 8820 0ab8 8542     		cmp	r5, r0
 8821 0aba 3FF446AF 		beq	.L1031
 8822 0abe 32F81C50 		ldrh	r5, [r2, ip, lsl #1]
 8823              	.LVL1168:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8824              		.loc 1 1269 0
 8825 0ac2 4FEA1528 		lsr	r8, r5, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8826              		.loc 1 1268 0
 8827 0ac6 01F1070C 		add	ip, r1, #7
 8828              	.LVL1169:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8829              		.loc 1 1269 0
 8830 0aca 1D74     		strb	r5, [r3, #16]
 8831 0acc 83F81180 		strb	r8, [r3, #17]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8832              		.loc 1 1270 0
 8833 0ad0 002D     		cmp	r5, #0
 8834 0ad2 3FF43DAF 		beq	.L1032
 8835              	.LVL1170:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8836              		.loc 1 1268 0
 8837 0ad6 8542     		cmp	r5, r0
 8838 0ad8 3FF43AAF 		beq	.L1032
 8839 0adc 32F81C50 		ldrh	r5, [r2, ip, lsl #1]
 8840              	.LVL1171:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8841              		.loc 1 1269 0
 8842 0ae0 4FEA1528 		lsr	r8, r5, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8843              		.loc 1 1268 0
 8844 0ae4 01F1080C 		add	ip, r1, #8
 8845              	.LVL1172:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8846              		.loc 1 1269 0
 8847 0ae8 9D74     		strb	r5, [r3, #18]
 8848 0aea 83F81380 		strb	r8, [r3, #19]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8849              		.loc 1 1270 0
 8850 0aee 002D     		cmp	r5, #0
 8851 0af0 3FF431AF 		beq	.L1033
 8852              	.LVL1173:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8853              		.loc 1 1268 0
 8854 0af4 8542     		cmp	r5, r0
 8855 0af6 3FF42EAF 		beq	.L1033
 8856 0afa 32F81C50 		ldrh	r5, [r2, ip, lsl #1]
 8857              	.LVL1174:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8858              		.loc 1 1269 0
 8859 0afe 4FEA1528 		lsr	r8, r5, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8860              		.loc 1 1268 0
 8861 0b02 01F1090C 		add	ip, r1, #9
 8862              	.LVL1175:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8863              		.loc 1 1269 0
 8864 0b06 1D75     		strb	r5, [r3, #20]
 8865 0b08 83F81580 		strb	r8, [r3, #21]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8866              		.loc 1 1270 0
 8867 0b0c 002D     		cmp	r5, #0
 8868 0b0e 3FF425AF 		beq	.L1034
 8869              	.LVL1176:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8870              		.loc 1 1268 0
 8871 0b12 8542     		cmp	r5, r0
 8872 0b14 3FF422AF 		beq	.L1034
 8873 0b18 32F81C50 		ldrh	r5, [r2, ip, lsl #1]
 8874              	.LVL1177:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8875              		.loc 1 1269 0
 8876 0b1c 4FEA1528 		lsr	r8, r5, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8877              		.loc 1 1268 0
 8878 0b20 01F10A0C 		add	ip, r1, #10
 8879              	.LVL1178:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8880              		.loc 1 1269 0
 8881 0b24 9D75     		strb	r5, [r3, #22]
 8882 0b26 83F81780 		strb	r8, [r3, #23]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8883              		.loc 1 1270 0
 8884 0b2a 002D     		cmp	r5, #0
 8885 0b2c 3FF419AF 		beq	.L1035
 8886              	.LVL1179:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8887              		.loc 1 1268 0
 8888 0b30 8542     		cmp	r5, r0
 8889 0b32 3FF416AF 		beq	.L1035
 8890 0b36 32F81C00 		ldrh	r0, [r2, ip, lsl #1]
 8891              	.LVL1180:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8892              		.loc 1 1269 0
 8893 0b3a 050A     		lsrs	r5, r0, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8894              		.loc 1 1268 0
 8895 0b3c 01F10B0C 		add	ip, r1, #11
 8896              	.LVL1181:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8897              		.loc 1 1269 0
 8898 0b40 1876     		strb	r0, [r3, #24]
 8899 0b42 5D76     		strb	r5, [r3, #25]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8900              		.loc 1 1270 0
 8901 0b44 0028     		cmp	r0, #0
 8902 0b46 3FF40FAF 		beq	.L1036
 8903              	.LVL1182:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8904              		.loc 1 1268 0
 8905 0b4a 4FF6FF75 		movw	r5, #65535
 8906 0b4e A842     		cmp	r0, r5
 8907 0b50 3FF40AAF 		beq	.L1036
 8908 0b54 32F81C00 		ldrh	r0, [r2, ip, lsl #1]
 8909              	.LVL1183:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8910              		.loc 1 1269 0
 8911 0b58 4FEA1028 		lsr	r8, r0, #8
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8912              		.loc 1 1268 0
 8913 0b5c 01F10C0C 		add	ip, r1, #12
 8914              	.LVL1184:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8915              		.loc 1 1269 0
 8916 0b60 1877     		strb	r0, [r3, #28]
 8917 0b62 83F81D80 		strb	r8, [r3, #29]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8918              		.loc 1 1270 0
 8919 0b66 0028     		cmp	r0, #0
 8920 0b68 3FF401AF 		beq	.L1037
 8921              	.LVL1185:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8922              		.loc 1 1268 0
 8923 0b6c A842     		cmp	r0, r5
 8924 0b6e 3FF4FEAE 		beq	.L1037
 8925 0b72 32F81C00 		ldrh	r0, [r2, ip, lsl #1]
 8926              	.LVL1186:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8927              		.loc 1 1269 0
 8928 0b76 4FEA102C 		lsr	ip, r0, #8
 8929              	.LVL1187:
1268:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective char */
 8930              		.loc 1 1268 0
 8931 0b7a 0D31     		adds	r1, r1, #13
 8932              	.LVL1188:
1269:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 8933              		.loc 1 1269 0
 8934 0b7c 9877     		strb	r0, [r3, #30]
 8935 0b7e 83F81FC0 		strb	ip, [r3, #31]
1270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding chars following last char */
 8936              		.loc 1 1270 0
 8937 0b82 0028     		cmp	r0, #0
 8938 0b84 3FF4F6AE 		beq	.L1038
 8939              	.LVL1189:
1272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLE;	/* Bottom LFN part is the start of LFN sequence */
 8940              		.loc 1 1272 0
 8941 0b88 A842     		cmp	r0, r5
 8942 0b8a 3FF4F3AE 		beq	.L1038
 8943 0b8e 32F81120 		ldrh	r2, [r2, r1, lsl #1]
 8944              	.LVL1190:
 8945 0b92 002A     		cmp	r2, #0
 8946 0b94 3FF4EEAE 		beq	.L1038
 8947 0b98 EFE6     		b	.L1039
 8948              	.LVL1191:
 8949              	.L1243:
 8950              	.LBE1116:
 8951              	.LBE1122:
 8952              	.LBB1123:
 8953              	.LBB1112:
 8954              	.LBB1109:
 8955              	.LBB1110:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 8956              		.loc 1 744 0
 8957 0b9a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 8958 0b9c DFF81CC0 		ldr	ip, .L1256+8
 8959 0ba0 04F13001 		add	r1, r4, #48
 8960 0ba4 2A46     		mov	r2, r5
 8961 0ba6 0123     		movs	r3, #1
 8962 0ba8 E047     		blx	ip
 8963              	.LVL1192:
 8964 0baa 0028     		cmp	r0, #0
 8965 0bac 7FF413AD 		bne	.L926
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 8966              		.loc 1 746 0
 8967 0bb0 E562     		str	r5, [r4, #44]
 8968 0bb2 A3E6     		b	.L1063
 8969              	.L1257:
 8970              		.align	2
 8971              	.L1256:
 8972 0bb4 00000000 		.word	dir_sdi
 8973 0bb8 00000000 		.word	disk_write
 8974 0bbc 00000000 		.word	disk_read
 8975              	.LVL1193:
 8976              	.L1002:
 8977              	.LBE1110:
 8978              	.LBE1109:
 8979              	.LBE1112:
 8980              	.LBE1123:
 8981              	.LBB1124:
 8982              	.LBB1089:
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
 8983              		.loc 1 1135 0
 8984 0bc0 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 8985 0bc2 013B     		subs	r3, r3, #1
 8986 0bc4 13EA1513 		ands	r3, r3, r5, lsr #4
 8987 0bc8 7FF487AD 		bne	.L1001
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
 8988              		.loc 1 1136 0
 8989 0bcc 2046     		mov	r0, r4
 8990 0bce B34B     		ldr	r3, .L1258
 8991 0bd0 9847     		blx	r3
 8992              	.LVL1194:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 8993              		.loc 1 1137 0
 8994 0bd2 0128     		cmp	r0, #1
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
 8995              		.loc 1 1136 0
 8996 0bd4 8146     		mov	r9, r0
 8997              	.LVL1195:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 8998              		.loc 1 1137 0
 8999 0bd6 7FF6B6AA 		bls	.L1101
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 9000              		.loc 1 1138 0
 9001 0bda 431C     		adds	r3, r0, #1
 9002 0bdc 3FF4FBAC 		beq	.L926
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
 9003              		.loc 1 1139 0
 9004 0be0 DBF80040 		ldr	r4, [fp, #0]
 9005 0be4 A369     		ldr	r3, [r4, #24]
 9006 0be6 9842     		cmp	r0, r3
 9007 0be8 C0F0A980 		bcc	.L1246
 9008              	.LBB1081:
1143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = create_chain(dj->fs, dj->clust);		/* Stretch cluster chain */
 9009              		.loc 1 1143 0
 9010 0bec 2046     		mov	r0, r4
 9011              	.LVL1196:
 9012 0bee DBF80C10 		ldr	r1, [fp, #12]
 9013 0bf2 AB4B     		ldr	r3, .L1258+4
 9014 0bf4 9847     		blx	r3
 9015              	.LVL1197:
1144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 9016              		.loc 1 1144 0
 9017 0bf6 8146     		mov	r9, r0
 9018 0bf8 0028     		cmp	r0, #0
 9019 0bfa 3FF4C1AC 		beq	.L1216
1145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 9020              		.loc 1 1145 0
 9021 0bfe 0128     		cmp	r0, #1
 9022 0c00 3FF4A1AA 		beq	.L1101
1146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 9023              		.loc 1 1146 0
 9024 0c04 0130     		adds	r0, r0, #1
 9025              	.LVL1198:
 9026 0c06 3FF4E6AC 		beq	.L926
1148:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (move_window(dj->fs, 0)) return FR_DISK_ERR;	/* Flush active window */
 9027              		.loc 1 1148 0
 9028 0c0a DBF80000 		ldr	r0, [fp, #0]
 9029 0c0e A54E     		ldr	r6, .L1258+8
 9030 0c10 0021     		movs	r1, #0
 9031 0c12 B047     		blx	r6
 9032              	.LVL1199:
 9033 0c14 0028     		cmp	r0, #0
 9034 0c16 7FF4DEAC 		bne	.L926
1149:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_set(dj->fs->win, 0, SS(dj->fs));			/* Clear window buffer */
 9035              		.loc 1 1149 0
 9036 0c1a DBF80030 		ldr	r3, [fp, #0]
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 9037              		.loc 1 549 0
 9038 0c1e 40F2FF11 		movw	r1, #511
1149:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_set(dj->fs->win, 0, SS(dj->fs));			/* Clear window buffer */
 9039              		.loc 1 1149 0
 9040 0c22 3033     		adds	r3, r3, #48
 9041              	.LVL1200:
 9042 0c24 00E0     		b	.L1010
 9043              	.LVL1201:
 9044              	.L1098:
 9045              	.LBB1076:
 9046              	.LBB1077:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 9047              		.loc 1 549 0
 9048 0c26 0146     		mov	r1, r0
 9049              	.LVL1202:
 9050              	.L1010:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 9051              		.loc 1 550 0
 9052 0c28 0022     		movs	r2, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 9053              		.loc 1 549 0
 9054 0c2a 481E     		subs	r0, r1, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 9055              		.loc 1 550 0
 9056 0c2c 03F8012B 		strb	r2, [r3], #1
 9057              	.LVL1203:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 9058              		.loc 1 549 0
 9059 0c30 0029     		cmp	r1, #0
 9060 0c32 F8D1     		bne	.L1098
 9061              	.LBE1077:
 9062              	.LBE1076:
1150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->fs->winsect = clust2sect(dj->fs, clst);	/* Cluster start sector */
 9063              		.loc 1 1150 0
 9064 0c34 DBF80040 		ldr	r4, [fp, #0]
 9065              	.LVL1204:
 9066              	.LBB1078:
 9067              	.LBB1079:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9068              		.loc 1 807 0
 9069 0c38 A269     		ldr	r2, [r4, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 9070              		.loc 1 806 0
 9071 0c3a A9F10203 		sub	r3, r9, #2
 9072              	.LVL1205:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9073              		.loc 1 807 0
 9074 0c3e 023A     		subs	r2, r2, #2
 9075 0c40 9342     		cmp	r3, r2
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 9076              		.loc 1 808 0
 9077 0c42 38BF     		it	cc
 9078 0c44 A16A     		ldrcc	r1, [r4, #40]
 9079 0c46 A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 9080 0c48 38BF     		it	cc
 9081 0c4a 02FB0311 		mlacc	r1, r2, r3, r1
 9082              	.LBE1079:
 9083              	.LBE1078:
1150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->fs->winsect = clust2sect(dj->fs, clst);	/* Cluster start sector */
 9084              		.loc 1 1150 0
 9085 0c4e E162     		str	r1, [r4, #44]
 9086              	.LVL1206:
1151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					for (c = 0; c < dj->fs->csize; c++) {		/* Fill the new cluster with 0 */
 9087              		.loc 1 1151 0
 9088 0c50 CAB1     		cbz	r2, .L1013
 9089 0c52 0022     		movs	r2, #0
 9090 0c54 9246     		mov	sl, r2
 9091              	.LVL1207:
 9092              	.L1014:
1152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->fs->wflag = 1;
 9093              		.loc 1 1152 0
 9094 0c56 0122     		movs	r2, #1
 9095 0c58 2271     		strb	r2, [r4, #4]
1153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (move_window(dj->fs, 0)) return FR_DISK_ERR;
 9096              		.loc 1 1153 0
 9097 0c5a DBF80000 		ldr	r0, [fp, #0]
 9098 0c5e 0093     		str	r3, [sp, #0]
 9099 0c60 0021     		movs	r1, #0
 9100 0c62 B047     		blx	r6
 9101              	.LVL1208:
1151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					for (c = 0; c < dj->fs->csize; c++) {		/* Fill the new cluster with 0 */
 9102              		.loc 1 1151 0
 9103 0c64 0AF1010A 		add	sl, sl, #1
 9104 0c68 5FFA8AFA 		uxtb	sl, sl
 9105              	.LVL1209:
1153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (move_window(dj->fs, 0)) return FR_DISK_ERR;
 9106              		.loc 1 1153 0
 9107 0c6c 009B     		ldr	r3, [sp, #0]
 9108 0c6e 0028     		cmp	r0, #0
 9109 0c70 7FF4B1AC 		bne	.L926
1154:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->fs->winsect++;
 9110              		.loc 1 1154 0
 9111 0c74 DBF80040 		ldr	r4, [fp, #0]
 9112 0c78 E26A     		ldr	r2, [r4, #44]
1151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					for (c = 0; c < dj->fs->csize; c++) {		/* Fill the new cluster with 0 */
 9113              		.loc 1 1151 0
 9114 0c7a A078     		ldrb	r0, [r4, #2]	@ zero_extendqisi2
1154:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->fs->winsect++;
 9115              		.loc 1 1154 0
 9116 0c7c 511C     		adds	r1, r2, #1
1151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					for (c = 0; c < dj->fs->csize; c++) {		/* Fill the new cluster with 0 */
 9117              		.loc 1 1151 0
 9118 0c7e 5045     		cmp	r0, sl
1154:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dj->fs->winsect++;
 9119              		.loc 1 1154 0
 9120 0c80 E162     		str	r1, [r4, #44]
1151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					for (c = 0; c < dj->fs->csize; c++) {		/* Fill the new cluster with 0 */
 9121              		.loc 1 1151 0
 9122 0c82 E8D8     		bhi	.L1014
 9123 0c84 5246     		mov	r2, sl
 9124              	.LVL1210:
 9125              	.L1013:
1156:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->fs->winsect -= c;						/* Rewind window address */
 9126              		.loc 1 1156 0
 9127 0c86 8A1A     		subs	r2, r1, r2
 9128 0c88 E262     		str	r2, [r4, #44]
 9129 0c8a 59E0     		b	.L1007
 9130              	.LVL1211:
 9131              	.L949:
 9132              	.LBE1081:
 9133              	.LBE1089:
 9134              	.LBE1124:
 9135              	.LBB1125:
 9136              	.LBB1024:
 9137              	.LBB1014:
 9138              	.LBB1006:
 9139              	.LBB999:
 9140              	.LBB989:
 9141              	.LBB983:
 9142              	.LBB975:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 9143              		.loc 1 846 0
 9144 0c8c 216A     		ldr	r1, [r4, #32]
 9145 0c8e 854B     		ldr	r3, .L1258+8
 9146 0c90 CDF800C0 		str	ip, [sp, #0]
 9147 0c94 01EBDC11 		add	r1, r1, ip, lsr #7
 9148 0c98 2046     		mov	r0, r4
 9149 0c9a 9847     		blx	r3
 9150              	.LVL1212:
 9151 0c9c DDF800C0 		ldr	ip, [sp, #0]
 9152 0ca0 0028     		cmp	r0, #0
 9153 0ca2 7FF498AC 		bne	.L926
 9154              	.LVL1213:
 9155              	.LBB971:
 9156              	.LBB972:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 9157              		.loc 1 847 0
 9158 0ca6 4FEA4C62 		lsl	r2, ip, #25
 9159 0caa D20D     		lsrs	r2, r2, #23
 9160 0cac 02F13003 		add	r3, r2, #48
 9161 0cb0 E318     		adds	r3, r4, r3
 9162              	.LVL1214:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 9163              		.loc 1 848 0
 9164 0cb2 A418     		adds	r4, r4, r2
 9165              	.LVL1215:
 9166 0cb4 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 9167 0cb6 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 9168 0cb8 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 9169 0cba 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 9170              	.LVL1216:
 9171 0cbe 1206     		lsls	r2, r2, #24
 9172 0cc0 42EA0042 		orr	r2, r2, r0, lsl #16
 9173 0cc4 42EA0122 		orr	r2, r2, r1, lsl #8
 9174 0cc8 1343     		orrs	r3, r3, r2
 9175 0cca 23F07043 		bic	r3, r3, #-268435456
 9176 0cce C1E5     		b	.L958
 9177              	.LVL1217:
 9178              	.L948:
 9179              	.LBE972:
 9180              	.LBE971:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 9181              		.loc 1 841 0
 9182 0cd0 216A     		ldr	r1, [r4, #32]
 9183 0cd2 744B     		ldr	r3, .L1258+8
 9184 0cd4 CDF800C0 		str	ip, [sp, #0]
 9185 0cd8 01EB1C21 		add	r1, r1, ip, lsr #8
 9186 0cdc 2046     		mov	r0, r4
 9187 0cde 9847     		blx	r3
 9188              	.LVL1218:
 9189 0ce0 DDF800C0 		ldr	ip, [sp, #0]
 9190 0ce4 0028     		cmp	r0, #0
 9191 0ce6 7FF476AC 		bne	.L926
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 9192              		.loc 1 842 0
 9193 0cea 4FEA0C63 		lsl	r3, ip, #24
 9194 0cee DB0D     		lsrs	r3, r3, #23
 9195              	.LVL1219:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 9196              		.loc 1 843 0
 9197 0cf0 E218     		adds	r2, r4, r3
 9198 0cf2 1346     		mov	r3, r2
 9199              	.LVL1220:
 9200 0cf4 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 9201 0cf8 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 9202 0cfc 42EA0323 		orr	r3, r2, r3, lsl #8
 9203 0d00 A8E5     		b	.L958
 9204              	.LVL1221:
 9205              	.L972:
 9206              	.LBE975:
 9207              	.LBE983:
 9208              	.LBE989:
 9209              	.LBE999:
 9210              	.LBE1006:
 9211              	.LBE1014:
 9212              	.LBE1024:
 9213              	.LBE1125:
 9214              	.LBB1126:
 9215              	.LBB1065:
 9216              	.LBB1059:
 9217              	.LBB1060:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9218              		.loc 1 807 0
 9219 0d02 023B     		subs	r3, r3, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 9220              		.loc 1 806 0
 9221 0d04 AA1E     		subs	r2, r5, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9222              		.loc 1 807 0
 9223 0d06 9A42     		cmp	r2, r3
 9224              	.LBE1060:
 9225              	.LBE1059:
1097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->clust = clst;
 9226              		.loc 1 1097 0
 9227 0d08 CBF80C50 		str	r5, [fp, #12]
 9228              	.LVL1222:
 9229              	.LBB1062:
 9230              	.LBB1061:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 9231              		.loc 1 808 0
 9232 0d0c 3DBF     		ittte	cc
 9233 0d0e A678     		ldrbcc	r6, [r4, #2]	@ zero_extendqisi2
 9234 0d10 A36A     		ldrcc	r3, [r4, #40]
 9235 0d12 06FB0236 		mlacc	r6, r6, r2, r3
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9236              		.loc 1 807 0
 9237 0d16 0026     		movcs	r6, #0
 9238              	.LBE1061:
 9239              	.LBE1062:
1098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect = clust2sect(dj->fs, clst) + idx / (SS(dj->fs) / SZ_DIR);	/* Sector# */
 9240              		.loc 1 1098 0
 9241 0d18 CBF81060 		str	r6, [fp, #16]
 9242 0d1c FFF701BB 		b	.L971
 9243              	.LVL1223:
 9244              	.L1041:
 9245              	.LBE1065:
 9246              	.LBE1126:
 9247              	.LBB1127:
 9248              	.LBB1036:
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 9249              		.loc 1 1130 0
 9250 0d20 DBF80C10 		ldr	r1, [fp, #12]
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 9251              		.loc 1 1131 0
 9252 0d24 DBF80040 		ldr	r4, [fp, #0]
 9253              	.LVL1224:
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
 9254              		.loc 1 1128 0
 9255 0d28 0135     		adds	r5, r5, #1
 9256 0d2a CBF81050 		str	r5, [fp, #16]
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 9257              		.loc 1 1130 0
 9258 0d2e A9B9     		cbnz	r1, .L1043
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 9259              		.loc 1 1131 0
 9260 0d30 2389     		ldrh	r3, [r4, #8]
 9261 0d32 4345     		cmp	r3, r8
 9262 0d34 3FF63CAE 		bhi	.L1042
 9263              	.LBE1036:
 9264              	.LBE1127:
 9265              	.LBB1128:
 9266              	.LBB1090:
 9267              	.LBB1082:
1125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NO_FILE;
 9268              		.loc 1 1125 0
 9269 0d38 0420     		movs	r0, #4
 9270 0d3a FFF705BA 		b	.L1131
 9271              	.LVL1225:
 9272              	.L1246:
 9273 0d3e 831E     		subs	r3, r0, #2
 9274              	.LVL1226:
 9275              	.L1007:
 9276              	.LBE1082:
 9277              	.LBB1083:
 9278              	.LBB1084:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9279              		.loc 1 807 0
 9280 0d40 A269     		ldr	r2, [r4, #24]
 9281              	.LBE1084:
 9282              	.LBE1083:
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
 9283              		.loc 1 1161 0
 9284 0d42 CBF80C90 		str	r9, [fp, #12]
 9285              	.LVL1227:
 9286              	.LBB1086:
 9287              	.LBB1085:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9288              		.loc 1 807 0
 9289 0d46 023A     		subs	r2, r2, #2
 9290 0d48 9A42     		cmp	r2, r3
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 9291              		.loc 1 808 0
 9292 0d4a 83BF     		ittte	hi
 9293 0d4c A678     		ldrbhi	r6, [r4, #2]	@ zero_extendqisi2
 9294 0d4e A26A     		ldrhi	r2, [r4, #40]
 9295 0d50 03FB0626 		mlahi	r6, r3, r6, r2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9296              		.loc 1 807 0
 9297 0d54 0026     		movls	r6, #0
 9298              	.LBE1085:
 9299              	.LBE1086:
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
 9300              		.loc 1 1162 0
 9301 0d56 CBF81060 		str	r6, [fp, #16]
 9302 0d5a BEE4     		b	.L1001
 9303              	.LVL1228:
 9304              	.L1043:
 9305              	.LBE1090:
 9306              	.LBE1128:
 9307              	.LBB1129:
 9308              	.LBB1037:
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
 9309              		.loc 1 1135 0
 9310 0d5c A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 9311 0d5e 013B     		subs	r3, r3, #1
 9312 0d60 13EA1813 		ands	r3, r3, r8, lsr #4
 9313 0d64 7FF424AE 		bne	.L1042
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
 9314              		.loc 1 1136 0
 9315 0d68 2046     		mov	r0, r4
 9316 0d6a 4C4B     		ldr	r3, .L1258
 9317 0d6c 9847     		blx	r3
 9318              	.LVL1229:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 9319              		.loc 1 1137 0
 9320 0d6e 0128     		cmp	r0, #1
 9321 0d70 7FF6E9A9 		bls	.L1101
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 9322              		.loc 1 1138 0
 9323 0d74 431C     		adds	r3, r0, #1
 9324 0d76 16D0     		beq	.L1102
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
 9325              		.loc 1 1139 0
 9326 0d78 DBF80040 		ldr	r4, [fp, #0]
 9327 0d7c A269     		ldr	r2, [r4, #24]
 9328 0d7e 9042     		cmp	r0, r2
 9329 0d80 BFF4F3AA 		bcs	.L1040
 9330              	.LBB1029:
 9331              	.LBB1030:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9332              		.loc 1 807 0
 9333 0d84 023A     		subs	r2, r2, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 9334              		.loc 1 806 0
 9335 0d86 831E     		subs	r3, r0, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9336              		.loc 1 807 0
 9337 0d88 9342     		cmp	r3, r2
 9338              	.LBE1030:
 9339              	.LBE1029:
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
 9340              		.loc 1 1161 0
 9341 0d8a CBF80C00 		str	r0, [fp, #12]
 9342              	.LVL1230:
 9343              	.LBB1032:
 9344              	.LBB1031:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 9345              		.loc 1 808 0
 9346 0d8e 3BBF     		ittet	cc
 9347 0d90 A578     		ldrbcc	r5, [r4, #2]	@ zero_extendqisi2
 9348 0d92 A26A     		ldrcc	r2, [r4, #40]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 9349              		.loc 1 807 0
 9350 0d94 5546     		movcs	r5, sl
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 9351              		.loc 1 808 0
 9352 0d96 05FB0325 		mlacc	r5, r5, r3, r2
 9353              	.LBE1031:
 9354              	.LBE1032:
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
 9355              		.loc 1 1162 0
 9356 0d9a CBF81050 		str	r5, [fp, #16]
 9357 0d9e 07E6     		b	.L1042
 9358              	.LVL1231:
 9359              	.L957:
 9360              	.LBE1037:
 9361              	.LBE1129:
 9362              	.LBB1130:
 9363              	.LBB1025:
 9364              	.LBB1015:
 9365              	.LBB1007:
 9366              	.LBB1000:
 9367              	.LBB990:
 9368              	.LBB984:
 9369              	.LBB976:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 9370              		.loc 1 838 0
 9371 0da0 1B05     		lsls	r3, r3, #20
 9372              	.LVL1232:
 9373 0da2 1B0D     		lsrs	r3, r3, #20
 9374 0da4 56E5     		b	.L958
 9375              	.LVL1233:
 9376              	.L1102:
 9377              	.LBE976:
 9378              	.LBE984:
 9379              	.LBE990:
 9380              	.LBE1000:
 9381              	.LBE1007:
 9382              	.LBE1015:
 9383              	.LBE1025:
 9384              	.LBE1130:
 9385              	.LBB1131:
 9386              	.LBB1038:
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 9387              		.loc 1 1138 0
 9388 0da6 4846     		mov	r0, r9
 9389              	.LVL1234:
 9390 0da8 FFF7CEB9 		b	.L1131
 9391              	.LVL1235:
 9392              	.L1242:
 9393              	.LBE1038:
 9394              	.LBE1131:
 9395              	.LBB1132:
 9396              	.LBB1026:
 9397              	.LBB1016:
 9398              	.LBB1008:
 9399              	.LBB1001:
 9400              	.LBB991:
 9401              	.LBB985:
 9402              	.LBB977:
 9403              	.LBB973:
 9404              	.LBB968:
 9405              	.LBB963:
 9406              	.LBB964:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 9407              		.loc 1 744 0
 9408 0dac 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9409 0dae 069A     		ldr	r2, [sp, #24]
 9410 0db0 CDF800C0 		str	ip, [sp, #0]
 9411 0db4 04F13001 		add	r1, r4, #48
 9412 0db8 0123     		movs	r3, #1
 9413 0dba 3B4F     		ldr	r7, .L1258+12
 9414 0dbc B847     		blx	r7
 9415              	.LVL1236:
 9416 0dbe DDF800C0 		ldr	ip, [sp, #0]
 9417 0dc2 0028     		cmp	r0, #0
 9418 0dc4 7FF407AC 		bne	.L926
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 9419              		.loc 1 746 0
 9420 0dc8 069B     		ldr	r3, [sp, #24]
 9421 0dca E362     		str	r3, [r4, #44]
 9422 0dcc 34E5     		b	.L1056
 9423              	.LVL1237:
 9424              	.L952:
 9425              	.LBE964:
 9426              	.LBE963:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 9427              		.loc 1 731 0
 9428 0dce 04F13003 		add	r3, r4, #48
 9429 0dd2 0893     		str	r3, [sp, #32]
 9430 0dd4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9431 0dd6 DFF8D480 		ldr	r8, .L1258+16
 9432 0dda CDF800C0 		str	ip, [sp, #0]
 9433 0dde 1946     		mov	r1, r3
 9434              	.LVL1238:
 9435 0de0 019A     		ldr	r2, [sp, #4]
 9436              	.LVL1239:
 9437 0de2 0123     		movs	r3, #1
 9438 0de4 C047     		blx	r8
 9439              	.LVL1240:
 9440 0de6 DDF800C0 		ldr	ip, [sp, #0]
 9441 0dea 0028     		cmp	r0, #0
 9442 0dec 7FF4F3AB 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9443              		.loc 1 734 0
 9444 0df0 E369     		ldr	r3, [r4, #28]
 9445 0df2 226A     		ldr	r2, [r4, #32]
 9446 0df4 0199     		ldr	r1, [sp, #4]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 9447              		.loc 1 733 0
 9448 0df6 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9449              		.loc 1 734 0
 9450 0df8 9A18     		adds	r2, r3, r2
 9451 0dfa 9142     		cmp	r1, r2
 9452 0dfc BFF418AD 		bcs	.L955
 9453              	.LBB965:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9454              		.loc 1 736 0
 9455 0e00 E778     		ldrb	r7, [r4, #3]	@ zero_extendqisi2
 9456              	.LVL1241:
 9457 0e02 012F     		cmp	r7, #1
 9458 0e04 7FF614AD 		bls	.L955
 9459 0e08 D346     		mov	fp, sl
 9460 0e0a E246     		mov	sl, ip
 9461              	.LVL1242:
 9462              	.L1202:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 9463              		.loc 1 737 0
 9464 0e0c 019A     		ldr	r2, [sp, #4]
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9465              		.loc 1 738 0
 9466 0e0e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9467 0e10 0899     		ldr	r1, [sp, #32]
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9468              		.loc 1 736 0
 9469 0e12 013F     		subs	r7, r7, #1
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 9470              		.loc 1 737 0
 9471 0e14 D218     		adds	r2, r2, r3
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9472              		.loc 1 736 0
 9473 0e16 FFB2     		uxtb	r7, r7
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9474              		.loc 1 738 0
 9475 0e18 0123     		movs	r3, #1
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 9476              		.loc 1 737 0
 9477 0e1a 0192     		str	r2, [sp, #4]
 9478              	.LVL1243:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9479              		.loc 1 738 0
 9480 0e1c C047     		blx	r8
 9481              	.LVL1244:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9482              		.loc 1 736 0
 9483 0e1e 012F     		cmp	r7, #1
 9484 0e20 40F20F81 		bls	.L1212
 9485 0e24 E369     		ldr	r3, [r4, #28]
 9486 0e26 F1E7     		b	.L1202
 9487              	.LVL1245:
 9488              	.L901:
 9489              	.LBE965:
 9490              	.LBE968:
 9491              	.LBE973:
 9492              	.LBE977:
 9493              	.LBE985:
 9494              	.LBE991:
 9495              	.LBE1001:
 9496              	.LBE1008:
 9497              	.LBE1016:
 9498              	.LBB1017:
 9499              	.LBB944:
 9500              	.LBB940:
 9501              	.LBB934:
 9502              	.LBB920:
 9503              	.LBB910:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 9504              		.loc 1 731 0
 9505 0e28 04F13001 		add	r1, r4, #48
 9506 0e2c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9507 0e2e 1F4F     		ldr	r7, .L1258+16
 9508 0e30 0191     		str	r1, [sp, #4]
 9509 0e32 3246     		mov	r2, r6
 9510 0e34 B847     		blx	r7
 9511              	.LVL1246:
 9512 0e36 0028     		cmp	r0, #0
 9513 0e38 7FF4CDAB 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9514              		.loc 1 734 0
 9515 0e3c E369     		ldr	r3, [r4, #28]
 9516 0e3e 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 9517              		.loc 1 733 0
 9518 0e40 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9519              		.loc 1 734 0
 9520 0e42 9A18     		adds	r2, r3, r2
 9521 0e44 9642     		cmp	r6, r2
 9522 0e46 BFF405AA 		bcs	.L905
 9523              	.LBB906:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9524              		.loc 1 736 0
 9525 0e4a 94F80390 		ldrb	r9, [r4, #3]	@ zero_extendqisi2
 9526              	.LVL1247:
 9527 0e4e B9F1010F 		cmp	r9, #1
 9528 0e52 02D8     		bhi	.L1196
 9529 0e54 FFF7FEB9 		b	.L905
 9530              	.LVL1248:
 9531              	.L1247:
 9532 0e58 E369     		ldr	r3, [r4, #28]
 9533              	.LVL1249:
 9534              	.L1196:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 9535              		.loc 1 737 0
 9536 0e5a F618     		adds	r6, r6, r3
 9537              	.LVL1250:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9538              		.loc 1 738 0
 9539 0e5c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9540 0e5e 0199     		ldr	r1, [sp, #4]
 9541 0e60 0123     		movs	r3, #1
 9542 0e62 3246     		mov	r2, r6
 9543 0e64 B847     		blx	r7
 9544              	.LVL1251:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9545              		.loc 1 736 0
 9546 0e66 09F1FF3C 		add	ip, r9, #-1
 9547 0e6a 5FFA8CF9 		uxtb	r9, ip
 9548              	.LVL1252:
 9549 0e6e B9F1010F 		cmp	r9, #1
 9550 0e72 F1D8     		bhi	.L1247
 9551              	.LBE906:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 9552              		.loc 1 743 0
 9553 0e74 B8F1000F 		cmp	r8, #0
 9554 0e78 3FF4F0A9 		beq	.L1195
 9555              	.LVL1253:
 9556              	.L1231:
 9557              	.LBB907:
 9558              	.LBB908:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 9559              		.loc 1 744 0
 9560 0e7c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9561 0e7e 0A4E     		ldr	r6, .L1258+12
 9562              	.LVL1254:
 9563 0e80 04F13001 		add	r1, r4, #48
 9564 0e84 4246     		mov	r2, r8
 9565 0e86 0123     		movs	r3, #1
 9566 0e88 B047     		blx	r6
 9567              	.LVL1255:
 9568 0e8a 0028     		cmp	r0, #0
 9569 0e8c 7FF4A3AB 		bne	.L926
 9570 0e90 216A     		ldr	r1, [r4, #32]
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 9571              		.loc 1 746 0
 9572 0e92 C4F82C80 		str	r8, [r4, #44]
 9573 0e96 FFF7E2B9 		b	.L1050
 9574              	.L1259:
 9575 0e9a 00BF     		.align	2
 9576              	.L1258:
 9577 0e9c 00000000 		.word	get_fat
 9578 0ea0 00000000 		.word	create_chain
 9579 0ea4 00000000 		.word	move_window
 9580 0ea8 00000000 		.word	disk_read
 9581 0eac 00000000 		.word	disk_write
 9582              	.LVL1256:
 9583              	.L899:
 9584              	.LBE908:
 9585              	.LBE907:
 9586              	.LBE910:
 9587              	.LBE920:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 9588              		.loc 1 846 0
 9589 0eb0 236A     		ldr	r3, [r4, #32]
 9590              	.LBB921:
 9591              	.LBB922:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 9592              		.loc 1 727 0
 9593 0eb2 E66A     		ldr	r6, [r4, #44]
 9594              	.LBE922:
 9595              	.LBE921:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 9596              		.loc 1 846 0
 9597 0eb4 03EBD518 		add	r8, r3, r5, lsr #7
 9598              	.LVL1257:
 9599              	.LBB928:
 9600              	.LBB926:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 9601              		.loc 1 728 0
 9602 0eb8 B045     		cmp	r8, r6
 9603 0eba 04D0     		beq	.L1052
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 9604              		.loc 1 730 0
 9605 0ebc 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 9606 0ebe BBB9     		cbnz	r3, .L916
 9607              	.L918:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 9608              		.loc 1 743 0
 9609 0ec0 B8F1000F 		cmp	r8, #0
 9610 0ec4 3CD1     		bne	.L1248
 9611              	.LVL1258:
 9612              	.L1052:
 9613              	.LBE926:
 9614              	.LBE928:
 9615              	.LBB929:
 9616              	.LBB930:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 9617              		.loc 1 847 0
 9618 0ec6 6A06     		lsls	r2, r5, #25
 9619 0ec8 D20D     		lsrs	r2, r2, #23
 9620 0eca 02F13003 		add	r3, r2, #48
 9621 0ece E318     		adds	r3, r4, r3
 9622              	.LVL1259:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 9623              		.loc 1 848 0
 9624 0ed0 A418     		adds	r4, r4, r2
 9625              	.LVL1260:
 9626 0ed2 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 9627 0ed4 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 9628 0ed6 5D78     		ldrb	r5, [r3, #1]	@ zero_extendqisi2
 9629              	.LVL1261:
 9630 0ed8 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 9631              	.LVL1262:
 9632 0edc 1206     		lsls	r2, r2, #24
 9633 0ede 42EA0142 		orr	r2, r2, r1, lsl #16
 9634 0ee2 42EA0525 		orr	r5, r2, r5, lsl #8
 9635 0ee6 1D43     		orrs	r5, r5, r3
 9636 0ee8 25F07045 		bic	r5, r5, #-268435456
 9637 0eec FFF7D3B9 		b	.L909
 9638              	.LVL1263:
 9639              	.L916:
 9640              	.LBE930:
 9641              	.LBE929:
 9642              	.LBB931:
 9643              	.LBB927:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 9644              		.loc 1 731 0
 9645 0ef0 04F1300A 		add	sl, r4, #48
 9646 0ef4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9647 0ef6 734F     		ldr	r7, .L1260
 9648 0ef8 5146     		mov	r1, sl
 9649 0efa 3246     		mov	r2, r6
 9650 0efc 0123     		movs	r3, #1
 9651 0efe B847     		blx	r7
 9652              	.LVL1264:
 9653 0f00 0028     		cmp	r0, #0
 9654 0f02 7FF468AB 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9655              		.loc 1 734 0
 9656 0f06 E369     		ldr	r3, [r4, #28]
 9657 0f08 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 9658              		.loc 1 733 0
 9659 0f0a 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9660              		.loc 1 734 0
 9661 0f0c 9A18     		adds	r2, r3, r2
 9662 0f0e 9642     		cmp	r6, r2
 9663 0f10 D6D2     		bcs	.L918
 9664              	.LBB923:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9665              		.loc 1 736 0
 9666 0f12 94F80390 		ldrb	r9, [r4, #3]	@ zero_extendqisi2
 9667              	.LVL1265:
 9668 0f16 B9F1010F 		cmp	r9, #1
 9669 0f1a 01D8     		bhi	.L1198
 9670 0f1c D0E7     		b	.L918
 9671              	.LVL1266:
 9672              	.L1249:
 9673 0f1e E369     		ldr	r3, [r4, #28]
 9674              	.LVL1267:
 9675              	.L1198:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 9676              		.loc 1 737 0
 9677 0f20 F618     		adds	r6, r6, r3
 9678              	.LVL1268:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9679              		.loc 1 736 0
 9680 0f22 09F1FF39 		add	r9, r9, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9681              		.loc 1 738 0
 9682 0f26 0123     		movs	r3, #1
 9683 0f28 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9684 0f2a 5146     		mov	r1, sl
 9685 0f2c 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9686              		.loc 1 736 0
 9687 0f2e 5FFA89F9 		uxtb	r9, r9
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9688              		.loc 1 738 0
 9689 0f32 B847     		blx	r7
 9690              	.LVL1269:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9691              		.loc 1 736 0
 9692 0f34 B9F1010F 		cmp	r9, #1
 9693 0f38 F1D8     		bhi	.L1249
 9694              	.LBE923:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 9695              		.loc 1 743 0
 9696 0f3a B8F1000F 		cmp	r8, #0
 9697 0f3e C2D0     		beq	.L1052
 9698              	.LVL1270:
 9699              	.L1248:
 9700              	.LBB924:
 9701              	.LBB925:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 9702              		.loc 1 744 0
 9703 0f40 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9704 0f42 614E     		ldr	r6, .L1260+4
 9705              	.LVL1271:
 9706 0f44 04F13001 		add	r1, r4, #48
 9707 0f48 4246     		mov	r2, r8
 9708 0f4a 0123     		movs	r3, #1
 9709 0f4c B047     		blx	r6
 9710              	.LVL1272:
 9711 0f4e 0028     		cmp	r0, #0
 9712 0f50 7FF441AB 		bne	.L926
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 9713              		.loc 1 746 0
 9714 0f54 C4F82C80 		str	r8, [r4, #44]
 9715 0f58 B5E7     		b	.L1052
 9716              	.LVL1273:
 9717              	.L911:
 9718              	.LBE925:
 9719              	.LBE924:
 9720              	.LBE927:
 9721              	.LBE931:
 9722              	.LBB932:
 9723              	.LBB918:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 9724              		.loc 1 731 0
 9725 0f5a 04F1300A 		add	sl, r4, #48
 9726 0f5e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9727 0f60 584F     		ldr	r7, .L1260
 9728 0f62 5146     		mov	r1, sl
 9729 0f64 3246     		mov	r2, r6
 9730 0f66 0123     		movs	r3, #1
 9731 0f68 B847     		blx	r7
 9732              	.LVL1274:
 9733 0f6a 0028     		cmp	r0, #0
 9734 0f6c 7FF433AB 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9735              		.loc 1 734 0
 9736 0f70 E369     		ldr	r3, [r4, #28]
 9737 0f72 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 9738              		.loc 1 733 0
 9739 0f74 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9740              		.loc 1 734 0
 9741 0f76 9A18     		adds	r2, r3, r2
 9742 0f78 9642     		cmp	r6, r2
 9743 0f7a BFF4A2A9 		bcs	.L913
 9744              	.LBB914:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9745              		.loc 1 736 0
 9746 0f7e 94F80390 		ldrb	r9, [r4, #3]	@ zero_extendqisi2
 9747              	.LVL1275:
 9748 0f82 B9F1010F 		cmp	r9, #1
 9749 0f86 02D8     		bhi	.L1197
 9750 0f88 FFF79BB9 		b	.L913
 9751              	.LVL1276:
 9752              	.L1250:
 9753 0f8c E369     		ldr	r3, [r4, #28]
 9754              	.LVL1277:
 9755              	.L1197:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 9756              		.loc 1 737 0
 9757 0f8e F618     		adds	r6, r6, r3
 9758              	.LVL1278:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9759              		.loc 1 736 0
 9760 0f90 09F1FF39 		add	r9, r9, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9761              		.loc 1 738 0
 9762 0f94 0123     		movs	r3, #1
 9763 0f96 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9764 0f98 5146     		mov	r1, sl
 9765 0f9a 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9766              		.loc 1 736 0
 9767 0f9c 5FFA89F9 		uxtb	r9, r9
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9768              		.loc 1 738 0
 9769 0fa0 B847     		blx	r7
 9770              	.LVL1279:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9771              		.loc 1 736 0
 9772 0fa2 B9F1010F 		cmp	r9, #1
 9773 0fa6 F1D8     		bhi	.L1250
 9774              	.LBE914:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 9775              		.loc 1 743 0
 9776 0fa8 B8F1000F 		cmp	r8, #0
 9777 0fac 3FF48DA9 		beq	.L1051
 9778              	.LVL1280:
 9779              	.L1233:
 9780              	.LBB915:
 9781              	.LBB916:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 9782              		.loc 1 744 0
 9783 0fb0 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9784 0fb2 454E     		ldr	r6, .L1260+4
 9785              	.LVL1281:
 9786 0fb4 04F13001 		add	r1, r4, #48
 9787 0fb8 4246     		mov	r2, r8
 9788 0fba 0123     		movs	r3, #1
 9789 0fbc B047     		blx	r6
 9790              	.LVL1282:
 9791 0fbe 0028     		cmp	r0, #0
 9792 0fc0 7FF409AB 		bne	.L926
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 9793              		.loc 1 746 0
 9794 0fc4 C4F82C80 		str	r8, [r4, #44]
 9795 0fc8 FFF77FB9 		b	.L1051
 9796              	.LVL1283:
 9797              	.L908:
 9798              	.LBE916:
 9799              	.LBE915:
 9800              	.LBE918:
 9801              	.LBE932:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 9802              		.loc 1 838 0
 9803 0fcc 1D05     		lsls	r5, r3, #20
 9804 0fce 2D0D     		lsrs	r5, r5, #20
 9805 0fd0 FFF761B9 		b	.L909
 9806              	.LVL1284:
 9807              	.L976:
 9808              	.LBE934:
 9809              	.LBE940:
 9810              	.LBE944:
 9811              	.LBE1017:
 9812              	.LBE1026:
 9813              	.LBE1132:
 9814              	.LBB1133:
 9815              	.LBB1066:
 9816              	.LBB1063:
 9817              	.LBB1058:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 9818              		.loc 1 846 0
 9819 0fd4 216A     		ldr	r1, [r4, #32]
 9820 0fd6 3D4B     		ldr	r3, .L1260+8
 9821 0fd8 2046     		mov	r0, r4
 9822 0fda 01EBD511 		add	r1, r1, r5, lsr #7
 9823 0fde 9847     		blx	r3
 9824              	.LVL1285:
 9825 0fe0 0028     		cmp	r0, #0
 9826 0fe2 7FF4F8AA 		bne	.L926
 9827              	.LVL1286:
 9828              	.LBB1055:
 9829              	.LBB1056:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 9830              		.loc 1 847 0
 9831 0fe6 6A06     		lsls	r2, r5, #25
 9832 0fe8 D20D     		lsrs	r2, r2, #23
 9833 0fea 02F13003 		add	r3, r2, #48
 9834 0fee E318     		adds	r3, r4, r3
 9835              	.LVL1287:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 9836              		.loc 1 848 0
 9837 0ff0 A418     		adds	r4, r4, r2
 9838              	.LVL1288:
 9839 0ff2 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 9840 0ff4 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 9841 0ff6 5D78     		ldrb	r5, [r3, #1]	@ zero_extendqisi2
 9842              	.LVL1289:
 9843 0ff8 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 9844              	.LVL1290:
 9845 0ffc 1206     		lsls	r2, r2, #24
 9846 0ffe 42EA0142 		orr	r2, r2, r1, lsl #16
 9847 1002 42EA0525 		orr	r5, r2, r5, lsl #8
 9848 1006 1D43     		orrs	r5, r5, r3
 9849 1008 25F07045 		bic	r5, r5, #-268435456
 9850 100c FFF751BB 		b	.L985
 9851              	.L975:
 9852              	.LBE1056:
 9853              	.LBE1055:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 9854              		.loc 1 841 0
 9855 1010 216A     		ldr	r1, [r4, #32]
 9856 1012 2E4B     		ldr	r3, .L1260+8
 9857 1014 2046     		mov	r0, r4
 9858 1016 01EB1521 		add	r1, r1, r5, lsr #8
 9859 101a 9847     		blx	r3
 9860              	.LVL1291:
 9861 101c 0028     		cmp	r0, #0
 9862 101e 7FF4DAAA 		bne	.L926
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 9863              		.loc 1 842 0
 9864 1022 2B06     		lsls	r3, r5, #24
 9865 1024 DB0D     		lsrs	r3, r3, #23
 9866              	.LVL1292:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 9867              		.loc 1 843 0
 9868 1026 E218     		adds	r2, r4, r3
 9869 1028 1346     		mov	r3, r2
 9870              	.LVL1293:
 9871 102a 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 9872 102e 93F83150 		ldrb	r5, [r3, #49]	@ zero_extendqisi2
 9873              	.LVL1294:
 9874 1032 42EA0525 		orr	r5, r2, r5, lsl #8
 9875 1036 FFF73CBB 		b	.L985
 9876              	.LVL1295:
 9877              	.L984:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 9878              		.loc 1 838 0
 9879 103a 1D05     		lsls	r5, r3, #20
 9880              	.LVL1296:
 9881 103c 2D0D     		lsrs	r5, r5, #20
 9882 103e FFF738BB 		b	.L985
 9883              	.LVL1297:
 9884              	.L1212:
 9885 1042 D446     		mov	ip, sl
 9886 1044 DA46     		mov	sl, fp
 9887 1046 FFF7F3BB 		b	.L955
 9888              	.LVL1298:
 9889              	.L1239:
 9890              	.LBB1057:
 9891              	.LBB1052:
 9892              	.LBB1047:
 9893              	.LBB1048:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 9894              		.loc 1 744 0
 9895 104a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9896 104c 1E4E     		ldr	r6, .L1260+4
 9897              	.LVL1299:
 9898 104e 04F13001 		add	r1, r4, #48
 9899 1052 3A46     		mov	r2, r7
 9900 1054 0123     		movs	r3, #1
 9901 1056 B047     		blx	r6
 9902              	.LVL1300:
 9903 1058 0028     		cmp	r0, #0
 9904 105a 7FF4BCAA 		bne	.L926
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 9905              		.loc 1 746 0
 9906 105e E762     		str	r7, [r4, #44]
 9907 1060 FFF719BB 		b	.L1058
 9908              	.LVL1301:
 9909              	.L979:
 9910              	.LBE1048:
 9911              	.LBE1047:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 9912              		.loc 1 731 0
 9913 1064 04F13009 		add	r9, r4, #48
 9914 1068 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 9915 106a DFF858A0 		ldr	sl, .L1260
 9916 106e 4946     		mov	r1, r9
 9917 1070 3246     		mov	r2, r6
 9918 1072 D047     		blx	sl
 9919              	.LVL1302:
 9920 1074 0028     		cmp	r0, #0
 9921 1076 7FF4AEAA 		bne	.L926
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9922              		.loc 1 734 0
 9923 107a E369     		ldr	r3, [r4, #28]
 9924 107c 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 9925              		.loc 1 733 0
 9926 107e 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 9927              		.loc 1 734 0
 9928 1080 9A18     		adds	r2, r3, r2
 9929 1082 9642     		cmp	r6, r2
 9930 1084 BFF404AB 		bcs	.L982
 9931              	.LBB1049:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9932              		.loc 1 736 0
 9933 1088 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 9934              	.LVL1303:
 9935 108c BCF1010F 		cmp	ip, #1
 9936 1090 7FF6FEAA 		bls	.L982
 9937 1094 CDF808B0 		str	fp, [sp, #8]
 9938 1098 AB46     		mov	fp, r5
 9939 109a 2546     		mov	r5, r4
 9940 109c 6446     		mov	r4, ip
 9941              	.LVL1304:
 9942 109e 00E0     		b	.L1203
 9943              	.LVL1305:
 9944              	.L1251:
 9945 10a0 EB69     		ldr	r3, [r5, #28]
 9946              	.LVL1306:
 9947              	.L1203:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 9948              		.loc 1 737 0
 9949 10a2 F618     		adds	r6, r6, r3
 9950              	.LVL1307:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9951              		.loc 1 736 0
 9952 10a4 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9953              		.loc 1 738 0
 9954 10a6 0123     		movs	r3, #1
 9955 10a8 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 9956 10aa 4946     		mov	r1, r9
 9957 10ac 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9958              		.loc 1 736 0
 9959 10ae E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 9960              		.loc 1 738 0
 9961 10b0 D047     		blx	sl
 9962              	.LVL1308:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 9963              		.loc 1 736 0
 9964 10b2 012C     		cmp	r4, #1
 9965 10b4 F4D8     		bhi	.L1251
 9966 10b6 2C46     		mov	r4, r5
 9967              	.LVL1309:
 9968 10b8 5D46     		mov	r5, fp
 9969              	.LVL1310:
 9970 10ba DDF808B0 		ldr	fp, [sp, #8]
 9971 10be FFF7E7BA 		b	.L982
 9972              	.L1261:
 9973 10c2 00BF     		.align	2
 9974              	.L1260:
 9975 10c4 00000000 		.word	disk_write
 9976 10c8 00000000 		.word	disk_read
 9977 10cc 00000000 		.word	move_window
 9978              	.LBE1049:
 9979              	.LBE1052:
 9980              	.LBE1057:
 9981              	.LBE1058:
 9982              	.LBE1063:
 9983              	.LBE1066:
 9984              	.LBE1133:
 9985              		.cfi_endproc
 9986              	.LFE20:
 9988              		.section	.text.put_fat,"ax",%progbits
 9989              		.align	2
 9990              		.global	put_fat
 9991              		.thumb
 9992              		.thumb_func
 9994              	put_fat:
 9995              	.LFB8:
 867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 9996              		.loc 1 867 0
 9997              		.cfi_startproc
 9998              		@ args = 0, pretend = 0, frame = 0
 9999              		@ frame_needed = 0, uses_anonymous_args = 0
 10000              	.LVL1311:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 10001              		.loc 1 873 0
 10002 0000 0129     		cmp	r1, #1
 867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10003              		.loc 1 867 0
 10004 0002 10B5     		push	{r4, lr}
 10005              	.LCFI21:
 10006              		.cfi_def_cfa_offset 8
 10007              		.cfi_offset 4, -8
 10008              		.cfi_offset 14, -4
 867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10009              		.loc 1 867 0
 10010 0004 0446     		mov	r4, r0
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 10011              		.loc 1 873 0
 10012 0006 02D9     		bls	.L1265
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 10013              		.loc 1 873 0 is_stmt 0 discriminator 1
 10014 0008 8469     		ldr	r4, [r0, #24]
 10015 000a A142     		cmp	r1, r4
 10016 000c 01D3     		bcc	.L1266
 10017              	.L1265:
 874:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_INT_ERR;
 10018              		.loc 1 874 0 is_stmt 1
 10019 000e 0220     		movs	r0, #2
 10020              	.LVL1312:
 915:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 10021              		.loc 1 915 0
 10022 0010 10BD     		pop	{r4, pc}
 10023              	.LVL1313:
 10024              	.L1266:
 10025 0012 014B     		ldr	r3, .L1267
 10026 0014 9847     		blx	r3
 10027              	.LVL1314:
 10028 0016 10BD     		pop	{r4, pc}
 10029              	.L1268:
 10030              		.align	2
 10031              	.L1267:
 10032 0018 00000000 		.word	put_fat.part.4
 10033              		.cfi_endproc
 10034              	.LFE8:
 10036              		.section	.text.gen_numname,"ax",%progbits
 10037              		.align	2
 10038              		.global	gen_numname
 10039              		.thumb
 10040              		.thumb_func
 10042              	gen_numname:
 10043              	.LFB16:
1291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10044              		.loc 1 1291 0
 10045              		.cfi_startproc
 10046              		@ args = 0, pretend = 0, frame = 8
 10047              		@ frame_needed = 0, uses_anonymous_args = 0
 10048              		@ link register save eliminated.
 10049              	.LVL1315:
 10050 0000 F0B4     		push	{r4, r5, r6, r7}
 10051              	.LCFI22:
 10052              		.cfi_def_cfa_offset 16
 10053              		.cfi_offset 4, -16
 10054              		.cfi_offset 5, -12
 10055              		.cfi_offset 6, -8
 10056              		.cfi_offset 7, -4
 10057              	.LBB1134:
 10058              	.LBB1135:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 10059              		.loc 1 540 0
 10060 0002 0546     		mov	r5, r0
 10061              	.LBE1135:
 10062              	.LBE1134:
1291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10063              		.loc 1 1291 0
 10064 0004 82B0     		sub	sp, sp, #8
 10065              	.LCFI23:
 10066              		.cfi_def_cfa_offset 24
 10067              	.LBB1138:
 10068              	.LBB1136:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 10069              		.loc 1 540 0
 10070 0006 0A24     		movs	r4, #10
 10071 0008 00E0     		b	.L1270
 10072              	.LVL1316:
 10073              	.L1279:
 10074 000a 3C46     		mov	r4, r7
 10075              	.LVL1317:
 10076              	.L1270:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 10077              		.loc 1 541 0
 10078 000c 11F8016B 		ldrb	r6, [r1], #1	@ zero_extendqisi2
 10079              	.LVL1318:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 10080              		.loc 1 540 0
 10081 0010 671E     		subs	r7, r4, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 10082              		.loc 1 541 0
 10083 0012 05F8016B 		strb	r6, [r5], #1
 10084              	.LVL1319:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 10085              		.loc 1 540 0
 10086 0016 002C     		cmp	r4, #0
 10087 0018 F7D1     		bne	.L1279
 10088              	.LBE1136:
 10089              	.LBE1138:
1298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
 10090              		.loc 1 1298 0
 10091 001a 052B     		cmp	r3, #5
 10092 001c 3AD8     		bhi	.L1284
 10093              	.LVL1320:
 10094              	.L1271:
 10095              	.LBB1139:
 10096              	.LBB1137:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 10097              		.loc 1 540 0
 10098 001e 0722     		movs	r2, #7
 10099              	.L1274:
 10100              	.LVL1321:
 10101              	.LBE1137:
 10102              	.LBE1139:
1305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = (seq % 16) + '0';
 10103              		.loc 1 1305 0
 10104 0020 03F00F04 		and	r4, r3, #15
1307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ns[i--] = c;
 10105              		.loc 1 1307 0
 10106 0024 02A9     		add	r1, sp, #8
 10107 0026 8D18     		adds	r5, r1, r2
1305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = (seq % 16) + '0';
 10108              		.loc 1 1305 0
 10109 0028 04F13001 		add	r1, r4, #48
 10110              	.LVL1322:
1306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c > '9') c += 7;
 10111              		.loc 1 1306 0
 10112 002c 3929     		cmp	r1, #57
 10113 002e 88BF     		it	hi
 10114 0030 04F13701 		addhi	r1, r4, #55
 10115              	.LVL1323:
1309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (seq);
 10116              		.loc 1 1309 0
 10117 0034 1B09     		lsrs	r3, r3, #4
 10118              	.LVL1324:
1307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ns[i--] = c;
 10119              		.loc 1 1307 0
 10120 0036 02F1FF32 		add	r2, r2, #-1
 10121              	.LVL1325:
 10122 003a 05F8081C 		strb	r1, [r5, #-8]
1309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (seq);
 10123              		.loc 1 1309 0
 10124 003e EFD1     		bne	.L1274
1310:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ns[i] = '~';
 10125              		.loc 1 1310 0
 10126 0040 02AD     		add	r5, sp, #8
 10127 0042 A918     		adds	r1, r5, r2
 10128              	.LVL1326:
 10129 0044 7E24     		movs	r4, #126
 10130              	.LVL1327:
 10131 0046 01F8084C 		strb	r4, [r1, #-8]
 10132              	.LVL1328:
1313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 10133              		.loc 1 1313 0
 10134 004a 002A     		cmp	r2, #0
 10135 004c 2ED0     		beq	.L1280
 10136 004e 0178     		ldrb	r1, [r0, #0]	@ zero_extendqisi2
 10137 0050 2029     		cmp	r1, #32
 10138 0052 03D1     		bne	.L1276
 10139 0054 12E0     		b	.L1283
 10140              	.LVL1329:
 10141              	.L1291:
1313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 10142              		.loc 1 1313 0 is_stmt 0 discriminator 2
 10143 0056 C15C     		ldrb	r1, [r0, r3]	@ zero_extendqisi2
 10144 0058 2029     		cmp	r1, #32
 10145 005a 0FD0     		beq	.L1283
 10146              	.LVL1330:
 10147              	.L1276:
1313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 10148              		.loc 1 1313 0
 10149 005c 0133     		adds	r3, r3, #1
 10150              	.LVL1331:
 10151 005e 9342     		cmp	r3, r2
 10152 0060 F9D3     		bcc	.L1291
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 10153              		.loc 1 1320 0 is_stmt 1
 10154 0062 072A     		cmp	r2, #7
 10155 0064 00EB0301 		add	r1, r0, r3
 10156 0068 0CD8     		bhi	.L1282
 10157              	.L1293:
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 10158              		.loc 1 1320 0 is_stmt 0 discriminator 1
 10159 006a 02AD     		add	r5, sp, #8
 10160 006c AC18     		adds	r4, r5, r2
 10161 006e 0133     		adds	r3, r3, #1
 10162              	.LVL1332:
 10163 0070 14F8084C 		ldrb	r4, [r4, #-8]	@ zero_extendqisi2
 10164 0074 0132     		adds	r2, r2, #1
 10165              	.LVL1333:
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 10166              		.loc 1 1321 0 is_stmt 1 discriminator 1
 10167 0076 072B     		cmp	r3, #7
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 10168              		.loc 1 1320 0 discriminator 1
 10169 0078 0C70     		strb	r4, [r1, #0]
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 10170              		.loc 1 1321 0 discriminator 1
 10171 007a 08D8     		bhi	.L1292
 10172              	.LVL1334:
 10173              	.L1283:
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 10174              		.loc 1 1320 0
 10175 007c 072A     		cmp	r2, #7
 10176 007e 00EB0301 		add	r1, r0, r3
 10177 0082 F2D9     		bls	.L1293
 10178              	.L1282:
 10179 0084 0133     		adds	r3, r3, #1
 10180              	.LVL1335:
 10181 0086 2024     		movs	r4, #32
 10182              	.LVL1336:
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 10183              		.loc 1 1321 0
 10184 0088 072B     		cmp	r3, #7
1320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 10185              		.loc 1 1320 0
 10186 008a 0C70     		strb	r4, [r1, #0]
1321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (j < 8);
 10187              		.loc 1 1321 0
 10188 008c F6D9     		bls	.L1283
 10189              	.L1292:
1322:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 10190              		.loc 1 1322 0
 10191 008e 02B0     		add	sp, sp, #8
 10192 0090 F0BC     		pop	{r4, r5, r6, r7}
 10193 0092 7047     		bx	lr
 10194              	.LVL1337:
 10195              	.L1284:
1299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do seq = (seq >> 1) + (seq << 15) + (WORD)*lfn++; while (*lfn);
 10196              		.loc 1 1299 0 discriminator 1
 10197 0094 1488     		ldrh	r4, [r2, #0]
 10198 0096 32F8021F 		ldrh	r1, [r2, #2]!
 10199              	.LVL1338:
 10200 009a 5D08     		lsrs	r5, r3, #1
 10201 009c 45EAC333 		orr	r3, r5, r3, lsl #15
 10202              	.LVL1339:
 10203 00a0 14FA83F3 		uxtah	r3, r4, r3
 10204 00a4 9BB2     		uxth	r3, r3
 10205              	.LVL1340:
 10206 00a6 0029     		cmp	r1, #0
 10207 00a8 F4D1     		bne	.L1284
 10208 00aa B8E7     		b	.L1271
 10209              	.LVL1341:
 10210              	.L1280:
1313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 10211              		.loc 1 1313 0
 10212 00ac 1346     		mov	r3, r2
 10213 00ae E5E7     		b	.L1283
 10214              		.cfi_endproc
 10215              	.LFE16:
 10217              		.section	.text.f_mount,"ax",%progbits
 10218              		.align	2
 10219              		.global	f_mount
 10220              		.thumb
 10221              		.thumb_func
 10223              	f_mount:
 10224              	.LFB28:
2207:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10225              		.loc 1 2207 0
 10226              		.cfi_startproc
 10227              		@ args = 0, pretend = 0, frame = 0
 10228              		@ frame_needed = 0, uses_anonymous_args = 0
 10229              		@ link register save eliminated.
 10230              	.LVL1342:
2211:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES)		/* Check if the drive number is valid */
 10231              		.loc 1 2211 0
 10232 0000 08B1     		cbz	r0, .L1305
2212:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 10233              		.loc 1 2212 0
 10234 0002 0B20     		movs	r0, #11
 10235              	.LVL1343:
2234:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 10236              		.loc 1 2234 0
 10237 0004 7047     		bx	lr
 10238              	.LVL1344:
 10239              	.L1305:
2213:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	rfs = FatFs[vol];			/* Get current fs object */
 10240              		.loc 1 2213 0
 10241 0006 054B     		ldr	r3, .L1306
 10242 0008 1A68     		ldr	r2, [r3, #0]
 10243              	.LVL1345:
2215:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (rfs) {
 10244              		.loc 1 2215 0
 10245 000a 02B1     		cbz	r2, .L1296
2222:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rfs->fs_type = 0;		/* Clear old fs object */
 10246              		.loc 1 2222 0
 10247 000c 1070     		strb	r0, [r2, #0]
 10248              	.L1296:
2225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs) {
 10249              		.loc 1 2225 0
 10250 000e 09B1     		cbz	r1, .L1297
2226:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fs_type = 0;		/* Clear new fs object */
 10251              		.loc 1 2226 0
 10252 0010 0022     		movs	r2, #0
 10253              	.LVL1346:
 10254 0012 0A70     		strb	r2, [r1, #0]
 10255              	.L1297:
2231:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	FatFs[vol] = fs;			/* Register new fs object */
 10256              		.loc 1 2231 0
 10257 0014 1960     		str	r1, [r3, #0]
2233:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
 10258              		.loc 1 2233 0
 10259 0016 0020     		movs	r0, #0
 10260              	.LVL1347:
 10261 0018 7047     		bx	lr
 10262              	.L1307:
 10263 001a 00BF     		.align	2
 10264              	.L1306:
 10265 001c 00000000 		.word	.LANCHOR2
 10266              		.cfi_endproc
 10267              	.LFE28:
 10269              		.section	.text.f_open,"ax",%progbits
 10270              		.align	2
 10271              		.global	f_open
 10272              		.thumb
 10273              		.thumb_func
 10275              	f_open:
 10276              	.LFB29:
2248:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10277              		.loc 1 2248 0
 10278              		.cfi_startproc
 10279              		@ args = 0, pretend = 0, frame = 72
 10280              		@ frame_needed = 0, uses_anonymous_args = 0
 10281              	.LVL1348:
 10282 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 10283              	.LCFI24:
 10284              		.cfi_def_cfa_offset 36
 10285              		.cfi_offset 4, -36
 10286              		.cfi_offset 5, -32
 10287              		.cfi_offset 6, -28
 10288              		.cfi_offset 7, -24
 10289              		.cfi_offset 8, -20
 10290              		.cfi_offset 9, -16
 10291              		.cfi_offset 10, -12
 10292              		.cfi_offset 11, -8
 10293              		.cfi_offset 14, -4
2255:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->fs = 0;			/* Clear file object */
 10294              		.loc 1 2255 0
 10295 0004 0023     		movs	r3, #0
 10296 0006 0360     		str	r3, [r0, #0]
 10297              	.LBB1153:
 10298              	.LBB1154:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 10299              		.loc 1 2023 0
 10300 0008 0B78     		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 10301 000a 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 10302              		.loc 1 2024 0
 10303 000c 092B     		cmp	r3, #9
 10304              	.LBE1154:
 10305              	.LBE1153:
2248:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10306              		.loc 1 2248 0
 10307 000e 93B0     		sub	sp, sp, #76
 10308              	.LCFI25:
 10309              		.cfi_def_cfa_offset 112
2248:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 10310              		.loc 1 2248 0
 10311 0010 0446     		mov	r4, r0
 10312 0012 0D46     		mov	r5, r1
 10313 0014 1646     		mov	r6, r2
2258:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
 10314              		.loc 1 2258 0
 10315 0016 02F01F07 		and	r7, r2, #31
 10316              	.LVL1349:
 10317              	.LBB1180:
 10318              	.LBB1175:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 10319              		.loc 1 2024 0
 10320 001a 1FD9     		bls	.L1406
 10321              	.LVL1350:
 10322              	.L1309:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 10323              		.loc 1 2037 0
 10324 001c B64B     		ldr	r3, .L1419
 10325              	.LVL1351:
 10326 001e D3F80080 		ldr	r8, [r3, #0]
 10327              	.LVL1352:
 10328 0022 CDF82480 		str	r8, [sp, #36]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 10329              		.loc 1 2038 0
 10330 0026 B8F1000F 		cmp	r8, #0
 10331 002a 35D0     		beq	.L1350
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 10332              		.loc 1 2042 0
 10333 002c 98F80030 		ldrb	r3, [r8, #0]	@ zero_extendqisi2
 10334              	.LBE1175:
 10335              	.LBE1180:
2259:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = chk_mounted(&path, &dj.fs, (BYTE)(mode & ~FA_READ));
 10336              		.loc 1 2259 0
 10337 0030 06F01E09 		and	r9, r6, #30
 10338              	.LBB1181:
 10339              	.LBB1176:
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 10340              		.loc 1 2042 0
 10341 0034 002B     		cmp	r3, #0
 10342 0036 24D0     		beq	.L1311
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 10343              		.loc 1 2043 0
 10344 0038 98F80100 		ldrb	r0, [r8, #1]	@ zero_extendqisi2
 10345 003c AF4B     		ldr	r3, .L1419+4
 10346 003e 9847     		blx	r3
 10347              	.LVL1353:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 10348              		.loc 1 2044 0
 10349 0040 C207     		lsls	r2, r0, #31
 10350 0042 1ED4     		bmi	.L1311
2045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check write protection if needed */
 10351              		.loc 1 2045 0
 10352 0044 B9F1000F 		cmp	r9, #0
 10353 0048 00F03981 		beq	.L1312
 10354 004c 00F00400 		and	r0, r0, #4
 10355              	.LVL1354:
 10356 0050 C0B2     		uxtb	r0, r0
 10357 0052 0028     		cmp	r0, #0
 10358 0054 00F03381 		beq	.L1312
 10359              	.L1314:
2046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_WRITE_PROTECTED;
 10360              		.loc 1 2046 0
 10361 0058 0A20     		movs	r0, #10
 10362 005a 06E0     		b	.L1310
 10363              	.LVL1355:
 10364              	.L1406:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 10365              		.loc 1 2024 0
 10366 005c 4A78     		ldrb	r2, [r1, #1]	@ zero_extendqisi2
 10367              	.LVL1356:
 10368 005e 3A2A     		cmp	r2, #58
 10369 0060 DCD1     		bne	.L1309
 10370              	.LVL1357:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 10371              		.loc 1 2036 0
 10372 0062 0B20     		movs	r0, #11
 10373              	.LVL1358:
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 10374              		.loc 1 2035 0
 10375 0064 002B     		cmp	r3, #0
 10376 0066 00F03E82 		beq	.L1407
 10377              	.LVL1359:
 10378              	.L1310:
 10379              	.LBE1176:
 10380              	.LBE1181:
2264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	INIT_BUF(dj);
 10381              		.loc 1 2264 0
 10382 006a 06AB     		add	r3, sp, #24
 10383 006c 0F93     		str	r3, [sp, #60]
 10384 006e A44B     		ldr	r3, .L1419+8
 10385 0070 1093     		str	r3, [sp, #64]
 10386              	.LVL1360:
 10387              	.L1343:
2279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
 10388              		.loc 1 2279 0
 10389 0072 16F01C0F 		tst	r6, #28
 10390 0076 01D0     		beq	.L1378
 10391              	.LBB1182:
2283:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
 10392              		.loc 1 2283 0
 10393 0078 0428     		cmp	r0, #4
 10394 007a 2ED0     		beq	.L1408
 10395              	.LVL1361:
 10396              	.L1378:
 10397              	.LBE1182:
2364:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 10398              		.loc 1 2364 0
 10399 007c 13B0     		add	sp, sp, #76
 10400 007e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 10401              	.LVL1362:
 10402              	.L1311:
 10403              	.LBB1187:
 10404              	.LBB1177:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 10405              		.loc 1 2054 0
 10406 0082 0020     		movs	r0, #0
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 10407              		.loc 1 2056 0
 10408 0084 9F4B     		ldr	r3, .L1419+12
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 10409              		.loc 1 2054 0
 10410 0086 88F80000 		strb	r0, [r8, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 10411              		.loc 1 2055 0
 10412 008a 88F80100 		strb	r0, [r8, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 10413              		.loc 1 2056 0
 10414 008e 9847     		blx	r3
 10415              	.LVL1363:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 10416              		.loc 1 2057 0
 10417 0090 C307     		lsls	r3, r0, #31
 10418 0092 03D5     		bpl	.L1409
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 10419              		.loc 1 2058 0
 10420 0094 0320     		movs	r0, #3
 10421              	.LVL1364:
 10422 0096 E8E7     		b	.L1310
 10423              	.LVL1365:
 10424              	.L1350:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 10425              		.loc 1 2038 0
 10426 0098 0C20     		movs	r0, #12
 10427 009a E6E7     		b	.L1310
 10428              	.LVL1366:
 10429              	.L1409:
2059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 10430              		.loc 1 2059 0
 10431 009c B9F1000F 		cmp	r9, #0
 10432 00a0 04D0     		beq	.L1313
 10433 00a2 00F00400 		and	r0, r0, #4
 10434              	.LVL1367:
 10435 00a6 C0B2     		uxtb	r0, r0
 10436 00a8 0028     		cmp	r0, #0
 10437 00aa D5D1     		bne	.L1314
 10438              	.L1313:
 10439              	.LVL1368:
 10440              	.LBB1155:
 10441              	.LBB1156:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 10442              		.loc 1 1987 0
 10443 00ac 08F13009 		add	r9, r8, #48
 10444 00b0 98F80100 		ldrb	r0, [r8, #1]	@ zero_extendqisi2
 10445 00b4 DFF85CA2 		ldr	sl, .L1419+28
 10446 00b8 4946     		mov	r1, r9
 10447 00ba 0022     		movs	r2, #0
 10448 00bc 0123     		movs	r3, #1
 10449 00be D047     		blx	sl
 10450              	.LVL1369:
 10451 00c0 0028     		cmp	r0, #0
 10452 00c2 00F08681 		beq	.L1410
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 10453              		.loc 1 1988 0
 10454 00c6 0320     		movs	r0, #3
 10455              	.L1315:
 10456              	.LBE1156:
 10457              	.LBE1155:
 10458              	.LBB1164:
 10459              	.LBB1165:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 10460              		.loc 1 2066 0
 10461 00c8 4FF0000C 		mov	ip, #0
 10462              	.LVL1370:
 10463              	.L1339:
 10464              	.LBE1165:
 10465              	.LBE1164:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 10466              		.loc 1 2078 0
 10467 00cc 0328     		cmp	r0, #3
 10468 00ce 00F08D81 		beq	.L1359
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 10469              		.loc 1 2079 0
 10470 00d2 0028     		cmp	r0, #0
 10471 00d4 32D0     		beq	.L1316
 10472              	.LVL1371:
 10473              	.L1319:
 10474 00d6 0D20     		movs	r0, #13
 10475 00d8 C7E7     		b	.L1310
 10476              	.LVL1372:
 10477              	.L1408:
 10478              	.LBE1177:
 10479              	.LBE1187:
 10480              	.LBB1188:
2287:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_register(&dj);
 10481              		.loc 1 2287 0
 10482 00da 09A8     		add	r0, sp, #36
 10483              	.LVL1373:
 10484 00dc 8A4B     		ldr	r3, .L1419+16
 10485 00de 9847     		blx	r3
 10486              	.LVL1374:
2289:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mode |= FA_CREATE_ALWAYS;		/* File is created */
 10487              		.loc 1 2289 0
 10488 00e0 47F00807 		orr	r7, r7, #8
 10489              	.LVL1375:
2290:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;					/* New entry */
 10490              		.loc 1 2290 0
 10491 00e4 0E9D     		ldr	r5, [sp, #56]
 10492              	.LVL1376:
2300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
 10493              		.loc 1 2300 0
 10494 00e6 0028     		cmp	r0, #0
 10495 00e8 C8D1     		bne	.L1378
 10496              	.LVL1377:
 10497              	.L1331:
2300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
 10498              		.loc 1 2300 0 is_stmt 0 discriminator 1
 10499 00ea 07F00803 		and	r3, r7, #8
 10500 00ee DBB2     		uxtb	r3, r3
 10501 00f0 002B     		cmp	r3, #0
 10502 00f2 40F02C81 		bne	.L1411
 10503 00f6 099B     		ldr	r3, [sp, #36]
 10504              	.LVL1378:
 10505              	.L1347:
 10506              	.LBE1188:
2331:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dir_sect = dj.fs->winsect;			/* Pointer to the directory entry */
 10507              		.loc 1 2331 0 is_stmt 1
 10508 00f8 DA6A     		ldr	r2, [r3, #44]
2352:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag = mode;					/* File access mode */
 10509              		.loc 1 2352 0
 10510 00fa A771     		strb	r7, [r4, #6]
2331:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dir_sect = dj.fs->winsect;			/* Pointer to the directory entry */
 10511              		.loc 1 2331 0
 10512 00fc E261     		str	r2, [r4, #28]
2332:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dir_ptr = dir;
 10513              		.loc 1 2332 0
 10514 00fe 2562     		str	r5, [r4, #32]
2353:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->sclust = LD_CLUST(dir);			/* File start cluster */
 10515              		.loc 1 2353 0
 10516 0100 6F7D     		ldrb	r7, [r5, #21]	@ zero_extendqisi2
 10517              	.LVL1379:
 10518 0102 AE7E     		ldrb	r6, [r5, #26]	@ zero_extendqisi2
 10519 0104 287D     		ldrb	r0, [r5, #20]	@ zero_extendqisi2
 10520 0106 E97E     		ldrb	r1, [r5, #27]	@ zero_extendqisi2
2360:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fs = dj.fs; fp->id = dj.fs->id;	/* Validate file object */
 10521              		.loc 1 2360 0
 10522 0108 DA88     		ldrh	r2, [r3, #6]
2353:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->sclust = LD_CLUST(dir);			/* File start cluster */
 10523              		.loc 1 2353 0
 10524 010a 40EA0720 		orr	r0, r0, r7, lsl #8
 10525 010e 46EA0121 		orr	r1, r6, r1, lsl #8
 10526 0112 41EA0041 		orr	r1, r1, r0, lsl #16
 10527 0116 2161     		str	r1, [r4, #16]
2354:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
 10528              		.loc 1 2354 0
 10529 0118 AF7F     		ldrb	r7, [r5, #30]	@ zero_extendqisi2
 10530 011a EE7F     		ldrb	r6, [r5, #31]	@ zero_extendqisi2
 10531 011c 287F     		ldrb	r0, [r5, #28]	@ zero_extendqisi2
 10532 011e 697F     		ldrb	r1, [r5, #29]	@ zero_extendqisi2
2360:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fs = dj.fs; fp->id = dj.fs->id;	/* Validate file object */
 10533              		.loc 1 2360 0
 10534 0120 2360     		str	r3, [r4, #0]
2354:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
 10535              		.loc 1 2354 0
 10536 0122 3B04     		lsls	r3, r7, #16
 10537 0124 43EA0663 		orr	r3, r3, r6, lsl #24
 10538 0128 0343     		orrs	r3, r3, r0
 10539 012a 43EA0123 		orr	r3, r3, r1, lsl #8
2355:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr = 0;						/* File pointer */
 10540              		.loc 1 2355 0
 10541 012e 0020     		movs	r0, #0
2354:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
 10542              		.loc 1 2354 0
 10543 0130 E360     		str	r3, [r4, #12]
2355:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr = 0;						/* File pointer */
 10544              		.loc 1 2355 0
 10545 0132 A060     		str	r0, [r4, #8]
2356:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->dsect = 0;
 10546              		.loc 1 2356 0
 10547 0134 A061     		str	r0, [r4, #24]
2360:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fs = dj.fs; fp->id = dj.fs->id;	/* Validate file object */
 10548              		.loc 1 2360 0
 10549 0136 A280     		strh	r2, [r4, #4]	@ movhi
 10550 0138 A0E7     		b	.L1378
 10551              	.LVL1380:
 10552              	.L1355:
 10553              	.LBB1189:
 10554              	.LBB1178:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 10555              		.loc 1 2066 0
 10556 013a 8446     		mov	ip, r0
 10557              	.LVL1381:
 10558              	.L1316:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 10559              		.loc 1 2083 0
 10560 013c 98F83C20 		ldrb	r2, [r8, #60]	@ zero_extendqisi2
 10561 0140 98F83B30 		ldrb	r3, [r8, #59]	@ zero_extendqisi2
 10562 0144 43EA0223 		orr	r3, r3, r2, lsl #8
 10563 0148 B3F5007F 		cmp	r3, #512
 10564 014c C3D1     		bne	.L1319
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 10565              		.loc 1 2086 0
 10566 014e 98F84720 		ldrb	r2, [r8, #71]	@ zero_extendqisi2
 10567 0152 98F84630 		ldrb	r3, [r8, #70]	@ zero_extendqisi2
 10568              	.LVL1382:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 10569              		.loc 1 2087 0
 10570 0156 53EA0223 		orrs	r3, r3, r2, lsl #8
 10571              	.LVL1383:
 10572 015a 0393     		str	r3, [sp, #12]
 10573 015c 0ED1     		bne	.L1320
 10574 015e 98F85610 		ldrb	r1, [r8, #86]	@ zero_extendqisi2
 10575 0162 98F85700 		ldrb	r0, [r8, #87]	@ zero_extendqisi2
 10576 0166 98F85430 		ldrb	r3, [r8, #84]	@ zero_extendqisi2
 10577              	.LVL1384:
 10578 016a 98F85520 		ldrb	r2, [r8, #85]	@ zero_extendqisi2
 10579 016e 0904     		lsls	r1, r1, #16
 10580 0170 41EA0061 		orr	r1, r1, r0, lsl #24
 10581 0174 0B43     		orrs	r3, r3, r1
 10582 0176 43EA0222 		orr	r2, r3, r2, lsl #8
 10583 017a 0392     		str	r2, [sp, #12]
 10584              	.LVL1385:
 10585              	.L1320:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 10586              		.loc 1 2090 0
 10587 017c 98F840B0 		ldrb	fp, [r8, #64]	@ zero_extendqisi2
 10588              	.LVL1386:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 10589              		.loc 1 2088 0
 10590 0180 0398     		ldr	r0, [sp, #12]
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 10591              		.loc 1 2090 0
 10592 0182 88F803B0 		strb	fp, [r8, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 10593              		.loc 1 2091 0
 10594 0186 0BF1FF33 		add	r3, fp, #-1
 10595 018a 012B     		cmp	r3, #1
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 10596              		.loc 1 2088 0
 10597 018c C8F81C00 		str	r0, [r8, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 10598              		.loc 1 2091 0
 10599 0190 A1D8     		bhi	.L1319
 10600              	.LVL1387:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 10601              		.loc 1 2094 0
 10602 0192 98F83D30 		ldrb	r3, [r8, #61]	@ zero_extendqisi2
 10603              	.LVL1388:
 10604 0196 88F80230 		strb	r3, [r8, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 10605              		.loc 1 2095 0
 10606 019a 002B     		cmp	r3, #0
 10607 019c 9BD0     		beq	.L1319
 10608 019e 5A1E     		subs	r2, r3, #1
 10609 01a0 1A42     		tst	r2, r3
 10610 01a2 98D1     		bne	.L1319
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 10611              		.loc 1 2097 0
 10612 01a4 98F84210 		ldrb	r1, [r8, #66]	@ zero_extendqisi2
 10613 01a8 98F84120 		ldrb	r2, [r8, #65]	@ zero_extendqisi2
 10614 01ac 42EA0122 		orr	r2, r2, r1, lsl #8
 10615 01b0 91B2     		uxth	r1, r2
 10616 01b2 0491     		str	r1, [sp, #16]
 10617 01b4 A8F80810 		strh	r1, [r8, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 10618              		.loc 1 2098 0
 10619 01b8 1107     		lsls	r1, r2, #28
 10620 01ba 8CD1     		bne	.L1319
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 10621              		.loc 1 2100 0
 10622 01bc 98F84410 		ldrb	r1, [r8, #68]	@ zero_extendqisi2
 10623 01c0 98F84320 		ldrb	r2, [r8, #67]	@ zero_extendqisi2
 10624              	.LVL1389:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 10625              		.loc 1 2101 0
 10626 01c4 52EA0122 		orrs	r2, r2, r1, lsl #8
 10627              	.LVL1390:
 10628 01c8 11D1     		bne	.L1321
 10629 01ca 98F85320 		ldrb	r2, [r8, #83]	@ zero_extendqisi2
 10630              	.LVL1391:
 10631 01ce 98F85200 		ldrb	r0, [r8, #82]	@ zero_extendqisi2
 10632 01d2 0592     		str	r2, [sp, #20]
 10633 01d4 98F85120 		ldrb	r2, [r8, #81]	@ zero_extendqisi2
 10634 01d8 98F85010 		ldrb	r1, [r8, #80]	@ zero_extendqisi2
 10635              	.LVL1392:
 10636 01dc 0192     		str	r2, [sp, #4]
 10637 01de 059A     		ldr	r2, [sp, #20]
 10638 01e0 0004     		lsls	r0, r0, #16
 10639 01e2 40EA0260 		orr	r0, r0, r2, lsl #24
 10640 01e6 0143     		orrs	r1, r1, r0
 10641 01e8 0198     		ldr	r0, [sp, #4]
 10642 01ea 41EA0022 		orr	r2, r1, r0, lsl #8
 10643              	.LVL1393:
 10644              	.L1321:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 10645              		.loc 1 2103 0
 10646 01ee 98F83F00 		ldrb	r0, [r8, #63]	@ zero_extendqisi2
 10647 01f2 98F83E10 		ldrb	r1, [r8, #62]	@ zero_extendqisi2
 10648              	.LVL1394:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 10649              		.loc 1 2104 0
 10650 01f6 51EA0021 		orrs	r1, r1, r0, lsl #8
 10651              	.LVL1395:
 10652 01fa 0091     		str	r1, [sp, #0]
 10653 01fc 3FF46BAF 		beq	.L1319
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 10654              		.loc 1 2092 0
 10655 0200 0399     		ldr	r1, [sp, #12]
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 10656              		.loc 1 2107 0
 10657 0202 0498     		ldr	r0, [sp, #16]
 10658              	.LVL1396:
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 10659              		.loc 1 2092 0
 10660 0204 0BFB01FB 		mul	fp, fp, r1
 10661              	.LVL1397:
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 10662              		.loc 1 2107 0
 10663 0208 0099     		ldr	r1, [sp, #0]
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 10664              		.loc 1 2092 0
 10665 020a CDF814B0 		str	fp, [sp, #20]
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 10666              		.loc 1 2107 0
 10667 020e 01EB1010 		add	r0, r1, r0, lsr #4
 10668 0212 00EB0B01 		add	r1, r0, fp
 10669              	.LVL1398:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 10670              		.loc 1 2108 0
 10671 0216 9142     		cmp	r1, r2
 10672 0218 3FF65DAF 		bhi	.L1319
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 10673              		.loc 1 2109 0
 10674 021c 521A     		subs	r2, r2, r1
 10675              	.LVL1399:
 10676 021e B2FBF3F3 		udiv	r3, r2, r3
 10677              	.LVL1400:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 10678              		.loc 1 2110 0
 10679 0222 002B     		cmp	r3, #0
 10680 0224 3FF457AF 		beq	.L1319
 10681              	.LVL1401:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 10682              		.loc 1 2112 0
 10683 0228 40F6F572 		movw	r2, #4085
 10684 022c 9342     		cmp	r3, r2
 10685 022e 40F2E881 		bls	.L1360
 10686              	.LVL1402:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 10687              		.loc 1 2113 0
 10688 0232 02F57042 		add	r2, r2, #61440
 10689 0236 9342     		cmp	r3, r2
 10690 0238 00F2C081 		bhi	.L1323
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 10691              		.loc 1 2112 0
 10692 023c 4FF0020B 		mov	fp, #2
 10693              	.LVL1403:
 10694              	.L1322:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 10695              		.loc 1 2117 0
 10696 0240 6144     		add	r1, r1, ip
 10697              	.LVL1404:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 10698              		.loc 1 2118 0
 10699 0242 0098     		ldr	r0, [sp, #0]
 10700              	.LVL1405:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 10701              		.loc 1 2117 0
 10702 0244 C8F82810 		str	r1, [r8, #40]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 10703              		.loc 1 2124 0
 10704 0248 0499     		ldr	r1, [sp, #16]
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 10705              		.loc 1 2116 0
 10706 024a 0233     		adds	r3, r3, #2
 10707              	.LVL1406:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 10708              		.loc 1 2118 0
 10709 024c 0CEB0002 		add	r2, ip, r0
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 10710              		.loc 1 2116 0
 10711 0250 C8F81830 		str	r3, [r8, #24]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 10712              		.loc 1 2118 0
 10713 0254 C8F82020 		str	r2, [r8, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 10714              		.loc 1 2124 0
 10715 0258 0029     		cmp	r1, #0
 10716 025a 3FF43CAF 		beq	.L1319
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 10717              		.loc 1 2125 0
 10718 025e 0598     		ldr	r0, [sp, #20]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 10719              		.loc 1 2127 0
 10720 0260 BBF1020F 		cmp	fp, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 10721              		.loc 1 2125 0
 10722 0264 0244     		add	r2, r0, r2
 10723 0266 C8F82420 		str	r2, [r8, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 10724              		.loc 1 2127 0
 10725 026a 00F0A581 		beq	.L1412
 10726 026e 0322     		movs	r2, #3
 10727 0270 02FB03F2 		mul	r2, r2, r3
 10728 0274 03F00103 		and	r3, r3, #1
 10729              	.LVL1407:
 10730 0278 03EB5203 		add	r3, r3, r2, lsr #1
 10731 027c 4FF0010B 		mov	fp, #1
 10732              	.LVL1408:
 10733              	.L1324:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 10734              		.loc 1 2129 0
 10735 0280 0399     		ldr	r1, [sp, #12]
 10736 0282 03F2FF13 		addw	r3, r3, #511
 10737              	.LVL1409:
 10738 0286 B1EB532F 		cmp	r1, r3, lsr #9
 10739 028a FFF424AF 		bcc	.L1319
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 10740              		.loc 1 2135 0
 10741 028e 0023     		movs	r3, #0
 10742              	.LVL1410:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 10743              		.loc 1 2134 0
 10744 0290 4FF0FF32 		mov	r2, #-1
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 10745              		.loc 1 2138 0
 10746 0294 BBF1030F 		cmp	fp, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 10747              		.loc 1 2134 0
 10748 0298 C8F81020 		str	r2, [r8, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 10749              		.loc 1 2135 0
 10750 029c C8F80C30 		str	r3, [r8, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 10751              		.loc 1 2138 0
 10752 02a0 00F02381 		beq	.L1413
 10753              	.LVL1411:
 10754              	.L1327:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 10755              		.loc 1 2151 0
 10756 02a4 1949     		ldr	r1, .L1419+20
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 10757              		.loc 1 2150 0
 10758 02a6 88F800B0 		strb	fp, [r8, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 10759              		.loc 1 2151 0
 10760 02aa 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 10761              		.loc 1 2152 0
 10762 02ac 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 10763              		.loc 1 2151 0
 10764 02ae 0132     		adds	r2, r2, #1
 10765 02b0 0A80     		strh	r2, [r1, #0]	@ movhi
 10766 02b2 A8F80620 		strh	r2, [r8, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 10767              		.loc 1 2152 0
 10768 02b6 C8F82C30 		str	r3, [r8, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 10769              		.loc 1 2153 0
 10770 02ba 88F80430 		strb	r3, [r8, #4]
 10771              	.LVL1412:
 10772              	.L1312:
 10773              	.LBE1178:
 10774              	.LBE1189:
2264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	INIT_BUF(dj);
 10775              		.loc 1 2264 0
 10776 02be 104B     		ldr	r3, .L1419+8
2266:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10777              		.loc 1 2266 0
 10778 02c0 2946     		mov	r1, r5
2264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	INIT_BUF(dj);
 10779              		.loc 1 2264 0
 10780 02c2 1093     		str	r3, [sp, #64]
 10781 02c4 06AA     		add	r2, sp, #24
2266:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10782              		.loc 1 2266 0
 10783 02c6 09A8     		add	r0, sp, #36
 10784 02c8 114B     		ldr	r3, .L1419+24
2264:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	INIT_BUF(dj);
 10785              		.loc 1 2264 0
 10786 02ca 0F92     		str	r2, [sp, #60]
2266:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10787              		.loc 1 2266 0
 10788 02cc 9847     		blx	r3
 10789              	.LVL1413:
2267:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dir = dj.dir;
 10790              		.loc 1 2267 0
 10791 02ce 0E9D     		ldr	r5, [sp, #56]
 10792              	.LVL1414:
2270:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 10793              		.loc 1 2270 0
 10794 02d0 0028     		cmp	r0, #0
 10795 02d2 7FF4CEAE 		bne	.L1343
2271:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!dir)	/* Current dir itself */
 10796              		.loc 1 2271 0
 10797 02d6 002D     		cmp	r5, #0
 10798 02d8 37D0     		beq	.L1414
 10799              	.LVL1415:
2279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
 10800              		.loc 1 2279 0
 10801 02da 16F01C0F 		tst	r6, #28
 10802 02de 1BD0     		beq	.L1415
 10803              	.LBB1190:
2293:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
 10804              		.loc 1 2293 0
 10805 02e0 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 10806 02e2 13F0110F 		tst	r3, #17
 10807 02e6 1ED1     		bne	.L1367
2296:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
 10808              		.loc 1 2296 0
 10809 02e8 06F00406 		and	r6, r6, #4
 10810              	.LVL1416:
 10811 02ec F6B2     		uxtb	r6, r6
 10812 02ee 002E     		cmp	r6, #0
 10813 02f0 3FF4FBAE 		beq	.L1331
2297:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_EXIST;
 10814              		.loc 1 2297 0
 10815 02f4 0820     		movs	r0, #8
 10816              	.LVL1417:
 10817 02f6 C1E6     		b	.L1378
 10818              	.L1420:
 10819              		.align	2
 10820              	.L1419:
 10821 02f8 00000000 		.word	.LANCHOR2
 10822 02fc 00000000 		.word	disk_status
 10823 0300 00000000 		.word	.LANCHOR4
 10824 0304 00000000 		.word	disk_initialize
 10825 0308 00000000 		.word	dir_register
 10826 030c 00000000 		.word	.LANCHOR3
 10827 0310 00000000 		.word	follow_path
 10828 0314 00000000 		.word	disk_read
 10829              	.LVL1418:
 10830              	.L1415:
 10831              	.LBE1190:
2320:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dir[DIR_Attr] & AM_DIR) {		/* It is a directory */
 10832              		.loc 1 2320 0
 10833 0318 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 10834 031a 03F01002 		and	r2, r3, #16
 10835 031e D2B2     		uxtb	r2, r2
 10836 0320 1AB1     		cbz	r2, .L1416
2321:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NO_FILE;
 10837              		.loc 1 2321 0
 10838 0322 0420     		movs	r0, #4
 10839 0324 AAE6     		b	.L1378
 10840              	.L1367:
2324:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_DENIED;
 10841              		.loc 1 2324 0
 10842 0326 0720     		movs	r0, #7
 10843              	.LVL1419:
 10844 0328 A8E6     		b	.L1378
 10845              	.LVL1420:
 10846              	.L1416:
2323:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
 10847              		.loc 1 2323 0
 10848 032a 06F00202 		and	r2, r6, #2
 10849 032e D2B2     		uxtb	r2, r2
 10850 0330 0AB1     		cbz	r2, .L1405
2323:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
 10851              		.loc 1 2323 0 is_stmt 0 discriminator 1
 10852 0332 DA07     		lsls	r2, r3, #31
 10853 0334 F7D4     		bmi	.L1367
 10854              	.L1405:
 10855 0336 06F00806 		and	r6, r6, #8
 10856              	.LVL1421:
 10857 033a F6B2     		uxtb	r6, r6
 10858 033c 099B     		ldr	r3, [sp, #36]
2329:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (mode & FA_CREATE_ALWAYS)			/* Set file change flag if created or overwritten */
 10859              		.loc 1 2329 0 is_stmt 1
 10860 033e 002E     		cmp	r6, #0
 10861 0340 3FF4DAAE 		beq	.L1347
 10862              	.LVL1422:
 10863              	.L1334:
2330:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mode |= FA__WRITTEN;
 10864              		.loc 1 2330 0
 10865 0344 47F02007 		orr	r7, r7, #32
 10866              	.LVL1423:
 10867 0348 D6E6     		b	.L1347
 10868              	.LVL1424:
 10869              	.L1414:
2272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INVALID_NAME;
 10870              		.loc 1 2272 0
 10871 034a 0620     		movs	r0, #6
 10872              	.LVL1425:
 10873 034c 96E6     		b	.L1378
 10874              	.LVL1426:
 10875              	.L1411:
 10876              	.LBB1191:
2301:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dw = get_fattime();					/* Created time */
 10877              		.loc 1 2301 0
 10878 034e AE4B     		ldr	r3, .L1421
 10879 0350 9847     		blx	r3
 10880              	.LVL1427:
2305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cl = LD_CLUST(dir);					/* Get start cluster */
 10881              		.loc 1 2305 0
 10882 0352 95F815A0 		ldrb	sl, [r5, #21]	@ zero_extendqisi2
 10883 0356 2E7D     		ldrb	r6, [r5, #20]	@ zero_extendqisi2
 10884 0358 E97E     		ldrb	r1, [r5, #27]	@ zero_extendqisi2
 10885 035a 95F81A90 		ldrb	r9, [r5, #26]	@ zero_extendqisi2
2307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj.fs->wflag = 1;
 10886              		.loc 1 2307 0
 10887 035e 099B     		ldr	r3, [sp, #36]
2302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(dir+DIR_CrtTime, dw);
 10888              		.loc 1 2302 0
 10889 0360 A873     		strb	r0, [r5, #14]
2303:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir[DIR_Attr] = 0;					/* Reset attribute */
 10890              		.loc 1 2303 0
 10891 0362 0022     		movs	r2, #0
2305:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cl = LD_CLUST(dir);					/* Get start cluster */
 10892              		.loc 1 2305 0
 10893 0364 46EA0A26 		orr	r6, r6, sl, lsl #8
 10894 0368 49EA0121 		orr	r1, r9, r1, lsl #8
 10895              	.LVL1428:
2302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(dir+DIR_CrtTime, dw);
 10896              		.loc 1 2302 0
 10897 036c C0F30728 		ubfx	r8, r0, #8, #8
 10898 0370 4FEA104C 		lsr	ip, r0, #16
2303:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir[DIR_Attr] = 0;					/* Reset attribute */
 10899              		.loc 1 2303 0
 10900 0374 EA72     		strb	r2, [r5, #11]
2302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(dir+DIR_CrtTime, dw);
 10901              		.loc 1 2302 0
 10902 0376 000E     		lsrs	r0, r0, #24
 10903              	.LVL1429:
2304:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(dir+DIR_FileSize, 0);		/* size = 0 */
 10904              		.loc 1 2304 0
 10905 0378 2A77     		strb	r2, [r5, #28]
 10906 037a 6A77     		strb	r2, [r5, #29]
 10907 037c AA77     		strb	r2, [r5, #30]
 10908 037e EA77     		strb	r2, [r5, #31]
2306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_CLUST(dir, 0);					/* cluster = 0 */
 10909              		.loc 1 2306 0
 10910 0380 AA76     		strb	r2, [r5, #26]
 10911 0382 EA76     		strb	r2, [r5, #27]
 10912 0384 2A75     		strb	r2, [r5, #20]
 10913 0386 6A75     		strb	r2, [r5, #21]
2307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj.fs->wflag = 1;
 10914              		.loc 1 2307 0
 10915 0388 0122     		movs	r2, #1
2308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cl) {							/* Remove the cluster chain if exist */
 10916              		.loc 1 2308 0
 10917 038a 51EA0646 		orrs	r6, r1, r6, lsl #16
 10918              	.LVL1430:
2302:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(dir+DIR_CrtTime, dw);
 10919              		.loc 1 2302 0
 10920 038e 85F80F80 		strb	r8, [r5, #15]
 10921 0392 85F810C0 		strb	ip, [r5, #16]
 10922 0396 6874     		strb	r0, [r5, #17]
2307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dj.fs->wflag = 1;
 10923              		.loc 1 2307 0
 10924 0398 1A71     		strb	r2, [r3, #4]
2308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cl) {							/* Remove the cluster chain if exist */
 10925              		.loc 1 2308 0
 10926 039a D3D0     		beq	.L1334
 10927              	.LBB1183:
 10928              	.LBB1184:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 10929              		.loc 1 937 0
 10930 039c 9642     		cmp	r6, r2
 10931              	.LBE1184:
 10932              	.LBE1183:
2309:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dw = dj.fs->winsect;
 10933              		.loc 1 2309 0
 10934 039e D3F82C80 		ldr	r8, [r3, #44]
 10935              	.LVL1431:
 10936              	.LBB1186:
 10937              	.LBB1185:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 10938              		.loc 1 937 0
 10939 03a2 02D0     		beq	.L1365
 10940 03a4 9A69     		ldr	r2, [r3, #24]
 10941 03a6 9642     		cmp	r6, r2
 10942 03a8 01D3     		bcc	.L1417
 10943              	.L1365:
 10944 03aa 0220     		movs	r0, #2
 10945 03ac 66E6     		b	.L1378
 10946              	.L1417:
 10947 03ae 1846     		mov	r0, r3
 10948 03b0 3146     		mov	r1, r6
 10949 03b2 964B     		ldr	r3, .L1421+4
 10950              	.LVL1432:
 10951 03b4 9847     		blx	r3
 10952              	.LVL1433:
 10953              	.LBE1185:
 10954              	.LBE1186:
2311:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK) {
 10955              		.loc 1 2311 0
 10956 03b6 0028     		cmp	r0, #0
 10957 03b8 7FF460AE 		bne	.L1378
2312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
 10958              		.loc 1 2312 0
 10959 03bc 0998     		ldr	r0, [sp, #36]
 10960              	.LVL1434:
2313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = move_window(dj.fs, dw);
 10961              		.loc 1 2313 0
 10962 03be 944B     		ldr	r3, .L1421+8
2312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
 10963              		.loc 1 2312 0
 10964 03c0 013E     		subs	r6, r6, #1
 10965              	.LVL1435:
 10966 03c2 C660     		str	r6, [r0, #12]
2313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = move_window(dj.fs, dw);
 10967              		.loc 1 2313 0
 10968 03c4 4146     		mov	r1, r8
 10969 03c6 9847     		blx	r3
 10970              	.LVL1436:
 10971              	.LBE1191:
2328:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 10972              		.loc 1 2328 0
 10973 03c8 0028     		cmp	r0, #0
 10974 03ca 7FF457AE 		bne	.L1378
 10975 03ce 099B     		ldr	r3, [sp, #36]
 10976 03d0 B8E7     		b	.L1334
 10977              	.LVL1437:
 10978              	.L1410:
 10979              	.LBB1192:
 10980              	.LBB1179:
 10981              	.LBB1170:
 10982              	.LBB1161:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 10983              		.loc 1 1989 0
 10984 03d2 98F82E32 		ldrb	r3, [r8, #558]	@ zero_extendqisi2
 10985 03d6 98F82FB2 		ldrb	fp, [r8, #559]	@ zero_extendqisi2
 10986 03da 43EA0B2B 		orr	fp, r3, fp, lsl #8
 10987 03de 8D4B     		ldr	r3, .L1421+12
 10988 03e0 0FFA8BFB 		sxth	fp, fp
 10989 03e4 9B45     		cmp	fp, r3
 10990 03e6 03D0     		beq	.L1418
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 10991              		.loc 1 1990 0
 10992 03e8 0220     		movs	r0, #2
 10993 03ea 6DE6     		b	.L1315
 10994              	.LVL1438:
 10995              	.L1359:
 10996              	.LBE1161:
 10997              	.LBE1170:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 10998              		.loc 1 2078 0
 10999 03ec 0120     		movs	r0, #1
 11000 03ee 3CE6     		b	.L1310
 11001              	.LVL1439:
 11002              	.L1418:
 11003              	.LBB1171:
 11004              	.LBB1162:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 11005              		.loc 1 1992 0
 11006 03f0 98F86820 		ldrb	r2, [r8, #104]	@ zero_extendqisi2
 11007 03f4 98F86910 		ldrb	r1, [r8, #105]	@ zero_extendqisi2
 11008 03f8 98F86630 		ldrb	r3, [r8, #102]	@ zero_extendqisi2
 11009 03fc 98F867C0 		ldrb	ip, [r8, #103]	@ zero_extendqisi2
 11010 0400 1204     		lsls	r2, r2, #16
 11011 0402 42EA0162 		orr	r2, r2, r1, lsl #24
 11012 0406 1343     		orrs	r3, r3, r2
 11013 0408 43EA0C23 		orr	r3, r3, ip, lsl #8
 11014 040c 8249     		ldr	r1, .L1421+16
 11015 040e 23F07F43 		bic	r3, r3, #-16777216
 11016 0412 8B42     		cmp	r3, r1
 11017 0414 3FF458AE 		beq	.L1315
 11018              	.LVL1440:
 11019              	.LBB1157:
 11020              	.LBB1158:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 11021              		.loc 1 1994 0
 11022 0418 98F88420 		ldrb	r2, [r8, #132]	@ zero_extendqisi2
 11023 041c 98F88510 		ldrb	r1, [r8, #133]	@ zero_extendqisi2
 11024 0420 98F88230 		ldrb	r3, [r8, #130]	@ zero_extendqisi2
 11025 0424 98F883C0 		ldrb	ip, [r8, #131]	@ zero_extendqisi2
 11026 0428 1204     		lsls	r2, r2, #16
 11027 042a 42EA0162 		orr	r2, r2, r1, lsl #24
 11028 042e 1343     		orrs	r3, r3, r2
 11029 0430 43EA0C23 		orr	r3, r3, ip, lsl #8
 11030              	.LBE1158:
 11031              	.LBE1157:
 11032              	.LBE1162:
 11033              	.LBE1171:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 11034              		.loc 1 2068 0
 11035 0434 784A     		ldr	r2, .L1421+16
 11036              	.LBB1172:
 11037              	.LBB1163:
 11038              	.LBB1160:
 11039              	.LBB1159:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 11040              		.loc 1 1994 0
 11041 0436 23F07F43 		bic	r3, r3, #-16777216
 11042              	.LBE1159:
 11043              	.LBE1160:
 11044              	.LBE1163:
 11045              	.LBE1172:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 11046              		.loc 1 2068 0
 11047 043a 9342     		cmp	r3, r2
 11048 043c 3FF47DAE 		beq	.L1355
 11049              	.LVL1441:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 11050              		.loc 1 2073 0
 11051 0440 98F8F231 		ldrb	r3, [r8, #498]	@ zero_extendqisi2
 11052 0444 002B     		cmp	r3, #0
 11053 0446 3FF446AE 		beq	.L1319
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 11054              		.loc 1 2074 0
 11055 044a 98F8F811 		ldrb	r1, [r8, #504]	@ zero_extendqisi2
 11056 044e 98F8F9E1 		ldrb	lr, [r8, #505]	@ zero_extendqisi2
 11057 0452 98F8F631 		ldrb	r3, [r8, #502]	@ zero_extendqisi2
 11058 0456 98F8F721 		ldrb	r2, [r8, #503]	@ zero_extendqisi2
 11059              	.LBB1173:
 11060              	.LBB1168:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 11061              		.loc 1 1987 0
 11062 045a 98F80100 		ldrb	r0, [r8, #1]	@ zero_extendqisi2
 11063              	.LBE1168:
 11064              	.LBE1173:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 11065              		.loc 1 2074 0
 11066 045e 0904     		lsls	r1, r1, #16
 11067 0460 41EA0E61 		orr	r1, r1, lr, lsl #24
 11068 0464 0B43     		orrs	r3, r3, r1
 11069 0466 43EA022C 		orr	ip, r3, r2, lsl #8
 11070              	.LVL1442:
 11071              	.LBB1174:
 11072              	.LBB1169:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 11073              		.loc 1 1987 0
 11074 046a 6246     		mov	r2, ip
 11075 046c CDF808C0 		str	ip, [sp, #8]
 11076 0470 4946     		mov	r1, r9
 11077 0472 0123     		movs	r3, #1
 11078 0474 D047     		blx	sl
 11079              	.LVL1443:
 11080 0476 DDF808C0 		ldr	ip, [sp, #8]
 11081 047a 0028     		cmp	r0, #0
 11082 047c B6D1     		bne	.L1359
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 11083              		.loc 1 1989 0
 11084 047e 98F82F22 		ldrb	r2, [r8, #559]	@ zero_extendqisi2
 11085 0482 98F82E32 		ldrb	r3, [r8, #558]	@ zero_extendqisi2
 11086 0486 43EA0223 		orr	r3, r3, r2, lsl #8
 11087 048a 1BB2     		sxth	r3, r3
 11088 048c 5B45     		cmp	r3, fp
 11089 048e 7FF422AE 		bne	.L1319
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 11090              		.loc 1 1992 0
 11091 0492 98F86810 		ldrb	r1, [r8, #104]	@ zero_extendqisi2
 11092 0496 98F86900 		ldrb	r0, [r8, #105]	@ zero_extendqisi2
 11093 049a 98F86630 		ldrb	r3, [r8, #102]	@ zero_extendqisi2
 11094 049e 98F86720 		ldrb	r2, [r8, #103]	@ zero_extendqisi2
 11095 04a2 DFF874B1 		ldr	fp, .L1421+16
 11096 04a6 0904     		lsls	r1, r1, #16
 11097 04a8 41EA0061 		orr	r1, r1, r0, lsl #24
 11098 04ac 0B43     		orrs	r3, r3, r1
 11099 04ae 43EA0223 		orr	r3, r3, r2, lsl #8
 11100 04b2 23F07F43 		bic	r3, r3, #-16777216
 11101 04b6 5B45     		cmp	r3, fp
 11102 04b8 3FF440AE 		beq	.L1316
 11103              	.LVL1444:
 11104              	.LBB1166:
 11105              	.LBB1167:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 11106              		.loc 1 1994 0
 11107 04bc 98F88420 		ldrb	r2, [r8, #132]	@ zero_extendqisi2
 11108 04c0 98F88510 		ldrb	r1, [r8, #133]	@ zero_extendqisi2
 11109 04c4 98F88230 		ldrb	r3, [r8, #130]	@ zero_extendqisi2
 11110 04c8 98F88300 		ldrb	r0, [r8, #131]	@ zero_extendqisi2
 11111 04cc 1204     		lsls	r2, r2, #16
 11112 04ce 42EA0162 		orr	r2, r2, r1, lsl #24
 11113 04d2 1343     		orrs	r3, r3, r2
 11114 04d4 43EA0020 		orr	r0, r3, r0, lsl #8
 11115 04d8 20F07F40 		bic	r0, r0, #-16777216
 11116              	.LBE1167:
 11117              	.LBE1166:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 11118              		.loc 1 1995 0
 11119 04dc B0EB0B00 		subs	r0, r0, fp
 11120 04e0 18BF     		it	ne
 11121 04e2 0120     		movne	r0, #1
 11122 04e4 F2E5     		b	.L1339
 11123              	.LVL1445:
 11124              	.L1407:
 11125              	.LBE1169:
 11126              	.LBE1174:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 11127              		.loc 1 2025 0
 11128 04e6 8D1C     		adds	r5, r1, #2
 11129 04e8 98E5     		b	.L1309
 11130              	.LVL1446:
 11131              	.L1413:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 11132              		.loc 1 2140 0
 11133 04ea 98F86110 		ldrb	r1, [r8, #97]	@ zero_extendqisi2
 11134 04ee 98F86020 		ldrb	r2, [r8, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 11135              		.loc 1 2139 0
 11136 04f2 88F80530 		strb	r3, [r8, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 11137              		.loc 1 2140 0
 11138 04f6 42EA0122 		orr	r2, r2, r1, lsl #8
 11139 04fa 6244     		add	r2, ip, r2
 11140 04fc C8F81420 		str	r2, [r8, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 11141              		.loc 1 2141 0
 11142 0500 98F80100 		ldrb	r0, [r8, #1]	@ zero_extendqisi2
 11143 0504 4946     		mov	r1, r9
 11144 0506 0123     		movs	r3, #1
 11145 0508 D047     		blx	sl
 11146              	.LVL1447:
 11147 050a 0028     		cmp	r0, #0
 11148 050c 7FF4CAAE 		bne	.L1327
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 11149              		.loc 1 2142 0
 11150 0510 98F82E32 		ldrb	r3, [r8, #558]	@ zero_extendqisi2
 11151 0514 98F82F22 		ldrb	r2, [r8, #559]	@ zero_extendqisi2
 11152 0518 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 11153              		.loc 1 2141 0
 11154 051c 3D4B     		ldr	r3, .L1421+12
 11155 051e 12B2     		sxth	r2, r2
 11156 0520 9A42     		cmp	r2, r3
 11157 0522 7FF4BFAE 		bne	.L1327
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 11158              		.loc 1 2143 0
 11159 0526 98F83210 		ldrb	r1, [r8, #50]	@ zero_extendqisi2
 11160 052a 98F83300 		ldrb	r0, [r8, #51]	@ zero_extendqisi2
 11161 052e 98F83030 		ldrb	r3, [r8, #48]	@ zero_extendqisi2
 11162 0532 98F83120 		ldrb	r2, [r8, #49]	@ zero_extendqisi2
 11163 0536 0904     		lsls	r1, r1, #16
 11164 0538 41EA0061 		orr	r1, r1, r0, lsl #24
 11165 053c 0B43     		orrs	r3, r3, r1
 11166 053e 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 11167              		.loc 1 2142 0
 11168 0542 364B     		ldr	r3, .L1421+20
 11169 0544 9A42     		cmp	r2, r3
 11170 0546 7FF4ADAE 		bne	.L1327
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 11171              		.loc 1 2144 0
 11172 054a 98F81612 		ldrb	r1, [r8, #534]	@ zero_extendqisi2
 11173 054e 98F81702 		ldrb	r0, [r8, #535]	@ zero_extendqisi2
 11174 0552 98F81432 		ldrb	r3, [r8, #532]	@ zero_extendqisi2
 11175 0556 98F81522 		ldrb	r2, [r8, #533]	@ zero_extendqisi2
 11176 055a 0904     		lsls	r1, r1, #16
 11177 055c 41EA0061 		orr	r1, r1, r0, lsl #24
 11178 0560 0B43     		orrs	r3, r3, r1
 11179 0562 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 11180              		.loc 1 2143 0
 11181 0566 2E4B     		ldr	r3, .L1421+24
 11182 0568 9A42     		cmp	r2, r3
 11183 056a 7FF49BAE 		bne	.L1327
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11184              		.loc 1 2145 0
 11185 056e 98F81EC2 		ldrb	ip, [r8, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11186              		.loc 1 2146 0
 11187 0572 98F81AE2 		ldrb	lr, [r8, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11188              		.loc 1 2145 0
 11189 0576 98F81FA2 		ldrb	sl, [r8, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11190              		.loc 1 2146 0
 11191 057a 98F81B92 		ldrb	r9, [r8, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11192              		.loc 1 2145 0
 11193 057e 98F81C22 		ldrb	r2, [r8, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11194              		.loc 1 2146 0
 11195 0582 98F81832 		ldrb	r3, [r8, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11196              		.loc 1 2145 0
 11197 0586 98F81D02 		ldrb	r0, [r8, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11198              		.loc 1 2146 0
 11199 058a 98F81912 		ldrb	r1, [r8, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11200              		.loc 1 2145 0
 11201 058e 4FEA0C4C 		lsl	ip, ip, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11202              		.loc 1 2146 0
 11203 0592 4FEA0E4E 		lsl	lr, lr, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11204              		.loc 1 2145 0
 11205 0596 4CEA0A6C 		orr	ip, ip, sl, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11206              		.loc 1 2146 0
 11207 059a 4EEA096E 		orr	lr, lr, r9, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11208              		.loc 1 2145 0
 11209 059e 4CEA0202 		orr	r2, ip, r2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11210              		.loc 1 2146 0
 11211 05a2 4EEA0303 		orr	r3, lr, r3
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11212              		.loc 1 2145 0
 11213 05a6 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11214              		.loc 1 2146 0
 11215 05aa 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 11216              		.loc 1 2145 0
 11217 05ae C8F80C20 		str	r2, [r8, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 11218              		.loc 1 2146 0
 11219 05b2 C8F81030 		str	r3, [r8, #16]
 11220 05b6 75E6     		b	.L1327
 11221              	.LVL1448:
 11222              	.L1412:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 11223              		.loc 1 2127 0
 11224 05b8 5B00     		lsls	r3, r3, #1
 11225              	.LVL1449:
 11226 05ba 61E6     		b	.L1324
 11227              	.LVL1450:
 11228              	.L1323:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 11229              		.loc 1 2118 0
 11230 05bc 009A     		ldr	r2, [sp, #0]
 11231 05be 0CEB0200 		add	r0, ip, r2
 11232 05c2 C8F82000 		str	r0, [r8, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 11233              		.loc 1 2120 0
 11234 05c6 0498     		ldr	r0, [sp, #16]
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 11235              		.loc 1 2116 0
 11236 05c8 0233     		adds	r3, r3, #2
 11237              	.LVL1451:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 11238              		.loc 1 2117 0
 11239 05ca 6144     		add	r1, r1, ip
 11240              	.LVL1452:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 11241              		.loc 1 2116 0
 11242 05cc C8F81830 		str	r3, [r8, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 11243              		.loc 1 2117 0
 11244 05d0 C8F82810 		str	r1, [r8, #40]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 11245              		.loc 1 2120 0
 11246 05d4 0028     		cmp	r0, #0
 11247 05d6 7FF47EAD 		bne	.L1319
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 11248              		.loc 1 2121 0
 11249 05da 98F85E00 		ldrb	r0, [r8, #94]	@ zero_extendqisi2
 11250 05de 98F85FB0 		ldrb	fp, [r8, #95]	@ zero_extendqisi2
 11251              	.LVL1453:
 11252 05e2 98F85C10 		ldrb	r1, [r8, #92]	@ zero_extendqisi2
 11253 05e6 98F85D20 		ldrb	r2, [r8, #93]	@ zero_extendqisi2
 11254 05ea 0004     		lsls	r0, r0, #16
 11255 05ec 40EA0B60 		orr	r0, r0, fp, lsl #24
 11256 05f0 0143     		orrs	r1, r1, r0
 11257 05f2 41EA0222 		orr	r2, r1, r2, lsl #8
 11258 05f6 C8F82420 		str	r2, [r8, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 11259              		.loc 1 2122 0
 11260 05fa 9B00     		lsls	r3, r3, #2
 11261              	.LVL1454:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 11262              		.loc 1 2113 0
 11263 05fc 4FF0030B 		mov	fp, #3
 11264 0600 3EE6     		b	.L1324
 11265              	.LVL1455:
 11266              	.L1360:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 11267              		.loc 1 2111 0
 11268 0602 4FF0010B 		mov	fp, #1
 11269 0606 1BE6     		b	.L1322
 11270              	.L1422:
 11271              		.align	2
 11272              	.L1421:
 11273 0608 00000000 		.word	get_fattime
 11274 060c 00000000 		.word	remove_chain.part.7
 11275 0610 00000000 		.word	move_window
 11276 0614 55AAFFFF 		.word	-21931
 11277 0618 46415400 		.word	5521734
 11278 061c 52526141 		.word	1096897106
 11279 0620 72724161 		.word	1631679090
 11280              	.LBE1179:
 11281              	.LBE1192:
 11282              		.cfi_endproc
 11283              	.LFE29:
 11285              		.section	.text.f_read,"ax",%progbits
 11286              		.align	2
 11287              		.global	f_read
 11288              		.thumb
 11289              		.thumb_func
 11291              	f_read:
 11292              	.LFB30:
2379:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 11293              		.loc 1 2379 0
 11294              		.cfi_startproc
 11295              		@ args = 0, pretend = 0, frame = 8
 11296              		@ frame_needed = 0, uses_anonymous_args = 0
 11297              	.LVL1456:
 11298 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 11299              	.LCFI26:
 11300              		.cfi_def_cfa_offset 36
 11301              		.cfi_offset 4, -36
 11302              		.cfi_offset 5, -32
 11303              		.cfi_offset 6, -28
 11304              		.cfi_offset 7, -24
 11305              		.cfi_offset 8, -20
 11306              		.cfi_offset 9, -16
 11307              		.cfi_offset 10, -12
 11308              		.cfi_offset 11, -8
 11309              		.cfi_offset 14, -4
 11310 0004 9A46     		mov	sl, r3
2388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);				/* Check validity */
 11311              		.loc 1 2388 0
 11312 0006 0368     		ldr	r3, [r0, #0]
 11313              	.LVL1457:
 11314 0008 8488     		ldrh	r4, [r0, #4]
 11315              	.LVL1458:
2379:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 11316              		.loc 1 2379 0
 11317 000a 8046     		mov	r8, r0
2386:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*br = 0;	/* Initialize byte counter */
 11318              		.loc 1 2386 0
 11319 000c 0020     		movs	r0, #0
 11320              	.LVL1459:
2379:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 11321              		.loc 1 2379 0
 11322 000e 83B0     		sub	sp, sp, #12
 11323              	.LCFI27:
 11324              		.cfi_def_cfa_offset 48
2386:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*br = 0;	/* Initialize byte counter */
 11325              		.loc 1 2386 0
 11326 0010 CAF80000 		str	r0, [sl, #0]
 11327              	.LBB1209:
 11328              	.LBB1210:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 11329              		.loc 1 2177 0
 11330 0014 0BB1     		cbz	r3, .L1452
 11331 0016 1878     		ldrb	r0, [r3, #0]	@ zero_extendqisi2
 11332 0018 18B9     		cbnz	r0, .L1473
 11333              	.L1452:
 11334 001a 0920     		movs	r0, #9
 11335              	.LVL1460:
 11336              	.L1468:
 11337              	.LBE1210:
 11338              	.LBE1209:
2464:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 11339              		.loc 1 2464 0
 11340 001c 03B0     		add	sp, sp, #12
 11341 001e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 11342              	.LVL1461:
 11343              	.L1473:
 11344              	.LBB1214:
 11345              	.LBB1213:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 11346              		.loc 1 2177 0
 11347 0022 D888     		ldrh	r0, [r3, #6]
 11348 0024 A042     		cmp	r0, r4
 11349 0026 F8D1     		bne	.L1452
 11350              	.LVL1462:
 11351              	.LBB1211:
 11352              	.LBB1212:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 11353              		.loc 1 2182 0
 11354 0028 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 11355 002a 0191     		str	r1, [sp, #4]
 11356 002c 0092     		str	r2, [sp, #0]
 11357 002e 6E4B     		ldr	r3, .L1478
 11358              	.LVL1463:
 11359 0030 9847     		blx	r3
 11360              	.LVL1464:
 11361 0032 10F0010F 		tst	r0, #1
 11362 0036 0199     		ldr	r1, [sp, #4]
 11363 0038 009A     		ldr	r2, [sp, #0]
 11364 003a 01D0     		beq	.L1474
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
 11365              		.loc 1 2183 0
 11366 003c 0320     		movs	r0, #3
 11367 003e EDE7     		b	.L1468
 11368              	.L1474:
 11369              	.LBE1212:
 11370              	.LBE1211:
 11371              	.LBE1213:
 11372              	.LBE1214:
2390:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)					/* Aborted file? */
 11373              		.loc 1 2390 0
 11374 0040 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 11375 0044 1806     		lsls	r0, r3, #24
 11376 0046 00F1CD80 		bmi	.L1475
2392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 11377              		.loc 1 2392 0
 11378 004a D807     		lsls	r0, r3, #31
 11379 004c 01D4     		bmi	.L1476
2393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
 11380              		.loc 1 2393 0
 11381 004e 0720     		movs	r0, #7
 11382 0050 E4E7     		b	.L1468
 11383              	.L1476:
2394:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	remain = fp->fsize - fp->fptr;
 11384              		.loc 1 2394 0
 11385 0052 D8F80860 		ldr	r6, [r8, #8]
 11386              	.LVL1465:
 11387 0056 D8F80C30 		ldr	r3, [r8, #12]
 11388 005a 9B1B     		subs	r3, r3, r6
 11389              	.LVL1466:
 11390 005c 9A42     		cmp	r2, r3
 11391 005e 34BF     		ite	cc
 11392 0060 9146     		movcc	r9, r2
 11393 0062 9946     		movcs	r9, r3
 11394              	.LVL1467:
2397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
 11395              		.loc 1 2397 0
 11396 0064 B9F1000F 		cmp	r9, #0
 11397 0068 67D0     		beq	.L1448
 11398 006a 8B46     		mov	fp, r1
 11399              	.LVL1468:
 11400              	.L1447:
2399:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 11401              		.loc 1 2399 0
 11402 006c F505     		lsls	r5, r6, #23
 11403 006e ED0D     		lsrs	r5, r5, #23
 11404 0070 002D     		cmp	r5, #0
 11405 0072 40D1     		bne	.L1427
2400:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 11406              		.loc 1 2400 0
 11407 0074 D8F80030 		ldr	r3, [r8, #0]
 11408 0078 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 11409 007a 013A     		subs	r2, r2, #1
 11410 007c 02EA5622 		and	r2, r2, r6, lsr #9
 11411              	.LVL1469:
2401:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 11412              		.loc 1 2401 0
 11413 0080 12F0FF07 		ands	r7, r2, #255
 11414 0084 5BD0     		beq	.L1428
 11415 0086 D8F81400 		ldr	r0, [r8, #20]
 11416              	.LVL1470:
 11417              	.LBB1215:
 11418              	.LBB1216:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 11419              		.loc 1 807 0
 11420 008a 9A69     		ldr	r2, [r3, #24]
 11421              	.LVL1471:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 11422              		.loc 1 806 0
 11423 008c 0238     		subs	r0, r0, #2
 11424              	.LVL1472:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 11425              		.loc 1 807 0
 11426 008e 023A     		subs	r2, r2, #2
 11427 0090 9042     		cmp	r0, r2
 11428 0092 65D3     		bcc	.L1477
 11429              	.LVL1473:
 11430              	.L1434:
 11431              	.LBE1216:
 11432              	.LBE1215:
2417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 11433              		.loc 1 2417 0 discriminator 1
 11434 0094 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 11435 0098 63F07F03 		orn	r3, r3, #127
 11436 009c 88F80630 		strb	r3, [r8, #6]
 11437 00a0 0220     		movs	r0, #2
 11438 00a2 BBE7     		b	.L1468
 11439              	.LVL1474:
 11440              	.L1436:
2438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
 11441              		.loc 1 2438 0
 11442 00a4 D8F81820 		ldr	r2, [r8, #24]
 11443 00a8 AA42     		cmp	r2, r5
 11444 00aa 1ED0     		beq	.L1443
2440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
 11445              		.loc 1 2440 0
 11446 00ac 98F80610 		ldrb	r1, [r8, #6]	@ zero_extendqisi2
 11447 00b0 01F04001 		and	r1, r1, #64
 11448 00b4 C9B2     		uxtb	r1, r1
2441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 11449              		.loc 1 2441 0
 11450 00b6 08F12404 		add	r4, r8, #36
 11451              	.LVL1475:
2440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
 11452              		.loc 1 2440 0
 11453 00ba 71B1     		cbz	r1, .L1444
2441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 11454              		.loc 1 2441 0
 11455 00bc 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 11456              	.LVL1476:
 11457 00be 4B4E     		ldr	r6, .L1478+4
 11458 00c0 2146     		mov	r1, r4
 11459 00c2 0123     		movs	r3, #1
 11460              	.LVL1477:
 11461 00c4 B047     		blx	r6
 11462              	.LVL1478:
 11463 00c6 0028     		cmp	r0, #0
 11464 00c8 7ED1     		bne	.L1471
2443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->flag &= ~FA__DIRTY;
 11465              		.loc 1 2443 0
 11466 00ca 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 11467 00ce D8F80030 		ldr	r3, [r8, #0]
 11468 00d2 22F04002 		bic	r2, r2, #64
 11469 00d6 88F80620 		strb	r2, [r8, #6]
 11470              	.L1444:
2446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)	/* Fill sector cache */
 11471              		.loc 1 2446 0
 11472 00da 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 11473 00dc 2146     		mov	r1, r4
 11474 00de 2A46     		mov	r2, r5
 11475 00e0 0123     		movs	r3, #1
 11476 00e2 434C     		ldr	r4, .L1478+8
 11477 00e4 A047     		blx	r4
 11478              	.LVL1479:
 11479 00e6 0028     		cmp	r0, #0
 11480 00e8 6ED1     		bne	.L1471
 11481              	.L1443:
 11482 00ea D8F80860 		ldr	r6, [r8, #8]
2450:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 11483              		.loc 1 2450 0
 11484 00ee C8F81850 		str	r5, [r8, #24]
 11485 00f2 F505     		lsls	r5, r6, #23
 11486              	.LVL1480:
 11487 00f4 ED0D     		lsrs	r5, r5, #23
 11488              	.LVL1481:
 11489              	.L1427:
2452:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rcnt = SS(fp->fs) - (fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer */
 11490              		.loc 1 2452 0
 11491 00f6 C5F50073 		rsb	r3, r5, #512
 11492              	.LVL1482:
 11493 00fa 4B45     		cmp	r3, r9
 11494 00fc 28BF     		it	cs
 11495 00fe 4B46     		movcs	r3, r9
 11496              	.LVL1483:
2459:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(rbuff, &fp->buf[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
 11497              		.loc 1 2459 0
 11498 0100 4544     		add	r5, r8, r5
 11499 0102 2435     		adds	r5, r5, #36
 11500              	.LVL1484:
 11501              	.LBB1218:
 11502              	.LBB1219:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11503              		.loc 1 540 0
 11504 0104 5C1E     		subs	r4, r3, #1
 11505              	.LVL1485:
 11506 0106 63B1     		cbz	r3, .L1440
 11507 0108 5E46     		mov	r6, fp
 11508 010a 00E0     		b	.L1446
 11509              	.LVL1486:
 11510              	.L1456:
 11511 010c 6446     		mov	r4, ip
 11512              	.LVL1487:
 11513              	.L1446:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 11514              		.loc 1 541 0
 11515 010e 15F8017B 		ldrb	r7, [r5], #1	@ zero_extendqisi2
 11516              	.LVL1488:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11517              		.loc 1 540 0
 11518 0112 04F1FF3C 		add	ip, r4, #-1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 11519              		.loc 1 541 0
 11520 0116 06F8017B 		strb	r7, [r6], #1
 11521              	.LVL1489:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11522              		.loc 1 540 0
 11523 011a 002C     		cmp	r4, #0
 11524 011c F6D1     		bne	.L1456
 11525 011e D8F80860 		ldr	r6, [r8, #8]
 11526              	.LVL1490:
 11527              	.L1440:
 11528              	.LBE1219:
 11529              	.LBE1218:
2398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 11530              		.loc 1 2398 0
 11531 0122 DAF80020 		ldr	r2, [sl, #0]
 11532 0126 F618     		adds	r6, r6, r3
 11533 0128 D218     		adds	r2, r2, r3
2397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
 11534              		.loc 1 2397 0
 11535 012a B9EB0309 		subs	r9, r9, r3
2398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 11536              		.loc 1 2398 0
 11537 012e C8F80860 		str	r6, [r8, #8]
 11538 0132 9B44     		add	fp, fp, r3
 11539              	.LVL1491:
 11540 0134 CAF80020 		str	r2, [sl, #0]
2397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
 11541              		.loc 1 2397 0
 11542 0138 98D1     		bne	.L1447
 11543              	.LVL1492:
 11544              	.L1448:
2463:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
 11545              		.loc 1 2463 0
 11546 013a 0020     		movs	r0, #0
 11547 013c 6EE7     		b	.L1468
 11548              	.LVL1493:
 11549              	.L1428:
2402:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 11550              		.loc 1 2402 0
 11551 013e 002E     		cmp	r6, #0
 11552 0140 4AD1     		bne	.L1430
2403:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
 11553              		.loc 1 2403 0
 11554 0142 D8F81000 		ldr	r0, [r8, #16]
 11555              	.LVL1494:
 11556              	.L1431:
2412:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
 11557              		.loc 1 2412 0
 11558 0146 0128     		cmp	r0, #1
 11559 0148 A4D9     		bls	.L1434
2413:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 11560              		.loc 1 2413 0
 11561 014a 431C     		adds	r3, r0, #1
 11562 014c 3CD0     		beq	.L1471
 11563 014e D8F80030 		ldr	r3, [r8, #0]
2414:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 11564              		.loc 1 2414 0
 11565 0152 C8F81400 		str	r0, [r8, #20]
 11566              	.LVL1495:
 11567              	.LBB1220:
 11568              	.LBB1217:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 11569              		.loc 1 807 0
 11570 0156 9A69     		ldr	r2, [r3, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 11571              		.loc 1 806 0
 11572 0158 0238     		subs	r0, r0, #2
 11573              	.LVL1496:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 11574              		.loc 1 807 0
 11575 015a 023A     		subs	r2, r2, #2
 11576 015c 9042     		cmp	r0, r2
 11577 015e 99D2     		bcs	.L1434
 11578              	.LVL1497:
 11579              	.L1477:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 11580              		.loc 1 808 0
 11581 0160 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 11582 0162 9D6A     		ldr	r5, [r3, #40]
 11583 0164 02FB0055 		mla	r5, r2, r0, r5
 11584              	.LBE1217:
 11585              	.LBE1220:
2417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 11586              		.loc 1 2417 0
 11587 0168 002D     		cmp	r5, #0
 11588 016a 93D0     		beq	.L1434
2420:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 11589              		.loc 1 2420 0
 11590 016c 5FEA5924 		lsrs	r4, r9, #9
2418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 11591              		.loc 1 2418 0
 11592 0170 3D44     		add	r5, r5, r7
 11593              	.LVL1498:
2420:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 11594              		.loc 1 2420 0
 11595 0172 97D0     		beq	.L1436
2421:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 11596              		.loc 1 2421 0
 11597 0174 3919     		adds	r1, r7, r4
 11598 0176 9142     		cmp	r1, r2
2422:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					cc = fp->fs->csize - csect;
 11599              		.loc 1 2422 0
 11600 0178 88BF     		it	hi
 11601 017a C7EB0204 		rsbhi	r4, r7, r2
 11602              	.LVL1499:
2423:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, (BYTE)cc) != RES_OK)
 11603              		.loc 1 2423 0
 11604 017e 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 11605              	.LVL1500:
 11606 0180 1B4E     		ldr	r6, .L1478+8
 11607 0182 E3B2     		uxtb	r3, r4
 11608              	.LVL1501:
 11609 0184 5946     		mov	r1, fp
 11610 0186 2A46     		mov	r2, r5
 11611 0188 B047     		blx	r6
 11612              	.LVL1502:
2424:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 11613              		.loc 1 2424 0
 11614 018a 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
2423:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, (BYTE)cc) != RES_OK)
 11615              		.loc 1 2423 0
 11616 018e E8B9     		cbnz	r0, .L1472
2430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
 11617              		.loc 1 2430 0
 11618 0190 03F04003 		and	r3, r3, #64
 11619 0194 DBB2     		uxtb	r3, r3
 11620 0196 9BB1     		cbz	r3, .L1441
2430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
 11621              		.loc 1 2430 0 is_stmt 0 discriminator 1
 11622 0198 D8F81810 		ldr	r1, [r8, #24]
 11623 019c 491B     		subs	r1, r1, r5
 11624 019e 8C42     		cmp	r4, r1
 11625 01a0 0ED9     		bls	.L1441
2431:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf, SS(fp->fs));
 11626              		.loc 1 2431 0 is_stmt 1
 11627 01a2 0BEB4121 		add	r1, fp, r1, lsl #9
 11628 01a6 08F12402 		add	r2, r8, #36
 11629              	.LVL1503:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11630              		.loc 1 540 0
 11631 01aa 40F2FF13 		movw	r3, #511
 11632 01ae 00E0     		b	.L1442
 11633              	.LVL1504:
 11634              	.L1455:
 11635              	.LBB1221:
 11636              	.LBB1222:
 11637 01b0 2B46     		mov	r3, r5
 11638              	.LVL1505:
 11639              	.L1442:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 11640              		.loc 1 541 0
 11641 01b2 12F8010B 		ldrb	r0, [r2], #1	@ zero_extendqisi2
 11642              	.LVL1506:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11643              		.loc 1 540 0
 11644 01b6 5D1E     		subs	r5, r3, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 11645              		.loc 1 541 0
 11646 01b8 01F8010B 		strb	r0, [r1], #1
 11647              	.LVL1507:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11648              		.loc 1 540 0
 11649 01bc 002B     		cmp	r3, #0
 11650 01be F7D1     		bne	.L1455
 11651              	.LVL1508:
 11652              	.L1441:
 11653              	.LBE1222:
 11654              	.LBE1221:
2434:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
 11655              		.loc 1 2434 0
 11656 01c0 6302     		lsls	r3, r4, #9
 11657              	.LVL1509:
 11658 01c2 D8F80860 		ldr	r6, [r8, #8]
2435:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				continue;
 11659              		.loc 1 2435 0
 11660 01c6 ACE7     		b	.L1440
 11661              	.LVL1510:
 11662              	.L1471:
2442:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 11663              		.loc 1 2442 0
 11664 01c8 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 11665              	.L1472:
 11666 01cc 63F07F03 		orn	r3, r3, #127
 11667 01d0 88F80630 		strb	r3, [r8, #6]
 11668 01d4 0120     		movs	r0, #1
 11669 01d6 21E7     		b	.L1468
 11670              	.LVL1511:
 11671              	.L1430:
2410:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
 11672              		.loc 1 2410 0
 11673 01d8 1846     		mov	r0, r3
 11674 01da D8F81410 		ldr	r1, [r8, #20]
 11675 01de 054B     		ldr	r3, .L1478+12
 11676 01e0 9847     		blx	r3
 11677              	.LVL1512:
 11678 01e2 B0E7     		b	.L1431
 11679              	.LVL1513:
 11680              	.L1475:
2391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_INT_ERR);
 11681              		.loc 1 2391 0
 11682 01e4 0220     		movs	r0, #2
 11683 01e6 19E7     		b	.L1468
 11684              	.L1479:
 11685              		.align	2
 11686              	.L1478:
 11687 01e8 00000000 		.word	disk_status
 11688 01ec 00000000 		.word	disk_write
 11689 01f0 00000000 		.word	disk_read
 11690 01f4 00000000 		.word	get_fat
 11691              		.cfi_endproc
 11692              	.LFE30:
 11694              		.section	.text.f_write,"ax",%progbits
 11695              		.align	2
 11696              		.global	f_write
 11697              		.thumb
 11698              		.thumb_func
 11700              	f_write:
 11701              	.LFB31:
2480:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 11702              		.loc 1 2480 0
 11703              		.cfi_startproc
 11704              		@ args = 0, pretend = 0, frame = 8
 11705              		@ frame_needed = 0, uses_anonymous_args = 0
 11706              	.LVL1514:
 11707 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 11708              	.LCFI28:
 11709              		.cfi_def_cfa_offset 36
 11710              		.cfi_offset 4, -36
 11711              		.cfi_offset 5, -32
 11712              		.cfi_offset 6, -28
 11713              		.cfi_offset 7, -24
 11714              		.cfi_offset 8, -20
 11715              		.cfi_offset 9, -16
 11716              		.cfi_offset 10, -12
 11717              		.cfi_offset 11, -8
 11718              		.cfi_offset 14, -4
 11719 0004 9A46     		mov	sl, r3
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 11720              		.loc 1 2490 0
 11721 0006 0368     		ldr	r3, [r0, #0]
 11722              	.LVL1515:
2480:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 11723              		.loc 1 2480 0
 11724 0008 9146     		mov	r9, r2
2488:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*bw = 0;	/* Initialize byte counter */
 11725              		.loc 1 2488 0
 11726 000a 0022     		movs	r2, #0
 11727              	.LVL1516:
2480:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 11728              		.loc 1 2480 0
 11729 000c 8046     		mov	r8, r0
 11730 000e 83B0     		sub	sp, sp, #12
 11731              	.LCFI29:
 11732              		.cfi_def_cfa_offset 48
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 11733              		.loc 1 2490 0
 11734 0010 8088     		ldrh	r0, [r0, #4]
 11735              	.LVL1517:
2488:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*bw = 0;	/* Initialize byte counter */
 11736              		.loc 1 2488 0
 11737 0012 CAF80020 		str	r2, [sl, #0]
 11738              	.LBB1239:
 11739              	.LBB1240:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 11740              		.loc 1 2177 0
 11741 0016 0BB1     		cbz	r3, .L1513
 11742 0018 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 11743 001a 1AB9     		cbnz	r2, .L1531
 11744              	.L1513:
 11745 001c 0920     		movs	r0, #9
 11746              	.LVL1518:
 11747              	.L1527:
 11748              	.LBE1240:
 11749              	.LBE1239:
2584:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 11750              		.loc 1 2584 0
 11751 001e 03B0     		add	sp, sp, #12
 11752 0020 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 11753              	.LVL1519:
 11754              	.L1531:
 11755              	.LBB1244:
 11756              	.LBB1243:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 11757              		.loc 1 2177 0
 11758 0024 DA88     		ldrh	r2, [r3, #6]
 11759 0026 8242     		cmp	r2, r0
 11760 0028 F8D1     		bne	.L1513
 11761              	.LVL1520:
 11762              	.LBB1241:
 11763              	.LBB1242:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 11764              		.loc 1 2182 0
 11765 002a 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 11766 002c 0191     		str	r1, [sp, #4]
 11767 002e 884B     		ldr	r3, .L1540
 11768              	.LVL1521:
 11769 0030 9847     		blx	r3
 11770              	.LVL1522:
 11771 0032 10F0010F 		tst	r0, #1
 11772 0036 0199     		ldr	r1, [sp, #4]
 11773 0038 01D0     		beq	.L1532
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
 11774              		.loc 1 2183 0
 11775 003a 0320     		movs	r0, #3
 11776 003c EFE7     		b	.L1527
 11777              	.L1532:
 11778              	.LBE1242:
 11779              	.LBE1241:
 11780              	.LBE1243:
 11781              	.LBE1244:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 11782              		.loc 1 2492 0
 11783 003e 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 11784 0042 1306     		lsls	r3, r2, #24
 11785 0044 00F10281 		bmi	.L1533
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 11786              		.loc 1 2494 0
 11787 0048 02F00203 		and	r3, r2, #2
 11788 004c DBB2     		uxtb	r3, r3
 11789 004e 0BB9     		cbnz	r3, .L1534
2495:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
 11790              		.loc 1 2495 0
 11791 0050 0720     		movs	r0, #7
 11792 0052 E4E7     		b	.L1527
 11793              	.L1534:
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 11794              		.loc 1 2496 0
 11795 0054 D8F80C30 		ldr	r3, [r8, #12]
 11796 0058 D8F80860 		ldr	r6, [r8, #8]
 11797 005c 19EB030F 		cmn	r9, r3
 11798 0060 09D3     		bcc	.L1483
 11799              	.LVL1523:
 11800              	.L1484:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 11801              		.loc 1 2580 0
 11802 0062 B342     		cmp	r3, r6
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 11803              		.loc 1 2581 0
 11804 0064 42F02002 		orr	r2, r2, #32
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 11805              		.loc 1 2580 0
 11806 0068 38BF     		it	cc
 11807 006a C8F80C60 		strcc	r6, [r8, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 11808              		.loc 1 2581 0
 11809 006e 88F80620 		strb	r2, [r8, #6]
2583:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
 11810              		.loc 1 2583 0
 11811 0072 0020     		movs	r0, #0
 11812 0074 D3E7     		b	.L1527
 11813              	.LVL1524:
 11814              	.L1483:
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 11815              		.loc 1 2498 0 discriminator 1
 11816 0076 B9F1000F 		cmp	r9, #0
 11817 007a F2D0     		beq	.L1484
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 11818              		.loc 1 2498 0 is_stmt 0
 11819 007c 8B46     		mov	fp, r1
 11820              	.LVL1525:
 11821              	.L1508:
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 11822              		.loc 1 2500 0 is_stmt 1
 11823 007e F105     		lsls	r1, r6, #23
 11824 0080 C90D     		lsrs	r1, r1, #23
 11825 0082 0029     		cmp	r1, #0
 11826 0084 3DD1     		bne	.L1486
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 11827              		.loc 1 2501 0
 11828 0086 D8F80000 		ldr	r0, [r8, #0]
 11829 008a 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 11830 008c 013B     		subs	r3, r3, #1
 11831 008e 03EA5623 		and	r3, r3, r6, lsr #9
 11832              	.LVL1526:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 11833              		.loc 1 2502 0
 11834 0092 13F0FF07 		ands	r7, r3, #255
 11835 0096 11D1     		bne	.L1487
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 11836              		.loc 1 2503 0
 11837 0098 002E     		cmp	r6, #0
 11838 009a 40F0AD80 		bne	.L1488
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 11839              		.loc 1 2504 0
 11840 009e D8F81030 		ldr	r3, [r8, #16]
 11841              	.LVL1527:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 11842              		.loc 1 2505 0
 11843 00a2 002B     		cmp	r3, #0
 11844 00a4 00F0B780 		beq	.L1535
 11845              	.LVL1528:
 11846              	.L1489:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 11847              		.loc 1 2516 0
 11848 00a8 012B     		cmp	r3, #1
 11849 00aa 00F0C780 		beq	.L1536
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 11850              		.loc 1 2517 0
 11851 00ae 5A1C     		adds	r2, r3, #1
 11852 00b0 00F09A80 		beq	.L1529
 11853 00b4 D8F80000 		ldr	r0, [r8, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 11854              		.loc 1 2518 0
 11855 00b8 C8F81430 		str	r3, [r8, #20]
 11856              	.LVL1529:
 11857              	.L1487:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 11858              		.loc 1 2524 0
 11859 00bc 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 11860 00c0 03F04002 		and	r2, r3, #64
 11861 00c4 D2B2     		uxtb	r2, r2
 11862 00c6 002A     		cmp	r2, #0
 11863 00c8 7CD1     		bne	.L1537
 11864              	.L1493:
 11865              	.LVL1530:
 11866              	.LBB1245:
 11867              	.LBB1246:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 11868              		.loc 1 806 0
 11869 00ca D8F81420 		ldr	r2, [r8, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 11870              		.loc 1 807 0
 11871 00ce 8169     		ldr	r1, [r0, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 11872              		.loc 1 806 0
 11873 00d0 023A     		subs	r2, r2, #2
 11874              	.LVL1531:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 11875              		.loc 1 807 0
 11876 00d2 0239     		subs	r1, r1, #2
 11877 00d4 8A42     		cmp	r2, r1
 11878 00d6 41D3     		bcc	.L1538
 11879              	.L1495:
 11880              	.LBE1246:
 11881              	.LBE1245:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 11882              		.loc 1 2531 0 discriminator 1
 11883 00d8 63F07F03 		orn	r3, r3, #127
 11884 00dc 88F80630 		strb	r3, [r8, #6]
 11885 00e0 0220     		movs	r0, #2
 11886              	.LVL1532:
 11887 00e2 9CE7     		b	.L1527
 11888              	.LVL1533:
 11889              	.L1497:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 11890              		.loc 1 2559 0
 11891 00e4 D8F81830 		ldr	r3, [r8, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 11892              		.loc 1 2560 0
 11893 00e8 D8F80860 		ldr	r6, [r8, #8]
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 11894              		.loc 1 2559 0
 11895 00ec A342     		cmp	r3, r4
 11896 00ee 04D0     		beq	.L1504
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 11897              		.loc 1 2560 0
 11898 00f0 D8F80C30 		ldr	r3, [r8, #12]
 11899 00f4 9E42     		cmp	r6, r3
 11900 00f6 C0F09580 		bcc	.L1539
 11901              	.LVL1534:
 11902              	.L1504:
 11903 00fa F105     		lsls	r1, r6, #23
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 11904              		.loc 1 2565 0
 11905 00fc C8F81840 		str	r4, [r8, #24]
 11906 0100 C90D     		lsrs	r1, r1, #23
 11907              	.LVL1535:
 11908              	.L1486:
2567:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wcnt = SS(fp->fs) - (fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
 11909              		.loc 1 2567 0
 11910 0102 C1F50072 		rsb	r2, r1, #512
 11911              	.LVL1536:
 11912 0106 4A45     		cmp	r2, r9
 11913 0108 28BF     		it	cs
 11914 010a 4A46     		movcs	r2, r9
 11915              	.LVL1537:
2575:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(&fp->buf[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
 11916              		.loc 1 2575 0
 11917 010c 08EB0105 		add	r5, r8, r1
 11918 0110 2435     		adds	r5, r5, #36
 11919              	.LVL1538:
 11920              	.LBB1248:
 11921              	.LBB1249:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11922              		.loc 1 540 0
 11923 0112 541E     		subs	r4, r2, #1
 11924              	.LVL1539:
 11925 0114 5AB1     		cbz	r2, .L1506
 11926 0116 5E46     		mov	r6, fp
 11927 0118 00E0     		b	.L1507
 11928              	.LVL1540:
 11929              	.L1517:
 11930 011a 1C46     		mov	r4, r3
 11931              	.LVL1541:
 11932              	.L1507:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 11933              		.loc 1 541 0
 11934 011c 16F8017B 		ldrb	r7, [r6], #1	@ zero_extendqisi2
 11935              	.LVL1542:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11936              		.loc 1 540 0
 11937 0120 631E     		subs	r3, r4, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 11938              		.loc 1 541 0
 11939 0122 05F8017B 		strb	r7, [r5], #1
 11940              	.LVL1543:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 11941              		.loc 1 540 0
 11942 0126 002C     		cmp	r4, #0
 11943 0128 F7D1     		bne	.L1517
 11944 012a D8F80860 		ldr	r6, [r8, #8]
 11945              	.LVL1544:
 11946              	.L1506:
 11947              	.LBE1249:
 11948              	.LBE1248:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 11949              		.loc 1 2576 0
 11950 012e 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 11951 0132 43F04003 		orr	r3, r3, #64
 11952 0136 88F80630 		strb	r3, [r8, #6]
 11953              	.LVL1545:
 11954              	.L1502:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 11955              		.loc 1 2499 0
 11956 013a DAF80030 		ldr	r3, [sl, #0]
 11957 013e B618     		adds	r6, r6, r2
 11958 0140 9B18     		adds	r3, r3, r2
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 11959              		.loc 1 2498 0
 11960 0142 B9EB0209 		subs	r9, r9, r2
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 11961              		.loc 1 2499 0
 11962 0146 C8F80860 		str	r6, [r8, #8]
 11963 014a 9344     		add	fp, fp, r2
 11964              	.LVL1546:
 11965 014c CAF80030 		str	r3, [sl, #0]
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 11966              		.loc 1 2498 0
 11967 0150 95D1     		bne	.L1508
 11968 0152 D8F80C30 		ldr	r3, [r8, #12]
 11969 0156 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 11970              	.LVL1547:
 11971 015a 82E7     		b	.L1484
 11972              	.LVL1548:
 11973              	.L1538:
 11974              	.LBB1250:
 11975              	.LBB1247:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 11976              		.loc 1 808 0
 11977 015c 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 11978 015e 846A     		ldr	r4, [r0, #40]
 11979 0160 02FB0144 		mla	r4, r2, r1, r4
 11980              	.LBE1247:
 11981              	.LBE1250:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 11982              		.loc 1 2531 0
 11983 0164 002C     		cmp	r4, #0
 11984 0166 B7D0     		beq	.L1495
2534:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
 11985              		.loc 1 2534 0
 11986 0168 5FEA5925 		lsrs	r5, r9, #9
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 11987              		.loc 1 2532 0
 11988 016c 3C44     		add	r4, r7, r4
 11989              	.LVL1549:
2534:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
 11990              		.loc 1 2534 0
 11991 016e B9D0     		beq	.L1497
2535:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 11992              		.loc 1 2535 0
 11993 0170 7B19     		adds	r3, r7, r5
 11994 0172 8B42     		cmp	r3, r1
2536:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					cc = fp->fs->csize - csect;
 11995              		.loc 1 2536 0
 11996 0174 88BF     		it	hi
 11997 0176 C7EB0105 		rsbhi	r5, r7, r1
 11998              	.LVL1550:
2537:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, (BYTE)cc) != RES_OK)
 11999              		.loc 1 2537 0
 12000 017a 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 12001              	.LVL1551:
 12002 017c 354E     		ldr	r6, .L1540+4
 12003 017e 5946     		mov	r1, fp
 12004 0180 2246     		mov	r2, r4
 12005              	.LVL1552:
 12006 0182 EBB2     		uxtb	r3, r5
 12007 0184 B047     		blx	r6
 12008              	.LVL1553:
 12009 0186 78BB     		cbnz	r0, .L1529
2545:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write 
 12010              		.loc 1 2545 0
 12011 0188 D8F81830 		ldr	r3, [r8, #24]
 12012 018c 1C1B     		subs	r4, r3, r4
 12013              	.LVL1554:
 12014 018e A542     		cmp	r5, r4
 12015 0190 14D9     		bls	.L1500
2546:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 12016              		.loc 1 2546 0
 12017 0192 0BEB4423 		add	r3, fp, r4, lsl #9
 12018 0196 08F12402 		add	r2, r8, #36
 12019              	.LVL1555:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 12020              		.loc 1 540 0
 12021 019a 40F2FF14 		movw	r4, #511
 12022 019e 00E0     		b	.L1501
 12023              	.LVL1556:
 12024              	.L1516:
 12025              	.LBB1251:
 12026              	.LBB1252:
 12027 01a0 0446     		mov	r4, r0
 12028              	.LVL1557:
 12029              	.L1501:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 12030              		.loc 1 541 0
 12031 01a2 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 12032              	.LVL1558:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 12033              		.loc 1 540 0
 12034 01a6 601E     		subs	r0, r4, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 12035              		.loc 1 541 0
 12036 01a8 02F8011B 		strb	r1, [r2], #1
 12037              	.LVL1559:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 12038              		.loc 1 540 0
 12039 01ac 002C     		cmp	r4, #0
 12040 01ae F7D1     		bne	.L1516
 12041              	.LBE1252:
 12042              	.LBE1251:
2547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->flag &= ~FA__DIRTY;
 12043              		.loc 1 2547 0
 12044 01b0 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 12045              	.LVL1560:
 12046 01b4 23F04003 		bic	r3, r3, #64
 12047 01b8 88F80630 		strb	r3, [r8, #6]
 12048              	.LVL1561:
 12049              	.L1500:
2550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
 12050              		.loc 1 2550 0
 12051 01bc 6A02     		lsls	r2, r5, #9
 12052              	.LVL1562:
 12053 01be D8F80860 		ldr	r6, [r8, #8]
2551:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				continue;
 12054              		.loc 1 2551 0
 12055 01c2 BAE7     		b	.L1502
 12056              	.LVL1563:
 12057              	.L1537:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 12058              		.loc 1 2525 0
 12059 01c4 0123     		movs	r3, #1
 12060 01c6 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 12061 01c8 D8F81820 		ldr	r2, [r8, #24]
 12062 01cc 214C     		ldr	r4, .L1540+4
 12063 01ce 08F12401 		add	r1, r8, #36
 12064 01d2 A047     		blx	r4
 12065              	.LVL1564:
2526:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 12066              		.loc 1 2526 0
 12067 01d4 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 12068              		.loc 1 2525 0
 12069 01d8 40B9     		cbnz	r0, .L1530
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 12070              		.loc 1 2527 0
 12071 01da 03F0BF03 		and	r3, r3, #191
 12072 01de D8F80000 		ldr	r0, [r8, #0]
 12073 01e2 88F80630 		strb	r3, [r8, #6]
 12074 01e6 70E7     		b	.L1493
 12075              	.L1529:
2538:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 12076              		.loc 1 2538 0
 12077 01e8 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 12078              	.L1530:
 12079 01ec 63F07F03 		orn	r3, r3, #127
 12080 01f0 88F80630 		strb	r3, [r8, #6]
 12081 01f4 0120     		movs	r0, #1
 12082 01f6 12E7     		b	.L1527
 12083              	.LVL1565:
 12084              	.L1488:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 12085              		.loc 1 2513 0
 12086 01f8 174B     		ldr	r3, .L1540+8
 12087              	.LVL1566:
 12088 01fa D8F81410 		ldr	r1, [r8, #20]
 12089 01fe 9847     		blx	r3
 12090              	.LVL1567:
 12091 0200 0346     		mov	r3, r0
 12092              	.LVL1568:
 12093              	.L1490:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 12094              		.loc 1 2515 0
 12095 0202 002B     		cmp	r3, #0
 12096 0204 7FF450AF 		bne	.L1489
 12097 0208 D8F80860 		ldr	r6, [r8, #8]
 12098 020c D8F80C30 		ldr	r3, [r8, #12]
 12099 0210 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 12100 0214 25E7     		b	.L1484
 12101              	.LVL1569:
 12102              	.L1535:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 12103              		.loc 1 2506 0
 12104 0216 104B     		ldr	r3, .L1540+8
 12105              	.LVL1570:
 12106 0218 3946     		mov	r1, r7
 12107 021a 9847     		blx	r3
 12108              	.LVL1571:
 12109 021c 0346     		mov	r3, r0
 12110              	.LVL1572:
 12111 021e C8F81000 		str	r0, [r8, #16]
 12112 0222 EEE7     		b	.L1490
 12113              	.LVL1573:
 12114              	.L1539:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 12115              		.loc 1 2561 0 discriminator 1
 12116 0224 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 12117              	.LVL1574:
 12118 0226 0D4D     		ldr	r5, .L1540+12
 12119              	.LVL1575:
 12120 0228 08F12401 		add	r1, r8, #36
 12121 022c 2246     		mov	r2, r4
 12122              	.LVL1576:
 12123 022e 0123     		movs	r3, #1
 12124 0230 A847     		blx	r5
 12125              	.LVL1577:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 12126              		.loc 1 2560 0 discriminator 1
 12127 0232 0028     		cmp	r0, #0
 12128 0234 D8D1     		bne	.L1529
 12129 0236 D8F80860 		ldr	r6, [r8, #8]
 12130 023a 5EE7     		b	.L1504
 12131              	.LVL1578:
 12132              	.L1536:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 12133              		.loc 1 2516 0 discriminator 1
 12134 023c 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 12135              	.LVL1579:
 12136 0240 63F07F03 		orn	r3, r3, #127
 12137 0244 88F80630 		strb	r3, [r8, #6]
 12138 0248 0220     		movs	r0, #2
 12139 024a E8E6     		b	.L1527
 12140              	.LVL1580:
 12141              	.L1533:
2493:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_INT_ERR);
 12142              		.loc 1 2493 0
 12143 024c 0220     		movs	r0, #2
 12144 024e E6E6     		b	.L1527
 12145              	.L1541:
 12146              		.align	2
 12147              	.L1540:
 12148 0250 00000000 		.word	disk_status
 12149 0254 00000000 		.word	disk_write
 12150 0258 00000000 		.word	create_chain
 12151 025c 00000000 		.word	disk_read
 12152              		.cfi_endproc
 12153              	.LFE31:
 12155              		.section	.text.f_sync,"ax",%progbits
 12156              		.align	2
 12157              		.global	f_sync
 12158              		.thumb
 12159              		.thumb_func
 12161              	f_sync:
 12162              	.LFB32:
2596:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12163              		.loc 1 2596 0
 12164              		.cfi_startproc
 12165              		@ args = 0, pretend = 0, frame = 0
 12166              		@ frame_needed = 0, uses_anonymous_args = 0
 12167              	.LVL1581:
2602:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
 12168              		.loc 1 2602 0
 12169 0000 0368     		ldr	r3, [r0, #0]
 12170 0002 8188     		ldrh	r1, [r0, #4]
 12171              	.LVL1582:
2596:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12172              		.loc 1 2596 0
 12173 0004 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, sl, lr}
 12174              	.LCFI30:
 12175              		.cfi_def_cfa_offset 32
 12176              		.cfi_offset 4, -32
 12177              		.cfi_offset 5, -28
 12178              		.cfi_offset 6, -24
 12179              		.cfi_offset 7, -20
 12180              		.cfi_offset 8, -16
 12181              		.cfi_offset 9, -12
 12182              		.cfi_offset 10, -8
 12183              		.cfi_offset 14, -4
2596:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12184              		.loc 1 2596 0
 12185 0008 0446     		mov	r4, r0
 12186              	.LBB1263:
 12187              	.LBB1264:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 12188              		.loc 1 2177 0
 12189 000a 0BB1     		cbz	r3, .L1557
 12190 000c 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 12191 000e 12B9     		cbnz	r2, .L1565
 12192              	.L1557:
 12193 0010 0920     		movs	r0, #9
 12194              	.LVL1583:
 12195 0012 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12196              	.LVL1584:
 12197              	.L1565:
 12198 0016 DA88     		ldrh	r2, [r3, #6]
 12199 0018 8A42     		cmp	r2, r1
 12200 001a F9D1     		bne	.L1557
 12201              	.LVL1585:
 12202              	.LBB1265:
 12203              	.LBB1266:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 12204              		.loc 1 2182 0
 12205 001c 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 12206              	.LVL1586:
 12207 001e 464B     		ldr	r3, .L1570
 12208              	.LVL1587:
 12209 0020 9847     		blx	r3
 12210              	.LVL1588:
 12211 0022 C107     		lsls	r1, r0, #31
 12212 0024 02D5     		bpl	.L1566
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
 12213              		.loc 1 2183 0
 12214 0026 0320     		movs	r0, #3
 12215 0028 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12216              	.L1566:
 12217              	.LBE1266:
 12218              	.LBE1265:
 12219              	.LBE1264:
 12220              	.LBE1263:
2604:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
 12221              		.loc 1 2604 0
 12222 002c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 12223 002e 03F02000 		and	r0, r3, #32
 12224 0032 C0B2     		uxtb	r0, r0
 12225 0034 0028     		cmp	r0, #0
 12226 0036 6ED0     		beq	.L1567
2606:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {
 12227              		.loc 1 2606 0
 12228 0038 03F04003 		and	r3, r3, #64
 12229 003c DBB2     		uxtb	r3, r3
 12230 003e 6BB1     		cbz	r3, .L1545
2607:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 12231              		.loc 1 2607 0
 12232 0040 2146     		mov	r1, r4
 12233 0042 A269     		ldr	r2, [r4, #24]
 12234 0044 51F8243B 		ldr	r3, [r1], #36
 12235 0048 3C4D     		ldr	r5, .L1570+4
 12236 004a 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 12237 004c 0123     		movs	r3, #1
 12238 004e A847     		blx	r5
 12239              	.LVL1589:
 12240 0050 0028     		cmp	r0, #0
 12241 0052 62D1     		bne	.L1550
2609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 12242              		.loc 1 2609 0
 12243 0054 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 12244 0056 23F04003 		bic	r3, r3, #64
 12245 005a A371     		strb	r3, [r4, #6]
 12246              	.L1545:
2613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fp->fs, fp->dir_sect);
 12247              		.loc 1 2613 0
 12248 005c 2568     		ldr	r5, [r4, #0]
 12249 005e E769     		ldr	r7, [r4, #28]
 12250              	.LVL1590:
 12251              	.LBB1267:
 12252              	.LBB1268:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 12253              		.loc 1 727 0
 12254 0060 EE6A     		ldr	r6, [r5, #44]
 12255              	.LVL1591:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 12256              		.loc 1 728 0
 12257 0062 B742     		cmp	r7, r6
 12258 0064 04D0     		beq	.L1553
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 12259              		.loc 1 730 0
 12260 0066 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 12261 0068 002B     		cmp	r3, #0
 12262 006a 2FD1     		bne	.L1548
 12263              	.L1551:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 12264              		.loc 1 743 0
 12265 006c 002F     		cmp	r7, #0
 12266 006e 57D1     		bne	.L1568
 12267              	.LVL1592:
 12268              	.L1553:
 12269              	.LBE1268:
 12270              	.LBE1267:
2615:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir = fp->dir_ptr;
 12271              		.loc 1 2615 0
 12272 0070 256A     		ldr	r5, [r4, #32]
 12273              	.LVL1593:
2616:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
 12274              		.loc 1 2616 0
 12275 0072 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 12276 0074 43F02003 		orr	r3, r3, #32
 12277 0078 EB72     		strb	r3, [r5, #11]
2617:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
 12278              		.loc 1 2617 0
 12279 007a E368     		ldr	r3, [r4, #12]
 12280 007c 2B77     		strb	r3, [r5, #28]
 12281 007e A389     		ldrh	r3, [r4, #12]
 12282 0080 1B0A     		lsrs	r3, r3, #8
 12283 0082 6B77     		strb	r3, [r5, #29]
 12284 0084 E389     		ldrh	r3, [r4, #14]
 12285 0086 AB77     		strb	r3, [r5, #30]
 12286 0088 E37B     		ldrb	r3, [r4, #15]	@ zero_extendqisi2
 12287 008a EB77     		strb	r3, [r5, #31]
2618:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, fp->sclust);					/* Update start cluster */
 12288              		.loc 1 2618 0
 12289 008c 2369     		ldr	r3, [r4, #16]
 12290 008e AB76     		strb	r3, [r5, #26]
 12291 0090 238A     		ldrh	r3, [r4, #16]
 12292 0092 1B0A     		lsrs	r3, r3, #8
 12293 0094 EB76     		strb	r3, [r5, #27]
 12294 0096 638A     		ldrh	r3, [r4, #18]
 12295 0098 2B75     		strb	r3, [r5, #20]
 12296 009a 638A     		ldrh	r3, [r4, #18]
 12297 009c 1B0A     		lsrs	r3, r3, #8
 12298 009e 6B75     		strb	r3, [r5, #21]
2619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tim = get_fattime();						/* Update updated time */
 12299              		.loc 1 2619 0
 12300 00a0 274B     		ldr	r3, .L1570+8
 12301 00a2 9847     		blx	r3
 12302              	.LVL1594:
2620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 12303              		.loc 1 2620 0
 12304 00a4 020C     		lsrs	r2, r0, #16
 12305 00a6 030E     		lsrs	r3, r0, #24
 12306 00a8 C0F30721 		ubfx	r1, r0, #8, #8
 12307 00ac A875     		strb	r0, [r5, #22]
 12308 00ae E975     		strb	r1, [r5, #23]
 12309 00b0 2A76     		strb	r2, [r5, #24]
 12310 00b2 6B76     		strb	r3, [r5, #25]
2621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 12311              		.loc 1 2621 0
 12312 00b4 A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
2622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fs->wflag = 1;
 12313              		.loc 1 2622 0
 12314 00b6 2368     		ldr	r3, [r4, #0]
2621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 12315              		.loc 1 2621 0
 12316 00b8 22F02002 		bic	r2, r2, #32
 12317 00bc A271     		strb	r2, [r4, #6]
2622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fs->wflag = 1;
 12318              		.loc 1 2622 0
 12319 00be 0122     		movs	r2, #1
 12320 00c0 1A71     		strb	r2, [r3, #4]
2623:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(fp->fs);
 12321              		.loc 1 2623 0
 12322 00c2 2068     		ldr	r0, [r4, #0]
 12323              	.LVL1595:
 12324 00c4 1F4B     		ldr	r3, .L1570+12
 12325 00c6 9847     		blx	r3
 12326              	.LVL1596:
 12327 00c8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12328              	.LVL1597:
 12329              	.L1548:
 12330              	.LBB1274:
 12331              	.LBB1272:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 12332              		.loc 1 731 0
 12333 00cc 05F13009 		add	r9, r5, #48
 12334 00d0 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 12335 00d2 DFF868A0 		ldr	sl, .L1570+4
 12336 00d6 4946     		mov	r1, r9
 12337 00d8 3246     		mov	r2, r6
 12338 00da 0123     		movs	r3, #1
 12339 00dc D047     		blx	sl
 12340              	.LVL1598:
 12341 00de E0B9     		cbnz	r0, .L1550
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 12342              		.loc 1 734 0
 12343 00e0 EB69     		ldr	r3, [r5, #28]
 12344 00e2 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 12345              		.loc 1 733 0
 12346 00e4 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 12347              		.loc 1 734 0
 12348 00e6 9A18     		adds	r2, r3, r2
 12349 00e8 9642     		cmp	r6, r2
 12350 00ea BFD2     		bcs	.L1551
 12351              	.LBB1269:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12352              		.loc 1 736 0
 12353 00ec 95F80380 		ldrb	r8, [r5, #3]	@ zero_extendqisi2
 12354              	.LVL1599:
 12355 00f0 B8F1010F 		cmp	r8, #1
 12356 00f4 01D8     		bhi	.L1564
 12357 00f6 B9E7     		b	.L1551
 12358              	.LVL1600:
 12359              	.L1569:
 12360 00f8 EB69     		ldr	r3, [r5, #28]
 12361              	.LVL1601:
 12362              	.L1564:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 12363              		.loc 1 737 0
 12364 00fa F618     		adds	r6, r6, r3
 12365              	.LVL1602:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12366              		.loc 1 736 0
 12367 00fc 08F1FF38 		add	r8, r8, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 12368              		.loc 1 738 0
 12369 0100 0123     		movs	r3, #1
 12370 0102 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 12371 0104 4946     		mov	r1, r9
 12372 0106 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12373              		.loc 1 736 0
 12374 0108 5FFA88F8 		uxtb	r8, r8
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 12375              		.loc 1 738 0
 12376 010c D047     		blx	sl
 12377              	.LVL1603:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12378              		.loc 1 736 0
 12379 010e B8F1010F 		cmp	r8, #1
 12380 0112 F1D8     		bhi	.L1569
 12381 0114 AAE7     		b	.L1551
 12382              	.LVL1604:
 12383              	.L1567:
 12384              	.LBE1269:
 12385              	.LBE1272:
 12386              	.LBE1274:
2629:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 12387              		.loc 1 2629 0
 12388 0116 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12389              	.L1550:
2608:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 12390              		.loc 1 2608 0
 12391 011a 0120     		movs	r0, #1
 12392 011c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12393              	.LVL1605:
 12394              	.L1568:
 12395              	.LBB1275:
 12396              	.LBB1273:
 12397              	.LBB1270:
 12398              	.LBB1271:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 12399              		.loc 1 744 0
 12400 0120 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 12401 0122 094E     		ldr	r6, .L1570+16
 12402              	.LVL1606:
 12403 0124 05F13001 		add	r1, r5, #48
 12404 0128 3A46     		mov	r2, r7
 12405 012a 0123     		movs	r3, #1
 12406 012c B047     		blx	r6
 12407              	.LVL1607:
 12408 012e 0028     		cmp	r0, #0
 12409 0130 F3D1     		bne	.L1550
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 12410              		.loc 1 746 0
 12411 0132 EF62     		str	r7, [r5, #44]
 12412 0134 9CE7     		b	.L1553
 12413              	.L1571:
 12414 0136 00BF     		.align	2
 12415              	.L1570:
 12416 0138 00000000 		.word	disk_status
 12417 013c 00000000 		.word	disk_write
 12418 0140 00000000 		.word	get_fattime
 12419 0144 00000000 		.word	sync
 12420 0148 00000000 		.word	disk_read
 12421              	.LBE1271:
 12422              	.LBE1270:
 12423              	.LBE1273:
 12424              	.LBE1275:
 12425              		.cfi_endproc
 12426              	.LFE32:
 12428              		.section	.text.f_close,"ax",%progbits
 12429              		.align	2
 12430              		.global	f_close
 12431              		.thumb
 12432              		.thumb_func
 12434              	f_close:
 12435              	.LFB33:
2643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12436              		.loc 1 2643 0
 12437              		.cfi_startproc
 12438              		@ args = 0, pretend = 0, frame = 0
 12439              		@ frame_needed = 0, uses_anonymous_args = 0
 12440              	.LVL1608:
 12441              	.LBB1288:
 12442              	.LBB1289:
2602:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
 12443              		.loc 1 2602 0
 12444 0000 0368     		ldr	r3, [r0, #0]
 12445 0002 8188     		ldrh	r1, [r0, #4]
 12446              	.LBE1289:
 12447              	.LBE1288:
2643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12448              		.loc 1 2643 0
 12449 0004 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, sl, lr}
 12450              	.LCFI31:
 12451              		.cfi_def_cfa_offset 32
 12452              		.cfi_offset 4, -32
 12453              		.cfi_offset 5, -28
 12454              		.cfi_offset 6, -24
 12455              		.cfi_offset 7, -20
 12456              		.cfi_offset 8, -16
 12457              		.cfi_offset 9, -12
 12458              		.cfi_offset 10, -8
 12459              		.cfi_offset 14, -4
2643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12460              		.loc 1 2643 0
 12461 0008 0446     		mov	r4, r0
 12462              	.LVL1609:
 12463              	.LBB1308:
 12464              	.LBB1305:
 12465              	.LBB1290:
 12466              	.LBB1291:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 12467              		.loc 1 2177 0
 12468 000a 0BB1     		cbz	r3, .L1589
 12469 000c 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 12470 000e 12B9     		cbnz	r2, .L1597
 12471              	.L1589:
 12472 0010 0920     		movs	r0, #9
 12473              	.LVL1610:
 12474 0012 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12475              	.LVL1611:
 12476              	.L1597:
 12477 0016 DA88     		ldrh	r2, [r3, #6]
 12478 0018 8A42     		cmp	r2, r1
 12479 001a F9D1     		bne	.L1589
 12480              	.LVL1612:
 12481              	.LBB1292:
 12482              	.LBB1293:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 12483              		.loc 1 2182 0
 12484 001c 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 12485              	.LVL1613:
 12486 001e 474B     		ldr	r3, .L1601
 12487              	.LVL1614:
 12488 0020 9847     		blx	r3
 12489              	.LVL1615:
 12490 0022 C007     		lsls	r0, r0, #31
 12491 0024 02D5     		bpl	.L1598
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
 12492              		.loc 1 2183 0
 12493 0026 0320     		movs	r0, #3
 12494 0028 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12495              	.L1598:
 12496              	.LBE1293:
 12497              	.LBE1292:
 12498              	.LBE1291:
 12499              	.LBE1290:
2604:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
 12500              		.loc 1 2604 0
 12501 002c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 12502 002e 03F02002 		and	r2, r3, #32
 12503 0032 D2B2     		uxtb	r2, r2
 12504 0034 002A     		cmp	r2, #0
 12505 0036 48D0     		beq	.L1586
2606:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {
 12506              		.loc 1 2606 0
 12507 0038 03F04003 		and	r3, r3, #64
 12508 003c DBB2     		uxtb	r3, r3
 12509 003e 6BB1     		cbz	r3, .L1575
2607:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 12510              		.loc 1 2607 0
 12511 0040 2146     		mov	r1, r4
 12512 0042 A269     		ldr	r2, [r4, #24]
 12513 0044 51F8243B 		ldr	r3, [r1], #36
 12514 0048 3D4D     		ldr	r5, .L1601+4
 12515 004a 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 12516 004c 0123     		movs	r3, #1
 12517 004e A847     		blx	r5
 12518              	.LVL1616:
 12519 0050 0028     		cmp	r0, #0
 12520 0052 65D1     		bne	.L1580
2609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 12521              		.loc 1 2609 0
 12522 0054 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 12523 0056 23F04003 		bic	r3, r3, #64
 12524 005a A371     		strb	r3, [r4, #6]
 12525              	.L1575:
2613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = move_window(fp->fs, fp->dir_sect);
 12526              		.loc 1 2613 0
 12527 005c 2568     		ldr	r5, [r4, #0]
 12528 005e E769     		ldr	r7, [r4, #28]
 12529              	.LVL1617:
 12530              	.LBB1295:
 12531              	.LBB1296:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 12532              		.loc 1 727 0
 12533 0060 EE6A     		ldr	r6, [r5, #44]
 12534              	.LVL1618:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 12535              		.loc 1 728 0
 12536 0062 B742     		cmp	r7, r6
 12537 0064 04D0     		beq	.L1584
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 12538              		.loc 1 730 0
 12539 0066 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 12540 0068 002B     		cmp	r3, #0
 12541 006a 32D1     		bne	.L1578
 12542              	.L1581:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 12543              		.loc 1 743 0
 12544 006c 002F     		cmp	r7, #0
 12545 006e 5AD1     		bne	.L1599
 12546              	.LVL1619:
 12547              	.L1584:
 12548              	.LBE1296:
 12549              	.LBE1295:
2615:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir = fp->dir_ptr;
 12550              		.loc 1 2615 0
 12551 0070 256A     		ldr	r5, [r4, #32]
 12552              	.LVL1620:
2616:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
 12553              		.loc 1 2616 0
 12554 0072 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 12555 0074 43F02003 		orr	r3, r3, #32
 12556 0078 EB72     		strb	r3, [r5, #11]
2617:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
 12557              		.loc 1 2617 0
 12558 007a E368     		ldr	r3, [r4, #12]
 12559 007c 2B77     		strb	r3, [r5, #28]
 12560 007e A389     		ldrh	r3, [r4, #12]
 12561 0080 1B0A     		lsrs	r3, r3, #8
 12562 0082 6B77     		strb	r3, [r5, #29]
 12563 0084 E389     		ldrh	r3, [r4, #14]
 12564 0086 AB77     		strb	r3, [r5, #30]
 12565 0088 E37B     		ldrb	r3, [r4, #15]	@ zero_extendqisi2
 12566 008a EB77     		strb	r3, [r5, #31]
2618:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, fp->sclust);					/* Update start cluster */
 12567              		.loc 1 2618 0
 12568 008c 2369     		ldr	r3, [r4, #16]
 12569 008e AB76     		strb	r3, [r5, #26]
 12570 0090 238A     		ldrh	r3, [r4, #16]
 12571 0092 1B0A     		lsrs	r3, r3, #8
 12572 0094 EB76     		strb	r3, [r5, #27]
 12573 0096 638A     		ldrh	r3, [r4, #18]
 12574 0098 2B75     		strb	r3, [r5, #20]
 12575 009a 638A     		ldrh	r3, [r4, #18]
 12576 009c 1B0A     		lsrs	r3, r3, #8
 12577 009e 6B75     		strb	r3, [r5, #21]
2619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tim = get_fattime();						/* Update updated time */
 12578              		.loc 1 2619 0
 12579 00a0 284B     		ldr	r3, .L1601+8
 12580 00a2 9847     		blx	r3
 12581              	.LVL1621:
2620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 12582              		.loc 1 2620 0
 12583 00a4 020C     		lsrs	r2, r0, #16
 12584 00a6 030E     		lsrs	r3, r0, #24
 12585 00a8 C0F30721 		ubfx	r1, r0, #8, #8
 12586 00ac A875     		strb	r0, [r5, #22]
 12587 00ae E975     		strb	r1, [r5, #23]
 12588 00b0 2A76     		strb	r2, [r5, #24]
 12589 00b2 6B76     		strb	r3, [r5, #25]
2621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 12590              		.loc 1 2621 0
 12591 00b4 A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
2622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fs->wflag = 1;
 12592              		.loc 1 2622 0
 12593 00b6 2368     		ldr	r3, [r4, #0]
2621:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 12594              		.loc 1 2621 0
 12595 00b8 22F02002 		bic	r2, r2, #32
 12596 00bc A271     		strb	r2, [r4, #6]
2622:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fs->wflag = 1;
 12597              		.loc 1 2622 0
 12598 00be 0122     		movs	r2, #1
 12599 00c0 1A71     		strb	r2, [r3, #4]
2623:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(fp->fs);
 12600              		.loc 1 2623 0
 12601 00c2 2068     		ldr	r0, [r4, #0]
 12602              	.LVL1622:
 12603 00c4 204B     		ldr	r3, .L1601+12
 12604 00c6 9847     		blx	r3
 12605              	.LVL1623:
 12606              	.LBE1305:
 12607              	.LBE1308:
2667:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) fp->fs = 0;	/* Discard file object */
 12608              		.loc 1 2667 0
 12609 00c8 40BB     		cbnz	r0, .L1592
 12610              	.LVL1624:
 12611              	.L1586:
2667:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) fp->fs = 0;	/* Discard file object */
 12612              		.loc 1 2667 0 is_stmt 0 discriminator 1
 12613 00ca 0020     		movs	r0, #0
 12614 00cc 2060     		str	r0, [r4, #0]
 12615 00ce BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12616              	.LVL1625:
 12617              	.L1578:
 12618              	.LBB1309:
 12619              	.LBB1306:
 12620              	.LBB1302:
 12621              	.LBB1300:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 12622              		.loc 1 731 0 is_stmt 1
 12623 00d2 05F13009 		add	r9, r5, #48
 12624 00d6 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 12625 00d8 DFF864A0 		ldr	sl, .L1601+4
 12626 00dc 4946     		mov	r1, r9
 12627 00de 3246     		mov	r2, r6
 12628 00e0 0123     		movs	r3, #1
 12629 00e2 D047     		blx	sl
 12630              	.LVL1626:
 12631 00e4 E0B9     		cbnz	r0, .L1580
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 12632              		.loc 1 734 0
 12633 00e6 EB69     		ldr	r3, [r5, #28]
 12634 00e8 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 12635              		.loc 1 733 0
 12636 00ea 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 12637              		.loc 1 734 0
 12638 00ec 9A18     		adds	r2, r3, r2
 12639 00ee 9642     		cmp	r6, r2
 12640 00f0 BCD2     		bcs	.L1581
 12641              	.LBB1297:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12642              		.loc 1 736 0
 12643 00f2 95F80380 		ldrb	r8, [r5, #3]	@ zero_extendqisi2
 12644              	.LVL1627:
 12645 00f6 B8F1010F 		cmp	r8, #1
 12646 00fa 01D8     		bhi	.L1596
 12647 00fc B6E7     		b	.L1581
 12648              	.LVL1628:
 12649              	.L1600:
 12650 00fe EB69     		ldr	r3, [r5, #28]
 12651              	.LVL1629:
 12652              	.L1596:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 12653              		.loc 1 737 0
 12654 0100 F618     		adds	r6, r6, r3
 12655              	.LVL1630:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12656              		.loc 1 736 0
 12657 0102 08F1FF38 		add	r8, r8, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 12658              		.loc 1 738 0
 12659 0106 0123     		movs	r3, #1
 12660 0108 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 12661 010a 4946     		mov	r1, r9
 12662 010c 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12663              		.loc 1 736 0
 12664 010e 5FFA88F8 		uxtb	r8, r8
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 12665              		.loc 1 738 0
 12666 0112 D047     		blx	sl
 12667              	.LVL1631:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 12668              		.loc 1 736 0
 12669 0114 B8F1010F 		cmp	r8, #1
 12670 0118 F1D8     		bhi	.L1600
 12671 011a A7E7     		b	.L1581
 12672              	.LVL1632:
 12673              	.L1592:
 12674              	.LBE1297:
 12675              	.LBE1300:
 12676              	.LBE1302:
 12677              	.LBE1306:
 12678              	.LBE1309:
2670:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 12679              		.loc 1 2670 0
 12680 011c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12681              	.LVL1633:
 12682              	.L1580:
 12683              	.LBB1310:
 12684              	.LBB1307:
 12685              	.LBB1303:
 12686              	.LBB1294:
2608:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 12687              		.loc 1 2608 0
 12688 0120 0120     		movs	r0, #1
 12689 0122 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 12690              	.LVL1634:
 12691              	.L1599:
 12692              	.LBE1294:
 12693              	.LBE1303:
 12694              	.LBB1304:
 12695              	.LBB1301:
 12696              	.LBB1298:
 12697              	.LBB1299:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 12698              		.loc 1 744 0
 12699 0126 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 12700 0128 084E     		ldr	r6, .L1601+16
 12701              	.LVL1635:
 12702 012a 05F13001 		add	r1, r5, #48
 12703 012e 3A46     		mov	r2, r7
 12704 0130 0123     		movs	r3, #1
 12705 0132 B047     		blx	r6
 12706              	.LVL1636:
 12707 0134 0028     		cmp	r0, #0
 12708 0136 F3D1     		bne	.L1580
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 12709              		.loc 1 746 0
 12710 0138 EF62     		str	r7, [r5, #44]
 12711 013a 99E7     		b	.L1584
 12712              	.L1602:
 12713              		.align	2
 12714              	.L1601:
 12715 013c 00000000 		.word	disk_status
 12716 0140 00000000 		.word	disk_write
 12717 0144 00000000 		.word	get_fattime
 12718 0148 00000000 		.word	sync
 12719 014c 00000000 		.word	disk_read
 12720              	.LBE1299:
 12721              	.LBE1298:
 12722              	.LBE1301:
 12723              	.LBE1304:
 12724              	.LBE1307:
 12725              	.LBE1310:
 12726              		.cfi_endproc
 12727              	.LFE33:
 12729              		.section	.text.f_lseek,"ax",%progbits
 12730              		.align	2
 12731              		.global	f_lseek
 12732              		.thumb
 12733              		.thumb_func
 12735              	f_lseek:
 12736              	.LFB34:
2808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12737              		.loc 1 2808 0
 12738              		.cfi_startproc
 12739              		@ args = 0, pretend = 0, frame = 0
 12740              		@ frame_needed = 0, uses_anonymous_args = 0
 12741              	.LVL1637:
 12742 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, sl, fp, lr}
 12743              	.LCFI32:
 12744              		.cfi_def_cfa_offset 40
 12745              		.cfi_offset 3, -40
 12746              		.cfi_offset 4, -36
 12747              		.cfi_offset 5, -32
 12748              		.cfi_offset 6, -28
 12749              		.cfi_offset 7, -24
 12750              		.cfi_offset 8, -20
 12751              		.cfi_offset 9, -16
 12752              		.cfi_offset 10, -12
 12753              		.cfi_offset 11, -8
 12754              		.cfi_offset 14, -4
2812:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
 12755              		.loc 1 2812 0
 12756 0004 0368     		ldr	r3, [r0, #0]
2808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 12757              		.loc 1 2808 0
 12758 0006 0E46     		mov	r6, r1
 12759 0008 0446     		mov	r4, r0
2812:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
 12760              		.loc 1 2812 0
 12761 000a 8188     		ldrh	r1, [r0, #4]
 12762              	.LVL1638:
 12763              	.LBB1322:
 12764              	.LBB1323:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 12765              		.loc 1 2177 0
 12766 000c 0BB1     		cbz	r3, .L1640
 12767 000e 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 12768 0010 12B9     		cbnz	r2, .L1669
 12769              	.L1640:
 12770 0012 0920     		movs	r0, #9
 12771              	.LVL1639:
 12772 0014 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 12773              	.LVL1640:
 12774              	.L1669:
 12775 0018 DA88     		ldrh	r2, [r3, #6]
 12776 001a 8A42     		cmp	r2, r1
 12777 001c F9D1     		bne	.L1640
 12778              	.LVL1641:
 12779              	.LBB1324:
 12780              	.LBB1325:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 12781              		.loc 1 2182 0
 12782 001e 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 12783              	.LVL1642:
 12784 0020 994B     		ldr	r3, .L1676
 12785              	.LVL1643:
 12786 0022 9847     		blx	r3
 12787              	.LVL1644:
 12788 0024 C307     		lsls	r3, r0, #31
 12789 0026 02D5     		bpl	.L1670
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
 12790              		.loc 1 2183 0
 12791 0028 0320     		movs	r0, #3
 12792 002a BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 12793              	.L1670:
 12794              	.LBE1325:
 12795              	.LBE1324:
 12796              	.LBE1323:
 12797              	.LBE1322:
2814:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)			/* Check abort flag */
 12798              		.loc 1 2814 0
 12799 002e A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 12800 0030 1306     		lsls	r3, r2, #24
 12801 0032 00F12681 		bmi	.L1671
 12802              	.LBB1326:
2878:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
 12803              		.loc 1 2878 0
 12804 0036 E368     		ldr	r3, [r4, #12]
 12805 0038 B342     		cmp	r3, r6
 12806 003a 05D2     		bcs	.L1606
2880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			 && !(fp->flag & FA_WRITE)
 12807              		.loc 1 2880 0
 12808 003c 02F00202 		and	r2, r2, #2
 12809 0040 D2B2     		uxtb	r2, r2
 12810 0042 002A     		cmp	r2, #0
 12811 0044 08BF     		it	eq
 12812 0046 1E46     		moveq	r6, r3
 12813              	.LVL1645:
 12814              	.L1606:
2885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr = nsect = 0;
 12815              		.loc 1 2885 0
 12816 0048 0023     		movs	r3, #0
2884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ifptr = fp->fptr;
 12817              		.loc 1 2884 0
 12818 004a A268     		ldr	r2, [r4, #8]
 12819              	.LVL1646:
2885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr = nsect = 0;
 12820              		.loc 1 2885 0
 12821 004c A360     		str	r3, [r4, #8]
2886:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ofs) {
 12822              		.loc 1 2886 0
 12823 004e 002E     		cmp	r6, #0
 12824 0050 3ED0     		beq	.L1648
2887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
 12825              		.loc 1 2887 0
 12826 0052 2068     		ldr	r0, [r4, #0]
 12827 0054 90F80280 		ldrb	r8, [r0, #2]	@ zero_extendqisi2
 12828 0058 4FEA4828 		lsl	r8, r8, #9
 12829              	.LVL1647:
2888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ifptr > 0 &&
 12830              		.loc 1 2888 0
 12831 005c 002A     		cmp	r2, #0
 12832 005e 41D0     		beq	.L1607
2889:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 12833              		.loc 1 2889 0 discriminator 1
 12834 0060 013A     		subs	r2, r2, #1
 12835              	.LVL1648:
 12836 0062 711E     		subs	r1, r6, #1
 12837 0064 B1FBF8F1 		udiv	r1, r1, r8
 12838 0068 B2FBF8F3 		udiv	r3, r2, r8
2888:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ifptr > 0 &&
 12839              		.loc 1 2888 0 discriminator 1
 12840 006c 9942     		cmp	r1, r3
 12841 006e 39D3     		bcc	.L1607
2890:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 12842              		.loc 1 2890 0
 12843 0070 C8F10003 		rsb	r3, r8, #0
 12844 0074 1A40     		ands	r2, r2, r3
2892:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = fp->clust;
 12845              		.loc 1 2892 0
 12846 0076 6569     		ldr	r5, [r4, #20]
2890:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 12847              		.loc 1 2890 0
 12848 0078 A260     		str	r2, [r4, #8]
2891:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ofs -= fp->fptr;
 12849              		.loc 1 2891 0
 12850 007a B61A     		subs	r6, r6, r2
 12851              	.LVL1649:
 12852              	.L1608:
2905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (clst != 0) {
 12853              		.loc 1 2905 0
 12854 007c 002D     		cmp	r5, #0
 12855 007e 37D1     		bne	.L1612
 12856 0080 A368     		ldr	r3, [r4, #8]
 12857              	.LVL1650:
 12858              	.L1613:
2930:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
 12859              		.loc 1 2930 0
 12860 0082 D905     		lsls	r1, r3, #23
 12861 0084 C90D     		lsrs	r1, r1, #23
 12862 0086 0029     		cmp	r1, #0
 12863 0088 00F0DF80 		beq	.L1665
2930:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
 12864              		.loc 1 2930 0 is_stmt 0 discriminator 1
 12865 008c A269     		ldr	r2, [r4, #24]
 12866 008e AA42     		cmp	r2, r5
 12867 0090 00F0DB80 		beq	.L1665
2933:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
 12868              		.loc 1 2933 0 is_stmt 1
 12869 0094 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 12870 0096 03F04003 		and	r3, r3, #64
 12871 009a DBB2     		uxtb	r3, r3
 12872 009c 002B     		cmp	r3, #0
 12873 009e 40F0B980 		bne	.L1661
 12874 00a2 04F12406 		add	r6, r4, #36
 12875              	.LVL1651:
 12876              	.L1634:
2939:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fp->fs->drv, fp->buf, nsect, 1) != RES_OK)	/* Fill sector cache */
 12877              		.loc 1 2939 0
 12878 00a6 2368     		ldr	r3, [r4, #0]
 12879 00a8 3146     		mov	r1, r6
 12880 00aa 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 12881 00ac 774E     		ldr	r6, .L1676+4
 12882 00ae 2A46     		mov	r2, r5
 12883 00b0 0123     		movs	r3, #1
 12884 00b2 B047     		blx	r6
 12885              	.LVL1652:
 12886 00b4 78B9     		cbnz	r0, .L1668
 12887 00b6 A368     		ldr	r3, [r4, #8]
 12888 00b8 E268     		ldr	r2, [r4, #12]
2942:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = nsect;
 12889              		.loc 1 2942 0
 12890 00ba A561     		str	r5, [r4, #24]
 12891              	.L1632:
2945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
 12892              		.loc 1 2945 0
 12893 00bc 9A42     		cmp	r2, r3
 12894 00be 07D2     		bcs	.L1648
2947:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->flag |= FA__WRITTEN;
 12895              		.loc 1 2947 0
 12896 00c0 A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
2946:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->fsize = fp->fptr;
 12897              		.loc 1 2946 0
 12898 00c2 E360     		str	r3, [r4, #12]
2947:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->flag |= FA__WRITTEN;
 12899              		.loc 1 2947 0
 12900 00c4 42F02003 		orr	r3, r2, #32
 12901 00c8 A371     		strb	r3, [r4, #6]
 12902 00ca 0020     		movs	r0, #0
 12903 00cc BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 12904              	.LVL1653:
 12905              	.L1648:
2945:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
 12906              		.loc 1 2945 0
 12907 00d0 0020     		movs	r0, #0
 12908 00d2 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 12909              	.LVL1654:
 12910              	.L1668:
2940:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
 12911              		.loc 1 2940 0
 12912 00d6 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 12913              	.L1667:
 12914 00d8 63F07F03 		orn	r3, r3, #127
 12915 00dc A371     		strb	r3, [r4, #6]
 12916 00de 0120     		movs	r0, #1
 12917 00e0 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 12918              	.LVL1655:
 12919              	.L1607:
2894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = fp->sclust;						/* start from the first cluster */
 12920              		.loc 1 2894 0
 12921 00e4 2569     		ldr	r5, [r4, #16]
 12922              	.LVL1656:
2896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
 12923              		.loc 1 2896 0
 12924 00e6 002D     		cmp	r5, #0
 12925 00e8 00F0A480 		beq	.L1672
 12926              	.LVL1657:
 12927              	.L1609:
2903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;
 12928              		.loc 1 2903 0
 12929 00ec 6561     		str	r5, [r4, #20]
 12930 00ee C5E7     		b	.L1608
 12931              	.L1612:
2906:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 12932              		.loc 1 2906 0 discriminator 1
 12933 00f0 4645     		cmp	r6, r8
 12934 00f2 40F2AC80 		bls	.L1673
 12935 00f6 2768     		ldr	r7, [r4, #0]
 12936 00f8 18E0     		b	.L1628
 12937              	.L1675:
2909:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 12938              		.loc 1 2909 0
 12939 00fa 2946     		mov	r1, r5
 12940 00fc 3846     		mov	r0, r7
 12941 00fe 644B     		ldr	r3, .L1676+8
 12942 0100 9847     		blx	r3
 12943              	.LVL1658:
2910:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
 12944              		.loc 1 2910 0
 12945 0102 0546     		mov	r5, r0
 12946 0104 0028     		cmp	r0, #0
 12947 0106 00F0B980 		beq	.L1674
 12948              	.LVL1659:
 12949              	.L1617:
2916:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 12950              		.loc 1 2916 0
 12951 010a 6A1C     		adds	r2, r5, #1
 12952 010c E3D0     		beq	.L1668
2917:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 12953              		.loc 1 2917 0
 12954 010e 012D     		cmp	r5, #1
 12955 0110 49D9     		bls	.L1664
2917:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 12956              		.loc 1 2917 0 is_stmt 0 discriminator 2
 12957 0112 2768     		ldr	r7, [r4, #0]
 12958 0114 BB69     		ldr	r3, [r7, #24]
 12959 0116 9D42     		cmp	r5, r3
 12960 0118 45D2     		bcs	.L1664
2919:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->fptr += bcs;
 12961              		.loc 1 2919 0 is_stmt 1
 12962 011a A368     		ldr	r3, [r4, #8]
2918:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->clust = clst;
 12963              		.loc 1 2918 0
 12964 011c 6561     		str	r5, [r4, #20]
2920:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ofs -= bcs;
 12965              		.loc 1 2920 0
 12966 011e C8EB0606 		rsb	r6, r8, r6
 12967              	.LVL1660:
2919:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->fptr += bcs;
 12968              		.loc 1 2919 0
 12969 0122 4344     		add	r3, r8, r3
2906:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 12970              		.loc 1 2906 0
 12971 0124 B045     		cmp	r8, r6
2919:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->fptr += bcs;
 12972              		.loc 1 2919 0
 12973 0126 A360     		str	r3, [r4, #8]
2906:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 12974              		.loc 1 2906 0
 12975 0128 80F09280 		bcs	.L1615
 12976              	.L1628:
2908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
 12977              		.loc 1 2908 0
 12978 012c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 12979 012e 03F00202 		and	r2, r3, #2
 12980 0132 D2B2     		uxtb	r2, r2
 12981 0134 002A     		cmp	r2, #0
 12982 0136 E0D1     		bne	.L1675
 12983              	.LVL1661:
 12984              	.LBB1327:
 12985              	.LBB1328:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 12986              		.loc 1 828 0
 12987 0138 012D     		cmp	r5, #1
 12988 013a 35D9     		bls	.L1626
 12989 013c BA69     		ldr	r2, [r7, #24]
 12990 013e 9542     		cmp	r5, r2
 12991 0140 32D2     		bcs	.L1626
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 12992              		.loc 1 831 0
 12993 0142 3A78     		ldrb	r2, [r7, #0]	@ zero_extendqisi2
 12994 0144 022A     		cmp	r2, #2
 12995 0146 35D0     		beq	.L1620
 12996 0148 032A     		cmp	r2, #3
 12997 014a 46D0     		beq	.L1621
 12998 014c 012A     		cmp	r2, #1
 12999 014e C3D1     		bne	.L1667
 13000              	.LVL1662:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 13001              		.loc 1 834 0
 13002 0150 396A     		ldr	r1, [r7, #32]
 13003 0152 DFF840A1 		ldr	sl, .L1676+12
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 13004              		.loc 1 833 0
 13005 0156 05EB5509 		add	r9, r5, r5, lsr #1
 13006              	.LVL1663:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 13007              		.loc 1 834 0
 13008 015a 3846     		mov	r0, r7
 13009 015c 01EB5921 		add	r1, r1, r9, lsr #9
 13010 0160 D047     		blx	sl
 13011              	.LVL1664:
 13012 0162 0028     		cmp	r0, #0
 13013 0164 B7D1     		bne	.L1668
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 13014              		.loc 1 835 0
 13015 0166 4FEAC953 		lsl	r3, r9, #23
 13016 016a DB0D     		lsrs	r3, r3, #23
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 13017              		.loc 1 836 0
 13018 016c 396A     		ldr	r1, [r7, #32]
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 13019              		.loc 1 835 0
 13020 016e FB18     		adds	r3, r7, r3
 13021 0170 09F10109 		add	r9, r9, #1
 13022              	.LVL1665:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 13023              		.loc 1 836 0
 13024 0174 3846     		mov	r0, r7
 13025 0176 01EB5921 		add	r1, r1, r9, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 13026              		.loc 1 835 0
 13027 017a 93F830B0 		ldrb	fp, [r3, #48]	@ zero_extendqisi2
 13028              	.LVL1666:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 13029              		.loc 1 836 0
 13030 017e D047     		blx	sl
 13031              	.LVL1667:
 13032 0180 0028     		cmp	r0, #0
 13033 0182 A8D1     		bne	.L1668
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 13034              		.loc 1 837 0
 13035 0184 4FEAC959 		lsl	r9, r9, #23
 13036              	.LVL1668:
 13037 0188 4FEAD959 		lsr	r9, r9, #23
 13038 018c 4F44     		add	r7, r7, r9
 13039              	.LVL1669:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 13040              		.loc 1 838 0
 13041 018e E907     		lsls	r1, r5, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 13042              		.loc 1 837 0
 13043 0190 97F83030 		ldrb	r3, [r7, #48]	@ zero_extendqisi2
 13044 0194 4BEA032B 		orr	fp, fp, r3, lsl #8
 13045              	.LVL1670:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 13046              		.loc 1 838 0
 13047 0198 4EBF     		itee	mi
 13048 019a 4FEA1B15 		lsrmi	r5, fp, #4
 13049              	.LVL1671:
 13050 019e 4FEA0B55 		lslpl	r5, fp, #20
 13051 01a2 2D0D     		lsrpl	r5, r5, #20
 13052 01a4 B1E7     		b	.L1617
 13053              	.LVL1672:
 13054              	.L1664:
 13055 01a6 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 13056              	.L1626:
 13057              	.LBE1328:
 13058              	.LBE1327:
2917:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 13059              		.loc 1 2917 0 discriminator 1
 13060 01a8 63F07F03 		orn	r3, r3, #127
 13061 01ac A371     		strb	r3, [r4, #6]
 13062 01ae 0220     		movs	r0, #2
 13063 01b0 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 13064              	.LVL1673:
 13065              	.L1620:
 13066              	.LBB1332:
 13067              	.LBB1331:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 13068              		.loc 1 841 0
 13069 01b4 396A     		ldr	r1, [r7, #32]
 13070 01b6 374B     		ldr	r3, .L1676+12
 13071 01b8 3846     		mov	r0, r7
 13072 01ba 01EB1521 		add	r1, r1, r5, lsr #8
 13073 01be 9847     		blx	r3
 13074              	.LVL1674:
 13075 01c0 0028     		cmp	r0, #0
 13076 01c2 88D1     		bne	.L1668
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 13077              		.loc 1 842 0
 13078 01c4 2D06     		lsls	r5, r5, #24
 13079              	.LVL1675:
 13080 01c6 ED0D     		lsrs	r5, r5, #23
 13081              	.LVL1676:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 13082              		.loc 1 843 0
 13083 01c8 7B19     		adds	r3, r7, r5
 13084 01ca 1D46     		mov	r5, r3
 13085              	.LVL1677:
 13086 01cc 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 13087 01d0 95F83150 		ldrb	r5, [r5, #49]	@ zero_extendqisi2
 13088 01d4 43EA0525 		orr	r5, r3, r5, lsl #8
 13089 01d8 97E7     		b	.L1617
 13090              	.LVL1678:
 13091              	.L1621:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 13092              		.loc 1 846 0
 13093 01da 396A     		ldr	r1, [r7, #32]
 13094 01dc 2D4B     		ldr	r3, .L1676+12
 13095 01de 3846     		mov	r0, r7
 13096 01e0 01EBD511 		add	r1, r1, r5, lsr #7
 13097 01e4 9847     		blx	r3
 13098              	.LVL1679:
 13099 01e6 0028     		cmp	r0, #0
 13100 01e8 7FF475AF 		bne	.L1668
 13101              	.LVL1680:
 13102              	.LBB1329:
 13103              	.LBB1330:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 13104              		.loc 1 847 0
 13105 01ec 6D06     		lsls	r5, r5, #25
 13106              	.LVL1681:
 13107 01ee ED0D     		lsrs	r5, r5, #23
 13108 01f0 05F13003 		add	r3, r5, #48
 13109 01f4 FB18     		adds	r3, r7, r3
 13110              	.LVL1682:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 13111              		.loc 1 848 0
 13112 01f6 7D19     		adds	r5, r7, r5
 13113 01f8 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 13114 01fa 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 13115 01fc 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 13116 01fe 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 13117              	.LVL1683:
 13118 0202 1206     		lsls	r2, r2, #24
 13119 0204 42EA0042 		orr	r2, r2, r0, lsl #16
 13120 0208 42EA0125 		orr	r5, r2, r1, lsl #8
 13121 020c 1D43     		orrs	r5, r5, r3
 13122 020e 25F07045 		bic	r5, r5, #-268435456
 13123 0212 7AE7     		b	.L1617
 13124              	.LVL1684:
 13125              	.L1661:
 13126              	.LBE1330:
 13127              	.LBE1329:
 13128              	.LBE1331:
 13129              	.LBE1332:
2934:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 13130              		.loc 1 2934 0
 13131 0214 2646     		mov	r6, r4
 13132              	.LVL1685:
 13133 0216 204F     		ldr	r7, .L1676+16
 13134 0218 56F8243B 		ldr	r3, [r6], #36
 13135 021c 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 13136 021e 3146     		mov	r1, r6
 13137 0220 0123     		movs	r3, #1
 13138 0222 B847     		blx	r7
 13139              	.LVL1686:
2935:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 13140              		.loc 1 2935 0
 13141 0224 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
2934:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 13142              		.loc 1 2934 0
 13143 0226 0028     		cmp	r0, #0
 13144 0228 7FF456AF 		bne	.L1667
2936:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 13145              		.loc 1 2936 0
 13146 022c 23F04003 		bic	r3, r3, #64
 13147 0230 A371     		strb	r3, [r4, #6]
 13148 0232 38E7     		b	.L1634
 13149              	.LVL1687:
 13150              	.L1672:
2897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = create_chain(fp->fs, 0);
 13151              		.loc 1 2897 0
 13152 0234 2946     		mov	r1, r5
 13153 0236 164B     		ldr	r3, .L1676+8
 13154 0238 9847     		blx	r3
 13155              	.LVL1688:
2898:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 13156              		.loc 1 2898 0
 13157 023a 0128     		cmp	r0, #1
2897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = create_chain(fp->fs, 0);
 13158              		.loc 1 2897 0
 13159 023c 0546     		mov	r5, r0
 13160              	.LVL1689:
2898:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 13161              		.loc 1 2898 0
 13162 023e B2D0     		beq	.L1664
2899:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 13163              		.loc 1 2899 0
 13164 0240 0130     		adds	r0, r0, #1
 13165              	.LVL1690:
 13166 0242 3FF448AF 		beq	.L1668
2900:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->sclust = clst;
 13167              		.loc 1 2900 0
 13168 0246 2561     		str	r5, [r4, #16]
 13169 0248 50E7     		b	.L1609
 13170              	.LVL1691:
 13171              	.L1665:
 13172 024a E268     		ldr	r2, [r4, #12]
 13173 024c 36E7     		b	.L1632
 13174              	.LVL1692:
 13175              	.L1673:
 13176 024e A368     		ldr	r3, [r4, #8]
 13177              	.LVL1693:
 13178              	.L1615:
2923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ofs % SS(fp->fs)) {
 13179              		.loc 1 2923 0
 13180 0250 F205     		lsls	r2, r6, #23
2922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fptr += ofs;
 13181              		.loc 1 2922 0
 13182 0252 F318     		adds	r3, r6, r3
2923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ofs % SS(fp->fs)) {
 13183              		.loc 1 2923 0
 13184 0254 D20D     		lsrs	r2, r2, #23
2922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->fptr += ofs;
 13185              		.loc 1 2922 0
 13186 0256 A360     		str	r3, [r4, #8]
2923:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ofs % SS(fp->fs)) {
 13187              		.loc 1 2923 0
 13188 0258 72B1     		cbz	r2, .L1647
2924:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 13189              		.loc 1 2924 0
 13190 025a 2268     		ldr	r2, [r4, #0]
 13191              	.LVL1694:
 13192              	.LBB1333:
 13193              	.LBB1334:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 13194              		.loc 1 807 0
 13195 025c 9169     		ldr	r1, [r2, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 13196              		.loc 1 806 0
 13197 025e 023D     		subs	r5, r5, #2
 13198              	.LVL1695:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 13199              		.loc 1 807 0
 13200 0260 0239     		subs	r1, r1, #2
 13201 0262 8D42     		cmp	r5, r1
 13202 0264 9FD2     		bcs	.L1664
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 13203              		.loc 1 808 0
 13204 0266 9178     		ldrb	r1, [r2, #2]	@ zero_extendqisi2
 13205 0268 926A     		ldr	r2, [r2, #40]
 13206              	.LVL1696:
 13207 026a 01FB0525 		mla	r5, r1, r5, r2
 13208              	.LVL1697:
 13209              	.LBE1334:
 13210              	.LBE1333:
2925:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
 13211              		.loc 1 2925 0
 13212 026e 002D     		cmp	r5, #0
 13213 0270 99D0     		beq	.L1664
2926:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					nsect += ofs / SS(fp->fs);
 13214              		.loc 1 2926 0
 13215 0272 05EB5625 		add	r5, r5, r6, lsr #9
 13216              	.LVL1698:
 13217 0276 04E7     		b	.L1613
 13218              	.LVL1699:
 13219              	.L1647:
2885:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->fptr = nsect = 0;
 13220              		.loc 1 2885 0
 13221 0278 1546     		mov	r5, r2
 13222              	.LVL1700:
 13223 027a 02E7     		b	.L1613
 13224              	.LVL1701:
 13225              	.L1674:
 13226 027c A368     		ldr	r3, [r4, #8]
2910:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
 13227              		.loc 1 2910 0
 13228 027e 4646     		mov	r6, r8
 13229              	.LVL1702:
 13230 0280 E6E7     		b	.L1615
 13231              	.LVL1703:
 13232              	.L1671:
 13233              	.LBE1326:
2815:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		LEAVE_FF(fp->fs, FR_INT_ERR);
 13234              		.loc 1 2815 0
 13235 0282 0220     		movs	r0, #2
 13236 0284 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 13237              	.L1677:
 13238              		.align	2
 13239              	.L1676:
 13240 0288 00000000 		.word	disk_status
 13241 028c 00000000 		.word	disk_read
 13242 0290 00000000 		.word	create_chain
 13243 0294 00000000 		.word	move_window
 13244 0298 00000000 		.word	disk_write
 13245              		.cfi_endproc
 13246              	.LFE34:
 13248              		.section	.text.f_opendir,"ax",%progbits
 13249              		.align	2
 13250              		.global	f_opendir
 13251              		.thumb
 13252              		.thumb_func
 13254              	f_opendir:
 13255              	.LFB35:
2966:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 13256              		.loc 1 2966 0
 13257              		.cfi_startproc
 13258              		@ args = 0, pretend = 0, frame = 24
 13259              		@ frame_needed = 0, uses_anonymous_args = 0
 13260              	.LVL1704:
 13261 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 13262              	.LCFI33:
 13263              		.cfi_def_cfa_offset 36
 13264              		.cfi_offset 4, -36
 13265              		.cfi_offset 5, -32
 13266              		.cfi_offset 6, -28
 13267              		.cfi_offset 7, -24
 13268              		.cfi_offset 8, -20
 13269              		.cfi_offset 9, -16
 13270              		.cfi_offset 10, -12
 13271              		.cfi_offset 11, -8
 13272              		.cfi_offset 14, -4
 13273              	.LBB1345:
 13274              	.LBB1346:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 13275              		.loc 1 2023 0
 13276 0004 0B78     		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 13277 0006 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 13278              		.loc 1 2024 0
 13279 0008 092B     		cmp	r3, #9
 13280              	.LBE1346:
 13281              	.LBE1345:
2966:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 13282              		.loc 1 2966 0
 13283 000a 87B0     		sub	sp, sp, #28
 13284              	.LCFI34:
 13285              		.cfi_def_cfa_offset 64
2966:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 13286              		.loc 1 2966 0
 13287 000c 0C46     		mov	r4, r1
 13288 000e 0546     		mov	r5, r0
 13289              	.LVL1705:
 13290              	.LBB1369:
 13291              	.LBB1365:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 13292              		.loc 1 2024 0
 13293 0010 33D9     		bls	.L1745
 13294              	.LVL1706:
 13295              	.L1679:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 13296              		.loc 1 2037 0
 13297 0012 8C4B     		ldr	r3, .L1752
 13298              	.LVL1707:
 13299 0014 1E68     		ldr	r6, [r3, #0]
 13300              	.LVL1708:
 13301 0016 2E60     		str	r6, [r5, #0]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 13302              		.loc 1 2038 0
 13303 0018 002E     		cmp	r6, #0
 13304 001a 42D0     		beq	.L1708
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 13305              		.loc 1 2042 0
 13306 001c 3378     		ldrb	r3, [r6, #0]	@ zero_extendqisi2
 13307 001e 002B     		cmp	r3, #0
 13308 0020 35D0     		beq	.L1684
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 13309              		.loc 1 2043 0
 13310 0022 894B     		ldr	r3, .L1752+4
 13311 0024 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 13312 0026 9847     		blx	r3
 13313              	.LVL1709:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 13314              		.loc 1 2044 0
 13315 0028 C307     		lsls	r3, r0, #31
 13316 002a 30D4     		bmi	.L1684
 13317              	.LVL1710:
 13318              	.L1683:
 13319              	.LBE1365:
 13320              	.LBE1369:
2973:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(*dj);
 13321              		.loc 1 2973 0
 13322 002c 874B     		ldr	r3, .L1752+8
 13323 002e EB61     		str	r3, [r5, #28]
 13324 0030 03AB     		add	r3, sp, #12
 13325 0032 AB61     		str	r3, [r5, #24]
2974:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(dj, path);			/* Follow the path to the directory */
 13326              		.loc 1 2974 0
 13327 0034 2846     		mov	r0, r5
 13328 0036 2146     		mov	r1, r4
 13329 0038 854B     		ldr	r3, .L1752+12
 13330 003a 9847     		blx	r3
 13331              	.LVL1711:
2976:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 13332              		.loc 1 2976 0
 13333 003c C8B9     		cbnz	r0, .L1706
2977:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj->dir) {						/* It is not the root dir */
 13334              		.loc 1 2977 0
 13335 003e 6B69     		ldr	r3, [r5, #20]
 13336 0040 83B1     		cbz	r3, .L1699
2978:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj->dir[DIR_Attr] & AM_DIR) {	/* The object is a directory */
 13337              		.loc 1 2978 0
 13338 0042 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 13339 0044 02F01002 		and	r2, r2, #16
 13340 0048 D2B2     		uxtb	r2, r2
 13341 004a 002A     		cmp	r2, #0
 13342 004c 2BD0     		beq	.L1719
2979:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->sclust = LD_CLUST(dj->dir);
 13343              		.loc 1 2979 0
 13344 004e 5C7D     		ldrb	r4, [r3, #21]	@ zero_extendqisi2
 13345 0050 1A7D     		ldrb	r2, [r3, #20]	@ zero_extendqisi2
 13346 0052 D87E     		ldrb	r0, [r3, #27]	@ zero_extendqisi2
 13347              	.LVL1712:
 13348 0054 997E     		ldrb	r1, [r3, #26]	@ zero_extendqisi2
 13349 0056 42EA0422 		orr	r2, r2, r4, lsl #8
 13350 005a 41EA0023 		orr	r3, r1, r0, lsl #8
 13351 005e 43EA0243 		orr	r3, r3, r2, lsl #16
 13352 0062 AB60     		str	r3, [r5, #8]
 13353              	.L1699:
 13354              	.LVL1713:
2985:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->id = dj->fs->id;
 13355              		.loc 1 2985 0
 13356 0064 2B68     		ldr	r3, [r5, #0]
 13357 0066 DB88     		ldrh	r3, [r3, #6]
2986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_sdi(dj, 0);			/* Rewind dir */
 13358              		.loc 1 2986 0
 13359 0068 2846     		mov	r0, r5
2985:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->id = dj->fs->id;
 13360              		.loc 1 2985 0
 13361 006a AB80     		strh	r3, [r5, #4]	@ movhi
2986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_sdi(dj, 0);			/* Rewind dir */
 13362              		.loc 1 2986 0
 13363 006c 0021     		movs	r1, #0
 13364 006e 794B     		ldr	r3, .L1752+16
 13365 0070 9847     		blx	r3
 13366              	.LVL1714:
 13367              	.L1706:
2989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
 13368              		.loc 1 2989 0
 13369 0072 0428     		cmp	r0, #4
 13370 0074 08BF     		it	eq
 13371 0076 0520     		moveq	r0, #5
 13372              	.LVL1715:
 13373 0078 06E0     		b	.L1742
 13374              	.LVL1716:
 13375              	.L1745:
 13376              	.LBB1370:
 13377              	.LBB1366:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 13378              		.loc 1 2024 0
 13379 007a 4A78     		ldrb	r2, [r1, #1]	@ zero_extendqisi2
 13380 007c 3A2A     		cmp	r2, #58
 13381 007e C8D1     		bne	.L1679
 13382              	.LVL1717:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 13383              		.loc 1 2036 0
 13384 0080 0B20     		movs	r0, #11
 13385              	.LVL1718:
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 13386              		.loc 1 2035 0
 13387 0082 002B     		cmp	r3, #0
 13388 0084 00F06581 		beq	.L1746
 13389              	.LVL1719:
 13390              	.L1742:
 13391              	.LBE1366:
 13392              	.LBE1370:
2993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 13393              		.loc 1 2993 0
 13394 0088 07B0     		add	sp, sp, #28
 13395 008a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 13396              	.LVL1720:
 13397              	.L1684:
 13398              	.LBB1371:
 13399              	.LBB1367:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 13400              		.loc 1 2054 0
 13401 008e 0020     		movs	r0, #0
 13402 0090 3070     		strb	r0, [r6, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 13403              		.loc 1 2055 0
 13404 0092 7070     		strb	r0, [r6, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 13405              		.loc 1 2056 0
 13406 0094 704B     		ldr	r3, .L1752+20
 13407 0096 9847     		blx	r3
 13408              	.LVL1721:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 13409              		.loc 1 2057 0
 13410 0098 10F00102 		ands	r2, r0, #1
 13411 009c 05D0     		beq	.L1747
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 13412              		.loc 1 2058 0
 13413 009e 0320     		movs	r0, #3
 13414              	.LVL1722:
 13415 00a0 F2E7     		b	.L1742
 13416              	.LVL1723:
 13417              	.L1708:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 13418              		.loc 1 2038 0
 13419 00a2 0C20     		movs	r0, #12
 13420 00a4 F0E7     		b	.L1742
 13421              	.LVL1724:
 13422              	.L1719:
 13423              	.LBE1367:
 13424              	.LBE1371:
2981:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_NO_PATH;
 13425              		.loc 1 2981 0
 13426 00a6 0520     		movs	r0, #5
 13427              	.LVL1725:
 13428 00a8 EEE7     		b	.L1742
 13429              	.LVL1726:
 13430              	.L1747:
 13431              	.LBB1372:
 13432              	.LBB1368:
 13433              	.LBB1347:
 13434              	.LBB1348:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 13435              		.loc 1 1987 0
 13436 00aa 06F13007 		add	r7, r6, #48
 13437 00ae 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 13438              	.LVL1727:
 13439 00b0 DFF8B081 		ldr	r8, .L1752+32
 13440 00b4 3946     		mov	r1, r7
 13441 00b6 0123     		movs	r3, #1
 13442 00b8 C047     		blx	r8
 13443              	.LVL1728:
 13444 00ba 40B1     		cbz	r0, .L1748
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 13445              		.loc 1 1988 0
 13446 00bc 0323     		movs	r3, #3
 13447              	.L1685:
 13448              	.LBE1348:
 13449              	.LBE1347:
 13450              	.LBB1354:
 13451              	.LBB1355:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 13452              		.loc 1 2066 0
 13453 00be 4FF00009 		mov	r9, #0
 13454              	.LVL1729:
 13455              	.L1702:
 13456              	.LBE1355:
 13457              	.LBE1354:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 13458              		.loc 1 2078 0
 13459 00c2 032B     		cmp	r3, #3
 13460 00c4 00F0BC80 		beq	.L1717
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 13461              		.loc 1 2079 0
 13462 00c8 83B1     		cbz	r3, .L1686
 13463              	.LVL1730:
 13464              	.L1689:
 13465 00ca 0D20     		movs	r0, #13
 13466 00cc DCE7     		b	.L1742
 13467              	.LVL1731:
 13468              	.L1748:
 13469              	.LBB1360:
 13470              	.LBB1351:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 13471              		.loc 1 1989 0
 13472 00ce 96F82E32 		ldrb	r3, [r6, #558]	@ zero_extendqisi2
 13473 00d2 96F82FA2 		ldrb	sl, [r6, #559]	@ zero_extendqisi2
 13474 00d6 43EA0A2A 		orr	sl, r3, sl, lsl #8
 13475 00da 604B     		ldr	r3, .L1752+24
 13476 00dc 0FFA8AFA 		sxth	sl, sl
 13477 00e0 9A45     		cmp	sl, r3
 13478 00e2 00F0C180 		beq	.L1749
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 13479              		.loc 1 1990 0
 13480 00e6 0223     		movs	r3, #2
 13481 00e8 E9E7     		b	.L1685
 13482              	.LVL1732:
 13483              	.L1713:
 13484              	.LBE1351:
 13485              	.LBE1360:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 13486              		.loc 1 2066 0
 13487 00ea 8146     		mov	r9, r0
 13488              	.LVL1733:
 13489              	.L1686:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 13490              		.loc 1 2083 0
 13491 00ec 96F83C20 		ldrb	r2, [r6, #60]	@ zero_extendqisi2
 13492 00f0 96F83B30 		ldrb	r3, [r6, #59]	@ zero_extendqisi2
 13493 00f4 43EA0223 		orr	r3, r3, r2, lsl #8
 13494 00f8 B3F5007F 		cmp	r3, #512
 13495 00fc E5D1     		bne	.L1689
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 13496              		.loc 1 2086 0
 13497 00fe 96F84720 		ldrb	r2, [r6, #71]	@ zero_extendqisi2
 13498 0102 96F84630 		ldrb	r3, [r6, #70]	@ zero_extendqisi2
 13499              	.LVL1734:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 13500              		.loc 1 2087 0
 13501 0106 53EA0223 		orrs	r3, r3, r2, lsl #8
 13502              	.LVL1735:
 13503 010a 0DD1     		bne	.L1690
 13504 010c 96F85610 		ldrb	r1, [r6, #86]	@ zero_extendqisi2
 13505 0110 96F85700 		ldrb	r0, [r6, #87]	@ zero_extendqisi2
 13506 0114 96F85430 		ldrb	r3, [r6, #84]	@ zero_extendqisi2
 13507              	.LVL1736:
 13508 0118 96F85520 		ldrb	r2, [r6, #85]	@ zero_extendqisi2
 13509              	.LVL1737:
 13510 011c 0904     		lsls	r1, r1, #16
 13511 011e 41EA0061 		orr	r1, r1, r0, lsl #24
 13512 0122 0B43     		orrs	r3, r3, r1
 13513 0124 43EA0223 		orr	r3, r3, r2, lsl #8
 13514              	.LVL1738:
 13515              	.L1690:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 13516              		.loc 1 2090 0
 13517 0128 96F840B0 		ldrb	fp, [r6, #64]	@ zero_extendqisi2
 13518              	.LVL1739:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 13519              		.loc 1 2088 0
 13520 012c F361     		str	r3, [r6, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 13521              		.loc 1 2091 0
 13522 012e 0BF1FF32 		add	r2, fp, #-1
 13523 0132 012A     		cmp	r2, #1
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 13524              		.loc 1 2090 0
 13525 0134 86F803B0 		strb	fp, [r6, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 13526              		.loc 1 2091 0
 13527 0138 C7D8     		bhi	.L1689
 13528              	.LVL1740:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 13529              		.loc 1 2094 0
 13530 013a 96F83D20 		ldrb	r2, [r6, #61]	@ zero_extendqisi2
 13531              	.LVL1741:
 13532 013e B270     		strb	r2, [r6, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 13533              		.loc 1 2095 0
 13534 0140 002A     		cmp	r2, #0
 13535 0142 C2D0     		beq	.L1689
 13536 0144 511E     		subs	r1, r2, #1
 13537 0146 1142     		tst	r1, r2
 13538 0148 BFD1     		bne	.L1689
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 13539              		.loc 1 2097 0
 13540 014a 96F84110 		ldrb	r1, [r6, #65]	@ zero_extendqisi2
 13541 014e 96F84200 		ldrb	r0, [r6, #66]	@ zero_extendqisi2
 13542 0152 41EA0020 		orr	r0, r1, r0, lsl #8
 13543 0156 81B2     		uxth	r1, r0
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 13544              		.loc 1 2098 0
 13545 0158 0007     		lsls	r0, r0, #28
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 13546              		.loc 1 2097 0
 13547 015a 3181     		strh	r1, [r6, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 13548              		.loc 1 2098 0
 13549 015c B5D1     		bne	.L1689
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 13550              		.loc 1 2100 0
 13551 015e 96F844A0 		ldrb	sl, [r6, #68]	@ zero_extendqisi2
 13552 0162 96F84300 		ldrb	r0, [r6, #67]	@ zero_extendqisi2
 13553              	.LVL1742:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 13554              		.loc 1 2101 0
 13555 0166 50EA0A2A 		orrs	sl, r0, sl, lsl #8
 13556              	.LVL1743:
 13557 016a 15D1     		bne	.L1691
 13558 016c 96F85000 		ldrb	r0, [r6, #80]	@ zero_extendqisi2
 13559 0170 96F852C0 		ldrb	ip, [r6, #82]	@ zero_extendqisi2
 13560 0174 96F853A0 		ldrb	sl, [r6, #83]	@ zero_extendqisi2
 13561              	.LVL1744:
 13562 0178 0090     		str	r0, [sp, #0]
 13563 017a 4FEA0C4C 		lsl	ip, ip, #16
 13564 017e 96F85100 		ldrb	r0, [r6, #81]	@ zero_extendqisi2
 13565 0182 4CEA0A6C 		orr	ip, ip, sl, lsl #24
 13566 0186 DDF800A0 		ldr	sl, [sp, #0]
 13567 018a 0190     		str	r0, [sp, #4]
 13568 018c 4CEA0A00 		orr	r0, ip, sl
 13569 0190 DDF804C0 		ldr	ip, [sp, #4]
 13570 0194 40EA0C2A 		orr	sl, r0, ip, lsl #8
 13571              	.LVL1745:
 13572              	.L1691:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 13573              		.loc 1 2103 0
 13574 0198 96F83FC0 		ldrb	ip, [r6, #63]	@ zero_extendqisi2
 13575 019c 96F83E00 		ldrb	r0, [r6, #62]	@ zero_extendqisi2
 13576              	.LVL1746:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 13577              		.loc 1 2104 0
 13578 01a0 50EA0C2C 		orrs	ip, r0, ip, lsl #8
 13579              	.LVL1747:
 13580 01a4 91D0     		beq	.L1689
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 13581              		.loc 1 2092 0
 13582 01a6 0BFB03FB 		mul	fp, fp, r3
 13583              	.LVL1748:
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 13584              		.loc 1 2107 0
 13585 01aa 0CEB1110 		add	r0, ip, r1, lsr #4
 13586              	.LVL1749:
 13587 01ae 5844     		add	r0, r0, fp
 13588              	.LVL1750:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 13589              		.loc 1 2108 0
 13590 01b0 5045     		cmp	r0, sl
 13591 01b2 8AD8     		bhi	.L1689
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 13592              		.loc 1 2109 0
 13593 01b4 C0EB0A0A 		rsb	sl, r0, sl
 13594              	.LVL1751:
 13595 01b8 BAFBF2F2 		udiv	r2, sl, r2
 13596              	.LVL1752:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 13597              		.loc 1 2110 0
 13598 01bc 002A     		cmp	r2, #0
 13599 01be 84D0     		beq	.L1689
 13600              	.LVL1753:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 13601              		.loc 1 2112 0
 13602 01c0 40F6F57A 		movw	sl, #4085
 13603 01c4 5245     		cmp	r2, sl
 13604 01c6 40F24781 		bls	.L1718
 13605              	.LVL1754:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 13606              		.loc 1 2113 0
 13607 01ca 0AF5704A 		add	sl, sl, #61440
 13608 01ce 5245     		cmp	r2, sl
 13609 01d0 00F22381 		bhi	.L1693
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 13610              		.loc 1 2112 0
 13611 01d4 4FF0020A 		mov	sl, #2
 13612              	.LVL1755:
 13613              	.L1692:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 13614              		.loc 1 2116 0
 13615 01d8 0232     		adds	r2, r2, #2
 13616              	.LVL1756:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 13617              		.loc 1 2117 0
 13618 01da 4844     		add	r0, r0, r9
 13619              	.LVL1757:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 13620              		.loc 1 2118 0
 13621 01dc CC44     		add	ip, r9, ip
 13622              	.LVL1758:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 13623              		.loc 1 2116 0
 13624 01de B261     		str	r2, [r6, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 13625              		.loc 1 2117 0
 13626 01e0 B062     		str	r0, [r6, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 13627              		.loc 1 2118 0
 13628 01e2 C6F820C0 		str	ip, [r6, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 13629              		.loc 1 2124 0
 13630 01e6 0029     		cmp	r1, #0
 13631 01e8 3FF46FAF 		beq	.L1689
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 13632              		.loc 1 2125 0
 13633 01ec 0BEB0C01 		add	r1, fp, ip
 13634              	.LVL1759:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 13635              		.loc 1 2127 0
 13636 01f0 BAF1020F 		cmp	sl, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 13637              		.loc 1 2125 0
 13638 01f4 7162     		str	r1, [r6, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 13639              		.loc 1 2127 0
 13640 01f6 00F00E81 		beq	.L1750
 13641 01fa 0321     		movs	r1, #3
 13642 01fc 01FB02F1 		mul	r1, r1, r2
 13643 0200 02F00102 		and	r2, r2, #1
 13644              	.LVL1760:
 13645 0204 02EB5102 		add	r2, r2, r1, lsr #1
 13646 0208 4FF0010A 		mov	sl, #1
 13647              	.LVL1761:
 13648              	.L1694:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 13649              		.loc 1 2129 0
 13650 020c 02F2FF12 		addw	r2, r2, #511
 13651              	.LVL1762:
 13652 0210 B3EB522F 		cmp	r3, r2, lsr #9
 13653 0214 FFF459AF 		bcc	.L1689
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 13654              		.loc 1 2135 0
 13655 0218 0023     		movs	r3, #0
 13656              	.LVL1763:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 13657              		.loc 1 2134 0
 13658 021a 4FF0FF32 		mov	r2, #-1
 13659              	.LVL1764:
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 13660              		.loc 1 2138 0
 13661 021e BAF1030F 		cmp	sl, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 13662              		.loc 1 2134 0
 13663 0222 3261     		str	r2, [r6, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 13664              		.loc 1 2135 0
 13665 0224 F360     		str	r3, [r6, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 13666              		.loc 1 2138 0
 13667 0226 00F09680 		beq	.L1751
 13668              	.LVL1765:
 13669              	.L1697:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 13670              		.loc 1 2151 0
 13671 022a 0D49     		ldr	r1, .L1752+28
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 13672              		.loc 1 2150 0
 13673 022c 86F800A0 		strb	sl, [r6, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 13674              		.loc 1 2151 0
 13675 0230 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 13676              		.loc 1 2152 0
 13677 0232 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 13678              		.loc 1 2151 0
 13679 0234 0132     		adds	r2, r2, #1
 13680 0236 0A80     		strh	r2, [r1, #0]	@ movhi
 13681 0238 F280     		strh	r2, [r6, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 13682              		.loc 1 2152 0
 13683 023a F362     		str	r3, [r6, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 13684              		.loc 1 2153 0
 13685 023c 3371     		strb	r3, [r6, #4]
 13686 023e F5E6     		b	.L1683
 13687              	.LVL1766:
 13688              	.L1717:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 13689              		.loc 1 2078 0
 13690 0240 0120     		movs	r0, #1
 13691              	.LVL1767:
 13692 0242 21E7     		b	.L1742
 13693              	.L1753:
 13694              		.align	2
 13695              	.L1752:
 13696 0244 00000000 		.word	.LANCHOR2
 13697 0248 00000000 		.word	disk_status
 13698 024c 00000000 		.word	.LANCHOR4
 13699 0250 00000000 		.word	follow_path
 13700 0254 00000000 		.word	dir_sdi
 13701 0258 00000000 		.word	disk_initialize
 13702 025c 55AAFFFF 		.word	-21931
 13703 0260 00000000 		.word	.LANCHOR3
 13704 0264 00000000 		.word	disk_read
 13705              	.LVL1768:
 13706              	.L1749:
 13707              	.LBB1361:
 13708              	.LBB1352:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 13709              		.loc 1 1992 0
 13710 0268 96F86810 		ldrb	r1, [r6, #104]	@ zero_extendqisi2
 13711 026c 96F869C0 		ldrb	ip, [r6, #105]	@ zero_extendqisi2
 13712 0270 96F86630 		ldrb	r3, [r6, #102]	@ zero_extendqisi2
 13713 0274 96F86720 		ldrb	r2, [r6, #103]	@ zero_extendqisi2
 13714 0278 DFF8F0B1 		ldr	fp, .L1754+12
 13715 027c 0904     		lsls	r1, r1, #16
 13716 027e 41EA0C61 		orr	r1, r1, ip, lsl #24
 13717 0282 0B43     		orrs	r3, r3, r1
 13718 0284 43EA0223 		orr	r3, r3, r2, lsl #8
 13719 0288 23F07F43 		bic	r3, r3, #-16777216
 13720 028c 5B45     		cmp	r3, fp
 13721 028e 5ED0     		beq	.L1712
 13722              	.LVL1769:
 13723              	.LBB1349:
 13724              	.LBB1350:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 13725              		.loc 1 1994 0
 13726 0290 96F88410 		ldrb	r1, [r6, #132]	@ zero_extendqisi2
 13727 0294 96F885C0 		ldrb	ip, [r6, #133]	@ zero_extendqisi2
 13728 0298 96F88230 		ldrb	r3, [r6, #130]	@ zero_extendqisi2
 13729 029c 96F88320 		ldrb	r2, [r6, #131]	@ zero_extendqisi2
 13730 02a0 0904     		lsls	r1, r1, #16
 13731 02a2 41EA0C61 		orr	r1, r1, ip, lsl #24
 13732 02a6 0B43     		orrs	r3, r3, r1
 13733 02a8 43EA0223 		orr	r3, r3, r2, lsl #8
 13734 02ac 23F07F43 		bic	r3, r3, #-16777216
 13735              	.LBE1350:
 13736              	.LBE1349:
 13737              	.LBE1352:
 13738              	.LBE1361:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 13739              		.loc 1 2068 0
 13740 02b0 5B45     		cmp	r3, fp
 13741 02b2 3FF41AAF 		beq	.L1713
 13742              	.LVL1770:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 13743              		.loc 1 2073 0
 13744 02b6 96F8F231 		ldrb	r3, [r6, #498]	@ zero_extendqisi2
 13745 02ba 002B     		cmp	r3, #0
 13746 02bc 3FF405AF 		beq	.L1689
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 13747              		.loc 1 2074 0
 13748 02c0 96F8F821 		ldrb	r2, [r6, #504]	@ zero_extendqisi2
 13749 02c4 96F8F911 		ldrb	r1, [r6, #505]	@ zero_extendqisi2
 13750 02c8 96F8F631 		ldrb	r3, [r6, #502]	@ zero_extendqisi2
 13751 02cc 96F8F791 		ldrb	r9, [r6, #503]	@ zero_extendqisi2
 13752              	.LBB1362:
 13753              	.LBB1358:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 13754              		.loc 1 1987 0
 13755 02d0 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 13756              	.LBE1358:
 13757              	.LBE1362:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 13758              		.loc 1 2074 0
 13759 02d2 1204     		lsls	r2, r2, #16
 13760 02d4 42EA0162 		orr	r2, r2, r1, lsl #24
 13761 02d8 1343     		orrs	r3, r3, r2
 13762 02da 43EA0929 		orr	r9, r3, r9, lsl #8
 13763              	.LVL1771:
 13764              	.LBB1363:
 13765              	.LBB1359:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 13766              		.loc 1 1987 0
 13767 02de 3946     		mov	r1, r7
 13768 02e0 4A46     		mov	r2, r9
 13769 02e2 0123     		movs	r3, #1
 13770 02e4 C047     		blx	r8
 13771              	.LVL1772:
 13772 02e6 0028     		cmp	r0, #0
 13773 02e8 AAD1     		bne	.L1717
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 13774              		.loc 1 1989 0
 13775 02ea 96F82F22 		ldrb	r2, [r6, #559]	@ zero_extendqisi2
 13776 02ee 96F82E32 		ldrb	r3, [r6, #558]	@ zero_extendqisi2
 13777 02f2 43EA0223 		orr	r3, r3, r2, lsl #8
 13778 02f6 1BB2     		sxth	r3, r3
 13779 02f8 5345     		cmp	r3, sl
 13780 02fa 7FF4E6AE 		bne	.L1689
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 13781              		.loc 1 1992 0
 13782 02fe 96F86810 		ldrb	r1, [r6, #104]	@ zero_extendqisi2
 13783 0302 96F86900 		ldrb	r0, [r6, #105]	@ zero_extendqisi2
 13784 0306 96F86630 		ldrb	r3, [r6, #102]	@ zero_extendqisi2
 13785 030a 96F86720 		ldrb	r2, [r6, #103]	@ zero_extendqisi2
 13786 030e 0904     		lsls	r1, r1, #16
 13787 0310 41EA0061 		orr	r1, r1, r0, lsl #24
 13788 0314 0B43     		orrs	r3, r3, r1
 13789 0316 43EA0223 		orr	r3, r3, r2, lsl #8
 13790 031a 23F07F43 		bic	r3, r3, #-16777216
 13791 031e 5B45     		cmp	r3, fp
 13792 0320 3FF4E4AE 		beq	.L1686
 13793              	.LVL1773:
 13794              	.LBB1356:
 13795              	.LBB1357:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 13796              		.loc 1 1994 0
 13797 0324 96F88410 		ldrb	r1, [r6, #132]	@ zero_extendqisi2
 13798 0328 96F88500 		ldrb	r0, [r6, #133]	@ zero_extendqisi2
 13799 032c 96F88230 		ldrb	r3, [r6, #130]	@ zero_extendqisi2
 13800 0330 96F88320 		ldrb	r2, [r6, #131]	@ zero_extendqisi2
 13801 0334 0904     		lsls	r1, r1, #16
 13802 0336 41EA0061 		orr	r1, r1, r0, lsl #24
 13803 033a 0B43     		orrs	r3, r3, r1
 13804 033c 43EA0223 		orr	r3, r3, r2, lsl #8
 13805 0340 23F07F43 		bic	r3, r3, #-16777216
 13806              	.LBE1357:
 13807              	.LBE1356:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 13808              		.loc 1 1995 0
 13809 0344 B3EB0B03 		subs	r3, r3, fp
 13810 0348 18BF     		it	ne
 13811 034a 0123     		movne	r3, #1
 13812 034c B9E6     		b	.L1702
 13813              	.LVL1774:
 13814              	.L1712:
 13815              	.LBE1359:
 13816              	.LBE1363:
 13817              	.LBB1364:
 13818              	.LBB1353:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 13819              		.loc 1 1993 0
 13820 034e 0346     		mov	r3, r0
 13821 0350 B5E6     		b	.L1685
 13822              	.LVL1775:
 13823              	.L1746:
 13824              	.LBE1353:
 13825              	.LBE1364:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 13826              		.loc 1 2025 0
 13827 0352 8C1C     		adds	r4, r1, #2
 13828 0354 5DE6     		b	.L1679
 13829              	.LVL1776:
 13830              	.L1751:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 13831              		.loc 1 2140 0
 13832 0356 96F86110 		ldrb	r1, [r6, #97]	@ zero_extendqisi2
 13833 035a 96F86020 		ldrb	r2, [r6, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 13834              		.loc 1 2139 0
 13835 035e 7371     		strb	r3, [r6, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 13836              		.loc 1 2140 0
 13837 0360 42EA0122 		orr	r2, r2, r1, lsl #8
 13838 0364 4A44     		add	r2, r9, r2
 13839 0366 7261     		str	r2, [r6, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 13840              		.loc 1 2141 0
 13841 0368 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 13842 036a 3946     		mov	r1, r7
 13843 036c 0123     		movs	r3, #1
 13844 036e C047     		blx	r8
 13845              	.LVL1777:
 13846 0370 0028     		cmp	r0, #0
 13847 0372 7FF45AAF 		bne	.L1697
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 13848              		.loc 1 2142 0
 13849 0376 96F82E32 		ldrb	r3, [r6, #558]	@ zero_extendqisi2
 13850 037a 96F82F22 		ldrb	r2, [r6, #559]	@ zero_extendqisi2
 13851 037e 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 13852              		.loc 1 2141 0
 13853 0382 374B     		ldr	r3, .L1754
 13854 0384 12B2     		sxth	r2, r2
 13855 0386 9A42     		cmp	r2, r3
 13856 0388 7FF44FAF 		bne	.L1697
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 13857              		.loc 1 2143 0
 13858 038c 96F83210 		ldrb	r1, [r6, #50]	@ zero_extendqisi2
 13859 0390 96F83300 		ldrb	r0, [r6, #51]	@ zero_extendqisi2
 13860 0394 96F83030 		ldrb	r3, [r6, #48]	@ zero_extendqisi2
 13861 0398 96F83120 		ldrb	r2, [r6, #49]	@ zero_extendqisi2
 13862 039c 0904     		lsls	r1, r1, #16
 13863 039e 41EA0061 		orr	r1, r1, r0, lsl #24
 13864 03a2 0B43     		orrs	r3, r3, r1
 13865 03a4 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 13866              		.loc 1 2142 0
 13867 03a8 2E4B     		ldr	r3, .L1754+4
 13868 03aa 9A42     		cmp	r2, r3
 13869 03ac 7FF43DAF 		bne	.L1697
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 13870              		.loc 1 2144 0
 13871 03b0 96F81612 		ldrb	r1, [r6, #534]	@ zero_extendqisi2
 13872 03b4 96F81702 		ldrb	r0, [r6, #535]	@ zero_extendqisi2
 13873 03b8 96F81432 		ldrb	r3, [r6, #532]	@ zero_extendqisi2
 13874 03bc 96F81522 		ldrb	r2, [r6, #533]	@ zero_extendqisi2
 13875 03c0 0904     		lsls	r1, r1, #16
 13876 03c2 41EA0061 		orr	r1, r1, r0, lsl #24
 13877 03c6 0B43     		orrs	r3, r3, r1
 13878 03c8 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 13879              		.loc 1 2143 0
 13880 03cc 264B     		ldr	r3, .L1754+8
 13881 03ce 9A42     		cmp	r2, r3
 13882 03d0 7FF42BAF 		bne	.L1697
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13883              		.loc 1 2145 0
 13884 03d4 96F81EE2 		ldrb	lr, [r6, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13885              		.loc 1 2146 0
 13886 03d8 96F81A72 		ldrb	r7, [r6, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13887              		.loc 1 2145 0
 13888 03dc 96F81F82 		ldrb	r8, [r6, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13889              		.loc 1 2146 0
 13890 03e0 96F81BC2 		ldrb	ip, [r6, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13891              		.loc 1 2145 0
 13892 03e4 96F81C22 		ldrb	r2, [r6, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13893              		.loc 1 2146 0
 13894 03e8 96F81832 		ldrb	r3, [r6, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13895              		.loc 1 2145 0
 13896 03ec 96F81D02 		ldrb	r0, [r6, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13897              		.loc 1 2146 0
 13898 03f0 96F81912 		ldrb	r1, [r6, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13899              		.loc 1 2145 0
 13900 03f4 4FEA0E4E 		lsl	lr, lr, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13901              		.loc 1 2146 0
 13902 03f8 3F04     		lsls	r7, r7, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13903              		.loc 1 2145 0
 13904 03fa 4EEA086E 		orr	lr, lr, r8, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13905              		.loc 1 2146 0
 13906 03fe 47EA0C67 		orr	r7, r7, ip, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13907              		.loc 1 2145 0
 13908 0402 4EEA0202 		orr	r2, lr, r2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13909              		.loc 1 2146 0
 13910 0406 3B43     		orrs	r3, r3, r7
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13911              		.loc 1 2145 0
 13912 0408 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13913              		.loc 1 2146 0
 13914 040c 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 13915              		.loc 1 2145 0
 13916 0410 F260     		str	r2, [r6, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 13917              		.loc 1 2146 0
 13918 0412 3361     		str	r3, [r6, #16]
 13919 0414 09E7     		b	.L1697
 13920              	.LVL1778:
 13921              	.L1750:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 13922              		.loc 1 2127 0
 13923 0416 5200     		lsls	r2, r2, #1
 13924              	.LVL1779:
 13925 0418 F8E6     		b	.L1694
 13926              	.LVL1780:
 13927              	.L1693:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 13928              		.loc 1 2116 0
 13929 041a 0232     		adds	r2, r2, #2
 13930              	.LVL1781:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 13931              		.loc 1 2117 0
 13932 041c 4844     		add	r0, r0, r9
 13933              	.LVL1782:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 13934              		.loc 1 2118 0
 13935 041e CC44     		add	ip, r9, ip
 13936              	.LVL1783:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 13937              		.loc 1 2116 0
 13938 0420 B261     		str	r2, [r6, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 13939              		.loc 1 2117 0
 13940 0422 B062     		str	r0, [r6, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 13941              		.loc 1 2118 0
 13942 0424 C6F820C0 		str	ip, [r6, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 13943              		.loc 1 2120 0
 13944 0428 0029     		cmp	r1, #0
 13945 042a 7FF44EAE 		bne	.L1689
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 13946              		.loc 1 2121 0
 13947 042e 96F85EC0 		ldrb	ip, [r6, #94]	@ zero_extendqisi2
 13948 0432 96F85FA0 		ldrb	sl, [r6, #95]	@ zero_extendqisi2
 13949 0436 96F85C10 		ldrb	r1, [r6, #92]	@ zero_extendqisi2
 13950              	.LVL1784:
 13951 043a 96F85D00 		ldrb	r0, [r6, #93]	@ zero_extendqisi2
 13952 043e 4FEA0C4C 		lsl	ip, ip, #16
 13953 0442 4CEA0A6C 		orr	ip, ip, sl, lsl #24
 13954 0446 4CEA0101 		orr	r1, ip, r1
 13955 044a 41EA0021 		orr	r1, r1, r0, lsl #8
 13956 044e 7162     		str	r1, [r6, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 13957              		.loc 1 2122 0
 13958 0450 9200     		lsls	r2, r2, #2
 13959              	.LVL1785:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 13960              		.loc 1 2113 0
 13961 0452 4FF0030A 		mov	sl, #3
 13962 0456 D9E6     		b	.L1694
 13963              	.LVL1786:
 13964              	.L1718:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 13965              		.loc 1 2111 0
 13966 0458 4FF0010A 		mov	sl, #1
 13967 045c BCE6     		b	.L1692
 13968              	.L1755:
 13969 045e 00BF     		.align	2
 13970              	.L1754:
 13971 0460 55AAFFFF 		.word	-21931
 13972 0464 52526141 		.word	1096897106
 13973 0468 72724161 		.word	1631679090
 13974 046c 46415400 		.word	5521734
 13975              	.LBE1368:
 13976              	.LBE1372:
 13977              		.cfi_endproc
 13978              	.LFE35:
 13980              		.section	.text.f_readdir,"ax",%progbits
 13981              		.align	2
 13982              		.global	f_readdir
 13983              		.thumb
 13984              		.thumb_func
 13986              	f_readdir:
 13987              	.LFB36:
3006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 13988              		.loc 1 3006 0
 13989              		.cfi_startproc
 13990              		@ args = 0, pretend = 0, frame = 16
 13991              		@ frame_needed = 0, uses_anonymous_args = 0
 13992              	.LVL1787:
 13993 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 13994              	.LCFI35:
 13995              		.cfi_def_cfa_offset 28
 13996              		.cfi_offset 4, -28
 13997              		.cfi_offset 5, -24
 13998              		.cfi_offset 6, -20
 13999              		.cfi_offset 7, -16
 14000              		.cfi_offset 8, -12
 14001              		.cfi_offset 9, -8
 14002              		.cfi_offset 14, -4
3011:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(dj->fs, dj->id);			/* Check validity of the object */
 14003              		.loc 1 3011 0
 14004 0004 0368     		ldr	r3, [r0, #0]
3006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 14005              		.loc 1 3006 0
 14006 0006 0D46     		mov	r5, r1
 14007 0008 85B0     		sub	sp, sp, #20
 14008              	.LCFI36:
 14009              		.cfi_def_cfa_offset 48
3006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 14010              		.loc 1 3006 0
 14011 000a 0446     		mov	r4, r0
3011:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(dj->fs, dj->id);			/* Check validity of the object */
 14012              		.loc 1 3011 0
 14013 000c 8188     		ldrh	r1, [r0, #4]
 14014              	.LVL1788:
 14015              	.LBB1389:
 14016              	.LBB1390:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 14017              		.loc 1 2177 0
 14018 000e 0BB1     		cbz	r3, .L1783
 14019 0010 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 14020 0012 1AB9     		cbnz	r2, .L1831
 14021              	.L1783:
 14022 0014 0920     		movs	r0, #9
 14023              	.LVL1789:
 14024              	.L1801:
 14025              	.LBE1390:
 14026              	.LBE1389:
3035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 14027              		.loc 1 3035 0
 14028 0016 05B0     		add	sp, sp, #20
 14029 0018 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 14030              	.LVL1790:
 14031              	.L1831:
 14032              	.LBB1394:
 14033              	.LBB1393:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 14034              		.loc 1 2177 0
 14035 001c DA88     		ldrh	r2, [r3, #6]
 14036 001e 8A42     		cmp	r2, r1
 14037 0020 F8D1     		bne	.L1783
 14038              	.LVL1791:
 14039              	.LBB1391:
 14040              	.LBB1392:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 14041              		.loc 1 2182 0
 14042 0022 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 14043              	.LVL1792:
 14044 0024 6A4B     		ldr	r3, .L1837
 14045              	.LVL1793:
 14046 0026 9847     		blx	r3
 14047              	.LVL1794:
 14048 0028 10F00106 		ands	r6, r0, #1
 14049 002c 01D0     		beq	.L1832
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
 14050              		.loc 1 2183 0
 14051 002e 0320     		movs	r0, #3
 14052 0030 F1E7     		b	.L1801
 14053              	.L1832:
 14054              	.LBE1392:
 14055              	.LBE1391:
 14056              	.LBE1393:
 14057              	.LBE1394:
3013:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fno == 0) {
 14058              		.loc 1 3013 0
 14059 0032 002D     		cmp	r5, #0
 14060 0034 00F09E80 		beq	.L1833
3016:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			INIT_BUF(*dj);
 14061              		.loc 1 3016 0
 14062 0038 664B     		ldr	r3, .L1837+4
 14063 003a E361     		str	r3, [r4, #28]
 14064 003c 01AB     		add	r3, sp, #4
 14065 003e A361     		str	r3, [r4, #24]
3017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_read(dj);				/* Read an directory item */
 14066              		.loc 1 3017 0
 14067 0040 2046     		mov	r0, r4
 14068 0042 654B     		ldr	r3, .L1837+8
 14069 0044 9847     		blx	r3
 14070              	.LVL1795:
 14071 0046 0346     		mov	r3, r0
 14072              	.LVL1796:
3018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of dir */
 14073              		.loc 1 3018 0
 14074 0048 042B     		cmp	r3, #4
 14075 004a 00F08180 		beq	.L1834
3022:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 14076              		.loc 1 3022 0
 14077 004e 002B     		cmp	r3, #0
 14078 0050 E1D1     		bne	.L1801
 14079              	.LVL1797:
 14080              	.LBB1395:
 14081              	.LBB1396:
1848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->sect) {
 14082              		.loc 1 1848 0
 14083 0052 2169     		ldr	r1, [r4, #16]
1847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	p = fno->fname;
 14084              		.loc 1 1847 0
 14085 0054 05F10902 		add	r2, r5, #9
 14086              	.LVL1798:
1848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->sect) {
 14087              		.loc 1 1848 0
 14088 0058 0029     		cmp	r1, #0
 14089 005a 49D0     		beq	.L1760
1849:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dir = dj->dir;
 14090              		.loc 1 1849 0
 14091 005c 6169     		ldr	r1, [r4, #20]
 14092              	.LVL1799:
1850:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		nt = dir[DIR_NTres];		/* NT flag */
 14093              		.loc 1 1850 0
 14094 005e 0F7B     		ldrb	r7, [r1, #12]	@ zero_extendqisi2
 14095              	.LVL1800:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14096              		.loc 1 1851 0
 14097 0060 1846     		mov	r0, r3
 14098              	.LVL1801:
 14099              	.L1764:
1852:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = dir[i];
 14100              		.loc 1 1852 0
 14101 0062 0B5C     		ldrb	r3, [r1, r0]	@ zero_extendqisi2
 14102              	.LVL1802:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14103              		.loc 1 1851 0
 14104 0064 0130     		adds	r0, r0, #1
 14105              	.LVL1803:
1853:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == ' ') break;
 14106              		.loc 1 1853 0
 14107 0066 202B     		cmp	r3, #32
 14108 0068 11D0     		beq	.L1761
1855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (_USE_LFN && (nt & NS_BODY) && IsUpper(c)) c += 0x20;
 14109              		.loc 1 1855 0
 14110 006a 07F00806 		and	r6, r7, #8
1854:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == NDDE) c = (TCHAR)DDE;
 14111              		.loc 1 1854 0
 14112 006e 052B     		cmp	r3, #5
 14113 0070 08BF     		it	eq
 14114 0072 E523     		moveq	r3, #229
 14115              	.LVL1804:
1855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (_USE_LFN && (nt & NS_BODY) && IsUpper(c)) c += 0x20;
 14116              		.loc 1 1855 0
 14117 0074 F6B2     		uxtb	r6, r6
 14118 0076 A3F1410C 		sub	ip, r3, #65
 14119 007a 26B1     		cbz	r6, .L1763
 14120 007c BCF1190F 		cmp	ip, #25
 14121 0080 01D8     		bhi	.L1763
 14122 0082 2033     		adds	r3, r3, #32
 14123              	.LVL1805:
 14124 0084 DBB2     		uxtb	r3, r3
 14125              	.LVL1806:
 14126              	.L1763:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14127              		.loc 1 1851 0
 14128 0086 0828     		cmp	r0, #8
1862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p++ = c;
 14129              		.loc 1 1862 0
 14130 0088 02F8013B 		strb	r3, [r2], #1
 14131              	.LVL1807:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14132              		.loc 1 1851 0
 14133 008c E9D1     		bne	.L1764
 14134              	.LVL1808:
 14135              	.L1761:
1864:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dir[8] != ' ') {		/* Copy name extension */
 14136              		.loc 1 1864 0
 14137 008e 0B7A     		ldrb	r3, [r1, #8]	@ zero_extendqisi2
 14138 0090 202B     		cmp	r3, #32
 14139 0092 16D0     		beq	.L1765
1865:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p++ = '.';
 14140              		.loc 1 1865 0
 14141 0094 2E23     		movs	r3, #46
 14142 0096 02F8013B 		strb	r3, [r2], #1
 14143              	.LVL1809:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14144              		.loc 1 1866 0
 14145 009a 0820     		movs	r0, #8
 14146              	.LVL1810:
 14147              	.L1767:
1867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				c = dir[i];
 14148              		.loc 1 1867 0
 14149 009c 0B5C     		ldrb	r3, [r1, r0]	@ zero_extendqisi2
 14150              	.LVL1811:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14151              		.loc 1 1866 0
 14152 009e 0130     		adds	r0, r0, #1
 14153              	.LVL1812:
1868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c == ' ') break;
 14154              		.loc 1 1868 0
 14155 00a0 202B     		cmp	r3, #32
1869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (_USE_LFN && (nt & NS_EXT) && IsUpper(c)) c += 0x20;
 14156              		.loc 1 1869 0
 14157 00a2 A3F1410C 		sub	ip, r3, #65
1868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c == ' ') break;
 14158              		.loc 1 1868 0
 14159 00a6 0CD0     		beq	.L1765
1869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (_USE_LFN && (nt & NS_EXT) && IsUpper(c)) c += 0x20;
 14160              		.loc 1 1869 0
 14161 00a8 07F01006 		and	r6, r7, #16
 14162 00ac F6B2     		uxtb	r6, r6
 14163 00ae 26B1     		cbz	r6, .L1766
 14164 00b0 BCF1190F 		cmp	ip, #25
 14165 00b4 01D8     		bhi	.L1766
 14166 00b6 2033     		adds	r3, r3, #32
 14167 00b8 DBB2     		uxtb	r3, r3
 14168              	.LVL1813:
 14169              	.L1766:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14170              		.loc 1 1866 0
 14171 00ba 0B28     		cmp	r0, #11
1876:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				*p++ = c;
 14172              		.loc 1 1876 0
 14173 00bc 02F8013B 		strb	r3, [r2], #1
 14174              	.LVL1814:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14175              		.loc 1 1866 0
 14176 00c0 ECD1     		bne	.L1767
 14177              	.LVL1815:
 14178              	.L1765:
1879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
 14179              		.loc 1 1879 0
 14180 00c2 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 14181 00c4 2B72     		strb	r3, [r5, #8]
1880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
 14182              		.loc 1 1880 0
 14183 00c6 8B7F     		ldrb	r3, [r1, #30]	@ zero_extendqisi2
 14184 00c8 CF7F     		ldrb	r7, [r1, #31]	@ zero_extendqisi2
 14185 00ca 0E7F     		ldrb	r6, [r1, #28]	@ zero_extendqisi2
 14186 00cc 487F     		ldrb	r0, [r1, #29]	@ zero_extendqisi2
 14187 00ce 1B04     		lsls	r3, r3, #16
 14188 00d0 43EA0763 		orr	r3, r3, r7, lsl #24
 14189 00d4 3343     		orrs	r3, r3, r6
 14190 00d6 43EA0023 		orr	r3, r3, r0, lsl #8
 14191 00da 2B60     		str	r3, [r5, #0]
1881:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
 14192              		.loc 1 1881 0
 14193 00dc 487E     		ldrb	r0, [r1, #25]	@ zero_extendqisi2
 14194 00de 0B7E     		ldrb	r3, [r1, #24]	@ zero_extendqisi2
 14195 00e0 43EA0023 		orr	r3, r3, r0, lsl #8
 14196 00e4 AB80     		strh	r3, [r5, #4]	@ movhi
1882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
 14197              		.loc 1 1882 0
 14198 00e6 C87D     		ldrb	r0, [r1, #23]	@ zero_extendqisi2
 14199 00e8 8B7D     		ldrb	r3, [r1, #22]	@ zero_extendqisi2
 14200 00ea 43EA0023 		orr	r3, r3, r0, lsl #8
 14201 00ee EB80     		strh	r3, [r5, #6]	@ movhi
 14202              	.LVL1816:
 14203              	.L1760:
1884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*p = 0;		/* Terminate SFN str by a \0 */
 14204              		.loc 1 1884 0
 14205 00f0 0026     		movs	r6, #0
 14206 00f2 1670     		strb	r6, [r2, #0]
1887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((fno->lfname != 0) && (fno->lfsize != 0)) {
 14207              		.loc 1 1887 0
 14208 00f4 D5F81880 		ldr	r8, [r5, #24]
 14209 00f8 B8F1000F 		cmp	r8, #0
 14210 00fc 21D0     		beq	.L1768
 14211 00fe EB69     		ldr	r3, [r5, #28]
 14212 0100 FBB1     		cbz	r3, .L1768
 14213              	.LVL1817:
 14214              	.LBB1397:
1892:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->sect && dj->lfn_idx != 0xFFFF) {/* Get LFN if available */
 14215              		.loc 1 1892 0
 14216 0102 2369     		ldr	r3, [r4, #16]
 14217 0104 CBB1     		cbz	r3, .L1771
 14218 0106 228C     		ldrh	r2, [r4, #32]
 14219              	.LVL1818:
 14220 0108 4FF6FF73 		movw	r3, #65535
 14221 010c 9A42     		cmp	r2, r3
 14222 010e 14D0     		beq	.L1771
 14223              	.LVL1819:
1894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while ((w = *lfn++) != 0) {			/* Get an LFN char */
 14224              		.loc 1 1894 0
 14225 0110 E769     		ldr	r7, [r4, #28]
 14226 0112 37F8020B 		ldrh	r0, [r7], #2
 14227              	.LVL1820:
 14228 0116 80B1     		cbz	r0, .L1771
 14229 0118 DFF8C890 		ldr	r9, .L1837+20
 14230 011c 09E0     		b	.L1772
 14231              	.LVL1821:
 14232              	.L1835:
1901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* Buffer overflow, no LFN */
 14233              		.loc 1 1901 0
 14234 011e EB69     		ldr	r3, [r5, #28]
 14235 0120 013B     		subs	r3, r3, #1
 14236 0122 B342     		cmp	r3, r6
 14237 0124 09D9     		bls	.L1771
1902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tp[i++] = (TCHAR)w;
 14238              		.loc 1 1902 0
 14239 0126 08F80600 		strb	r0, [r8, r6]
1894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while ((w = *lfn++) != 0) {			/* Get an LFN char */
 14240              		.loc 1 1894 0
 14241 012a 37F8020B 		ldrh	r0, [r7], #2
 14242              	.LVL1822:
1902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tp[i++] = (TCHAR)w;
 14243              		.loc 1 1902 0
 14244 012e 0136     		adds	r6, r6, #1
 14245              	.LVL1823:
1894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while ((w = *lfn++) != 0) {			/* Get an LFN char */
 14246              		.loc 1 1894 0
 14247 0130 20B1     		cbz	r0, .L1770
 14248              	.LVL1824:
 14249              	.L1772:
1896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				w = ff_convert(w, 0);			/* Unicode -> OEM conversion */
 14250              		.loc 1 1896 0
 14251 0132 0021     		movs	r1, #0
 14252 0134 C847     		blx	r9
 14253              	.LVL1825:
1897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!w) { i = 0; break; }		/* Could not convert, no LFN */
 14254              		.loc 1 1897 0
 14255 0136 0028     		cmp	r0, #0
 14256 0138 F1D1     		bne	.L1835
 14257              	.LVL1826:
 14258              	.L1771:
1891:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		i = 0;
 14259              		.loc 1 1891 0
 14260 013a 0026     		movs	r6, #0
 14261              	.L1770:
 14262              	.LVL1827:
1905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tp[i] = 0;	/* Terminate the LFN str by a \0 */
 14263              		.loc 1 1905 0
 14264 013c 0023     		movs	r3, #0
 14265 013e 08F80630 		strb	r3, [r8, r6]
 14266              	.LVL1828:
 14267              	.L1768:
 14268              	.LBE1397:
 14269              	.LBE1396:
 14270              	.LBE1395:
 14271              	.LBB1399:
 14272              	.LBB1400:
1123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = dj->index + 1;
 14273              		.loc 1 1123 0
 14274 0142 E588     		ldrh	r5, [r4, #6]
 14275              	.LVL1829:
 14276 0144 0135     		adds	r5, r5, #1
 14277 0146 ADB2     		uxth	r5, r5
 14278              	.LVL1830:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 14279              		.loc 1 1124 0
 14280 0148 35B9     		cbnz	r5, .L1836
 14281              	.L1773:
 14282              	.LBE1400:
 14283              	.LBE1399:
3026:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj->sect = 0;
 14284              		.loc 1 3026 0
 14285 014a 0020     		movs	r0, #0
 14286 014c 2061     		str	r0, [r4, #16]
 14287              	.LVL1831:
 14288 014e 62E7     		b	.L1801
 14289              	.LVL1832:
 14290              	.L1834:
3019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = 0;
 14291              		.loc 1 3019 0
 14292 0150 2661     		str	r6, [r4, #16]
 14293              	.LVL1833:
 14294              	.LBB1407:
 14295              	.LBB1398:
1847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	p = fno->fname;
 14296              		.loc 1 1847 0
 14297 0152 05F10902 		add	r2, r5, #9
 14298              	.LVL1834:
 14299 0156 CBE7     		b	.L1760
 14300              	.LVL1835:
 14301              	.L1836:
 14302              	.LBE1398:
 14303              	.LBE1407:
 14304              	.LBB1408:
 14305              	.LBB1405:
1124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
 14306              		.loc 1 1124 0
 14307 0158 2369     		ldr	r3, [r4, #16]
 14308 015a 002B     		cmp	r3, #0
 14309 015c F5D0     		beq	.L1773
1127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(i % (SS(dj->fs) / SZ_DIR))) {	/* Sector changed? */
 14310              		.loc 1 1127 0
 14311 015e 15F00F06 		ands	r6, r5, #15
 14312 0162 0CD0     		beq	.L1774
 14313 0164 2368     		ldr	r3, [r4, #0]
 14314              	.L1775:
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 14315              		.loc 1 1168 0
 14316 0166 03EB4613 		add	r3, r3, r6, lsl #5
 14317 016a 3033     		adds	r3, r3, #48
1167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->index = i;
 14318              		.loc 1 1167 0
 14319 016c E580     		strh	r5, [r4, #6]	@ movhi
1168:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	dj->dir = dj->fs->win + (i % (SS(dj->fs) / SZ_DIR)) * SZ_DIR;
 14320              		.loc 1 1168 0
 14321 016e 6361     		str	r3, [r4, #20]
1170:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return FR_OK;
 14322              		.loc 1 1170 0
 14323 0170 0020     		movs	r0, #0
 14324 0172 50E7     		b	.L1801
 14325              	.LVL1836:
 14326              	.L1833:
 14327              	.LBE1405:
 14328              	.LBE1408:
3014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = dir_sdi(dj, 0);			/* Rewind the directory object */
 14329              		.loc 1 3014 0
 14330 0174 2046     		mov	r0, r4
 14331 0176 2946     		mov	r1, r5
 14332 0178 184B     		ldr	r3, .L1837+12
 14333 017a 9847     		blx	r3
 14334              	.LVL1837:
 14335 017c 4BE7     		b	.L1801
 14336              	.LVL1838:
 14337              	.L1774:
 14338              	.LBB1409:
 14339              	.LBB1406:
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 14340              		.loc 1 1130 0
 14341 017e E168     		ldr	r1, [r4, #12]
1128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		dj->sect++;					/* Next sector */
 14342              		.loc 1 1128 0
 14343 0180 0133     		adds	r3, r3, #1
 14344 0182 2361     		str	r3, [r4, #16]
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 14345              		.loc 1 1131 0
 14346 0184 2368     		ldr	r3, [r4, #0]
1130:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->clust == 0) {	/* Static table */
 14347              		.loc 1 1130 0
 14348 0186 19B9     		cbnz	r1, .L1776
1131:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (i >= dj->fs->n_rootdir)	/* Report EOT when end of table */
 14349              		.loc 1 1131 0
 14350 0188 1A89     		ldrh	r2, [r3, #8]
 14351 018a AA42     		cmp	r2, r5
 14352 018c DDD9     		bls	.L1773
 14353 018e EAE7     		b	.L1775
 14354              	.L1776:
1135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (((i / (SS(dj->fs) / SZ_DIR)) & (dj->fs->csize - 1)) == 0) {	/* Cluster changed? */
 14355              		.loc 1 1135 0
 14356 0190 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 14357 0192 013A     		subs	r2, r2, #1
 14358 0194 12EA1512 		ands	r2, r2, r5, lsr #4
 14359 0198 E5D1     		bne	.L1775
1136:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				clst = get_fat(dj->fs, dj->clust);				/* Get next cluster */
 14360              		.loc 1 1136 0
 14361 019a 1846     		mov	r0, r3
 14362 019c 104B     		ldr	r3, .L1837+16
 14363 019e 9847     		blx	r3
 14364              	.LVL1839:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 14365              		.loc 1 1137 0
 14366 01a0 0128     		cmp	r0, #1
 14367 01a2 11D9     		bls	.L1786
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 14368              		.loc 1 1138 0
 14369 01a4 421C     		adds	r2, r0, #1
 14370 01a6 11D0     		beq	.L1787
1139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst >= dj->fs->n_fatent) {					/* When it reached end of dynamic table */
 14371              		.loc 1 1139 0
 14372 01a8 2368     		ldr	r3, [r4, #0]
 14373 01aa 9A69     		ldr	r2, [r3, #24]
 14374 01ac 9042     		cmp	r0, r2
 14375 01ae CCD2     		bcs	.L1773
 14376              	.LBB1401:
 14377              	.LBB1402:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 14378              		.loc 1 807 0
 14379 01b0 023A     		subs	r2, r2, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 14380              		.loc 1 806 0
 14381 01b2 811E     		subs	r1, r0, #2
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 14382              		.loc 1 807 0
 14383 01b4 9142     		cmp	r1, r2
 14384              	.LBE1402:
 14385              	.LBE1401:
1161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->clust = clst;				/* Initialize data for new cluster */
 14386              		.loc 1 1161 0
 14387 01b6 E060     		str	r0, [r4, #12]
 14388              	.LVL1840:
 14389              	.LBB1404:
 14390              	.LBB1403:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 14391              		.loc 1 808 0
 14392 01b8 3BBF     		ittet	cc
 14393 01ba 9878     		ldrbcc	r0, [r3, #2]	@ zero_extendqisi2
 14394              	.LVL1841:
 14395 01bc 9A6A     		ldrcc	r2, [r3, #40]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 14396              		.loc 1 807 0
 14397 01be 3246     		movcs	r2, r6
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 14398              		.loc 1 808 0
 14399 01c0 00FB0122 		mlacc	r2, r0, r1, r2
 14400              	.LBE1403:
 14401              	.LBE1404:
1162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj->sect = clust2sect(dj->fs, clst);
 14402              		.loc 1 1162 0
 14403 01c4 2261     		str	r2, [r4, #16]
 14404 01c6 CEE7     		b	.L1775
 14405              	.LVL1842:
 14406              	.L1786:
1137:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 14407              		.loc 1 1137 0
 14408 01c8 0220     		movs	r0, #2
 14409              	.LVL1843:
 14410 01ca 24E7     		b	.L1801
 14411              	.LVL1844:
 14412              	.L1787:
1138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 14413              		.loc 1 1138 0
 14414 01cc 0120     		movs	r0, #1
 14415              	.LVL1845:
 14416 01ce 22E7     		b	.L1801
 14417              	.L1838:
 14418              		.align	2
 14419              	.L1837:
 14420 01d0 00000000 		.word	disk_status
 14421 01d4 00000000 		.word	.LANCHOR4
 14422 01d8 00000000 		.word	dir_read
 14423 01dc 00000000 		.word	dir_sdi
 14424 01e0 00000000 		.word	get_fat
 14425 01e4 00000000 		.word	ff_convert
 14426              	.LBE1406:
 14427              	.LBE1409:
 14428              		.cfi_endproc
 14429              	.LFE36:
 14431              		.section	.text.f_stat,"ax",%progbits
 14432              		.align	2
 14433              		.global	f_stat
 14434              		.thumb
 14435              		.thumb_func
 14437              	f_stat:
 14438              	.LFB37:
3048:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 14439              		.loc 1 3048 0
 14440              		.cfi_startproc
 14441              		@ args = 0, pretend = 0, frame = 56
 14442              		@ frame_needed = 0, uses_anonymous_args = 0
 14443              	.LVL1846:
 14444 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 14445              	.LCFI37:
 14446              		.cfi_def_cfa_offset 36
 14447              		.cfi_offset 4, -36
 14448              		.cfi_offset 5, -32
 14449              		.cfi_offset 6, -28
 14450              		.cfi_offset 7, -24
 14451              		.cfi_offset 8, -20
 14452              		.cfi_offset 9, -16
 14453              		.cfi_offset 10, -12
 14454              		.cfi_offset 11, -8
 14455              		.cfi_offset 14, -4
 14456              	.LBB1423:
 14457              	.LBB1424:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 14458              		.loc 1 2023 0
 14459 0004 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 14460 0006 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 14461              		.loc 1 2024 0
 14462 0008 092B     		cmp	r3, #9
 14463              	.LBE1424:
 14464              	.LBE1423:
3048:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 14465              		.loc 1 3048 0
 14466 000a 8FB0     		sub	sp, sp, #60
 14467              	.LCFI38:
 14468              		.cfi_def_cfa_offset 96
 14469              	.LVL1847:
3048:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 14470              		.loc 1 3048 0
 14471 000c 0446     		mov	r4, r0
 14472              	.LVL1848:
 14473 000e 0E46     		mov	r6, r1
 14474              	.LBB1447:
 14475              	.LBB1443:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 14476              		.loc 1 2024 0
 14477 0010 40F29C80 		bls	.L1948
 14478              	.LVL1849:
 14479              	.L1840:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 14480              		.loc 1 2037 0
 14481 0014 6A4B     		ldr	r3, .L1956
 14482              	.LVL1850:
 14483 0016 1D68     		ldr	r5, [r3, #0]
 14484              	.LVL1851:
 14485 0018 0595     		str	r5, [sp, #20]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 14486              		.loc 1 2038 0
 14487 001a 002D     		cmp	r5, #0
 14488 001c 00F0AC80 		beq	.L1878
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 14489              		.loc 1 2042 0
 14490 0020 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 14491 0022 002B     		cmp	r3, #0
 14492 0024 00F09E80 		beq	.L1845
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 14493              		.loc 1 2043 0
 14494 0028 664B     		ldr	r3, .L1956+4
 14495 002a 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 14496              	.LVL1852:
 14497 002c 9847     		blx	r3
 14498              	.LVL1853:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 14499              		.loc 1 2044 0
 14500 002e C307     		lsls	r3, r0, #31
 14501 0030 00F19880 		bmi	.L1845
 14502              	.LVL1854:
 14503              	.L1844:
 14504              	.LBE1443:
 14505              	.LBE1447:
3056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 14506              		.loc 1 3056 0
 14507 0034 644B     		ldr	r3, .L1956+8
 14508 0036 0C93     		str	r3, [sp, #48]
 14509 0038 02AB     		add	r3, sp, #8
3057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 14510              		.loc 1 3057 0
 14511 003a 2146     		mov	r1, r4
3056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 14512              		.loc 1 3056 0
 14513 003c 0B93     		str	r3, [sp, #44]
3057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 14514              		.loc 1 3057 0
 14515 003e 05A8     		add	r0, sp, #20
 14516              	.LVL1855:
 14517 0040 624B     		ldr	r3, .L1956+12
 14518 0042 9847     		blx	r3
 14519              	.LVL1856:
3058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 14520              		.loc 1 3058 0
 14521 0044 0446     		mov	r4, r0
 14522 0046 0028     		cmp	r0, #0
 14523 0048 40F08880 		bne	.L1906
3059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dj.dir)		/* Found an object */
 14524              		.loc 1 3059 0
 14525 004c 0A9A     		ldr	r2, [sp, #40]
 14526 004e 002A     		cmp	r2, #0
 14527 0050 00F09480 		beq	.L1889
 14528              	.LVL1857:
 14529              	.LBB1448:
 14530              	.LBB1449:
1848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->sect) {
 14531              		.loc 1 1848 0
 14532 0054 DDF82490 		ldr	r9, [sp, #36]
1847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	p = fno->fname;
 14533              		.loc 1 1847 0
 14534 0058 06F10900 		add	r0, r6, #9
 14535              	.LVL1858:
1848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (dj->sect) {
 14536              		.loc 1 1848 0
 14537 005c B9F1000F 		cmp	r9, #0
 14538 0060 48D0     		beq	.L1861
 14539              	.LVL1859:
1850:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		nt = dir[DIR_NTres];		/* NT flag */
 14540              		.loc 1 1850 0
 14541 0062 177B     		ldrb	r7, [r2, #12]	@ zero_extendqisi2
 14542              	.LVL1860:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14543              		.loc 1 1851 0
 14544 0064 2146     		mov	r1, r4
 14545              	.LVL1861:
 14546              	.L1865:
1852:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = dir[i];
 14547              		.loc 1 1852 0
 14548 0066 535C     		ldrb	r3, [r2, r1]	@ zero_extendqisi2
 14549              	.LVL1862:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14550              		.loc 1 1851 0
 14551 0068 0131     		adds	r1, r1, #1
 14552              	.LVL1863:
1853:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == ' ') break;
 14553              		.loc 1 1853 0
 14554 006a 202B     		cmp	r3, #32
 14555 006c 11D0     		beq	.L1862
1855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (_USE_LFN && (nt & NS_BODY) && IsUpper(c)) c += 0x20;
 14556              		.loc 1 1855 0
 14557 006e 07F00805 		and	r5, r7, #8
1854:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == NDDE) c = (TCHAR)DDE;
 14558              		.loc 1 1854 0
 14559 0072 052B     		cmp	r3, #5
 14560 0074 08BF     		it	eq
 14561 0076 E523     		moveq	r3, #229
 14562              	.LVL1864:
1855:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (_USE_LFN && (nt & NS_BODY) && IsUpper(c)) c += 0x20;
 14563              		.loc 1 1855 0
 14564 0078 EDB2     		uxtb	r5, r5
 14565 007a A3F1410C 		sub	ip, r3, #65
 14566 007e 25B1     		cbz	r5, .L1864
 14567 0080 BCF1190F 		cmp	ip, #25
 14568 0084 01D8     		bhi	.L1864
 14569 0086 2033     		adds	r3, r3, #32
 14570              	.LVL1865:
 14571 0088 DBB2     		uxtb	r3, r3
 14572              	.LVL1866:
 14573              	.L1864:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14574              		.loc 1 1851 0
 14575 008a 0829     		cmp	r1, #8
1862:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p++ = c;
 14576              		.loc 1 1862 0
 14577 008c 00F8013B 		strb	r3, [r0], #1
 14578              	.LVL1867:
1851:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; i < 8; i++) {	/* Copy name body */
 14579              		.loc 1 1851 0
 14580 0090 E9D1     		bne	.L1865
 14581              	.LVL1868:
 14582              	.L1862:
1864:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dir[8] != ' ') {		/* Copy name extension */
 14583              		.loc 1 1864 0
 14584 0092 137A     		ldrb	r3, [r2, #8]	@ zero_extendqisi2
 14585 0094 202B     		cmp	r3, #32
 14586 0096 16D0     		beq	.L1866
1865:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*p++ = '.';
 14587              		.loc 1 1865 0
 14588 0098 2E23     		movs	r3, #46
 14589 009a 00F8013B 		strb	r3, [r0], #1
 14590              	.LVL1869:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14591              		.loc 1 1866 0
 14592 009e 0821     		movs	r1, #8
 14593              	.LVL1870:
 14594              	.L1868:
1867:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				c = dir[i];
 14595              		.loc 1 1867 0
 14596 00a0 535C     		ldrb	r3, [r2, r1]	@ zero_extendqisi2
 14597              	.LVL1871:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14598              		.loc 1 1866 0
 14599 00a2 0131     		adds	r1, r1, #1
 14600              	.LVL1872:
1868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c == ' ') break;
 14601              		.loc 1 1868 0
 14602 00a4 202B     		cmp	r3, #32
1869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (_USE_LFN && (nt & NS_EXT) && IsUpper(c)) c += 0x20;
 14603              		.loc 1 1869 0
 14604 00a6 A3F1410C 		sub	ip, r3, #65
1868:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (c == ' ') break;
 14605              		.loc 1 1868 0
 14606 00aa 0CD0     		beq	.L1866
1869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (_USE_LFN && (nt & NS_EXT) && IsUpper(c)) c += 0x20;
 14607              		.loc 1 1869 0
 14608 00ac 07F01005 		and	r5, r7, #16
 14609 00b0 EDB2     		uxtb	r5, r5
 14610 00b2 25B1     		cbz	r5, .L1867
 14611 00b4 BCF1190F 		cmp	ip, #25
 14612 00b8 01D8     		bhi	.L1867
 14613 00ba 2033     		adds	r3, r3, #32
 14614 00bc DBB2     		uxtb	r3, r3
 14615              	.LVL1873:
 14616              	.L1867:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14617              		.loc 1 1866 0
 14618 00be 0B29     		cmp	r1, #11
1876:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				*p++ = c;
 14619              		.loc 1 1876 0
 14620 00c0 00F8013B 		strb	r3, [r0], #1
 14621              	.LVL1874:
1866:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (i = 8; i < 11; i++) {
 14622              		.loc 1 1866 0
 14623 00c4 ECD1     		bne	.L1868
 14624              	.LVL1875:
 14625              	.L1866:
1879:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
 14626              		.loc 1 1879 0
 14627 00c6 D37A     		ldrb	r3, [r2, #11]	@ zero_extendqisi2
 14628 00c8 3372     		strb	r3, [r6, #8]
1880:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
 14629              		.loc 1 1880 0
 14630 00ca 937F     		ldrb	r3, [r2, #30]	@ zero_extendqisi2
 14631 00cc D77F     		ldrb	r7, [r2, #31]	@ zero_extendqisi2
 14632 00ce 157F     		ldrb	r5, [r2, #28]	@ zero_extendqisi2
 14633 00d0 517F     		ldrb	r1, [r2, #29]	@ zero_extendqisi2
 14634 00d2 1B04     		lsls	r3, r3, #16
 14635 00d4 43EA0763 		orr	r3, r3, r7, lsl #24
 14636 00d8 2B43     		orrs	r3, r3, r5
 14637 00da 43EA0123 		orr	r3, r3, r1, lsl #8
 14638 00de 3360     		str	r3, [r6, #0]
1881:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
 14639              		.loc 1 1881 0
 14640 00e0 517E     		ldrb	r1, [r2, #25]	@ zero_extendqisi2
 14641 00e2 137E     		ldrb	r3, [r2, #24]	@ zero_extendqisi2
 14642 00e4 43EA0123 		orr	r3, r3, r1, lsl #8
 14643 00e8 B380     		strh	r3, [r6, #4]	@ movhi
1882:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
 14644              		.loc 1 1882 0
 14645 00ea D17D     		ldrb	r1, [r2, #23]	@ zero_extendqisi2
 14646 00ec 937D     		ldrb	r3, [r2, #22]	@ zero_extendqisi2
 14647 00ee 43EA0123 		orr	r3, r3, r1, lsl #8
 14648 00f2 F380     		strh	r3, [r6, #6]	@ movhi
 14649              	.LVL1876:
 14650              	.L1861:
1884:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*p = 0;		/* Terminate SFN str by a \0 */
 14651              		.loc 1 1884 0
 14652 00f4 0025     		movs	r5, #0
 14653 00f6 0570     		strb	r5, [r0, #0]
1887:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((fno->lfname != 0) && (fno->lfsize != 0)) {
 14654              		.loc 1 1887 0
 14655 00f8 D6F81880 		ldr	r8, [r6, #24]
 14656 00fc B8F1000F 		cmp	r8, #0
 14657 0100 2CD0     		beq	.L1906
 14658 0102 F369     		ldr	r3, [r6, #28]
 14659 0104 53B3     		cbz	r3, .L1906
 14660              	.LVL1877:
 14661              	.LBB1450:
1892:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (dj->sect && dj->lfn_idx != 0xFFFF) {/* Get LFN if available */
 14662              		.loc 1 1892 0
 14663 0106 B9F1000F 		cmp	r9, #0
 14664 010a 1AD0     		beq	.L1871
 14665 010c BDF83420 		ldrh	r2, [sp, #52]
 14666 0110 4FF6FF73 		movw	r3, #65535
 14667 0114 9A42     		cmp	r2, r3
 14668 0116 14D0     		beq	.L1871
 14669              	.LVL1878:
1894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while ((w = *lfn++) != 0) {			/* Get an LFN char */
 14670              		.loc 1 1894 0
 14671 0118 0C9F     		ldr	r7, [sp, #48]
 14672 011a 37F8020B 		ldrh	r0, [r7], #2
 14673              	.LVL1879:
 14674 011e 80B1     		cbz	r0, .L1871
 14675 0120 DFF8B490 		ldr	r9, .L1956+24
 14676 0124 09E0     		b	.L1872
 14677              	.LVL1880:
 14678              	.L1949:
1901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* Buffer overflow, no LFN */
 14679              		.loc 1 1901 0
 14680 0126 F369     		ldr	r3, [r6, #28]
 14681 0128 013B     		subs	r3, r3, #1
 14682 012a 9D42     		cmp	r5, r3
 14683 012c 09D2     		bcs	.L1871
1902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tp[i++] = (TCHAR)w;
 14684              		.loc 1 1902 0
 14685 012e 08F80500 		strb	r0, [r8, r5]
1894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while ((w = *lfn++) != 0) {			/* Get an LFN char */
 14686              		.loc 1 1894 0
 14687 0132 37F8020B 		ldrh	r0, [r7], #2
 14688              	.LVL1881:
1902:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				tp[i++] = (TCHAR)w;
 14689              		.loc 1 1902 0
 14690 0136 0135     		adds	r5, r5, #1
 14691              	.LVL1882:
1894:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while ((w = *lfn++) != 0) {			/* Get an LFN char */
 14692              		.loc 1 1894 0
 14693 0138 20B1     		cbz	r0, .L1870
 14694              	.LVL1883:
 14695              	.L1872:
1896:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				w = ff_convert(w, 0);			/* Unicode -> OEM conversion */
 14696              		.loc 1 1896 0
 14697 013a 0021     		movs	r1, #0
 14698 013c C847     		blx	r9
 14699              	.LVL1884:
1897:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (!w) { i = 0; break; }		/* Could not convert, no LFN */
 14700              		.loc 1 1897 0
 14701 013e 0028     		cmp	r0, #0
 14702 0140 F1D1     		bne	.L1949
 14703              	.LVL1885:
 14704              	.L1871:
1891:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		i = 0;
 14705              		.loc 1 1891 0
 14706 0142 0025     		movs	r5, #0
 14707              	.L1870:
 14708              	.LVL1886:
1905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tp[i] = 0;	/* Terminate the LFN str by a \0 */
 14709              		.loc 1 1905 0
 14710 0144 0023     		movs	r3, #0
 14711 0146 08F80530 		strb	r3, [r8, r5]
 14712 014a 07E0     		b	.L1906
 14713              	.LVL1887:
 14714              	.L1948:
 14715              	.LBE1450:
 14716              	.LBE1449:
 14717              	.LBE1448:
 14718              	.LBB1451:
 14719              	.LBB1444:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 14720              		.loc 1 2024 0
 14721 014c 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 14722 014e 3A2A     		cmp	r2, #58
 14723 0150 7FF460AF 		bne	.L1840
 14724              	.LVL1888:
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 14725              		.loc 1 2035 0
 14726 0154 002B     		cmp	r3, #0
 14727 0156 00F06781 		beq	.L1950
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 14728              		.loc 1 2036 0
 14729 015a 0B24     		movs	r4, #11
 14730              	.LVL1889:
 14731              	.L1906:
 14732              	.LBE1444:
 14733              	.LBE1451:
3068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 14734              		.loc 1 3068 0
 14735 015c 2046     		mov	r0, r4
 14736 015e 0FB0     		add	sp, sp, #60
 14737 0160 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 14738              	.LVL1890:
 14739              	.L1845:
 14740              	.LBB1452:
 14741              	.LBB1445:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 14742              		.loc 1 2054 0
 14743 0164 0020     		movs	r0, #0
 14744 0166 2870     		strb	r0, [r5, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 14745              		.loc 1 2055 0
 14746 0168 6870     		strb	r0, [r5, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 14747              		.loc 1 2056 0
 14748 016a 194B     		ldr	r3, .L1956+16
 14749 016c 9847     		blx	r3
 14750              	.LVL1891:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 14751              		.loc 1 2057 0
 14752 016e 10F00102 		ands	r2, r0, #1
 14753 0172 05D0     		beq	.L1951
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 14754              		.loc 1 2058 0
 14755 0174 0324     		movs	r4, #3
 14756 0176 F1E7     		b	.L1906
 14757              	.LVL1892:
 14758              	.L1878:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 14759              		.loc 1 2038 0
 14760 0178 0C24     		movs	r4, #12
 14761 017a EFE7     		b	.L1906
 14762              	.LVL1893:
 14763              	.L1889:
 14764              	.LBE1445:
 14765              	.LBE1452:
3062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;
 14766              		.loc 1 3062 0
 14767 017c 0624     		movs	r4, #6
 14768 017e EDE7     		b	.L1906
 14769              	.LVL1894:
 14770              	.L1951:
 14771              	.LBB1453:
 14772              	.LBB1446:
 14773              	.LBB1425:
 14774              	.LBB1426:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 14775              		.loc 1 1987 0
 14776 0180 05F13007 		add	r7, r5, #48
 14777 0184 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 14778              	.LVL1895:
 14779 0186 DFF85480 		ldr	r8, .L1956+28
 14780 018a 3946     		mov	r1, r7
 14781 018c 0123     		movs	r3, #1
 14782 018e C047     		blx	r8
 14783              	.LVL1896:
 14784 0190 40B1     		cbz	r0, .L1952
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 14785              		.loc 1 1988 0
 14786 0192 0323     		movs	r3, #3
 14787              	.L1846:
 14788              	.LBE1426:
 14789              	.LBE1425:
 14790              	.LBB1432:
 14791              	.LBB1433:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 14792              		.loc 1 2066 0
 14793 0194 4FF00009 		mov	r9, #0
 14794              	.LVL1897:
 14795              	.L1873:
 14796              	.LBE1433:
 14797              	.LBE1432:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 14798              		.loc 1 2078 0
 14799 0198 032B     		cmp	r3, #3
 14800 019a 00F0CE80 		beq	.L1887
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 14801              		.loc 1 2079 0
 14802 019e 03B3     		cbz	r3, .L1847
 14803              	.LVL1898:
 14804              	.L1850:
 14805 01a0 0D24     		movs	r4, #13
 14806 01a2 DBE7     		b	.L1906
 14807              	.LVL1899:
 14808              	.L1952:
 14809              	.LBB1438:
 14810              	.LBB1429:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 14811              		.loc 1 1989 0
 14812 01a4 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 14813 01a8 95F82FA2 		ldrb	sl, [r5, #559]	@ zero_extendqisi2
 14814 01ac 43EA0A2A 		orr	sl, r3, sl, lsl #8
 14815 01b0 084B     		ldr	r3, .L1956+20
 14816 01b2 0FFA8AFA 		sxth	sl, sl
 14817 01b6 9A45     		cmp	sl, r3
 14818 01b8 00F0C180 		beq	.L1953
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 14819              		.loc 1 1990 0
 14820 01bc 0223     		movs	r3, #2
 14821 01be E9E7     		b	.L1846
 14822              	.L1957:
 14823              		.align	2
 14824              	.L1956:
 14825 01c0 00000000 		.word	.LANCHOR2
 14826 01c4 00000000 		.word	disk_status
 14827 01c8 00000000 		.word	.LANCHOR4
 14828 01cc 00000000 		.word	follow_path
 14829 01d0 00000000 		.word	disk_initialize
 14830 01d4 55AAFFFF 		.word	-21931
 14831 01d8 00000000 		.word	ff_convert
 14832 01dc 00000000 		.word	disk_read
 14833              	.LVL1900:
 14834              	.L1883:
 14835              	.LBE1429:
 14836              	.LBE1438:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 14837              		.loc 1 2066 0
 14838 01e0 8146     		mov	r9, r0
 14839              	.LVL1901:
 14840              	.L1847:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 14841              		.loc 1 2083 0
 14842 01e2 95F83C20 		ldrb	r2, [r5, #60]	@ zero_extendqisi2
 14843 01e6 95F83B30 		ldrb	r3, [r5, #59]	@ zero_extendqisi2
 14844 01ea 43EA0223 		orr	r3, r3, r2, lsl #8
 14845 01ee B3F5007F 		cmp	r3, #512
 14846 01f2 D5D1     		bne	.L1850
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 14847              		.loc 1 2086 0
 14848 01f4 95F84720 		ldrb	r2, [r5, #71]	@ zero_extendqisi2
 14849 01f8 95F84630 		ldrb	r3, [r5, #70]	@ zero_extendqisi2
 14850              	.LVL1902:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 14851              		.loc 1 2087 0
 14852 01fc 53EA0223 		orrs	r3, r3, r2, lsl #8
 14853              	.LVL1903:
 14854 0200 0DD1     		bne	.L1851
 14855 0202 95F85610 		ldrb	r1, [r5, #86]	@ zero_extendqisi2
 14856 0206 95F85700 		ldrb	r0, [r5, #87]	@ zero_extendqisi2
 14857 020a 95F85430 		ldrb	r3, [r5, #84]	@ zero_extendqisi2
 14858              	.LVL1904:
 14859 020e 95F85520 		ldrb	r2, [r5, #85]	@ zero_extendqisi2
 14860              	.LVL1905:
 14861 0212 0904     		lsls	r1, r1, #16
 14862 0214 41EA0061 		orr	r1, r1, r0, lsl #24
 14863 0218 0B43     		orrs	r3, r3, r1
 14864 021a 43EA0223 		orr	r3, r3, r2, lsl #8
 14865              	.LVL1906:
 14866              	.L1851:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 14867              		.loc 1 2090 0
 14868 021e 95F840B0 		ldrb	fp, [r5, #64]	@ zero_extendqisi2
 14869              	.LVL1907:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 14870              		.loc 1 2088 0
 14871 0222 EB61     		str	r3, [r5, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 14872              		.loc 1 2091 0
 14873 0224 0BF1FF32 		add	r2, fp, #-1
 14874 0228 012A     		cmp	r2, #1
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 14875              		.loc 1 2090 0
 14876 022a 85F803B0 		strb	fp, [r5, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 14877              		.loc 1 2091 0
 14878 022e B7D8     		bhi	.L1850
 14879              	.LVL1908:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 14880              		.loc 1 2094 0
 14881 0230 95F83D20 		ldrb	r2, [r5, #61]	@ zero_extendqisi2
 14882              	.LVL1909:
 14883 0234 AA70     		strb	r2, [r5, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 14884              		.loc 1 2095 0
 14885 0236 002A     		cmp	r2, #0
 14886 0238 B2D0     		beq	.L1850
 14887 023a 511E     		subs	r1, r2, #1
 14888 023c 1142     		tst	r1, r2
 14889 023e AFD1     		bne	.L1850
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 14890              		.loc 1 2097 0
 14891 0240 95F84110 		ldrb	r1, [r5, #65]	@ zero_extendqisi2
 14892 0244 95F84200 		ldrb	r0, [r5, #66]	@ zero_extendqisi2
 14893 0248 41EA0020 		orr	r0, r1, r0, lsl #8
 14894 024c 81B2     		uxth	r1, r0
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 14895              		.loc 1 2098 0
 14896 024e 0007     		lsls	r0, r0, #28
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 14897              		.loc 1 2097 0
 14898 0250 2981     		strh	r1, [r5, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 14899              		.loc 1 2098 0
 14900 0252 A5D1     		bne	.L1850
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 14901              		.loc 1 2100 0
 14902 0254 95F844A0 		ldrb	sl, [r5, #68]	@ zero_extendqisi2
 14903 0258 95F84300 		ldrb	r0, [r5, #67]	@ zero_extendqisi2
 14904              	.LVL1910:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 14905              		.loc 1 2101 0
 14906 025c 50EA0A2A 		orrs	sl, r0, sl, lsl #8
 14907              	.LVL1911:
 14908 0260 15D1     		bne	.L1852
 14909 0262 95F85000 		ldrb	r0, [r5, #80]	@ zero_extendqisi2
 14910 0266 95F852C0 		ldrb	ip, [r5, #82]	@ zero_extendqisi2
 14911 026a 95F853A0 		ldrb	sl, [r5, #83]	@ zero_extendqisi2
 14912              	.LVL1912:
 14913 026e 0090     		str	r0, [sp, #0]
 14914 0270 4FEA0C4C 		lsl	ip, ip, #16
 14915 0274 95F85100 		ldrb	r0, [r5, #81]	@ zero_extendqisi2
 14916 0278 4CEA0A6C 		orr	ip, ip, sl, lsl #24
 14917 027c DDF800A0 		ldr	sl, [sp, #0]
 14918 0280 0190     		str	r0, [sp, #4]
 14919 0282 4CEA0A00 		orr	r0, ip, sl
 14920 0286 DDF804C0 		ldr	ip, [sp, #4]
 14921 028a 40EA0C2A 		orr	sl, r0, ip, lsl #8
 14922              	.LVL1913:
 14923              	.L1852:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 14924              		.loc 1 2103 0
 14925 028e 95F83FC0 		ldrb	ip, [r5, #63]	@ zero_extendqisi2
 14926 0292 95F83E00 		ldrb	r0, [r5, #62]	@ zero_extendqisi2
 14927              	.LVL1914:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 14928              		.loc 1 2104 0
 14929 0296 50EA0C2C 		orrs	ip, r0, ip, lsl #8
 14930              	.LVL1915:
 14931 029a 81D0     		beq	.L1850
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 14932              		.loc 1 2092 0
 14933 029c 0BFB03FB 		mul	fp, fp, r3
 14934              	.LVL1916:
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 14935              		.loc 1 2107 0
 14936 02a0 0CEB1110 		add	r0, ip, r1, lsr #4
 14937              	.LVL1917:
 14938 02a4 5844     		add	r0, r0, fp
 14939              	.LVL1918:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 14940              		.loc 1 2108 0
 14941 02a6 5045     		cmp	r0, sl
 14942 02a8 3FF67AAF 		bhi	.L1850
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 14943              		.loc 1 2109 0
 14944 02ac C0EB0A0A 		rsb	sl, r0, sl
 14945              	.LVL1919:
 14946 02b0 BAFBF2F2 		udiv	r2, sl, r2
 14947              	.LVL1920:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 14948              		.loc 1 2110 0
 14949 02b4 002A     		cmp	r2, #0
 14950 02b6 3FF473AF 		beq	.L1850
 14951              	.LVL1921:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 14952              		.loc 1 2112 0
 14953 02ba 40F6F57A 		movw	sl, #4085
 14954 02be 5245     		cmp	r2, sl
 14955 02c0 40F23581 		bls	.L1888
 14956              	.LVL1922:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 14957              		.loc 1 2113 0
 14958 02c4 0AF5704A 		add	sl, sl, #61440
 14959 02c8 5245     		cmp	r2, sl
 14960 02ca 00F21181 		bhi	.L1854
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 14961              		.loc 1 2112 0
 14962 02ce 4FF0020A 		mov	sl, #2
 14963              	.LVL1923:
 14964              	.L1853:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 14965              		.loc 1 2116 0
 14966 02d2 0232     		adds	r2, r2, #2
 14967              	.LVL1924:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 14968              		.loc 1 2117 0
 14969 02d4 4844     		add	r0, r0, r9
 14970              	.LVL1925:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 14971              		.loc 1 2118 0
 14972 02d6 CC44     		add	ip, r9, ip
 14973              	.LVL1926:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 14974              		.loc 1 2116 0
 14975 02d8 AA61     		str	r2, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 14976              		.loc 1 2117 0
 14977 02da A862     		str	r0, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 14978              		.loc 1 2118 0
 14979 02dc C5F820C0 		str	ip, [r5, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 14980              		.loc 1 2124 0
 14981 02e0 0029     		cmp	r1, #0
 14982 02e2 3FF45DAF 		beq	.L1850
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 14983              		.loc 1 2125 0
 14984 02e6 0BEB0C01 		add	r1, fp, ip
 14985              	.LVL1927:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 14986              		.loc 1 2127 0
 14987 02ea BAF1020F 		cmp	sl, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 14988              		.loc 1 2125 0
 14989 02ee 6962     		str	r1, [r5, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 14990              		.loc 1 2127 0
 14991 02f0 00F0FC80 		beq	.L1954
 14992 02f4 0321     		movs	r1, #3
 14993 02f6 01FB02F1 		mul	r1, r1, r2
 14994 02fa 02F00102 		and	r2, r2, #1
 14995              	.LVL1928:
 14996 02fe 02EB5102 		add	r2, r2, r1, lsr #1
 14997 0302 4FF0010A 		mov	sl, #1
 14998              	.LVL1929:
 14999              	.L1855:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 15000              		.loc 1 2129 0
 15001 0306 02F2FF12 		addw	r2, r2, #511
 15002              	.LVL1930:
 15003 030a B3EB522F 		cmp	r3, r2, lsr #9
 15004 030e FFF447AF 		bcc	.L1850
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 15005              		.loc 1 2135 0
 15006 0312 0023     		movs	r3, #0
 15007              	.LVL1931:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 15008              		.loc 1 2134 0
 15009 0314 4FF0FF32 		mov	r2, #-1
 15010              	.LVL1932:
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 15011              		.loc 1 2138 0
 15012 0318 BAF1030F 		cmp	sl, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 15013              		.loc 1 2134 0
 15014 031c 2A61     		str	r2, [r5, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 15015              		.loc 1 2135 0
 15016 031e EB60     		str	r3, [r5, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 15017              		.loc 1 2138 0
 15018 0320 00F08480 		beq	.L1955
 15019              	.LVL1933:
 15020              	.L1858:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 15021              		.loc 1 2151 0
 15022 0324 8349     		ldr	r1, .L1958
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 15023              		.loc 1 2150 0
 15024 0326 85F800A0 		strb	sl, [r5, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 15025              		.loc 1 2151 0
 15026 032a 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 15027              		.loc 1 2152 0
 15028 032c 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 15029              		.loc 1 2151 0
 15030 032e 0132     		adds	r2, r2, #1
 15031 0330 0A80     		strh	r2, [r1, #0]	@ movhi
 15032 0332 EA80     		strh	r2, [r5, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 15033              		.loc 1 2152 0
 15034 0334 EB62     		str	r3, [r5, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 15035              		.loc 1 2153 0
 15036 0336 2B71     		strb	r3, [r5, #4]
 15037 0338 7CE6     		b	.L1844
 15038              	.LVL1934:
 15039              	.L1887:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 15040              		.loc 1 2078 0
 15041 033a 0124     		movs	r4, #1
 15042 033c 0EE7     		b	.L1906
 15043              	.LVL1935:
 15044              	.L1953:
 15045              	.LBB1439:
 15046              	.LBB1430:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 15047              		.loc 1 1992 0
 15048 033e 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 15049 0342 95F869C0 		ldrb	ip, [r5, #105]	@ zero_extendqisi2
 15050 0346 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 15051 034a 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 15052 034e DFF8F4B1 		ldr	fp, .L1958+16
 15053 0352 0904     		lsls	r1, r1, #16
 15054 0354 41EA0C61 		orr	r1, r1, ip, lsl #24
 15055 0358 0B43     		orrs	r3, r3, r1
 15056 035a 43EA0223 		orr	r3, r3, r2, lsl #8
 15057 035e 23F07F43 		bic	r3, r3, #-16777216
 15058 0362 5B45     		cmp	r3, fp
 15059 0364 5ED0     		beq	.L1882
 15060              	.LVL1936:
 15061              	.LBB1427:
 15062              	.LBB1428:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 15063              		.loc 1 1994 0
 15064 0366 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 15065 036a 95F885C0 		ldrb	ip, [r5, #133]	@ zero_extendqisi2
 15066 036e 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 15067 0372 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 15068 0376 0904     		lsls	r1, r1, #16
 15069 0378 41EA0C61 		orr	r1, r1, ip, lsl #24
 15070 037c 0B43     		orrs	r3, r3, r1
 15071 037e 43EA0223 		orr	r3, r3, r2, lsl #8
 15072 0382 23F07F43 		bic	r3, r3, #-16777216
 15073              	.LBE1428:
 15074              	.LBE1427:
 15075              	.LBE1430:
 15076              	.LBE1439:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 15077              		.loc 1 2068 0
 15078 0386 5B45     		cmp	r3, fp
 15079 0388 3FF42AAF 		beq	.L1883
 15080              	.LVL1937:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 15081              		.loc 1 2073 0
 15082 038c 95F8F231 		ldrb	r3, [r5, #498]	@ zero_extendqisi2
 15083 0390 002B     		cmp	r3, #0
 15084 0392 3FF405AF 		beq	.L1850
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 15085              		.loc 1 2074 0
 15086 0396 95F8F821 		ldrb	r2, [r5, #504]	@ zero_extendqisi2
 15087 039a 95F8F911 		ldrb	r1, [r5, #505]	@ zero_extendqisi2
 15088 039e 95F8F631 		ldrb	r3, [r5, #502]	@ zero_extendqisi2
 15089 03a2 95F8F791 		ldrb	r9, [r5, #503]	@ zero_extendqisi2
 15090              	.LBB1440:
 15091              	.LBB1436:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 15092              		.loc 1 1987 0
 15093 03a6 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 15094              	.LBE1436:
 15095              	.LBE1440:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 15096              		.loc 1 2074 0
 15097 03a8 1204     		lsls	r2, r2, #16
 15098 03aa 42EA0162 		orr	r2, r2, r1, lsl #24
 15099 03ae 1343     		orrs	r3, r3, r2
 15100 03b0 43EA0929 		orr	r9, r3, r9, lsl #8
 15101              	.LVL1938:
 15102              	.LBB1441:
 15103              	.LBB1437:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 15104              		.loc 1 1987 0
 15105 03b4 3946     		mov	r1, r7
 15106 03b6 4A46     		mov	r2, r9
 15107 03b8 0123     		movs	r3, #1
 15108 03ba C047     		blx	r8
 15109              	.LVL1939:
 15110 03bc 0028     		cmp	r0, #0
 15111 03be BCD1     		bne	.L1887
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 15112              		.loc 1 1989 0
 15113 03c0 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 15114 03c4 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 15115 03c8 43EA0223 		orr	r3, r3, r2, lsl #8
 15116 03cc 1BB2     		sxth	r3, r3
 15117 03ce 5345     		cmp	r3, sl
 15118 03d0 7FF4E6AE 		bne	.L1850
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 15119              		.loc 1 1992 0
 15120 03d4 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 15121 03d8 95F86900 		ldrb	r0, [r5, #105]	@ zero_extendqisi2
 15122 03dc 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 15123 03e0 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 15124 03e4 0904     		lsls	r1, r1, #16
 15125 03e6 41EA0061 		orr	r1, r1, r0, lsl #24
 15126 03ea 0B43     		orrs	r3, r3, r1
 15127 03ec 43EA0223 		orr	r3, r3, r2, lsl #8
 15128 03f0 23F07F43 		bic	r3, r3, #-16777216
 15129 03f4 5B45     		cmp	r3, fp
 15130 03f6 3FF4F4AE 		beq	.L1847
 15131              	.LVL1940:
 15132              	.LBB1434:
 15133              	.LBB1435:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 15134              		.loc 1 1994 0
 15135 03fa 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 15136 03fe 95F88500 		ldrb	r0, [r5, #133]	@ zero_extendqisi2
 15137 0402 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 15138 0406 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 15139 040a 0904     		lsls	r1, r1, #16
 15140 040c 41EA0061 		orr	r1, r1, r0, lsl #24
 15141 0410 0B43     		orrs	r3, r3, r1
 15142 0412 43EA0223 		orr	r3, r3, r2, lsl #8
 15143 0416 23F07F43 		bic	r3, r3, #-16777216
 15144              	.LBE1435:
 15145              	.LBE1434:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 15146              		.loc 1 1995 0
 15147 041a B3EB0B03 		subs	r3, r3, fp
 15148 041e 18BF     		it	ne
 15149 0420 0123     		movne	r3, #1
 15150 0422 B9E6     		b	.L1873
 15151              	.LVL1941:
 15152              	.L1882:
 15153              	.LBE1437:
 15154              	.LBE1441:
 15155              	.LBB1442:
 15156              	.LBB1431:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 15157              		.loc 1 1993 0
 15158 0424 0346     		mov	r3, r0
 15159 0426 B5E6     		b	.L1846
 15160              	.LVL1942:
 15161              	.L1950:
 15162              	.LBE1431:
 15163              	.LBE1442:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 15164              		.loc 1 2025 0
 15165 0428 841C     		adds	r4, r0, #2
 15166 042a F3E5     		b	.L1840
 15167              	.LVL1943:
 15168              	.L1955:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 15169              		.loc 1 2140 0
 15170 042c 95F86110 		ldrb	r1, [r5, #97]	@ zero_extendqisi2
 15171 0430 95F86020 		ldrb	r2, [r5, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 15172              		.loc 1 2139 0
 15173 0434 6B71     		strb	r3, [r5, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 15174              		.loc 1 2140 0
 15175 0436 42EA0122 		orr	r2, r2, r1, lsl #8
 15176 043a 4A44     		add	r2, r9, r2
 15177 043c 6A61     		str	r2, [r5, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 15178              		.loc 1 2141 0
 15179 043e 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 15180 0440 3946     		mov	r1, r7
 15181 0442 0123     		movs	r3, #1
 15182 0444 C047     		blx	r8
 15183              	.LVL1944:
 15184 0446 0028     		cmp	r0, #0
 15185 0448 7FF46CAF 		bne	.L1858
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 15186              		.loc 1 2142 0
 15187 044c 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 15188 0450 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 15189 0454 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 15190              		.loc 1 2141 0
 15191 0458 374B     		ldr	r3, .L1958+4
 15192 045a 12B2     		sxth	r2, r2
 15193 045c 9A42     		cmp	r2, r3
 15194 045e 7FF461AF 		bne	.L1858
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 15195              		.loc 1 2143 0
 15196 0462 95F83210 		ldrb	r1, [r5, #50]	@ zero_extendqisi2
 15197 0466 95F83300 		ldrb	r0, [r5, #51]	@ zero_extendqisi2
 15198 046a 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 15199 046e 95F83120 		ldrb	r2, [r5, #49]	@ zero_extendqisi2
 15200 0472 0904     		lsls	r1, r1, #16
 15201 0474 41EA0061 		orr	r1, r1, r0, lsl #24
 15202 0478 0B43     		orrs	r3, r3, r1
 15203 047a 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 15204              		.loc 1 2142 0
 15205 047e 2F4B     		ldr	r3, .L1958+8
 15206 0480 9A42     		cmp	r2, r3
 15207 0482 7FF44FAF 		bne	.L1858
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 15208              		.loc 1 2144 0
 15209 0486 95F81612 		ldrb	r1, [r5, #534]	@ zero_extendqisi2
 15210 048a 95F81702 		ldrb	r0, [r5, #535]	@ zero_extendqisi2
 15211 048e 95F81432 		ldrb	r3, [r5, #532]	@ zero_extendqisi2
 15212 0492 95F81522 		ldrb	r2, [r5, #533]	@ zero_extendqisi2
 15213 0496 0904     		lsls	r1, r1, #16
 15214 0498 41EA0061 		orr	r1, r1, r0, lsl #24
 15215 049c 0B43     		orrs	r3, r3, r1
 15216 049e 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 15217              		.loc 1 2143 0
 15218 04a2 274B     		ldr	r3, .L1958+12
 15219 04a4 9A42     		cmp	r2, r3
 15220 04a6 7FF43DAF 		bne	.L1858
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15221              		.loc 1 2145 0
 15222 04aa 95F81EE2 		ldrb	lr, [r5, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15223              		.loc 1 2146 0
 15224 04ae 95F81A72 		ldrb	r7, [r5, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15225              		.loc 1 2145 0
 15226 04b2 95F81F82 		ldrb	r8, [r5, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15227              		.loc 1 2146 0
 15228 04b6 95F81BC2 		ldrb	ip, [r5, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15229              		.loc 1 2145 0
 15230 04ba 95F81C22 		ldrb	r2, [r5, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15231              		.loc 1 2146 0
 15232 04be 95F81832 		ldrb	r3, [r5, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15233              		.loc 1 2145 0
 15234 04c2 95F81D02 		ldrb	r0, [r5, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15235              		.loc 1 2146 0
 15236 04c6 95F81912 		ldrb	r1, [r5, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15237              		.loc 1 2145 0
 15238 04ca 4FEA0E4E 		lsl	lr, lr, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15239              		.loc 1 2146 0
 15240 04ce 3F04     		lsls	r7, r7, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15241              		.loc 1 2145 0
 15242 04d0 4EEA086E 		orr	lr, lr, r8, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15243              		.loc 1 2146 0
 15244 04d4 47EA0C67 		orr	r7, r7, ip, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15245              		.loc 1 2145 0
 15246 04d8 4EEA0202 		orr	r2, lr, r2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15247              		.loc 1 2146 0
 15248 04dc 3B43     		orrs	r3, r3, r7
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15249              		.loc 1 2145 0
 15250 04de 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15251              		.loc 1 2146 0
 15252 04e2 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 15253              		.loc 1 2145 0
 15254 04e6 EA60     		str	r2, [r5, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 15255              		.loc 1 2146 0
 15256 04e8 2B61     		str	r3, [r5, #16]
 15257 04ea 1BE7     		b	.L1858
 15258              	.LVL1945:
 15259              	.L1954:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 15260              		.loc 1 2127 0
 15261 04ec 5200     		lsls	r2, r2, #1
 15262              	.LVL1946:
 15263 04ee 0AE7     		b	.L1855
 15264              	.LVL1947:
 15265              	.L1854:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 15266              		.loc 1 2116 0
 15267 04f0 0232     		adds	r2, r2, #2
 15268              	.LVL1948:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 15269              		.loc 1 2117 0
 15270 04f2 4844     		add	r0, r0, r9
 15271              	.LVL1949:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 15272              		.loc 1 2118 0
 15273 04f4 CC44     		add	ip, r9, ip
 15274              	.LVL1950:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 15275              		.loc 1 2116 0
 15276 04f6 AA61     		str	r2, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 15277              		.loc 1 2117 0
 15278 04f8 A862     		str	r0, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 15279              		.loc 1 2118 0
 15280 04fa C5F820C0 		str	ip, [r5, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 15281              		.loc 1 2120 0
 15282 04fe 0029     		cmp	r1, #0
 15283 0500 7FF44EAE 		bne	.L1850
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 15284              		.loc 1 2121 0
 15285 0504 95F85EC0 		ldrb	ip, [r5, #94]	@ zero_extendqisi2
 15286 0508 95F85FA0 		ldrb	sl, [r5, #95]	@ zero_extendqisi2
 15287 050c 95F85C10 		ldrb	r1, [r5, #92]	@ zero_extendqisi2
 15288              	.LVL1951:
 15289 0510 95F85D00 		ldrb	r0, [r5, #93]	@ zero_extendqisi2
 15290 0514 4FEA0C4C 		lsl	ip, ip, #16
 15291 0518 4CEA0A6C 		orr	ip, ip, sl, lsl #24
 15292 051c 4CEA0101 		orr	r1, ip, r1
 15293 0520 41EA0021 		orr	r1, r1, r0, lsl #8
 15294 0524 6962     		str	r1, [r5, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 15295              		.loc 1 2122 0
 15296 0526 9200     		lsls	r2, r2, #2
 15297              	.LVL1952:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 15298              		.loc 1 2113 0
 15299 0528 4FF0030A 		mov	sl, #3
 15300 052c EBE6     		b	.L1855
 15301              	.LVL1953:
 15302              	.L1888:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 15303              		.loc 1 2111 0
 15304 052e 4FF0010A 		mov	sl, #1
 15305 0532 CEE6     		b	.L1853
 15306              	.L1959:
 15307              		.align	2
 15308              	.L1958:
 15309 0534 00000000 		.word	.LANCHOR3
 15310 0538 55AAFFFF 		.word	-21931
 15311 053c 52526141 		.word	1096897106
 15312 0540 72724161 		.word	1631679090
 15313 0544 46415400 		.word	5521734
 15314              	.LBE1446:
 15315              	.LBE1453:
 15316              		.cfi_endproc
 15317              	.LFE37:
 15319              		.section	.text.f_getfree,"ax",%progbits
 15320              		.align	2
 15321              		.global	f_getfree
 15322              		.thumb
 15323              		.thumb_func
 15325              	f_getfree:
 15326              	.LFB38:
3082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 15327              		.loc 1 3082 0
 15328              		.cfi_startproc
 15329              		@ args = 0, pretend = 0, frame = 24
 15330              		@ frame_needed = 0, uses_anonymous_args = 0
 15331              	.LVL1954:
 15332 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 15333              	.LCFI39:
 15334              		.cfi_def_cfa_offset 36
 15335              		.cfi_offset 4, -36
 15336              		.cfi_offset 5, -32
 15337              		.cfi_offset 6, -28
 15338              		.cfi_offset 7, -24
 15339              		.cfi_offset 8, -20
 15340              		.cfi_offset 9, -16
 15341              		.cfi_offset 10, -12
 15342              		.cfi_offset 11, -8
 15343              		.cfi_offset 14, -4
 15344              	.LBB1474:
 15345              	.LBB1475:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 15346              		.loc 1 2023 0
 15347 0004 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 15348 0006 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 15349              		.loc 1 2024 0
 15350 0008 092B     		cmp	r3, #9
 15351              	.LBE1475:
 15352              	.LBE1474:
3082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 15353              		.loc 1 3082 0
 15354 000a 87B0     		sub	sp, sp, #28
 15355              	.LCFI40:
 15356              		.cfi_def_cfa_offset 64
3082:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 15357              		.loc 1 3082 0
 15358 000c 8B46     		mov	fp, r1
 15359 000e 9246     		mov	sl, r2
 15360              	.LVL1955:
 15361              	.LBB1499:
 15362              	.LBB1494:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 15363              		.loc 1 2024 0
 15364 0010 4AD9     		bls	.L2069
 15365              	.LVL1956:
 15366              	.L1961:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 15367              		.loc 1 2037 0
 15368 0012 754B     		ldr	r3, .L2085
 15369              	.LVL1957:
 15370 0014 1C68     		ldr	r4, [r3, #0]
 15371              	.LVL1958:
 15372 0016 CAF80040 		str	r4, [sl, #0]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 15373              		.loc 1 2038 0
 15374 001a 002C     		cmp	r4, #0
 15375 001c 57D0     		beq	.L2024
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 15376              		.loc 1 2042 0
 15377 001e 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 15378 0020 002B     		cmp	r3, #0
 15379 0022 4AD0     		beq	.L1966
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 15380              		.loc 1 2043 0
 15381 0024 714B     		ldr	r3, .L2085+4
 15382 0026 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 15383 0028 9847     		blx	r3
 15384              	.LVL1959:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 15385              		.loc 1 2044 0
 15386 002a C307     		lsls	r3, r0, #31
 15387 002c 45D4     		bmi	.L1966
 15388              	.LVL1960:
 15389              	.L1965:
 15390              	.LBE1494:
 15391              	.LBE1499:
3093:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((*fatfs)->free_clust <= (*fatfs)->n_fatent - 2) {
 15392              		.loc 1 3093 0
 15393 002e DAF80040 		ldr	r4, [sl, #0]
 15394              	.LVL1961:
 15395 0032 A669     		ldr	r6, [r4, #24]
 15396 0034 2369     		ldr	r3, [r4, #16]
 15397 0036 B21E     		subs	r2, r6, #2
 15398 0038 9342     		cmp	r3, r2
 15399 003a 4AD9     		bls	.L2070
3097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fat = (*fatfs)->fs_type;
 15400              		.loc 1 3097 0
 15401 003c 94F80080 		ldrb	r8, [r4, #0]	@ zero_extendqisi2
 15402              	.LVL1962:
3099:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fat == FS_FAT12) {
 15403              		.loc 1 3099 0
 15404 0040 B8F1010F 		cmp	r8, #1
 15405 0044 00F0A080 		beq	.L2071
 15406              	.LVL1963:
3110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				i = 0; p = 0;
 15407              		.loc 1 3110 0
 15408 0048 0023     		movs	r3, #0
3109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				sect = (*fatfs)->fatbase;
 15409              		.loc 1 3109 0
 15410 004a D4F82090 		ldr	r9, [r4, #32]
 15411              	.LVL1964:
3098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = 0;
 15412              		.loc 1 3098 0
 15413 004e CDF810B0 		str	fp, [sp, #16]
 15414 0052 CDF80CA0 		str	sl, [sp, #12]
3110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				i = 0; p = 0;
 15415              		.loc 1 3110 0
 15416 0056 1D46     		mov	r5, r3
3098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = 0;
 15417              		.loc 1 3098 0
 15418 0058 C346     		mov	fp, r8
 15419              	.LVL1965:
 15420 005a 9A46     		mov	sl, r3
 15421              	.LVL1966:
 15422              	.L2013:
3112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (!i) {
 15423              		.loc 1 3112 0
 15424 005c 002D     		cmp	r5, #0
 15425 005e 3CD0     		beq	.L2072
3118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fat == FS_FAT16) {
 15426              		.loc 1 3118 0
 15427 0060 BBF1020F 		cmp	fp, #2
 15428 0064 4FD0     		beq	.L2073
 15429              	.LVL1967:
 15430              	.L2009:
3122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
 15431              		.loc 1 3122 0
 15432 0066 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 15433 0068 DF78     		ldrb	r7, [r3, #3]	@ zero_extendqisi2
 15434 006a 1878     		ldrb	r0, [r3, #0]	@ zero_extendqisi2
 15435 006c 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 15436 006e 1204     		lsls	r2, r2, #16
 15437 0070 42EA0762 		orr	r2, r2, r7, lsl #24
 15438 0074 0243     		orrs	r2, r2, r0
 15439 0076 42EA0122 		orr	r2, r2, r1, lsl #8
 15440 007a 22F07042 		bic	r2, r2, #-268435456
 15441 007e 0AB9     		cbnz	r2, .L2012
3122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
 15442              		.loc 1 3122 0 is_stmt 0 discriminator 1
 15443 0080 0AF1010A 		add	sl, sl, #1
 15444              	.LVL1968:
 15445              	.L2012:
3123:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						p += 4; i -= 4;
 15446              		.loc 1 3123 0 is_stmt 1
 15447 0084 0433     		adds	r3, r3, #4
 15448              	.LVL1969:
 15449 0086 043D     		subs	r5, r5, #4
 15450              	.LVL1970:
 15451              	.L2011:
3125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} while (--clst);
 15452              		.loc 1 3125 0
 15453 0088 013E     		subs	r6, r6, #1
 15454              	.LVL1971:
 15455 008a E7D1     		bne	.L2013
 15456 008c D846     		mov	r8, fp
 15457 008e DDF810B0 		ldr	fp, [sp, #16]
 15458              	.LVL1972:
 15459 0092 5746     		mov	r7, sl
 15460 0094 3046     		mov	r0, r6
 15461              	.LVL1973:
 15462              	.L2005:
3128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fat == FS_FAT32) (*fatfs)->fsi_flag = 1;
 15463              		.loc 1 3128 0
 15464 0096 B8F1030F 		cmp	r8, #3
3127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			(*fatfs)->free_clust = n;
 15465              		.loc 1 3127 0
 15466 009a 2761     		str	r7, [r4, #16]
3128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fat == FS_FAT32) (*fatfs)->fsi_flag = 1;
 15467              		.loc 1 3128 0
 15468 009c 01D1     		bne	.L2014
3128:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fat == FS_FAT32) (*fatfs)->fsi_flag = 1;
 15469              		.loc 1 3128 0 is_stmt 0 discriminator 1
 15470 009e 0123     		movs	r3, #1
 15471 00a0 6371     		strb	r3, [r4, #5]
 15472              	.LVL1974:
 15473              	.L2014:
3129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*nclst = n;
 15474              		.loc 1 3129 0 is_stmt 1
 15475 00a2 CBF80070 		str	r7, [fp, #0]
 15476 00a6 05E0     		b	.L2056
 15477              	.LVL1975:
 15478              	.L2069:
 15479              	.LBB1500:
 15480              	.LBB1495:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 15481              		.loc 1 2024 0
 15482 00a8 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 15483              	.LVL1976:
 15484 00aa 3A2A     		cmp	r2, #58
 15485 00ac B1D1     		bne	.L1961
 15486              	.LVL1977:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 15487              		.loc 1 2036 0
 15488 00ae 0B20     		movs	r0, #11
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 15489              		.loc 1 2035 0
 15490 00b0 002B     		cmp	r3, #0
 15491 00b2 AED0     		beq	.L1961
 15492              	.LVL1978:
 15493              	.L2056:
 15494              	.LBE1495:
 15495              	.LBE1500:
3133:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 15496              		.loc 1 3133 0
 15497 00b4 07B0     		add	sp, sp, #28
 15498 00b6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 15499              	.LVL1979:
 15500              	.L1966:
 15501              	.LBB1501:
 15502              	.LBB1496:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 15503              		.loc 1 2054 0
 15504 00ba 0020     		movs	r0, #0
 15505 00bc 2070     		strb	r0, [r4, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 15506              		.loc 1 2055 0
 15507 00be 6070     		strb	r0, [r4, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 15508              		.loc 1 2056 0
 15509 00c0 4B4B     		ldr	r3, .L2085+8
 15510 00c2 9847     		blx	r3
 15511              	.LVL1980:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 15512              		.loc 1 2057 0
 15513 00c4 10F00102 		ands	r2, r0, #1
 15514 00c8 6FD0     		beq	.L2074
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 15515              		.loc 1 2058 0
 15516 00ca 0320     		movs	r0, #3
 15517              	.LVL1981:
 15518 00cc F2E7     		b	.L2056
 15519              	.LVL1982:
 15520              	.L2024:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 15521              		.loc 1 2038 0
 15522 00ce 0C20     		movs	r0, #12
 15523 00d0 F0E7     		b	.L2056
 15524              	.LVL1983:
 15525              	.L2070:
 15526              	.LBE1496:
 15527              	.LBE1501:
3094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			*nclst = (*fatfs)->free_clust;
 15528              		.loc 1 3094 0
 15529 00d2 CBF80030 		str	r3, [fp, #0]
 15530 00d6 0020     		movs	r0, #0
 15531 00d8 ECE7     		b	.L2056
 15532              	.LVL1984:
 15533              	.L2072:
 15534              	.LBB1502:
 15535              	.LBB1503:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 15536              		.loc 1 727 0
 15537 00da E76A     		ldr	r7, [r4, #44]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 15538              		.loc 1 728 0
 15539 00dc B945     		cmp	r9, r7
 15540              	.LBE1503:
 15541              	.LBE1502:
3113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						res = move_window(*fatfs, sect++);
 15542              		.loc 1 3113 0
 15543 00de 09F10108 		add	r8, r9, #1
 15544              	.LVL1985:
 15545              	.LBB1512:
 15546              	.LBB1509:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 15547              		.loc 1 728 0
 15548 00e2 08D0     		beq	.L2021
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 15549              		.loc 1 730 0
 15550 00e4 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 15551              	.LVL1986:
 15552 00e6 C3B9     		cbnz	r3, .L2001
 15553              	.LVL1987:
 15554              	.L2006:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 15555              		.loc 1 743 0
 15556 00e8 B9F1000F 		cmp	r9, #0
 15557 00ec 41D1     		bne	.L2075
 15558              	.LVL1988:
 15559              	.L2066:
 15560 00ee DDF80CC0 		ldr	ip, [sp, #12]
 15561 00f2 DCF80040 		ldr	r4, [ip, #0]
 15562              	.LVL1989:
 15563              	.L2021:
 15564              	.LBE1509:
 15565              	.LBE1512:
3118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fat == FS_FAT16) {
 15566              		.loc 1 3118 0
 15567 00f6 BBF1020F 		cmp	fp, #2
3115:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						p = (*fatfs)->win;
 15568              		.loc 1 3115 0
 15569 00fa 04F13003 		add	r3, r4, #48
 15570              	.LVL1990:
3113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						res = move_window(*fatfs, sect++);
 15571              		.loc 1 3113 0
 15572 00fe C146     		mov	r9, r8
 15573              	.LVL1991:
3116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						i = SS(*fatfs);
 15574              		.loc 1 3116 0
 15575 0100 4FF40075 		mov	r5, #512
 15576              	.LVL1992:
3118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (fat == FS_FAT16) {
 15577              		.loc 1 3118 0
 15578 0104 AFD1     		bne	.L2009
 15579              	.LVL1993:
 15580              	.L2073:
3119:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (LD_WORD(p) == 0) n++;
 15581              		.loc 1 3119 0
 15582 0106 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 15583 0108 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 15584 010a 52EA0122 		orrs	r2, r2, r1, lsl #8
 15585 010e 08BF     		it	eq
 15586 0110 0AF1010A 		addeq	sl, sl, #1
 15587              	.LVL1994:
3120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						p += 2; i -= 2;
 15588              		.loc 1 3120 0
 15589 0114 0233     		adds	r3, r3, #2
 15590              	.LVL1995:
 15591 0116 023D     		subs	r5, r5, #2
 15592              	.LVL1996:
 15593 0118 B6E7     		b	.L2011
 15594              	.LVL1997:
 15595              	.L2001:
 15596              	.LBB1513:
 15597              	.LBB1510:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 15598              		.loc 1 731 0
 15599 011a 04F1300C 		add	ip, r4, #48
 15600 011e CDF804C0 		str	ip, [sp, #4]
 15601 0122 6146     		mov	r1, ip
 15602 0124 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 15603 0126 DFF8D4C0 		ldr	ip, .L2085+20
 15604 012a 3A46     		mov	r2, r7
 15605 012c 0123     		movs	r3, #1
 15606 012e E047     		blx	ip
 15607              	.LVL1998:
 15608 0130 0028     		cmp	r0, #0
 15609 0132 30D1     		bne	.L2067
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 15610              		.loc 1 734 0
 15611 0134 E369     		ldr	r3, [r4, #28]
 15612 0136 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 15613              		.loc 1 733 0
 15614 0138 2571     		strb	r5, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 15615              		.loc 1 734 0
 15616 013a 9A18     		adds	r2, r3, r2
 15617 013c 9742     		cmp	r7, r2
 15618 013e D3D2     		bcs	.L2006
 15619              	.LBB1504:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 15620              		.loc 1 736 0
 15621 0140 E578     		ldrb	r5, [r4, #3]	@ zero_extendqisi2
 15622              	.LVL1999:
 15623 0142 012D     		cmp	r5, #1
 15624 0144 D0D9     		bls	.L2006
 15625 0146 0596     		str	r6, [sp, #20]
 15626 0148 2646     		mov	r6, r4
 15627              	.LVL2000:
 15628 014a 019C     		ldr	r4, [sp, #4]
 15629              	.LVL2001:
 15630 014c 00E0     		b	.L2059
 15631              	.LVL2002:
 15632              	.L2076:
 15633 014e F369     		ldr	r3, [r6, #28]
 15634              	.LVL2003:
 15635              	.L2059:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 15636              		.loc 1 737 0
 15637 0150 FF18     		adds	r7, r7, r3
 15638              	.LVL2004:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 15639              		.loc 1 736 0
 15640 0152 013D     		subs	r5, r5, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 15641              		.loc 1 738 0
 15642 0154 0123     		movs	r3, #1
 15643 0156 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 15644 0158 DFF8A0C0 		ldr	ip, .L2085+20
 15645 015c 2146     		mov	r1, r4
 15646 015e 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 15647              		.loc 1 736 0
 15648 0160 EDB2     		uxtb	r5, r5
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 15649              		.loc 1 738 0
 15650 0162 E047     		blx	ip
 15651              	.LVL2005:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 15652              		.loc 1 736 0
 15653 0164 012D     		cmp	r5, #1
 15654 0166 F2D8     		bhi	.L2076
 15655 0168 3446     		mov	r4, r6
 15656 016a 059E     		ldr	r6, [sp, #20]
 15657              	.LVL2006:
 15658              	.LBE1504:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 15659              		.loc 1 743 0
 15660 016c B9F1000F 		cmp	r9, #0
 15661 0170 BDD0     		beq	.L2066
 15662              	.LVL2007:
 15663              	.L2075:
 15664              	.LBB1505:
 15665              	.LBB1506:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 15666              		.loc 1 744 0
 15667 0172 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 15668 0174 1F4D     		ldr	r5, .L2085+12
 15669 0176 04F13001 		add	r1, r4, #48
 15670 017a 4A46     		mov	r2, r9
 15671 017c 0123     		movs	r3, #1
 15672 017e A847     		blx	r5
 15673              	.LVL2008:
 15674 0180 48B9     		cbnz	r0, .L2067
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 15675              		.loc 1 746 0
 15676 0182 C4F82C90 		str	r9, [r4, #44]
 15677 0186 B2E7     		b	.L2066
 15678              	.LVL2009:
 15679              	.L2071:
 15680              	.LBE1506:
 15681              	.LBE1505:
 15682              	.LBE1510:
 15683              	.LBE1513:
 15684              	.LBB1514:
 15685              	.LBB1515:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 15686              		.loc 1 828 0
 15687 0188 0027     		movs	r7, #0
 15688 018a 022E     		cmp	r6, #2
 15689 018c 00F25C81 		bhi	.L2077
 15690              	.LVL2010:
 15691              	.L1984:
 15692              	.LBE1515:
 15693              	.LBE1514:
3104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 15694              		.loc 1 3104 0
 15695 0190 0220     		movs	r0, #2
 15696              	.LVL2011:
 15697              	.L1998:
3127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			(*fatfs)->free_clust = n;
 15698              		.loc 1 3127 0
 15699 0192 2761     		str	r7, [r4, #16]
 15700 0194 85E7     		b	.L2014
 15701              	.LVL2012:
 15702              	.L2067:
 15703 0196 5746     		mov	r7, sl
 15704              	.LVL2013:
 15705 0198 DDF80CA0 		ldr	sl, [sp, #12]
 15706              	.LVL2014:
 15707 019c D846     		mov	r8, fp
 15708              	.LVL2015:
 15709 019e DAF80040 		ldr	r4, [sl, #0]
 15710              	.LVL2016:
 15711 01a2 DDF810B0 		ldr	fp, [sp, #16]
 15712              	.LVL2017:
 15713              	.LBB1521:
 15714              	.LBB1511:
 15715              	.LBB1508:
 15716              	.LBB1507:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 15717              		.loc 1 744 0
 15718 01a6 0120     		movs	r0, #1
 15719 01a8 75E7     		b	.L2005
 15720              	.LVL2018:
 15721              	.L2074:
 15722              	.LBE1507:
 15723              	.LBE1508:
 15724              	.LBE1511:
 15725              	.LBE1521:
 15726              	.LBB1522:
 15727              	.LBB1497:
 15728              	.LBB1476:
 15729              	.LBB1477:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 15730              		.loc 1 1987 0
 15731 01aa 04F13005 		add	r5, r4, #48
 15732 01ae 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 15733              	.LVL2019:
 15734 01b0 104E     		ldr	r6, .L2085+12
 15735 01b2 2946     		mov	r1, r5
 15736 01b4 0123     		movs	r3, #1
 15737 01b6 B047     		blx	r6
 15738              	.LVL2020:
 15739 01b8 38B1     		cbz	r0, .L2078
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 15740              		.loc 1 1988 0
 15741 01ba 0323     		movs	r3, #3
 15742              	.L1967:
 15743              	.LBE1477:
 15744              	.LBE1476:
 15745              	.LBB1483:
 15746              	.LBB1484:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 15747              		.loc 1 2066 0
 15748 01bc 0027     		movs	r7, #0
 15749              	.LVL2021:
 15750              	.L2015:
 15751              	.LBE1484:
 15752              	.LBE1483:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 15753              		.loc 1 2078 0
 15754 01be 032B     		cmp	r3, #3
 15755 01c0 00F0CB80 		beq	.L2033
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 15756              		.loc 1 2079 0
 15757 01c4 EBB1     		cbz	r3, .L1968
 15758              	.LVL2022:
 15759              	.L1971:
 15760 01c6 0D20     		movs	r0, #13
 15761 01c8 74E7     		b	.L2056
 15762              	.LVL2023:
 15763              	.L2078:
 15764              	.LBB1489:
 15765              	.LBB1480:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 15766              		.loc 1 1989 0
 15767 01ca 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 15768 01ce 94F82F82 		ldrb	r8, [r4, #559]	@ zero_extendqisi2
 15769 01d2 43EA0828 		orr	r8, r3, r8, lsl #8
 15770 01d6 084B     		ldr	r3, .L2085+16
 15771 01d8 0FFA88F8 		sxth	r8, r8
 15772 01dc 9845     		cmp	r8, r3
 15773 01de 00F0BE80 		beq	.L2079
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 15774              		.loc 1 1990 0
 15775 01e2 0223     		movs	r3, #2
 15776 01e4 EAE7     		b	.L1967
 15777              	.L2086:
 15778 01e6 00BF     		.align	2
 15779              	.L2085:
 15780 01e8 00000000 		.word	.LANCHOR2
 15781 01ec 00000000 		.word	disk_status
 15782 01f0 00000000 		.word	disk_initialize
 15783 01f4 00000000 		.word	disk_read
 15784 01f8 55AAFFFF 		.word	-21931
 15785 01fc 00000000 		.word	disk_write
 15786              	.LVL2024:
 15787              	.L2029:
 15788              	.LBE1480:
 15789              	.LBE1489:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 15790              		.loc 1 2066 0
 15791 0200 0746     		mov	r7, r0
 15792              	.LVL2025:
 15793              	.L1968:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 15794              		.loc 1 2083 0
 15795 0202 94F83C20 		ldrb	r2, [r4, #60]	@ zero_extendqisi2
 15796 0206 94F83B30 		ldrb	r3, [r4, #59]	@ zero_extendqisi2
 15797 020a 43EA0223 		orr	r3, r3, r2, lsl #8
 15798 020e B3F5007F 		cmp	r3, #512
 15799 0212 D8D1     		bne	.L1971
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 15800              		.loc 1 2086 0
 15801 0214 94F84720 		ldrb	r2, [r4, #71]	@ zero_extendqisi2
 15802 0218 94F84630 		ldrb	r3, [r4, #70]	@ zero_extendqisi2
 15803              	.LVL2026:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 15804              		.loc 1 2087 0
 15805 021c 53EA0222 		orrs	r2, r3, r2, lsl #8
 15806              	.LVL2027:
 15807 0220 0DD1     		bne	.L1972
 15808 0222 94F85610 		ldrb	r1, [r4, #86]	@ zero_extendqisi2
 15809 0226 94F85700 		ldrb	r0, [r4, #87]	@ zero_extendqisi2
 15810 022a 94F85430 		ldrb	r3, [r4, #84]	@ zero_extendqisi2
 15811 022e 94F85520 		ldrb	r2, [r4, #85]	@ zero_extendqisi2
 15812              	.LVL2028:
 15813 0232 0904     		lsls	r1, r1, #16
 15814 0234 41EA0061 		orr	r1, r1, r0, lsl #24
 15815 0238 0B43     		orrs	r3, r3, r1
 15816 023a 43EA0222 		orr	r2, r3, r2, lsl #8
 15817              	.LVL2029:
 15818              	.L1972:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 15819              		.loc 1 2090 0
 15820 023e 94F84090 		ldrb	r9, [r4, #64]	@ zero_extendqisi2
 15821              	.LVL2030:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 15822              		.loc 1 2088 0
 15823 0242 E261     		str	r2, [r4, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 15824              		.loc 1 2091 0
 15825 0244 09F1FF33 		add	r3, r9, #-1
 15826 0248 012B     		cmp	r3, #1
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 15827              		.loc 1 2090 0
 15828 024a 84F80390 		strb	r9, [r4, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 15829              		.loc 1 2091 0
 15830 024e BAD8     		bhi	.L1971
 15831              	.LVL2031:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 15832              		.loc 1 2094 0
 15833 0250 94F83D30 		ldrb	r3, [r4, #61]	@ zero_extendqisi2
 15834              	.LVL2032:
 15835 0254 A370     		strb	r3, [r4, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 15836              		.loc 1 2095 0
 15837 0256 002B     		cmp	r3, #0
 15838 0258 B5D0     		beq	.L1971
 15839 025a 591E     		subs	r1, r3, #1
 15840 025c 1942     		tst	r1, r3
 15841 025e B2D1     		bne	.L1971
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 15842              		.loc 1 2097 0
 15843 0260 94F84110 		ldrb	r1, [r4, #65]	@ zero_extendqisi2
 15844 0264 94F84200 		ldrb	r0, [r4, #66]	@ zero_extendqisi2
 15845 0268 41EA0020 		orr	r0, r1, r0, lsl #8
 15846 026c 81B2     		uxth	r1, r0
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 15847              		.loc 1 2098 0
 15848 026e 0007     		lsls	r0, r0, #28
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 15849              		.loc 1 2097 0
 15850 0270 2181     		strh	r1, [r4, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 15851              		.loc 1 2098 0
 15852 0272 A8D1     		bne	.L1971
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 15853              		.loc 1 2100 0
 15854 0274 94F84480 		ldrb	r8, [r4, #68]	@ zero_extendqisi2
 15855 0278 94F84300 		ldrb	r0, [r4, #67]	@ zero_extendqisi2
 15856              	.LVL2033:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 15857              		.loc 1 2101 0
 15858 027c 50EA0828 		orrs	r8, r0, r8, lsl #8
 15859              	.LVL2034:
 15860 0280 15D1     		bne	.L1973
 15861 0282 94F85000 		ldrb	r0, [r4, #80]	@ zero_extendqisi2
 15862 0286 94F852C0 		ldrb	ip, [r4, #82]	@ zero_extendqisi2
 15863 028a 94F85380 		ldrb	r8, [r4, #83]	@ zero_extendqisi2
 15864              	.LVL2035:
 15865 028e 0490     		str	r0, [sp, #16]
 15866 0290 4FEA0C4C 		lsl	ip, ip, #16
 15867 0294 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 15868 0298 4CEA086C 		orr	ip, ip, r8, lsl #24
 15869 029c DDF81080 		ldr	r8, [sp, #16]
 15870 02a0 0390     		str	r0, [sp, #12]
 15871 02a2 4CEA0800 		orr	r0, ip, r8
 15872 02a6 DDF80CC0 		ldr	ip, [sp, #12]
 15873 02aa 40EA0C28 		orr	r8, r0, ip, lsl #8
 15874              	.LVL2036:
 15875              	.L1973:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 15876              		.loc 1 2103 0
 15877 02ae 94F83FC0 		ldrb	ip, [r4, #63]	@ zero_extendqisi2
 15878 02b2 94F83E00 		ldrb	r0, [r4, #62]	@ zero_extendqisi2
 15879              	.LVL2037:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 15880              		.loc 1 2104 0
 15881 02b6 50EA0C2C 		orrs	ip, r0, ip, lsl #8
 15882              	.LVL2038:
 15883 02ba 84D0     		beq	.L1971
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 15884              		.loc 1 2092 0
 15885 02bc 09FB02F9 		mul	r9, r9, r2
 15886              	.LVL2039:
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 15887              		.loc 1 2107 0
 15888 02c0 0CEB1110 		add	r0, ip, r1, lsr #4
 15889              	.LVL2040:
 15890 02c4 4844     		add	r0, r0, r9
 15891              	.LVL2041:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 15892              		.loc 1 2108 0
 15893 02c6 4045     		cmp	r0, r8
 15894 02c8 3FF67DAF 		bhi	.L1971
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 15895              		.loc 1 2109 0
 15896 02cc C0EB0808 		rsb	r8, r0, r8
 15897              	.LVL2042:
 15898 02d0 B8FBF3F3 		udiv	r3, r8, r3
 15899              	.LVL2043:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 15900              		.loc 1 2110 0
 15901 02d4 002B     		cmp	r3, #0
 15902 02d6 3FF476AF 		beq	.L1971
 15903              	.LVL2044:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 15904              		.loc 1 2112 0
 15905 02da 40F6F578 		movw	r8, #4085
 15906 02de 4345     		cmp	r3, r8
 15907 02e0 40F2A681 		bls	.L2034
 15908              	.LVL2045:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 15909              		.loc 1 2113 0
 15910 02e4 08F57048 		add	r8, r8, #61440
 15911 02e8 4345     		cmp	r3, r8
 15912 02ea 00F28281 		bhi	.L1975
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 15913              		.loc 1 2112 0
 15914 02ee 4FF00208 		mov	r8, #2
 15915              	.LVL2046:
 15916              	.L1974:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 15917              		.loc 1 2116 0
 15918 02f2 0233     		adds	r3, r3, #2
 15919              	.LVL2047:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 15920              		.loc 1 2117 0
 15921 02f4 C019     		adds	r0, r0, r7
 15922              	.LVL2048:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 15923              		.loc 1 2118 0
 15924 02f6 BC44     		add	ip, r7, ip
 15925              	.LVL2049:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 15926              		.loc 1 2116 0
 15927 02f8 A361     		str	r3, [r4, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 15928              		.loc 1 2117 0
 15929 02fa A062     		str	r0, [r4, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 15930              		.loc 1 2118 0
 15931 02fc C4F820C0 		str	ip, [r4, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 15932              		.loc 1 2124 0
 15933 0300 0029     		cmp	r1, #0
 15934 0302 3FF460AF 		beq	.L1971
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 15935              		.loc 1 2125 0
 15936 0306 09EB0C01 		add	r1, r9, ip
 15937              	.LVL2050:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 15938              		.loc 1 2127 0
 15939 030a B8F1020F 		cmp	r8, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 15940              		.loc 1 2125 0
 15941 030e 6162     		str	r1, [r4, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 15942              		.loc 1 2127 0
 15943 0310 00F06D81 		beq	.L2080
 15944 0314 0321     		movs	r1, #3
 15945 0316 01FB03F1 		mul	r1, r1, r3
 15946 031a 03F00103 		and	r3, r3, #1
 15947              	.LVL2051:
 15948 031e 03EB5103 		add	r3, r3, r1, lsr #1
 15949 0322 4FF00108 		mov	r8, #1
 15950              	.LVL2052:
 15951              	.L1976:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 15952              		.loc 1 2129 0
 15953 0326 03F2FF13 		addw	r3, r3, #511
 15954              	.LVL2053:
 15955 032a B2EB532F 		cmp	r2, r3, lsr #9
 15956 032e FFF44AAF 		bcc	.L1971
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 15957              		.loc 1 2135 0
 15958 0332 0023     		movs	r3, #0
 15959              	.LVL2054:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 15960              		.loc 1 2134 0
 15961 0334 4FF0FF32 		mov	r2, #-1
 15962              	.LVL2055:
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 15963              		.loc 1 2138 0
 15964 0338 B8F1030F 		cmp	r8, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 15965              		.loc 1 2134 0
 15966 033c 2261     		str	r2, [r4, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 15967              		.loc 1 2135 0
 15968 033e E360     		str	r3, [r4, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 15969              		.loc 1 2138 0
 15970 0340 00F0F780 		beq	.L2081
 15971              	.LVL2056:
 15972              	.L1979:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 15973              		.loc 1 2151 0
 15974 0344 BC49     		ldr	r1, .L2087
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 15975              		.loc 1 2150 0
 15976 0346 84F80080 		strb	r8, [r4, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 15977              		.loc 1 2151 0
 15978 034a 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 15979              		.loc 1 2152 0
 15980 034c 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 15981              		.loc 1 2151 0
 15982 034e 0132     		adds	r2, r2, #1
 15983 0350 0A80     		strh	r2, [r1, #0]	@ movhi
 15984 0352 E280     		strh	r2, [r4, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 15985              		.loc 1 2152 0
 15986 0354 E362     		str	r3, [r4, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 15987              		.loc 1 2153 0
 15988 0356 2371     		strb	r3, [r4, #4]
 15989 0358 69E6     		b	.L1965
 15990              	.LVL2057:
 15991              	.L2033:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 15992              		.loc 1 2078 0
 15993 035a 0120     		movs	r0, #1
 15994              	.LVL2058:
 15995 035c AAE6     		b	.L2056
 15996              	.LVL2059:
 15997              	.L2079:
 15998              	.LBB1490:
 15999              	.LBB1481:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 16000              		.loc 1 1992 0
 16001 035e 94F86810 		ldrb	r1, [r4, #104]	@ zero_extendqisi2
 16002 0362 94F86970 		ldrb	r7, [r4, #105]	@ zero_extendqisi2
 16003 0366 94F86630 		ldrb	r3, [r4, #102]	@ zero_extendqisi2
 16004 036a 94F86720 		ldrb	r2, [r4, #103]	@ zero_extendqisi2
 16005 036e DFF8DC92 		ldr	r9, .L2087+20
 16006 0372 0904     		lsls	r1, r1, #16
 16007 0374 41EA0761 		orr	r1, r1, r7, lsl #24
 16008 0378 0B43     		orrs	r3, r3, r1
 16009 037a 43EA0223 		orr	r3, r3, r2, lsl #8
 16010 037e 23F07F43 		bic	r3, r3, #-16777216
 16011 0382 4B45     		cmp	r3, r9
 16012 0384 5ED0     		beq	.L2028
 16013              	.LVL2060:
 16014              	.LBB1478:
 16015              	.LBB1479:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 16016              		.loc 1 1994 0
 16017 0386 94F88410 		ldrb	r1, [r4, #132]	@ zero_extendqisi2
 16018 038a 94F88570 		ldrb	r7, [r4, #133]	@ zero_extendqisi2
 16019 038e 94F88230 		ldrb	r3, [r4, #130]	@ zero_extendqisi2
 16020 0392 94F88320 		ldrb	r2, [r4, #131]	@ zero_extendqisi2
 16021 0396 0904     		lsls	r1, r1, #16
 16022 0398 41EA0761 		orr	r1, r1, r7, lsl #24
 16023 039c 0B43     		orrs	r3, r3, r1
 16024 039e 43EA0223 		orr	r3, r3, r2, lsl #8
 16025 03a2 23F07F43 		bic	r3, r3, #-16777216
 16026              	.LBE1479:
 16027              	.LBE1478:
 16028              	.LBE1481:
 16029              	.LBE1490:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 16030              		.loc 1 2068 0
 16031 03a6 4B45     		cmp	r3, r9
 16032 03a8 3FF42AAF 		beq	.L2029
 16033              	.LVL2061:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 16034              		.loc 1 2073 0
 16035 03ac 94F8F231 		ldrb	r3, [r4, #498]	@ zero_extendqisi2
 16036 03b0 002B     		cmp	r3, #0
 16037 03b2 3FF408AF 		beq	.L1971
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 16038              		.loc 1 2074 0
 16039 03b6 94F8F821 		ldrb	r2, [r4, #504]	@ zero_extendqisi2
 16040 03ba 94F8F911 		ldrb	r1, [r4, #505]	@ zero_extendqisi2
 16041 03be 94F8F631 		ldrb	r3, [r4, #502]	@ zero_extendqisi2
 16042 03c2 94F8F771 		ldrb	r7, [r4, #503]	@ zero_extendqisi2
 16043              	.LBB1491:
 16044              	.LBB1487:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 16045              		.loc 1 1987 0
 16046 03c6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 16047              	.LBE1487:
 16048              	.LBE1491:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 16049              		.loc 1 2074 0
 16050 03c8 1204     		lsls	r2, r2, #16
 16051 03ca 42EA0162 		orr	r2, r2, r1, lsl #24
 16052 03ce 1343     		orrs	r3, r3, r2
 16053 03d0 43EA0727 		orr	r7, r3, r7, lsl #8
 16054              	.LVL2062:
 16055              	.LBB1492:
 16056              	.LBB1488:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 16057              		.loc 1 1987 0
 16058 03d4 2946     		mov	r1, r5
 16059 03d6 3A46     		mov	r2, r7
 16060 03d8 0123     		movs	r3, #1
 16061 03da B047     		blx	r6
 16062              	.LVL2063:
 16063 03dc 0028     		cmp	r0, #0
 16064 03de BCD1     		bne	.L2033
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 16065              		.loc 1 1989 0
 16066 03e0 94F82F22 		ldrb	r2, [r4, #559]	@ zero_extendqisi2
 16067 03e4 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 16068 03e8 43EA0223 		orr	r3, r3, r2, lsl #8
 16069 03ec 1BB2     		sxth	r3, r3
 16070 03ee 4345     		cmp	r3, r8
 16071 03f0 7FF4E9AE 		bne	.L1971
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 16072              		.loc 1 1992 0
 16073 03f4 94F86810 		ldrb	r1, [r4, #104]	@ zero_extendqisi2
 16074 03f8 94F86900 		ldrb	r0, [r4, #105]	@ zero_extendqisi2
 16075 03fc 94F86630 		ldrb	r3, [r4, #102]	@ zero_extendqisi2
 16076 0400 94F86720 		ldrb	r2, [r4, #103]	@ zero_extendqisi2
 16077 0404 0904     		lsls	r1, r1, #16
 16078 0406 41EA0061 		orr	r1, r1, r0, lsl #24
 16079 040a 0B43     		orrs	r3, r3, r1
 16080 040c 43EA0223 		orr	r3, r3, r2, lsl #8
 16081 0410 23F07F43 		bic	r3, r3, #-16777216
 16082 0414 4B45     		cmp	r3, r9
 16083 0416 3FF4F4AE 		beq	.L1968
 16084              	.LVL2064:
 16085              	.LBB1485:
 16086              	.LBB1486:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 16087              		.loc 1 1994 0
 16088 041a 94F88410 		ldrb	r1, [r4, #132]	@ zero_extendqisi2
 16089 041e 94F88500 		ldrb	r0, [r4, #133]	@ zero_extendqisi2
 16090 0422 94F88230 		ldrb	r3, [r4, #130]	@ zero_extendqisi2
 16091 0426 94F88320 		ldrb	r2, [r4, #131]	@ zero_extendqisi2
 16092 042a 0904     		lsls	r1, r1, #16
 16093 042c 41EA0061 		orr	r1, r1, r0, lsl #24
 16094 0430 0B43     		orrs	r3, r3, r1
 16095 0432 43EA0223 		orr	r3, r3, r2, lsl #8
 16096 0436 23F07F43 		bic	r3, r3, #-16777216
 16097              	.LBE1486:
 16098              	.LBE1485:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 16099              		.loc 1 1995 0
 16100 043a B3EB0903 		subs	r3, r3, r9
 16101 043e 18BF     		it	ne
 16102 0440 0123     		movne	r3, #1
 16103 0442 BCE6     		b	.L2015
 16104              	.LVL2065:
 16105              	.L2028:
 16106              	.LBE1488:
 16107              	.LBE1492:
 16108              	.LBB1493:
 16109              	.LBB1482:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 16110              		.loc 1 1993 0
 16111 0444 0346     		mov	r3, r0
 16112 0446 B9E6     		b	.L1967
 16113              	.LVL2066:
 16114              	.L2077:
 16115              	.LBE1482:
 16116              	.LBE1493:
 16117              	.LBE1497:
 16118              	.LBE1522:
 16119              	.LBB1523:
 16120              	.LBB1518:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 16121              		.loc 1 828 0
 16122 0448 0225     		movs	r5, #2
 16123              	.LVL2067:
 16124              	.L1985:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 16125              		.loc 1 831 0
 16126 044a 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 16127 044c 022B     		cmp	r3, #2
 16128 044e 3ED0     		beq	.L1988
 16129 0450 032B     		cmp	r3, #3
 16130 0452 12D0     		beq	.L1989
 16131 0454 012B     		cmp	r3, #1
 16132 0456 01D0     		beq	.L2082
3103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 16133              		.loc 1 3103 0
 16134 0458 0120     		movs	r0, #1
 16135 045a 9AE6     		b	.L1998
 16136              	.L2082:
 16137              	.LVL2068:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 16138              		.loc 1 834 0
 16139 045c 216A     		ldr	r1, [r4, #32]
 16140 045e DFF8DC81 		ldr	r8, .L2087+4
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 16141              		.loc 1 833 0
 16142 0462 05EB5506 		add	r6, r5, r5, lsr #1
 16143              	.LVL2069:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 16144              		.loc 1 834 0
 16145 0466 2046     		mov	r0, r4
 16146 0468 01EB5621 		add	r1, r1, r6, lsr #9
 16147 046c C047     		blx	r8
 16148              	.LVL2070:
 16149 046e 0028     		cmp	r0, #0
 16150 0470 40D0     		beq	.L1990
 16151              	.LVL2071:
 16152              	.L2068:
 16153 0472 DAF80040 		ldr	r4, [sl, #0]
 16154              	.LVL2072:
3103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 16155              		.loc 1 3103 0
 16156 0476 0120     		movs	r0, #1
 16157 0478 8BE6     		b	.L1998
 16158              	.LVL2073:
 16159              	.L1989:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 16160              		.loc 1 846 0
 16161 047a 216A     		ldr	r1, [r4, #32]
 16162 047c 6F4B     		ldr	r3, .L2087+4
 16163 047e 2046     		mov	r0, r4
 16164 0480 01EBD511 		add	r1, r1, r5, lsr #7
 16165 0484 9847     		blx	r3
 16166              	.LVL2074:
 16167 0486 0028     		cmp	r0, #0
 16168 0488 F3D1     		bne	.L2068
 16169              	.LVL2075:
 16170              	.LBB1516:
 16171              	.LBB1517:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 16172              		.loc 1 847 0
 16173 048a 6A06     		lsls	r2, r5, #25
 16174 048c D20D     		lsrs	r2, r2, #23
 16175 048e 02F13003 		add	r3, r2, #48
 16176 0492 E318     		adds	r3, r4, r3
 16177              	.LVL2076:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 16178              		.loc 1 848 0
 16179 0494 A418     		adds	r4, r4, r2
 16180              	.LVL2077:
 16181 0496 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 16182 0498 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 16183 049a 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 16184 049c 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 16185              	.LVL2078:
 16186 04a0 1206     		lsls	r2, r2, #24
 16187 04a2 42EA0042 		orr	r2, r2, r0, lsl #16
 16188 04a6 42EA0122 		orr	r2, r2, r1, lsl #8
 16189 04aa 1343     		orrs	r3, r3, r2
 16190 04ac 23F07043 		bic	r3, r3, #-268435456
 16191              	.LVL2079:
 16192              	.L1993:
 16193              	.LBE1517:
 16194              	.LBE1516:
 16195              	.LBE1518:
 16196              	.LBE1523:
3104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 16197              		.loc 1 3104 0
 16198 04b0 012B     		cmp	r3, #1
 16199 04b2 3AD0     		beq	.L2083
3105:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 0) n++;
 16200              		.loc 1 3105 0
 16201 04b4 03B9     		cbnz	r3, .L1996
3105:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 0) n++;
 16202              		.loc 1 3105 0 is_stmt 0 discriminator 1
 16203 04b6 0137     		adds	r7, r7, #1
 16204              	.LVL2080:
 16205              	.L1996:
3106:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} while (++clst < (*fatfs)->n_fatent);
 16206              		.loc 1 3106 0 is_stmt 1
 16207 04b8 DAF80040 		ldr	r4, [sl, #0]
 16208 04bc A369     		ldr	r3, [r4, #24]
 16209 04be 0135     		adds	r5, r5, #1
 16210              	.LVL2081:
 16211 04c0 9D42     		cmp	r5, r3
 16212 04c2 02D2     		bcs	.L2084
 16213              	.LVL2082:
 16214              	.LBB1524:
 16215              	.LBB1519:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 16216              		.loc 1 828 0
 16217 04c4 012D     		cmp	r5, #1
 16218 04c6 C0D8     		bhi	.L1985
 16219 04c8 62E6     		b	.L1984
 16220              	.LVL2083:
 16221              	.L2084:
 16222              	.LBE1519:
 16223              	.LBE1524:
3106:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				} while (++clst < (*fatfs)->n_fatent);
 16224              		.loc 1 3106 0
 16225 04ca 0020     		movs	r0, #0
 16226 04cc 61E6     		b	.L1998
 16227              	.LVL2084:
 16228              	.L1988:
 16229              	.LBB1525:
 16230              	.LBB1520:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 16231              		.loc 1 841 0
 16232 04ce 216A     		ldr	r1, [r4, #32]
 16233 04d0 5A4B     		ldr	r3, .L2087+4
 16234 04d2 2046     		mov	r0, r4
 16235 04d4 01EB1521 		add	r1, r1, r5, lsr #8
 16236 04d8 9847     		blx	r3
 16237              	.LVL2085:
 16238 04da 0028     		cmp	r0, #0
 16239 04dc C9D1     		bne	.L2068
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 16240              		.loc 1 842 0
 16241 04de 2B06     		lsls	r3, r5, #24
 16242 04e0 DB0D     		lsrs	r3, r3, #23
 16243              	.LVL2086:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 16244              		.loc 1 843 0
 16245 04e2 E218     		adds	r2, r4, r3
 16246 04e4 1346     		mov	r3, r2
 16247              	.LVL2087:
 16248 04e6 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 16249 04ea 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 16250 04ee 42EA0323 		orr	r3, r2, r3, lsl #8
 16251 04f2 DDE7     		b	.L1993
 16252              	.LVL2088:
 16253              	.L1990:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 16254              		.loc 1 835 0
 16255 04f4 F305     		lsls	r3, r6, #23
 16256 04f6 DB0D     		lsrs	r3, r3, #23
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 16257              		.loc 1 836 0
 16258 04f8 216A     		ldr	r1, [r4, #32]
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 16259              		.loc 1 835 0
 16260 04fa E318     		adds	r3, r4, r3
 16261 04fc 0136     		adds	r6, r6, #1
 16262              	.LVL2089:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 16263              		.loc 1 836 0
 16264 04fe 2046     		mov	r0, r4
 16265 0500 01EB5621 		add	r1, r1, r6, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 16266              		.loc 1 835 0
 16267 0504 93F83090 		ldrb	r9, [r3, #48]	@ zero_extendqisi2
 16268              	.LVL2090:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 16269              		.loc 1 836 0
 16270 0508 C047     		blx	r8
 16271              	.LVL2091:
 16272 050a 0028     		cmp	r0, #0
 16273 050c B1D1     		bne	.L2068
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 16274              		.loc 1 837 0
 16275 050e F605     		lsls	r6, r6, #23
 16276              	.LVL2092:
 16277 0510 F60D     		lsrs	r6, r6, #23
 16278 0512 A419     		adds	r4, r4, r6
 16279              	.LVL2093:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 16280              		.loc 1 838 0
 16281 0514 EA07     		lsls	r2, r5, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 16282              		.loc 1 837 0
 16283 0516 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 16284 051a 49EA0323 		orr	r3, r9, r3, lsl #8
 16285              	.LVL2094:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 16286              		.loc 1 838 0
 16287 051e 01D5     		bpl	.L1992
 16288 0520 1B09     		lsrs	r3, r3, #4
 16289              	.LVL2095:
 16290 0522 C5E7     		b	.L1993
 16291              	.LVL2096:
 16292              	.L1992:
 16293 0524 1B05     		lsls	r3, r3, #20
 16294              	.LVL2097:
 16295 0526 1B0D     		lsrs	r3, r3, #20
 16296 0528 C2E7     		b	.L1993
 16297              	.LVL2098:
 16298              	.L2083:
 16299 052a DAF80040 		ldr	r4, [sl, #0]
 16300              	.LBE1520:
 16301              	.LBE1525:
3104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 16302              		.loc 1 3104 0
 16303 052e 0220     		movs	r0, #2
 16304 0530 2FE6     		b	.L1998
 16305              	.LVL2099:
 16306              	.L2081:
 16307              	.LBB1526:
 16308              	.LBB1498:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 16309              		.loc 1 2140 0
 16310 0532 94F86110 		ldrb	r1, [r4, #97]	@ zero_extendqisi2
 16311 0536 94F86020 		ldrb	r2, [r4, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 16312              		.loc 1 2139 0
 16313 053a 6371     		strb	r3, [r4, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 16314              		.loc 1 2140 0
 16315 053c 42EA0122 		orr	r2, r2, r1, lsl #8
 16316 0540 BA18     		adds	r2, r7, r2
 16317 0542 6261     		str	r2, [r4, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 16318              		.loc 1 2141 0
 16319 0544 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 16320 0546 2946     		mov	r1, r5
 16321 0548 0123     		movs	r3, #1
 16322 054a B047     		blx	r6
 16323              	.LVL2100:
 16324 054c 0028     		cmp	r0, #0
 16325 054e 7FF4F9AE 		bne	.L1979
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 16326              		.loc 1 2142 0
 16327 0552 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 16328 0556 94F82F22 		ldrb	r2, [r4, #559]	@ zero_extendqisi2
 16329 055a 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 16330              		.loc 1 2141 0
 16331 055e 384B     		ldr	r3, .L2087+8
 16332 0560 12B2     		sxth	r2, r2
 16333 0562 9A42     		cmp	r2, r3
 16334 0564 7FF4EEAE 		bne	.L1979
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 16335              		.loc 1 2143 0
 16336 0568 94F83210 		ldrb	r1, [r4, #50]	@ zero_extendqisi2
 16337 056c 94F83300 		ldrb	r0, [r4, #51]	@ zero_extendqisi2
 16338 0570 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 16339 0574 94F83120 		ldrb	r2, [r4, #49]	@ zero_extendqisi2
 16340 0578 0904     		lsls	r1, r1, #16
 16341 057a 41EA0061 		orr	r1, r1, r0, lsl #24
 16342 057e 0B43     		orrs	r3, r3, r1
 16343 0580 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 16344              		.loc 1 2142 0
 16345 0584 2F4B     		ldr	r3, .L2087+12
 16346 0586 9A42     		cmp	r2, r3
 16347 0588 7FF4DCAE 		bne	.L1979
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 16348              		.loc 1 2144 0
 16349 058c 94F81612 		ldrb	r1, [r4, #534]	@ zero_extendqisi2
 16350 0590 94F81702 		ldrb	r0, [r4, #535]	@ zero_extendqisi2
 16351 0594 94F81432 		ldrb	r3, [r4, #532]	@ zero_extendqisi2
 16352 0598 94F81522 		ldrb	r2, [r4, #533]	@ zero_extendqisi2
 16353 059c 0904     		lsls	r1, r1, #16
 16354 059e 41EA0061 		orr	r1, r1, r0, lsl #24
 16355 05a2 0B43     		orrs	r3, r3, r1
 16356 05a4 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 16357              		.loc 1 2143 0
 16358 05a8 274B     		ldr	r3, .L2087+16
 16359 05aa 9A42     		cmp	r2, r3
 16360 05ac 7FF4CAAE 		bne	.L1979
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16361              		.loc 1 2145 0
 16362 05b0 94F81E62 		ldrb	r6, [r4, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16363              		.loc 1 2146 0
 16364 05b4 94F81A52 		ldrb	r5, [r4, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16365              		.loc 1 2145 0
 16366 05b8 94F81FC2 		ldrb	ip, [r4, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16367              		.loc 1 2146 0
 16368 05bc 94F81B72 		ldrb	r7, [r4, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16369              		.loc 1 2145 0
 16370 05c0 94F81C22 		ldrb	r2, [r4, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16371              		.loc 1 2146 0
 16372 05c4 94F81832 		ldrb	r3, [r4, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16373              		.loc 1 2145 0
 16374 05c8 94F81D02 		ldrb	r0, [r4, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16375              		.loc 1 2146 0
 16376 05cc 94F81912 		ldrb	r1, [r4, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16377              		.loc 1 2145 0
 16378 05d0 3604     		lsls	r6, r6, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16379              		.loc 1 2146 0
 16380 05d2 2D04     		lsls	r5, r5, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16381              		.loc 1 2145 0
 16382 05d4 46EA0C66 		orr	r6, r6, ip, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16383              		.loc 1 2146 0
 16384 05d8 45EA0765 		orr	r5, r5, r7, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16385              		.loc 1 2145 0
 16386 05dc 3243     		orrs	r2, r2, r6
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16387              		.loc 1 2146 0
 16388 05de 2B43     		orrs	r3, r3, r5
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16389              		.loc 1 2145 0
 16390 05e0 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16391              		.loc 1 2146 0
 16392 05e4 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 16393              		.loc 1 2145 0
 16394 05e8 E260     		str	r2, [r4, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 16395              		.loc 1 2146 0
 16396 05ea 2361     		str	r3, [r4, #16]
 16397 05ec AAE6     		b	.L1979
 16398              	.LVL2101:
 16399              	.L2080:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 16400              		.loc 1 2127 0
 16401 05ee 5B00     		lsls	r3, r3, #1
 16402              	.LVL2102:
 16403 05f0 99E6     		b	.L1976
 16404              	.LVL2103:
 16405              	.L1975:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 16406              		.loc 1 2116 0
 16407 05f2 0233     		adds	r3, r3, #2
 16408              	.LVL2104:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 16409              		.loc 1 2117 0
 16410 05f4 C019     		adds	r0, r0, r7
 16411              	.LVL2105:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 16412              		.loc 1 2118 0
 16413 05f6 BC44     		add	ip, r7, ip
 16414              	.LVL2106:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 16415              		.loc 1 2116 0
 16416 05f8 A361     		str	r3, [r4, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 16417              		.loc 1 2117 0
 16418 05fa A062     		str	r0, [r4, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 16419              		.loc 1 2118 0
 16420 05fc C4F820C0 		str	ip, [r4, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 16421              		.loc 1 2120 0
 16422 0600 0029     		cmp	r1, #0
 16423 0602 7FF4E0AD 		bne	.L1971
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 16424              		.loc 1 2121 0
 16425 0606 94F85EC0 		ldrb	ip, [r4, #94]	@ zero_extendqisi2
 16426 060a 94F85F80 		ldrb	r8, [r4, #95]	@ zero_extendqisi2
 16427 060e 94F85C10 		ldrb	r1, [r4, #92]	@ zero_extendqisi2
 16428              	.LVL2107:
 16429 0612 94F85D00 		ldrb	r0, [r4, #93]	@ zero_extendqisi2
 16430 0616 4FEA0C4C 		lsl	ip, ip, #16
 16431 061a 4CEA086C 		orr	ip, ip, r8, lsl #24
 16432 061e 4CEA0101 		orr	r1, ip, r1
 16433 0622 41EA0021 		orr	r1, r1, r0, lsl #8
 16434 0626 6162     		str	r1, [r4, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 16435              		.loc 1 2122 0
 16436 0628 9B00     		lsls	r3, r3, #2
 16437              	.LVL2108:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 16438              		.loc 1 2113 0
 16439 062a 4FF00308 		mov	r8, #3
 16440 062e 7AE6     		b	.L1976
 16441              	.LVL2109:
 16442              	.L2034:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 16443              		.loc 1 2111 0
 16444 0630 4FF00108 		mov	r8, #1
 16445 0634 5DE6     		b	.L1974
 16446              	.L2088:
 16447 0636 00BF     		.align	2
 16448              	.L2087:
 16449 0638 00000000 		.word	.LANCHOR3
 16450 063c 00000000 		.word	move_window
 16451 0640 55AAFFFF 		.word	-21931
 16452 0644 52526141 		.word	1096897106
 16453 0648 72724161 		.word	1631679090
 16454 064c 46415400 		.word	5521734
 16455              	.LBE1498:
 16456              	.LBE1526:
 16457              		.cfi_endproc
 16458              	.LFE38:
 16460              		.section	.text.f_truncate,"ax",%progbits
 16461              		.align	2
 16462              		.global	f_truncate
 16463              		.thumb
 16464              		.thumb_func
 16466              	f_truncate:
 16467              	.LFB39:
3145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 16468              		.loc 1 3145 0
 16469              		.cfi_startproc
 16470              		@ args = 0, pretend = 0, frame = 0
 16471              		@ frame_needed = 0, uses_anonymous_args = 0
 16472              	.LVL2110:
 16473 0000 38B5     		push	{r3, r4, r5, lr}
 16474              	.LCFI41:
 16475              		.cfi_def_cfa_offset 16
 16476              		.cfi_offset 3, -16
 16477              		.cfi_offset 4, -12
 16478              		.cfi_offset 5, -8
 16479              		.cfi_offset 14, -4
3150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);		/* Check validity of the object */
 16480              		.loc 1 3150 0
 16481 0002 0368     		ldr	r3, [r0, #0]
 16482 0004 8188     		ldrh	r1, [r0, #4]
 16483              	.LVL2111:
3145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 16484              		.loc 1 3145 0
 16485 0006 0446     		mov	r4, r0
 16486              	.LBB1537:
 16487              	.LBB1538:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 16488              		.loc 1 2177 0
 16489 0008 0BB1     		cbz	r3, .L2107
 16490 000a 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 16491 000c 0AB9     		cbnz	r2, .L2127
 16492              	.L2107:
 16493 000e 0920     		movs	r0, #9
 16494              	.LVL2112:
 16495 0010 38BD     		pop	{r3, r4, r5, pc}
 16496              	.LVL2113:
 16497              	.L2127:
 16498 0012 DA88     		ldrh	r2, [r3, #6]
 16499 0014 8A42     		cmp	r2, r1
 16500 0016 FAD1     		bne	.L2107
 16501              	.LVL2114:
 16502              	.LBB1539:
 16503              	.LBB1540:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 16504              		.loc 1 2182 0
 16505 0018 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 16506              	.LVL2115:
 16507 001a 2B4B     		ldr	r3, .L2133
 16508              	.LVL2116:
 16509 001c 9847     		blx	r3
 16510              	.LVL2117:
 16511 001e C307     		lsls	r3, r0, #31
 16512 0020 01D5     		bpl	.L2128
2183:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;
 16513              		.loc 1 2183 0
 16514 0022 0320     		movs	r0, #3
 16515 0024 38BD     		pop	{r3, r4, r5, pc}
 16516              	.L2128:
 16517              	.LBE1540:
 16518              	.LBE1539:
 16519              	.LBE1538:
 16520              	.LBE1537:
3152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->flag & FA__ERROR) {			/* Check abort flag */
 16521              		.loc 1 3152 0
 16522 0026 A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 16523 0028 1106     		lsls	r1, r2, #24
 16524 002a 4AD4     		bmi	.L2129
3155:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!(fp->flag & FA_WRITE))		/* Check access mode */
 16525              		.loc 1 3155 0
 16526 002c 02F00203 		and	r3, r2, #2
 16527 0030 DBB2     		uxtb	r3, r3
 16528 0032 0BB9     		cbnz	r3, .L2130
3156:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_DENIED;
 16529              		.loc 1 3156 0
 16530 0034 0720     		movs	r0, #7
 16531 0036 38BD     		pop	{r3, r4, r5, pc}
 16532              	.L2130:
 16533              	.LVL2118:
3160:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fp->fsize > fp->fptr) {
 16534              		.loc 1 3160 0
 16535 0038 A368     		ldr	r3, [r4, #8]
 16536 003a E168     		ldr	r1, [r4, #12]
 16537 003c 9942     		cmp	r1, r3
 16538 003e 01D8     		bhi	.L2100
 16539              	.L2104:
 16540              	.LBB1541:
 16541              	.LBB1542:
 938:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_INT_ERR;
 16542              		.loc 1 938 0
 16543 0040 0020     		movs	r0, #0
 16544              	.LVL2119:
 16545 0042 38BD     		pop	{r3, r4, r5, pc}
 16546              	.LVL2120:
 16547              	.L2100:
 16548              	.LBE1542:
 16549              	.LBE1541:
3162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->flag |= FA__WRITTEN;
 16550              		.loc 1 3162 0
 16551 0044 42F02002 		orr	r2, r2, #32
3161:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
 16552              		.loc 1 3161 0
 16553 0048 E360     		str	r3, [r4, #12]
3162:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->flag |= FA__WRITTEN;
 16554              		.loc 1 3162 0
 16555 004a A271     		strb	r2, [r4, #6]
3163:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 16556              		.loc 1 3163 0
 16557 004c 9BB9     		cbnz	r3, .L2093
3164:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
 16558              		.loc 1 3164 0
 16559 004e 2169     		ldr	r1, [r4, #16]
 16560 0050 2068     		ldr	r0, [r4, #0]
 16561              	.LVL2121:
 16562              	.LBB1545:
 16563              	.LBB1546:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 16564              		.loc 1 937 0
 16565 0052 0129     		cmp	r1, #1
 16566 0054 02D9     		bls	.L2111
 16567 0056 8369     		ldr	r3, [r0, #24]
 16568 0058 9942     		cmp	r1, r3
 16569 005a 08D3     		bcc	.L2131
 16570              	.L2111:
 938:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = FR_INT_ERR;
 16571              		.loc 1 938 0
 16572 005c 0220     		movs	r0, #2
 16573              	.LVL2122:
 16574              	.L2094:
 16575              	.LBE1546:
 16576              	.LBE1545:
3165:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->sclust = 0;
 16577              		.loc 1 3165 0
 16578 005e 0023     		movs	r3, #0
 16579 0060 2361     		str	r3, [r4, #16]
 16580              	.LVL2123:
 16581              	.L2095:
3177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) fp->flag |= FA__ERROR;
 16582              		.loc 1 3177 0
 16583 0062 38B1     		cbz	r0, .L2120
 16584              	.LVL2124:
 16585              	.L2101:
3177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res != FR_OK) fp->flag |= FA__ERROR;
 16586              		.loc 1 3177 0 is_stmt 0 discriminator 1
 16587 0064 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 16588 0066 63F07F03 		orn	r3, r3, #127
 16589 006a A371     		strb	r3, [r4, #6]
 16590 006c 38BD     		pop	{r3, r4, r5, pc}
 16591              	.LVL2125:
 16592              	.L2131:
 16593 006e 174B     		ldr	r3, .L2133+4
 16594 0070 9847     		blx	r3
 16595              	.LVL2126:
 16596 0072 F4E7     		b	.L2094
 16597              	.LVL2127:
 16598              	.L2120:
3181:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 16599              		.loc 1 3181 0 is_stmt 1
 16600 0074 38BD     		pop	{r3, r4, r5, pc}
 16601              	.LVL2128:
 16602              	.L2093:
3167:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ncl = get_fat(fp->fs, fp->clust);
 16603              		.loc 1 3167 0
 16604 0076 2068     		ldr	r0, [r4, #0]
 16605 0078 6169     		ldr	r1, [r4, #20]
 16606 007a 154B     		ldr	r3, .L2133+8
 16607 007c 9847     		blx	r3
 16608              	.LVL2129:
 16609 007e 0546     		mov	r5, r0
 16610              	.LVL2130:
3169:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
 16611              		.loc 1 3169 0
 16612 0080 0130     		adds	r0, r0, #1
 16613              	.LVL2131:
 16614 0082 1CD0     		beq	.L2112
3170:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 16615              		.loc 1 3170 0
 16616 0084 012D     		cmp	r5, #1
 16617 0086 08D0     		beq	.L2115
3171:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 16618              		.loc 1 3171 0
 16619 0088 2068     		ldr	r0, [r4, #0]
 16620 008a 8369     		ldr	r3, [r0, #24]
 16621 008c 9D42     		cmp	r5, r3
 16622 008e D7D2     		bcs	.L2104
3172:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 16623              		.loc 1 3172 0
 16624 0090 6169     		ldr	r1, [r4, #20]
 16625              	.LVL2132:
 16626              	.LBB1547:
 16627              	.LBB1548:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 16628              		.loc 1 873 0
 16629 0092 0129     		cmp	r1, #1
 16630 0094 01D9     		bls	.L2115
 16631 0096 8B42     		cmp	r3, r1
 16632 0098 01D8     		bhi	.L2132
 16633              	.LVL2133:
 16634              	.L2115:
3170:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 16635              		.loc 1 3170 0
 16636 009a 0220     		movs	r0, #2
 16637 009c E2E7     		b	.L2101
 16638              	.LVL2134:
 16639              	.L2132:
 16640 009e 6FF07042 		mvn	r2, #-268435456
 16641 00a2 0C4B     		ldr	r3, .L2133+12
 16642 00a4 9847     		blx	r3
 16643              	.LVL2135:
 16644              	.LBE1548:
 16645              	.LBE1547:
3173:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
 16646              		.loc 1 3173 0
 16647 00a6 0028     		cmp	r0, #0
 16648 00a8 DCD1     		bne	.L2101
 16649              	.LBB1549:
 16650              	.LBB1543:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 16651              		.loc 1 937 0 discriminator 1
 16652 00aa 012D     		cmp	r5, #1
 16653              	.LBE1543:
 16654              	.LBE1549:
3173:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
 16655              		.loc 1 3173 0 discriminator 1
 16656 00ac 2068     		ldr	r0, [r4, #0]
 16657              	.LVL2136:
 16658              	.LBB1550:
 16659              	.LBB1544:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 16660              		.loc 1 937 0 discriminator 1
 16661 00ae F4D9     		bls	.L2115
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 16662              		.loc 1 937 0 is_stmt 0
 16663 00b0 8369     		ldr	r3, [r0, #24]
 16664 00b2 9D42     		cmp	r5, r3
 16665 00b4 F1D2     		bcs	.L2115
 16666 00b6 2946     		mov	r1, r5
 16667 00b8 044B     		ldr	r3, .L2133+4
 16668 00ba 9847     		blx	r3
 16669              	.LVL2137:
 16670 00bc D1E7     		b	.L2095
 16671              	.LVL2138:
 16672              	.L2112:
 16673              	.LBE1544:
 16674              	.LBE1550:
3169:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
 16675              		.loc 1 3169 0 is_stmt 1
 16676 00be 0120     		movs	r0, #1
 16677 00c0 D0E7     		b	.L2101
 16678              	.LVL2139:
 16679              	.L2129:
3153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			res = FR_INT_ERR;
 16680              		.loc 1 3153 0
 16681 00c2 0220     		movs	r0, #2
 16682 00c4 38BD     		pop	{r3, r4, r5, pc}
 16683              	.L2134:
 16684 00c6 00BF     		.align	2
 16685              	.L2133:
 16686 00c8 00000000 		.word	disk_status
 16687 00cc 00000000 		.word	remove_chain.part.7
 16688 00d0 00000000 		.word	get_fat
 16689 00d4 00000000 		.word	put_fat.part.4
 16690              		.cfi_endproc
 16691              	.LFE39:
 16693              		.section	.text.f_unlink,"ax",%progbits
 16694              		.align	2
 16695              		.global	f_unlink
 16696              		.thumb
 16697              		.thumb_func
 16699              	f_unlink:
 16700              	.LFB40:
3193:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 16701              		.loc 1 3193 0
 16702              		.cfi_startproc
 16703              		@ args = 0, pretend = 0, frame = 88
 16704              		@ frame_needed = 0, uses_anonymous_args = 0
 16705              	.LVL2140:
 16706 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 16707              	.LCFI42:
 16708              		.cfi_def_cfa_offset 36
 16709              		.cfi_offset 4, -36
 16710              		.cfi_offset 5, -32
 16711              		.cfi_offset 6, -28
 16712              		.cfi_offset 7, -24
 16713              		.cfi_offset 8, -20
 16714              		.cfi_offset 9, -16
 16715              		.cfi_offset 10, -12
 16716              		.cfi_offset 11, -8
 16717              		.cfi_offset 14, -4
 16718              	.LBB1565:
 16719              	.LBB1566:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 16720              		.loc 1 2023 0
 16721 0004 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 16722 0006 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 16723              		.loc 1 2024 0
 16724 0008 092B     		cmp	r3, #9
 16725              	.LBE1566:
 16726              	.LBE1565:
3193:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 16727              		.loc 1 3193 0
 16728 000a 97B0     		sub	sp, sp, #92
 16729              	.LCFI43:
 16730              		.cfi_def_cfa_offset 128
 16731              	.LVL2141:
3193:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 16732              		.loc 1 3193 0
 16733 000c 0446     		mov	r4, r0
 16734              	.LVL2142:
 16735              	.LBB1590:
 16736              	.LBB1587:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 16737              		.loc 1 2024 0
 16738 000e 13D9     		bls	.L2218
 16739              	.LVL2143:
 16740              	.L2136:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 16741              		.loc 1 2037 0
 16742 0010 A64B     		ldr	r3, .L2225
 16743              	.LVL2144:
 16744 0012 1D68     		ldr	r5, [r3, #0]
 16745              	.LVL2145:
 16746 0014 0495     		str	r5, [sp, #16]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 16747              		.loc 1 2038 0
 16748 0016 002D     		cmp	r5, #0
 16749 0018 21D0     		beq	.L2170
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 16750              		.loc 1 2042 0
 16751 001a 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 16752 001c B3B1     		cbz	r3, .L2138
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 16753              		.loc 1 2043 0
 16754 001e 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 16755 0020 A34B     		ldr	r3, .L2225+4
 16756 0022 9847     		blx	r3
 16757              	.LVL2146:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 16758              		.loc 1 2044 0
 16759 0024 C207     		lsls	r2, r0, #31
 16760 0026 11D4     		bmi	.L2138
2045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check write protection if needed */
 16761              		.loc 1 2045 0
 16762 0028 00F00400 		and	r0, r0, #4
 16763              	.LVL2147:
 16764 002c C0B2     		uxtb	r0, r0
 16765 002e 0028     		cmp	r0, #0
 16766 0030 00F0D280 		beq	.L2139
 16767              	.L2140:
2046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_WRITE_PROTECTED;
 16768              		.loc 1 2046 0
 16769 0034 0A20     		movs	r0, #10
 16770 0036 06E0     		b	.L2196
 16771              	.LVL2148:
 16772              	.L2218:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 16773              		.loc 1 2024 0
 16774 0038 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 16775 003a 3A2A     		cmp	r2, #58
 16776 003c E8D1     		bne	.L2136
 16777              	.LVL2149:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 16778              		.loc 1 2036 0
 16779 003e 0B20     		movs	r0, #11
 16780              	.LVL2150:
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 16781              		.loc 1 2035 0
 16782 0040 002B     		cmp	r3, #0
 16783 0042 00F0C281 		beq	.L2219
 16784              	.LVL2151:
 16785              	.L2196:
 16786              	.LBE1587:
 16787              	.LBE1590:
3249:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 16788              		.loc 1 3249 0
 16789 0046 17B0     		add	sp, sp, #92
 16790 0048 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 16791              	.LVL2152:
 16792              	.L2138:
 16793              	.LBB1591:
 16794              	.LBB1588:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 16795              		.loc 1 2054 0
 16796 004c 0020     		movs	r0, #0
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 16797              		.loc 1 2056 0
 16798 004e 994B     		ldr	r3, .L2225+8
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 16799              		.loc 1 2054 0
 16800 0050 2870     		strb	r0, [r5, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 16801              		.loc 1 2055 0
 16802 0052 6870     		strb	r0, [r5, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 16803              		.loc 1 2056 0
 16804 0054 9847     		blx	r3
 16805              	.LVL2153:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 16806              		.loc 1 2057 0
 16807 0056 C307     		lsls	r3, r0, #31
 16808 0058 03D5     		bpl	.L2220
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 16809              		.loc 1 2058 0
 16810 005a 0320     		movs	r0, #3
 16811              	.LVL2154:
 16812 005c F3E7     		b	.L2196
 16813              	.LVL2155:
 16814              	.L2170:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 16815              		.loc 1 2038 0
 16816 005e 0C20     		movs	r0, #12
 16817 0060 F1E7     		b	.L2196
 16818              	.LVL2156:
 16819              	.L2220:
2059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 16820              		.loc 1 2059 0
 16821 0062 00F00402 		and	r2, r0, #4
 16822 0066 D2B2     		uxtb	r2, r2
 16823 0068 002A     		cmp	r2, #0
 16824 006a E3D1     		bne	.L2140
 16825              	.LVL2157:
 16826              	.LBB1567:
 16827              	.LBB1568:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 16828              		.loc 1 1987 0
 16829 006c 05F13007 		add	r7, r5, #48
 16830 0070 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 16831              	.LVL2158:
 16832 0072 914E     		ldr	r6, .L2225+12
 16833 0074 3946     		mov	r1, r7
 16834 0076 0123     		movs	r3, #1
 16835 0078 B047     		blx	r6
 16836              	.LVL2159:
 16837 007a 0028     		cmp	r0, #0
 16838 007c 00F00681 		beq	.L2221
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 16839              		.loc 1 1988 0
 16840 0080 0323     		movs	r3, #3
 16841              	.L2141:
 16842              	.LBE1568:
 16843              	.LBE1567:
 16844              	.LBB1574:
 16845              	.LBB1575:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 16846              		.loc 1 2066 0
 16847 0082 4FF00008 		mov	r8, #0
 16848              	.LVL2160:
 16849              	.L2163:
 16850              	.LBE1575:
 16851              	.LBE1574:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 16852              		.loc 1 2078 0
 16853 0086 032B     		cmp	r3, #3
 16854 0088 00F00D81 		beq	.L2179
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 16855              		.loc 1 2079 0
 16856 008c 13B1     		cbz	r3, .L2142
 16857              	.LVL2161:
 16858              	.L2145:
 16859 008e 0D20     		movs	r0, #13
 16860 0090 D9E7     		b	.L2196
 16861              	.LVL2162:
 16862              	.L2175:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 16863              		.loc 1 2066 0
 16864 0092 8046     		mov	r8, r0
 16865              	.LVL2163:
 16866              	.L2142:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 16867              		.loc 1 2083 0
 16868 0094 95F83C20 		ldrb	r2, [r5, #60]	@ zero_extendqisi2
 16869 0098 95F83B30 		ldrb	r3, [r5, #59]	@ zero_extendqisi2
 16870 009c 43EA0223 		orr	r3, r3, r2, lsl #8
 16871 00a0 B3F5007F 		cmp	r3, #512
 16872 00a4 F3D1     		bne	.L2145
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 16873              		.loc 1 2086 0
 16874 00a6 95F84720 		ldrb	r2, [r5, #71]	@ zero_extendqisi2
 16875 00aa 95F84630 		ldrb	r3, [r5, #70]	@ zero_extendqisi2
 16876              	.LVL2164:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 16877              		.loc 1 2087 0
 16878 00ae 53EA0222 		orrs	r2, r3, r2, lsl #8
 16879              	.LVL2165:
 16880 00b2 0DD1     		bne	.L2146
 16881 00b4 95F85610 		ldrb	r1, [r5, #86]	@ zero_extendqisi2
 16882 00b8 95F85700 		ldrb	r0, [r5, #87]	@ zero_extendqisi2
 16883 00bc 95F85430 		ldrb	r3, [r5, #84]	@ zero_extendqisi2
 16884 00c0 95F85520 		ldrb	r2, [r5, #85]	@ zero_extendqisi2
 16885              	.LVL2166:
 16886 00c4 0904     		lsls	r1, r1, #16
 16887 00c6 41EA0061 		orr	r1, r1, r0, lsl #24
 16888 00ca 0B43     		orrs	r3, r3, r1
 16889 00cc 43EA0222 		orr	r2, r3, r2, lsl #8
 16890              	.LVL2167:
 16891              	.L2146:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 16892              		.loc 1 2090 0
 16893 00d0 95F840A0 		ldrb	sl, [r5, #64]	@ zero_extendqisi2
 16894              	.LVL2168:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 16895              		.loc 1 2088 0
 16896 00d4 EA61     		str	r2, [r5, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 16897              		.loc 1 2091 0
 16898 00d6 0AF1FF33 		add	r3, sl, #-1
 16899 00da 012B     		cmp	r3, #1
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 16900              		.loc 1 2090 0
 16901 00dc 85F803A0 		strb	sl, [r5, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 16902              		.loc 1 2091 0
 16903 00e0 D5D8     		bhi	.L2145
 16904              	.LVL2169:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 16905              		.loc 1 2094 0
 16906 00e2 95F83D30 		ldrb	r3, [r5, #61]	@ zero_extendqisi2
 16907              	.LVL2170:
 16908 00e6 AB70     		strb	r3, [r5, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 16909              		.loc 1 2095 0
 16910 00e8 002B     		cmp	r3, #0
 16911 00ea D0D0     		beq	.L2145
 16912 00ec 591E     		subs	r1, r3, #1
 16913 00ee 1942     		tst	r1, r3
 16914 00f0 CDD1     		bne	.L2145
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 16915              		.loc 1 2097 0
 16916 00f2 95F84110 		ldrb	r1, [r5, #65]	@ zero_extendqisi2
 16917 00f6 95F84200 		ldrb	r0, [r5, #66]	@ zero_extendqisi2
 16918 00fa 41EA0020 		orr	r0, r1, r0, lsl #8
 16919 00fe 81B2     		uxth	r1, r0
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 16920              		.loc 1 2098 0
 16921 0100 0007     		lsls	r0, r0, #28
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 16922              		.loc 1 2097 0
 16923 0102 2981     		strh	r1, [r5, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 16924              		.loc 1 2098 0
 16925 0104 C3D1     		bne	.L2145
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 16926              		.loc 1 2100 0
 16927 0106 95F84490 		ldrb	r9, [r5, #68]	@ zero_extendqisi2
 16928 010a 95F84300 		ldrb	r0, [r5, #67]	@ zero_extendqisi2
 16929              	.LVL2171:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 16930              		.loc 1 2101 0
 16931 010e 50EA0929 		orrs	r9, r0, r9, lsl #8
 16932              	.LVL2172:
 16933 0112 0FD1     		bne	.L2147
 16934 0114 95F852C0 		ldrb	ip, [r5, #82]	@ zero_extendqisi2
 16935 0118 95F853B0 		ldrb	fp, [r5, #83]	@ zero_extendqisi2
 16936 011c 95F85000 		ldrb	r0, [r5, #80]	@ zero_extendqisi2
 16937 0120 95F85190 		ldrb	r9, [r5, #81]	@ zero_extendqisi2
 16938              	.LVL2173:
 16939 0124 4FEA0C4C 		lsl	ip, ip, #16
 16940 0128 4CEA0B6C 		orr	ip, ip, fp, lsl #24
 16941 012c 4CEA0000 		orr	r0, ip, r0
 16942 0130 40EA0929 		orr	r9, r0, r9, lsl #8
 16943              	.LVL2174:
 16944              	.L2147:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 16945              		.loc 1 2103 0
 16946 0134 95F83FC0 		ldrb	ip, [r5, #63]	@ zero_extendqisi2
 16947 0138 95F83E00 		ldrb	r0, [r5, #62]	@ zero_extendqisi2
 16948              	.LVL2175:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 16949              		.loc 1 2104 0
 16950 013c 50EA0C2C 		orrs	ip, r0, ip, lsl #8
 16951              	.LVL2176:
 16952 0140 A5D0     		beq	.L2145
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 16953              		.loc 1 2092 0
 16954 0142 0AFB02FA 		mul	sl, sl, r2
 16955              	.LVL2177:
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 16956              		.loc 1 2107 0
 16957 0146 0CEB1110 		add	r0, ip, r1, lsr #4
 16958              	.LVL2178:
 16959 014a 5044     		add	r0, r0, sl
 16960              	.LVL2179:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 16961              		.loc 1 2108 0
 16962 014c 4845     		cmp	r0, r9
 16963 014e 9ED8     		bhi	.L2145
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 16964              		.loc 1 2109 0
 16965 0150 C0EB0909 		rsb	r9, r0, r9
 16966              	.LVL2180:
 16967 0154 B9FBF3F3 		udiv	r3, r9, r3
 16968              	.LVL2181:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 16969              		.loc 1 2110 0
 16970 0158 002B     		cmp	r3, #0
 16971 015a 98D0     		beq	.L2145
 16972              	.LVL2182:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 16973              		.loc 1 2112 0
 16974 015c 40F6F579 		movw	r9, #4085
 16975 0160 4B45     		cmp	r3, r9
 16976 0162 40F2B381 		bls	.L2180
 16977              	.LVL2183:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 16978              		.loc 1 2113 0
 16979 0166 09F57049 		add	r9, r9, #61440
 16980 016a 4B45     		cmp	r3, r9
 16981 016c 00F28F81 		bhi	.L2149
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 16982              		.loc 1 2112 0
 16983 0170 4FF00209 		mov	r9, #2
 16984              	.LVL2184:
 16985              	.L2148:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 16986              		.loc 1 2116 0
 16987 0174 0233     		adds	r3, r3, #2
 16988              	.LVL2185:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 16989              		.loc 1 2117 0
 16990 0176 4044     		add	r0, r0, r8
 16991              	.LVL2186:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 16992              		.loc 1 2118 0
 16993 0178 C444     		add	ip, r8, ip
 16994              	.LVL2187:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 16995              		.loc 1 2116 0
 16996 017a AB61     		str	r3, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 16997              		.loc 1 2117 0
 16998 017c A862     		str	r0, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 16999              		.loc 1 2118 0
 17000 017e C5F820C0 		str	ip, [r5, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 17001              		.loc 1 2124 0
 17002 0182 0029     		cmp	r1, #0
 17003 0184 83D0     		beq	.L2145
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 17004              		.loc 1 2125 0
 17005 0186 0AEB0C01 		add	r1, sl, ip
 17006              	.LVL2188:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 17007              		.loc 1 2127 0
 17008 018a B9F1020F 		cmp	r9, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 17009              		.loc 1 2125 0
 17010 018e 6962     		str	r1, [r5, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 17011              		.loc 1 2127 0
 17012 0190 00F07B81 		beq	.L2222
 17013 0194 0321     		movs	r1, #3
 17014 0196 01FB03F1 		mul	r1, r1, r3
 17015 019a 03F00103 		and	r3, r3, #1
 17016              	.LVL2189:
 17017 019e 03EB5103 		add	r3, r3, r1, lsr #1
 17018 01a2 4FF00109 		mov	r9, #1
 17019              	.LVL2190:
 17020              	.L2150:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 17021              		.loc 1 2129 0
 17022 01a6 03F2FF13 		addw	r3, r3, #511
 17023              	.LVL2191:
 17024 01aa B2EB532F 		cmp	r2, r3, lsr #9
 17025 01ae FFF46EAF 		bcc	.L2145
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 17026              		.loc 1 2135 0
 17027 01b2 0023     		movs	r3, #0
 17028              	.LVL2192:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 17029              		.loc 1 2134 0
 17030 01b4 4FF0FF32 		mov	r2, #-1
 17031              	.LVL2193:
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 17032              		.loc 1 2138 0
 17033 01b8 B9F1030F 		cmp	r9, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 17034              		.loc 1 2134 0
 17035 01bc 2A61     		str	r2, [r5, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 17036              		.loc 1 2135 0
 17037 01be EB60     		str	r3, [r5, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 17038              		.loc 1 2138 0
 17039 01c0 00F00581 		beq	.L2223
 17040              	.LVL2194:
 17041              	.L2153:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 17042              		.loc 1 2151 0
 17043 01c4 3D49     		ldr	r1, .L2225+16
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 17044              		.loc 1 2150 0
 17045 01c6 85F80090 		strb	r9, [r5, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 17046              		.loc 1 2151 0
 17047 01ca 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 17048              		.loc 1 2152 0
 17049 01cc 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 17050              		.loc 1 2151 0
 17051 01ce 0132     		adds	r2, r2, #1
 17052 01d0 0A80     		strh	r2, [r1, #0]	@ movhi
 17053 01d2 EA80     		strh	r2, [r5, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 17054              		.loc 1 2152 0
 17055 01d4 EB62     		str	r3, [r5, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 17056              		.loc 1 2153 0
 17057 01d6 2B71     		strb	r3, [r5, #4]
 17058              	.LVL2195:
 17059              	.L2139:
 17060              	.LBE1588:
 17061              	.LBE1591:
3203:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 17062              		.loc 1 3203 0
 17063 01d8 394B     		ldr	r3, .L2225+20
 17064 01da 0B93     		str	r3, [sp, #44]
 17065 01dc 01AB     		add	r3, sp, #4
 17066 01de 0A93     		str	r3, [sp, #40]
3204:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 17067              		.loc 1 3204 0
 17068 01e0 04A8     		add	r0, sp, #16
 17069              	.LVL2196:
 17070 01e2 2146     		mov	r1, r4
 17071 01e4 374B     		ldr	r3, .L2225+24
 17072 01e6 9847     		blx	r3
 17073              	.LVL2197:
3210:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
 17074              		.loc 1 3210 0
 17075 01e8 0028     		cmp	r0, #0
 17076 01ea 7FF42CAF 		bne	.L2196
3211:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;
 17077              		.loc 1 3211 0
 17078 01ee 099B     		ldr	r3, [sp, #36]
 17079              	.LVL2198:
3212:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!dir) {
 17080              		.loc 1 3212 0
 17081 01f0 002B     		cmp	r3, #0
 17082 01f2 3AD0     		beq	.L2181
3215:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dir[DIR_Attr] & AM_RDO)
 17083              		.loc 1 3215 0
 17084 01f4 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 17085 01f6 D107     		lsls	r1, r2, #31
 17086 01f8 35D4     		bmi	.L2182
 17087              	.LVL2199:
3218:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dclst = LD_CLUST(dir);
 17088              		.loc 1 3218 0
 17089 01fa 5E7D     		ldrb	r6, [r3, #21]	@ zero_extendqisi2
 17090              	.LVL2200:
 17091 01fc 187D     		ldrb	r0, [r3, #20]	@ zero_extendqisi2
 17092 01fe D97E     		ldrb	r1, [r3, #27]	@ zero_extendqisi2
 17093              	.LVL2201:
 17094 0200 9B7E     		ldrb	r3, [r3, #26]	@ zero_extendqisi2
 17095              	.LVL2202:
3219:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
 17096              		.loc 1 3219 0
 17097 0202 02F01002 		and	r2, r2, #16
3218:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dclst = LD_CLUST(dir);
 17098              		.loc 1 3218 0
 17099 0206 40EA0626 		orr	r6, r0, r6, lsl #8
 17100              	.LVL2203:
 17101 020a 43EA0123 		orr	r3, r3, r1, lsl #8
3219:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
 17102              		.loc 1 3219 0
 17103 020e D2B2     		uxtb	r2, r2
3218:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dclst = LD_CLUST(dir);
 17104              		.loc 1 3218 0
 17105 0210 43EA0646 		orr	r6, r3, r6, lsl #16
3219:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
 17106              		.loc 1 3219 0
 17107 0214 E2B1     		cbz	r2, .L2159
3220:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dclst < 2) {
 17108              		.loc 1 3220 0
 17109 0216 012E     		cmp	r6, #1
 17110 0218 29D9     		bls	.L2183
 17111 021a 2323     		movs	r3, #35
3223:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					mem_cpy(&sdj, &dj, sizeof(DIR));	/* Check if the sub-dir is empty or not */
 17112              		.loc 1 3223 0
 17113 021c 0DA8     		add	r0, sp, #52
 17114 021e 04AA     		add	r2, sp, #16
 17115              	.LVL2204:
 17116 0220 00E0     		b	.L2158
 17117              	.LVL2205:
 17118              	.L2184:
 17119              	.LBB1592:
 17120              	.LBB1593:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 17121              		.loc 1 540 0
 17122 0222 2B46     		mov	r3, r5
 17123              	.LVL2206:
 17124              	.L2158:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 17125              		.loc 1 541 0
 17126 0224 12F8014B 		ldrb	r4, [r2], #1	@ zero_extendqisi2
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 17127              		.loc 1 540 0
 17128 0228 5D1E     		subs	r5, r3, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 17129              		.loc 1 541 0
 17130 022a 00F8014B 		strb	r4, [r0], #1
 17131              	.LVL2207:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 17132              		.loc 1 540 0
 17133 022e 002B     		cmp	r3, #0
 17134 0230 F7D1     		bne	.L2184
 17135              	.LBE1593:
 17136              	.LBE1592:
3225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
 17137              		.loc 1 3225 0
 17138 0232 0DA8     		add	r0, sp, #52
 17139              	.LVL2208:
 17140 0234 0221     		movs	r1, #2
 17141              	.LVL2209:
 17142 0236 244B     		ldr	r3, .L2225+28
3224:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					sdj.sclust = dclst;
 17143              		.loc 1 3224 0
 17144 0238 0F96     		str	r6, [sp, #60]
3225:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
 17145              		.loc 1 3225 0
 17146 023a 9847     		blx	r3
 17147              	.LVL2210:
3226:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) {
 17148              		.loc 1 3226 0
 17149 023c 0028     		cmp	r0, #0
 17150 023e 7FF402AF 		bne	.L2196
3227:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						res = dir_read(&sdj);
 17151              		.loc 1 3227 0
 17152 0242 0DA8     		add	r0, sp, #52
 17153              	.LVL2211:
 17154 0244 214B     		ldr	r3, .L2225+32
 17155 0246 9847     		blx	r3
 17156              	.LVL2212:
3228:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (res == FR_OK			/* Not empty dir */
 17157              		.loc 1 3228 0
 17158 0248 68B1     		cbz	r0, .L2182
3233:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (res == FR_NO_FILE) res = FR_OK;	/* Empty */
 17159              		.loc 1 3233 0
 17160 024a 0428     		cmp	r0, #4
 17161 024c 7FF4FBAE 		bne	.L2196
 17162              	.LVL2213:
 17163              	.L2159:
3238:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
 17164              		.loc 1 3238 0
 17165 0250 04A8     		add	r0, sp, #16
 17166              	.LVL2214:
 17167 0252 1F4B     		ldr	r3, .L2225+36
 17168 0254 9847     		blx	r3
 17169              	.LVL2215:
3239:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK) {
 17170              		.loc 1 3239 0
 17171 0256 0028     		cmp	r0, #0
 17172 0258 7FF4F5AE 		bne	.L2196
3240:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (dclst)				/* Remove the cluster chain if exist */
 17173              		.loc 1 3240 0
 17174 025c 4EB9     		cbnz	r6, .L2160
 17175              	.L2162:
3242:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) res = sync(dj.fs);
 17176              		.loc 1 3242 0
 17177 025e 0498     		ldr	r0, [sp, #16]
 17178              	.LVL2216:
 17179 0260 1C4B     		ldr	r3, .L2225+40
 17180 0262 9847     		blx	r3
 17181              	.LVL2217:
 17182 0264 EFE6     		b	.L2196
 17183              	.L2182:
3216:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 17184              		.loc 1 3216 0
 17185 0266 0720     		movs	r0, #7
 17186              	.LVL2218:
 17187 0268 EDE6     		b	.L2196
 17188              	.LVL2219:
 17189              	.L2181:
3213:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the start directory */
 17190              		.loc 1 3213 0
 17191 026a 0620     		movs	r0, #6
 17192              	.LVL2220:
 17193 026c EBE6     		b	.L2196
 17194              	.LVL2221:
 17195              	.L2183:
3221:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = FR_INT_ERR;
 17196              		.loc 1 3221 0
 17197 026e 0220     		movs	r0, #2
 17198 0270 E9E6     		b	.L2196
 17199              	.LVL2222:
 17200              	.L2160:
 17201              	.LBB1594:
 17202              	.LBB1595:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 17203              		.loc 1 937 0
 17204 0272 012E     		cmp	r6, #1
 17205              	.LBE1595:
 17206              	.LBE1594:
3241:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						res = remove_chain(dj.fs, dclst);
 17207              		.loc 1 3241 0
 17208 0274 0498     		ldr	r0, [sp, #16]
 17209              	.LVL2223:
 17210              	.LBB1597:
 17211              	.LBB1596:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 17212              		.loc 1 937 0
 17213 0276 FAD0     		beq	.L2183
 17214 0278 8369     		ldr	r3, [r0, #24]
 17215 027a 9E42     		cmp	r6, r3
 17216 027c F7D2     		bcs	.L2183
 17217 027e 3146     		mov	r1, r6
 17218 0280 154B     		ldr	r3, .L2225+44
 17219 0282 9847     		blx	r3
 17220              	.LVL2224:
 17221              	.LBE1596:
 17222              	.LBE1597:
3242:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) res = sync(dj.fs);
 17223              		.loc 1 3242 0
 17224 0284 0028     		cmp	r0, #0
 17225 0286 7FF4DEAE 		bne	.L2196
 17226 028a E8E7     		b	.L2162
 17227              	.LVL2225:
 17228              	.L2221:
 17229              	.LBB1598:
 17230              	.LBB1589:
 17231              	.LBB1582:
 17232              	.LBB1571:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 17233              		.loc 1 1989 0
 17234 028c 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 17235 0290 95F82F92 		ldrb	r9, [r5, #559]	@ zero_extendqisi2
 17236 0294 43EA0929 		orr	r9, r3, r9, lsl #8
 17237 0298 104B     		ldr	r3, .L2225+48
 17238 029a 0FFA89F9 		sxth	r9, r9
 17239 029e 9945     		cmp	r9, r3
 17240 02a0 1ED0     		beq	.L2224
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 17241              		.loc 1 1990 0
 17242 02a2 0223     		movs	r3, #2
 17243 02a4 EDE6     		b	.L2141
 17244              	.LVL2226:
 17245              	.L2179:
 17246              	.LBE1571:
 17247              	.LBE1582:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 17248              		.loc 1 2078 0
 17249 02a6 0120     		movs	r0, #1
 17250 02a8 CDE6     		b	.L2196
 17251              	.L2226:
 17252 02aa 00BF     		.align	2
 17253              	.L2225:
 17254 02ac 00000000 		.word	.LANCHOR2
 17255 02b0 00000000 		.word	disk_status
 17256 02b4 00000000 		.word	disk_initialize
 17257 02b8 00000000 		.word	disk_read
 17258 02bc 00000000 		.word	.LANCHOR3
 17259 02c0 00000000 		.word	.LANCHOR4
 17260 02c4 00000000 		.word	follow_path
 17261 02c8 00000000 		.word	dir_sdi
 17262 02cc 00000000 		.word	dir_read
 17263 02d0 00000000 		.word	dir_remove
 17264 02d4 00000000 		.word	sync
 17265 02d8 00000000 		.word	remove_chain.part.7
 17266 02dc 55AAFFFF 		.word	-21931
 17267              	.LVL2227:
 17268              	.L2224:
 17269              	.LBB1583:
 17270              	.LBB1572:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 17271              		.loc 1 1992 0
 17272 02e0 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 17273 02e4 95F869C0 		ldrb	ip, [r5, #105]	@ zero_extendqisi2
 17274 02e8 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 17275 02ec 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 17276 02f0 DFF8E0A1 		ldr	sl, .L2227
 17277 02f4 0904     		lsls	r1, r1, #16
 17278 02f6 41EA0C61 		orr	r1, r1, ip, lsl #24
 17279 02fa 0B43     		orrs	r3, r3, r1
 17280 02fc 43EA0223 		orr	r3, r3, r2, lsl #8
 17281 0300 23F07F43 		bic	r3, r3, #-16777216
 17282 0304 5345     		cmp	r3, sl
 17283 0306 5ED0     		beq	.L2174
 17284              	.LVL2228:
 17285              	.LBB1569:
 17286              	.LBB1570:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 17287              		.loc 1 1994 0
 17288 0308 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 17289 030c 95F885C0 		ldrb	ip, [r5, #133]	@ zero_extendqisi2
 17290 0310 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 17291 0314 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 17292 0318 0904     		lsls	r1, r1, #16
 17293 031a 41EA0C61 		orr	r1, r1, ip, lsl #24
 17294 031e 0B43     		orrs	r3, r3, r1
 17295 0320 43EA0223 		orr	r3, r3, r2, lsl #8
 17296 0324 23F07F43 		bic	r3, r3, #-16777216
 17297              	.LBE1570:
 17298              	.LBE1569:
 17299              	.LBE1572:
 17300              	.LBE1583:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 17301              		.loc 1 2068 0
 17302 0328 5345     		cmp	r3, sl
 17303 032a 3FF4B2AE 		beq	.L2175
 17304              	.LVL2229:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 17305              		.loc 1 2073 0
 17306 032e 95F8F231 		ldrb	r3, [r5, #498]	@ zero_extendqisi2
 17307 0332 002B     		cmp	r3, #0
 17308 0334 3FF4ABAE 		beq	.L2145
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 17309              		.loc 1 2074 0
 17310 0338 95F8F821 		ldrb	r2, [r5, #504]	@ zero_extendqisi2
 17311 033c 95F8F911 		ldrb	r1, [r5, #505]	@ zero_extendqisi2
 17312 0340 95F8F631 		ldrb	r3, [r5, #502]	@ zero_extendqisi2
 17313 0344 95F8F781 		ldrb	r8, [r5, #503]	@ zero_extendqisi2
 17314              	.LBB1584:
 17315              	.LBB1580:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 17316              		.loc 1 1987 0
 17317 0348 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 17318              	.LBE1580:
 17319              	.LBE1584:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 17320              		.loc 1 2074 0
 17321 034a 1204     		lsls	r2, r2, #16
 17322 034c 42EA0162 		orr	r2, r2, r1, lsl #24
 17323 0350 1343     		orrs	r3, r3, r2
 17324 0352 43EA0828 		orr	r8, r3, r8, lsl #8
 17325              	.LVL2230:
 17326              	.LBB1585:
 17327              	.LBB1581:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 17328              		.loc 1 1987 0
 17329 0356 3946     		mov	r1, r7
 17330 0358 4246     		mov	r2, r8
 17331 035a 0123     		movs	r3, #1
 17332 035c B047     		blx	r6
 17333              	.LVL2231:
 17334 035e 0028     		cmp	r0, #0
 17335 0360 A1D1     		bne	.L2179
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 17336              		.loc 1 1989 0
 17337 0362 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 17338 0366 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 17339 036a 43EA0223 		orr	r3, r3, r2, lsl #8
 17340 036e 1BB2     		sxth	r3, r3
 17341 0370 4B45     		cmp	r3, r9
 17342 0372 7FF48CAE 		bne	.L2145
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 17343              		.loc 1 1992 0
 17344 0376 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 17345 037a 95F86900 		ldrb	r0, [r5, #105]	@ zero_extendqisi2
 17346 037e 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 17347 0382 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 17348 0386 0904     		lsls	r1, r1, #16
 17349 0388 41EA0061 		orr	r1, r1, r0, lsl #24
 17350 038c 0B43     		orrs	r3, r3, r1
 17351 038e 43EA0223 		orr	r3, r3, r2, lsl #8
 17352 0392 23F07F43 		bic	r3, r3, #-16777216
 17353 0396 5345     		cmp	r3, sl
 17354 0398 3FF47CAE 		beq	.L2142
 17355              	.LVL2232:
 17356              	.LBB1576:
 17357              	.LBB1577:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 17358              		.loc 1 1994 0
 17359 039c 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 17360 03a0 95F88500 		ldrb	r0, [r5, #133]	@ zero_extendqisi2
 17361 03a4 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 17362 03a8 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 17363 03ac 0904     		lsls	r1, r1, #16
 17364 03ae 41EA0061 		orr	r1, r1, r0, lsl #24
 17365 03b2 0B43     		orrs	r3, r3, r1
 17366 03b4 43EA0222 		orr	r2, r3, r2, lsl #8
 17367              	.LBE1577:
 17368              	.LBE1576:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 17369              		.loc 1 1995 0
 17370 03b8 464B     		ldr	r3, .L2227
 17371              	.LBB1579:
 17372              	.LBB1578:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 17373              		.loc 1 1994 0
 17374 03ba 22F07F42 		bic	r2, r2, #-16777216
 17375              	.LBE1578:
 17376              	.LBE1579:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 17377              		.loc 1 1995 0
 17378 03be D31A     		subs	r3, r2, r3
 17379 03c0 18BF     		it	ne
 17380 03c2 0123     		movne	r3, #1
 17381 03c4 5FE6     		b	.L2163
 17382              	.LVL2233:
 17383              	.L2174:
 17384              	.LBE1581:
 17385              	.LBE1585:
 17386              	.LBB1586:
 17387              	.LBB1573:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 17388              		.loc 1 1993 0
 17389 03c6 0346     		mov	r3, r0
 17390 03c8 5BE6     		b	.L2141
 17391              	.LVL2234:
 17392              	.L2219:
 17393              	.LBE1573:
 17394              	.LBE1586:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 17395              		.loc 1 2025 0
 17396 03ca 0234     		adds	r4, r4, #2
 17397              	.LVL2235:
 17398 03cc 20E6     		b	.L2136
 17399              	.LVL2236:
 17400              	.L2223:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 17401              		.loc 1 2140 0
 17402 03ce 95F86110 		ldrb	r1, [r5, #97]	@ zero_extendqisi2
 17403 03d2 95F86020 		ldrb	r2, [r5, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 17404              		.loc 1 2139 0
 17405 03d6 6B71     		strb	r3, [r5, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 17406              		.loc 1 2140 0
 17407 03d8 42EA0122 		orr	r2, r2, r1, lsl #8
 17408 03dc 4244     		add	r2, r8, r2
 17409 03de 6A61     		str	r2, [r5, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 17410              		.loc 1 2141 0
 17411 03e0 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 17412 03e2 3946     		mov	r1, r7
 17413 03e4 0123     		movs	r3, #1
 17414 03e6 B047     		blx	r6
 17415              	.LVL2237:
 17416 03e8 0028     		cmp	r0, #0
 17417 03ea 7FF4EBAE 		bne	.L2153
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 17418              		.loc 1 2142 0
 17419 03ee 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 17420 03f2 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 17421 03f6 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 17422              		.loc 1 2141 0
 17423 03fa 374B     		ldr	r3, .L2227+4
 17424 03fc 12B2     		sxth	r2, r2
 17425 03fe 9A42     		cmp	r2, r3
 17426 0400 7FF4E0AE 		bne	.L2153
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 17427              		.loc 1 2143 0
 17428 0404 95F83210 		ldrb	r1, [r5, #50]	@ zero_extendqisi2
 17429 0408 95F83300 		ldrb	r0, [r5, #51]	@ zero_extendqisi2
 17430 040c 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 17431 0410 95F83120 		ldrb	r2, [r5, #49]	@ zero_extendqisi2
 17432 0414 0904     		lsls	r1, r1, #16
 17433 0416 41EA0061 		orr	r1, r1, r0, lsl #24
 17434 041a 0B43     		orrs	r3, r3, r1
 17435 041c 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 17436              		.loc 1 2142 0
 17437 0420 2E4B     		ldr	r3, .L2227+8
 17438 0422 9A42     		cmp	r2, r3
 17439 0424 7FF4CEAE 		bne	.L2153
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 17440              		.loc 1 2144 0
 17441 0428 95F81612 		ldrb	r1, [r5, #534]	@ zero_extendqisi2
 17442 042c 95F81702 		ldrb	r0, [r5, #535]	@ zero_extendqisi2
 17443 0430 95F81432 		ldrb	r3, [r5, #532]	@ zero_extendqisi2
 17444 0434 95F81522 		ldrb	r2, [r5, #533]	@ zero_extendqisi2
 17445 0438 0904     		lsls	r1, r1, #16
 17446 043a 41EA0061 		orr	r1, r1, r0, lsl #24
 17447 043e 0B43     		orrs	r3, r3, r1
 17448 0440 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 17449              		.loc 1 2143 0
 17450 0444 264B     		ldr	r3, .L2227+12
 17451 0446 9A42     		cmp	r2, r3
 17452 0448 7FF4BCAE 		bne	.L2153
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17453              		.loc 1 2145 0
 17454 044c 95F81E72 		ldrb	r7, [r5, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17455              		.loc 1 2146 0
 17456 0450 95F81A62 		ldrb	r6, [r5, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17457              		.loc 1 2145 0
 17458 0454 95F81FC2 		ldrb	ip, [r5, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17459              		.loc 1 2146 0
 17460 0458 95F81BE2 		ldrb	lr, [r5, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17461              		.loc 1 2145 0
 17462 045c 95F81C22 		ldrb	r2, [r5, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17463              		.loc 1 2146 0
 17464 0460 95F81832 		ldrb	r3, [r5, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17465              		.loc 1 2145 0
 17466 0464 95F81D02 		ldrb	r0, [r5, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17467              		.loc 1 2146 0
 17468 0468 95F81912 		ldrb	r1, [r5, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17469              		.loc 1 2145 0
 17470 046c 3F04     		lsls	r7, r7, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17471              		.loc 1 2146 0
 17472 046e 3604     		lsls	r6, r6, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17473              		.loc 1 2145 0
 17474 0470 47EA0C67 		orr	r7, r7, ip, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17475              		.loc 1 2146 0
 17476 0474 46EA0E66 		orr	r6, r6, lr, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17477              		.loc 1 2145 0
 17478 0478 3A43     		orrs	r2, r2, r7
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17479              		.loc 1 2146 0
 17480 047a 3343     		orrs	r3, r3, r6
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17481              		.loc 1 2145 0
 17482 047c 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17483              		.loc 1 2146 0
 17484 0480 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 17485              		.loc 1 2145 0
 17486 0484 EA60     		str	r2, [r5, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 17487              		.loc 1 2146 0
 17488 0486 2B61     		str	r3, [r5, #16]
 17489 0488 9CE6     		b	.L2153
 17490              	.LVL2238:
 17491              	.L2222:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 17492              		.loc 1 2127 0
 17493 048a 5B00     		lsls	r3, r3, #1
 17494              	.LVL2239:
 17495 048c 8BE6     		b	.L2150
 17496              	.LVL2240:
 17497              	.L2149:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 17498              		.loc 1 2116 0
 17499 048e 0233     		adds	r3, r3, #2
 17500              	.LVL2241:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 17501              		.loc 1 2117 0
 17502 0490 4044     		add	r0, r0, r8
 17503              	.LVL2242:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 17504              		.loc 1 2118 0
 17505 0492 C444     		add	ip, r8, ip
 17506              	.LVL2243:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 17507              		.loc 1 2116 0
 17508 0494 AB61     		str	r3, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 17509              		.loc 1 2117 0
 17510 0496 A862     		str	r0, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 17511              		.loc 1 2118 0
 17512 0498 C5F820C0 		str	ip, [r5, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 17513              		.loc 1 2120 0
 17514 049c 0029     		cmp	r1, #0
 17515 049e 7FF4F6AD 		bne	.L2145
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 17516              		.loc 1 2121 0
 17517 04a2 95F85EC0 		ldrb	ip, [r5, #94]	@ zero_extendqisi2
 17518 04a6 95F85F90 		ldrb	r9, [r5, #95]	@ zero_extendqisi2
 17519 04aa 95F85C10 		ldrb	r1, [r5, #92]	@ zero_extendqisi2
 17520              	.LVL2244:
 17521 04ae 95F85D00 		ldrb	r0, [r5, #93]	@ zero_extendqisi2
 17522 04b2 4FEA0C4C 		lsl	ip, ip, #16
 17523 04b6 4CEA096C 		orr	ip, ip, r9, lsl #24
 17524 04ba 4CEA0101 		orr	r1, ip, r1
 17525 04be 41EA0021 		orr	r1, r1, r0, lsl #8
 17526 04c2 6962     		str	r1, [r5, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 17527              		.loc 1 2122 0
 17528 04c4 9B00     		lsls	r3, r3, #2
 17529              	.LVL2245:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 17530              		.loc 1 2113 0
 17531 04c6 4FF00309 		mov	r9, #3
 17532 04ca 6CE6     		b	.L2150
 17533              	.LVL2246:
 17534              	.L2180:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 17535              		.loc 1 2111 0
 17536 04cc 4FF00109 		mov	r9, #1
 17537 04d0 50E6     		b	.L2148
 17538              	.L2228:
 17539 04d2 00BF     		.align	2
 17540              	.L2227:
 17541 04d4 46415400 		.word	5521734
 17542 04d8 55AAFFFF 		.word	-21931
 17543 04dc 52526141 		.word	1096897106
 17544 04e0 72724161 		.word	1631679090
 17545              	.LBE1589:
 17546              	.LBE1598:
 17547              		.cfi_endproc
 17548              	.LFE40:
 17550              		.section	.text.f_mkdir,"ax",%progbits
 17551              		.align	2
 17552              		.global	f_mkdir
 17553              		.thumb
 17554              		.thumb_func
 17556              	f_mkdir:
 17557              	.LFB41:
3261:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 17558              		.loc 1 3261 0
 17559              		.cfi_startproc
 17560              		@ args = 0, pretend = 0, frame = 80
 17561              		@ frame_needed = 0, uses_anonymous_args = 0
 17562              	.LVL2247:
 17563 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 17564              	.LCFI44:
 17565              		.cfi_def_cfa_offset 36
 17566              		.cfi_offset 4, -36
 17567              		.cfi_offset 5, -32
 17568              		.cfi_offset 6, -28
 17569              		.cfi_offset 7, -24
 17570              		.cfi_offset 8, -20
 17571              		.cfi_offset 9, -16
 17572              		.cfi_offset 10, -12
 17573              		.cfi_offset 11, -8
 17574              		.cfi_offset 14, -4
 17575 0004 0546     		mov	r5, r0
3265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD dsc, dcl, pcl, tim = get_fattime();
 17576              		.loc 1 3265 0
 17577 0006 A74B     		ldr	r3, .L2363
3261:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 17578              		.loc 1 3261 0
 17579 0008 95B0     		sub	sp, sp, #84
 17580              	.LCFI45:
 17581              		.cfi_def_cfa_offset 120
3265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD dsc, dcl, pcl, tim = get_fattime();
 17582              		.loc 1 3265 0
 17583 000a 9847     		blx	r3
 17584              	.LVL2248:
 17585              	.LBB1633:
 17586              	.LBB1634:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 17587              		.loc 1 2023 0
 17588 000c 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 17589 000e 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 17590              		.loc 1 2024 0
 17591 0010 092B     		cmp	r3, #9
 17592              	.LBE1634:
 17593              	.LBE1633:
3265:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	DWORD dsc, dcl, pcl, tim = get_fattime();
 17594              		.loc 1 3265 0
 17595 0012 0646     		mov	r6, r0
 17596              	.LVL2249:
 17597              	.LBB1659:
 17598              	.LBB1655:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 17599              		.loc 1 2024 0
 17600 0014 13D9     		bls	.L2350
 17601              	.LVL2250:
 17602              	.L2230:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 17603              		.loc 1 2037 0
 17604 0016 A44B     		ldr	r3, .L2363+4
 17605              	.LVL2251:
 17606 0018 1C68     		ldr	r4, [r3, #0]
 17607              	.LVL2252:
 17608 001a 0B94     		str	r4, [sp, #44]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 17609              		.loc 1 2038 0
 17610 001c 002C     		cmp	r4, #0
 17611 001e 22D0     		beq	.L2279
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 17612              		.loc 1 2042 0
 17613 0020 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 17614 0022 BBB1     		cbz	r3, .L2232
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 17615              		.loc 1 2043 0
 17616 0024 A14B     		ldr	r3, .L2363+8
 17617 0026 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 17618              	.LVL2253:
 17619 0028 9847     		blx	r3
 17620              	.LVL2254:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 17621              		.loc 1 2044 0
 17622 002a C307     		lsls	r3, r0, #31
 17623 002c 12D4     		bmi	.L2232
2045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check write protection if needed */
 17624              		.loc 1 2045 0
 17625 002e 00F00403 		and	r3, r0, #4
 17626 0032 DBB2     		uxtb	r3, r3
 17627 0034 002B     		cmp	r3, #0
 17628 0036 00F0DB80 		beq	.L2233
 17629              	.LVL2255:
 17630              	.L2234:
2046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_WRITE_PROTECTED;
 17631              		.loc 1 2046 0
 17632 003a 0A24     		movs	r4, #10
 17633              	.LVL2256:
 17634 003c 06E0     		b	.L2311
 17635              	.LVL2257:
 17636              	.L2350:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 17637              		.loc 1 2024 0
 17638 003e 6A78     		ldrb	r2, [r5, #1]	@ zero_extendqisi2
 17639 0040 3A2A     		cmp	r2, #58
 17640 0042 E8D1     		bne	.L2230
 17641              	.LVL2258:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 17642              		.loc 1 2036 0
 17643 0044 0B24     		movs	r4, #11
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 17644              		.loc 1 2035 0
 17645 0046 002B     		cmp	r3, #0
 17646 0048 00F03C82 		beq	.L2351
 17647              	.LVL2259:
 17648              	.L2311:
 17649              	.LBE1655:
 17650              	.LBE1659:
3322:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 17651              		.loc 1 3322 0
 17652 004c 2046     		mov	r0, r4
 17653 004e 15B0     		add	sp, sp, #84
 17654 0050 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 17655              	.LVL2260:
 17656              	.L2232:
 17657              	.LBB1660:
 17658              	.LBB1656:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 17659              		.loc 1 2054 0
 17660 0054 0020     		movs	r0, #0
 17661 0056 2070     		strb	r0, [r4, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 17662              		.loc 1 2055 0
 17663 0058 6070     		strb	r0, [r4, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 17664              		.loc 1 2056 0
 17665 005a 954B     		ldr	r3, .L2363+12
 17666 005c 9847     		blx	r3
 17667              	.LVL2261:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 17668              		.loc 1 2057 0
 17669 005e C107     		lsls	r1, r0, #31
 17670 0060 03D5     		bpl	.L2352
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 17671              		.loc 1 2058 0
 17672 0062 0324     		movs	r4, #3
 17673              	.LVL2262:
 17674 0064 F2E7     		b	.L2311
 17675              	.LVL2263:
 17676              	.L2279:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 17677              		.loc 1 2038 0
 17678 0066 0C24     		movs	r4, #12
 17679              	.LVL2264:
 17680 0068 F0E7     		b	.L2311
 17681              	.LVL2265:
 17682              	.L2352:
2059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 17683              		.loc 1 2059 0
 17684 006a 00F00402 		and	r2, r0, #4
 17685 006e D2B2     		uxtb	r2, r2
 17686 0070 002A     		cmp	r2, #0
 17687 0072 E2D1     		bne	.L2234
 17688              	.LVL2266:
 17689              	.LBB1635:
 17690              	.LBB1636:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 17691              		.loc 1 1987 0
 17692 0074 04F1300A 		add	sl, r4, #48
 17693 0078 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 17694              	.LVL2267:
 17695 007a DFF85092 		ldr	r9, .L2363+40
 17696 007e 5146     		mov	r1, sl
 17697 0080 0123     		movs	r3, #1
 17698 0082 C847     		blx	r9
 17699              	.LVL2268:
 17700 0084 0028     		cmp	r0, #0
 17701 0086 00F0DD80 		beq	.L2353
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 17702              		.loc 1 1988 0
 17703 008a 0323     		movs	r3, #3
 17704              	.L2235:
 17705              	.LBE1636:
 17706              	.LBE1635:
 17707              	.LBB1642:
 17708              	.LBB1643:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 17709              		.loc 1 2066 0
 17710 008c 0027     		movs	r7, #0
 17711              	.LVL2269:
 17712              	.L2268:
 17713              	.LBE1643:
 17714              	.LBE1642:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 17715              		.loc 1 2078 0
 17716 008e 032B     		cmp	r3, #3
 17717 0090 00F0E680 		beq	.L2288
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 17718              		.loc 1 2079 0
 17719 0094 13B1     		cbz	r3, .L2236
 17720              	.LVL2270:
 17721              	.L2239:
 17722 0096 0D24     		movs	r4, #13
 17723              	.LVL2271:
 17724 0098 D8E7     		b	.L2311
 17725              	.LVL2272:
 17726              	.L2284:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 17727              		.loc 1 2066 0
 17728 009a 0746     		mov	r7, r0
 17729              	.LVL2273:
 17730              	.L2236:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 17731              		.loc 1 2083 0
 17732 009c 94F83C20 		ldrb	r2, [r4, #60]	@ zero_extendqisi2
 17733 00a0 94F83B30 		ldrb	r3, [r4, #59]	@ zero_extendqisi2
 17734 00a4 43EA0223 		orr	r3, r3, r2, lsl #8
 17735 00a8 B3F5007F 		cmp	r3, #512
 17736 00ac F3D1     		bne	.L2239
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 17737              		.loc 1 2086 0
 17738 00ae 94F84720 		ldrb	r2, [r4, #71]	@ zero_extendqisi2
 17739 00b2 94F84630 		ldrb	r3, [r4, #70]	@ zero_extendqisi2
 17740              	.LVL2274:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 17741              		.loc 1 2087 0
 17742 00b6 53EA0222 		orrs	r2, r3, r2, lsl #8
 17743              	.LVL2275:
 17744 00ba 0DD1     		bne	.L2240
 17745 00bc 94F85610 		ldrb	r1, [r4, #86]	@ zero_extendqisi2
 17746 00c0 94F85700 		ldrb	r0, [r4, #87]	@ zero_extendqisi2
 17747 00c4 94F85430 		ldrb	r3, [r4, #84]	@ zero_extendqisi2
 17748 00c8 94F85520 		ldrb	r2, [r4, #85]	@ zero_extendqisi2
 17749              	.LVL2276:
 17750 00cc 0904     		lsls	r1, r1, #16
 17751 00ce 41EA0061 		orr	r1, r1, r0, lsl #24
 17752 00d2 0B43     		orrs	r3, r3, r1
 17753 00d4 43EA0222 		orr	r2, r3, r2, lsl #8
 17754              	.LVL2277:
 17755              	.L2240:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 17756              		.loc 1 2090 0
 17757 00d8 94F84000 		ldrb	r0, [r4, #64]	@ zero_extendqisi2
 17758              	.LVL2278:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 17759              		.loc 1 2088 0
 17760 00dc E261     		str	r2, [r4, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 17761              		.loc 1 2091 0
 17762 00de 431E     		subs	r3, r0, #1
 17763 00e0 012B     		cmp	r3, #1
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 17764              		.loc 1 2090 0
 17765 00e2 E070     		strb	r0, [r4, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 17766              		.loc 1 2091 0
 17767 00e4 D7D8     		bhi	.L2239
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 17768              		.loc 1 2094 0
 17769 00e6 94F83D30 		ldrb	r3, [r4, #61]	@ zero_extendqisi2
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 17770              		.loc 1 2092 0
 17771 00ea 00FB02F0 		mul	r0, r0, r2
 17772              	.LVL2279:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 17773              		.loc 1 2094 0
 17774 00ee A370     		strb	r3, [r4, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 17775              		.loc 1 2095 0
 17776 00f0 002B     		cmp	r3, #0
 17777 00f2 D0D0     		beq	.L2239
 17778 00f4 591E     		subs	r1, r3, #1
 17779 00f6 1942     		tst	r1, r3
 17780 00f8 CDD1     		bne	.L2239
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 17781              		.loc 1 2097 0
 17782 00fa 94F84110 		ldrb	r1, [r4, #65]	@ zero_extendqisi2
 17783 00fe 94F842C0 		ldrb	ip, [r4, #66]	@ zero_extendqisi2
 17784 0102 41EA0C2C 		orr	ip, r1, ip, lsl #8
 17785 0106 1FFA8CF1 		uxth	r1, ip
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 17786              		.loc 1 2098 0
 17787 010a 1CF00F0F 		tst	ip, #15
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 17788              		.loc 1 2097 0
 17789 010e 2181     		strh	r1, [r4, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 17790              		.loc 1 2098 0
 17791 0110 C1D1     		bne	.L2239
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 17792              		.loc 1 2100 0
 17793 0112 94F84480 		ldrb	r8, [r4, #68]	@ zero_extendqisi2
 17794 0116 94F843C0 		ldrb	ip, [r4, #67]	@ zero_extendqisi2
 17795              	.LVL2280:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 17796              		.loc 1 2101 0
 17797 011a 5CEA0828 		orrs	r8, ip, r8, lsl #8
 17798              	.LVL2281:
 17799 011e 17D1     		bne	.L2241
 17800 0120 94F850C0 		ldrb	ip, [r4, #80]	@ zero_extendqisi2
 17801 0124 94F85280 		ldrb	r8, [r4, #82]	@ zero_extendqisi2
 17802              	.LVL2282:
 17803 0128 94F853B0 		ldrb	fp, [r4, #83]	@ zero_extendqisi2
 17804 012c CDF808C0 		str	ip, [sp, #8]
 17805 0130 4FEA0848 		lsl	r8, r8, #16
 17806 0134 94F851C0 		ldrb	ip, [r4, #81]	@ zero_extendqisi2
 17807 0138 48EA0B68 		orr	r8, r8, fp, lsl #24
 17808 013c DDF808B0 		ldr	fp, [sp, #8]
 17809 0140 CDF804C0 		str	ip, [sp, #4]
 17810 0144 48EA0B0C 		orr	ip, r8, fp
 17811 0148 DDF804B0 		ldr	fp, [sp, #4]
 17812 014c 4CEA0B28 		orr	r8, ip, fp, lsl #8
 17813              	.LVL2283:
 17814              	.L2241:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 17815              		.loc 1 2103 0
 17816 0150 94F83FB0 		ldrb	fp, [r4, #63]	@ zero_extendqisi2
 17817 0154 94F83EC0 		ldrb	ip, [r4, #62]	@ zero_extendqisi2
 17818              	.LVL2284:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 17819              		.loc 1 2104 0
 17820 0158 5CEA0B2B 		orrs	fp, ip, fp, lsl #8
 17821              	.LVL2285:
 17822 015c 9BD0     		beq	.L2239
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 17823              		.loc 1 2107 0
 17824 015e 0BEB111C 		add	ip, fp, r1, lsr #4
 17825              	.LVL2286:
 17826 0162 8444     		add	ip, ip, r0
 17827              	.LVL2287:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 17828              		.loc 1 2108 0
 17829 0164 C445     		cmp	ip, r8
 17830 0166 96D8     		bhi	.L2239
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 17831              		.loc 1 2109 0
 17832 0168 CCEB0808 		rsb	r8, ip, r8
 17833              	.LVL2288:
 17834 016c B8FBF3F3 		udiv	r3, r8, r3
 17835              	.LVL2289:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 17836              		.loc 1 2110 0
 17837 0170 002B     		cmp	r3, #0
 17838 0172 90D0     		beq	.L2239
 17839              	.LVL2290:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 17840              		.loc 1 2112 0
 17841 0174 40F6F578 		movw	r8, #4085
 17842 0178 4345     		cmp	r3, r8
 17843 017a 40F29C82 		bls	.L2289
 17844              	.LVL2291:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 17845              		.loc 1 2113 0
 17846 017e 08F57048 		add	r8, r8, #61440
 17847 0182 4345     		cmp	r3, r8
 17848 0184 00F27782 		bhi	.L2243
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 17849              		.loc 1 2112 0
 17850 0188 4FF00208 		mov	r8, #2
 17851              	.LVL2292:
 17852              	.L2242:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 17853              		.loc 1 2116 0
 17854 018c 0233     		adds	r3, r3, #2
 17855              	.LVL2293:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 17856              		.loc 1 2117 0
 17857 018e BC44     		add	ip, ip, r7
 17858              	.LVL2294:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 17859              		.loc 1 2118 0
 17860 0190 BB44     		add	fp, r7, fp
 17861              	.LVL2295:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 17862              		.loc 1 2116 0
 17863 0192 A361     		str	r3, [r4, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 17864              		.loc 1 2117 0
 17865 0194 C4F828C0 		str	ip, [r4, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 17866              		.loc 1 2118 0
 17867 0198 C4F820B0 		str	fp, [r4, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 17868              		.loc 1 2124 0
 17869 019c 0029     		cmp	r1, #0
 17870 019e 3FF47AAF 		beq	.L2239
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 17871              		.loc 1 2125 0
 17872 01a2 5844     		add	r0, r0, fp
 17873              	.LVL2296:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 17874              		.loc 1 2127 0
 17875 01a4 B8F1020F 		cmp	r8, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 17876              		.loc 1 2125 0
 17877 01a8 6062     		str	r0, [r4, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 17878              		.loc 1 2127 0
 17879 01aa 00F06282 		beq	.L2354
 17880 01ae 03EB4301 		add	r1, r3, r3, lsl #1
 17881              	.LVL2297:
 17882 01b2 03F00103 		and	r3, r3, #1
 17883              	.LVL2298:
 17884 01b6 03EB5103 		add	r3, r3, r1, lsr #1
 17885 01ba 4FF00108 		mov	r8, #1
 17886              	.LVL2299:
 17887              	.L2244:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 17888              		.loc 1 2129 0
 17889 01be 03F2FF13 		addw	r3, r3, #511
 17890              	.LVL2300:
 17891 01c2 B2EB532F 		cmp	r2, r3, lsr #9
 17892 01c6 FFF466AF 		bcc	.L2239
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 17893              		.loc 1 2135 0
 17894 01ca 0023     		movs	r3, #0
 17895              	.LVL2301:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 17896              		.loc 1 2134 0
 17897 01cc 4FF0FF32 		mov	r2, #-1
 17898              	.LVL2302:
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 17899              		.loc 1 2138 0
 17900 01d0 B8F1030F 		cmp	r8, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 17901              		.loc 1 2134 0
 17902 01d4 2261     		str	r2, [r4, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 17903              		.loc 1 2135 0
 17904 01d6 E360     		str	r3, [r4, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 17905              		.loc 1 2138 0
 17906 01d8 00F0EB81 		beq	.L2355
 17907              	.LVL2303:
 17908              	.L2247:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 17909              		.loc 1 2151 0
 17910 01dc 3549     		ldr	r1, .L2363+16
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 17911              		.loc 1 2150 0
 17912 01de 84F80080 		strb	r8, [r4, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 17913              		.loc 1 2151 0
 17914 01e2 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 17915              		.loc 1 2152 0
 17916 01e4 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 17917              		.loc 1 2151 0
 17918 01e6 0132     		adds	r2, r2, #1
 17919 01e8 0A80     		strh	r2, [r1, #0]	@ movhi
 17920 01ea E280     		strh	r2, [r4, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 17921              		.loc 1 2152 0
 17922 01ec E362     		str	r3, [r4, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 17923              		.loc 1 2153 0
 17924 01ee 2371     		strb	r3, [r4, #4]
 17925              	.LVL2304:
 17926              	.L2233:
 17927              	.LBE1656:
 17928              	.LBE1660:
3271:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 17929              		.loc 1 3271 0
 17930 01f0 314B     		ldr	r3, .L2363+20
 17931 01f2 08AA     		add	r2, sp, #32
 17932 01f4 1293     		str	r3, [sp, #72]
3272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 17933              		.loc 1 3272 0
 17934 01f6 0BA8     		add	r0, sp, #44
 17935              	.LVL2305:
 17936 01f8 2946     		mov	r1, r5
 17937 01fa 304B     		ldr	r3, .L2363+24
3271:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 17938              		.loc 1 3271 0
 17939 01fc 1192     		str	r2, [sp, #68]
3272:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 17940              		.loc 1 3272 0
 17941 01fe 9847     		blx	r3
 17942              	.LVL2306:
3273:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 17943              		.loc 1 3273 0
 17944 0200 0446     		mov	r4, r0
 17945              	.LVL2307:
 17946 0202 08B9     		cbnz	r0, .L2356
 17947 0204 0824     		movs	r4, #8
 17948 0206 21E7     		b	.L2311
 17949              	.L2356:
3276:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
 17950              		.loc 1 3276 0
 17951 0208 042C     		cmp	r4, #4
 17952 020a 7FF41FAF 		bne	.L2311
3277:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
 17953              		.loc 1 3277 0
 17954 020e 0B98     		ldr	r0, [sp, #44]
 17955              	.LVL2308:
 17956 0210 2B4B     		ldr	r3, .L2363+28
 17957 0212 0021     		movs	r1, #0
 17958 0214 9847     		blx	r3
 17959              	.LVL2309:
3279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
 17960              		.loc 1 3279 0
 17961 0216 0190     		str	r0, [sp, #4]
 17962 0218 70B1     		cbz	r0, .L2290
3280:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 17963              		.loc 1 3280 0
 17964 021a 0128     		cmp	r0, #1
 17965 021c 0ED1     		bne	.L2357
 17966 021e 0224     		movs	r4, #2
 17967              	.LVL2310:
 17968              	.L2273:
 17969              	.LBB1661:
 17970              	.LBB1662:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 17971              		.loc 1 937 0
 17972 0220 0199     		ldr	r1, [sp, #4]
 17973              	.LBE1662:
 17974              	.LBE1661:
3308:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
 17975              		.loc 1 3308 0
 17976 0222 0B98     		ldr	r0, [sp, #44]
 17977              	.LVL2311:
 17978              	.LBB1664:
 17979              	.LBB1663:
 937:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 17980              		.loc 1 937 0
 17981 0224 0129     		cmp	r1, #1
 17982 0226 7FF611AF 		bls	.L2311
 17983 022a 8369     		ldr	r3, [r0, #24]
 17984 022c 9942     		cmp	r1, r3
 17985 022e BFF40DAF 		bcs	.L2311
 17986 0232 244B     		ldr	r3, .L2363+32
 17987 0234 9847     		blx	r3
 17988              	.LVL2312:
 17989 0236 09E7     		b	.L2311
 17990              	.LVL2313:
 17991              	.L2290:
 17992              	.LBE1663:
 17993              	.LBE1664:
3279:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
 17994              		.loc 1 3279 0
 17995 0238 0724     		movs	r4, #7
 17996 023a F1E7     		b	.L2273
 17997              	.L2357:
3281:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 17998              		.loc 1 3281 0
 17999 023c 0130     		adds	r0, r0, #1
 18000              	.LVL2314:
 18001 023e 11D1     		bne	.L2358
 18002              	.LVL2315:
 18003              	.L2253:
 732:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_DISK_ERR;
 18004              		.loc 1 732 0
 18005 0240 0124     		movs	r4, #1
 18006              	.LVL2316:
 18007 0242 EDE7     		b	.L2273
 18008              	.LVL2317:
 18009              	.L2353:
 18010              	.LBB1665:
 18011              	.LBB1657:
 18012              	.LBB1650:
 18013              	.LBB1639:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 18014              		.loc 1 1989 0
 18015 0244 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 18016 0248 94F82FB2 		ldrb	fp, [r4, #559]	@ zero_extendqisi2
 18017 024c 43EA0B2B 		orr	fp, r3, fp, lsl #8
 18018 0250 1D4B     		ldr	r3, .L2363+36
 18019 0252 0FFA8BFB 		sxth	fp, fp
 18020 0256 9B45     		cmp	fp, r3
 18021 0258 00F03681 		beq	.L2359
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 18022              		.loc 1 1990 0
 18023 025c 0223     		movs	r3, #2
 18024 025e 15E7     		b	.L2235
 18025              	.LVL2318:
 18026              	.L2288:
 18027              	.LBE1639:
 18028              	.LBE1650:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 18029              		.loc 1 2078 0
 18030 0260 0124     		movs	r4, #1
 18031              	.LVL2319:
 18032 0262 F3E6     		b	.L2311
 18033              	.LVL2320:
 18034              	.L2358:
 18035              	.LBE1657:
 18036              	.LBE1665:
3283:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = move_window(dj.fs, 0);
 18037              		.loc 1 3283 0
 18038 0264 0B9F     		ldr	r7, [sp, #44]
 18039              	.LVL2321:
 18040              	.LBB1666:
 18041              	.LBB1667:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 18042              		.loc 1 727 0
 18043 0266 FC6A     		ldr	r4, [r7, #44]
 18044              	.LVL2322:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 18045              		.loc 1 728 0
 18046 0268 1CB1     		cbz	r4, .L2252
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 18047              		.loc 1 730 0
 18048 026a 3B79     		ldrb	r3, [r7, #4]	@ zero_extendqisi2
 18049 026c 002B     		cmp	r3, #0
 18050 026e 40F00681 		bne	.L2360
 18051              	.LVL2323:
 18052              	.L2252:
 18053              	.LBE1667:
 18054              	.LBE1666:
 18055              	.LBB1670:
 18056              	.LBB1671:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 18057              		.loc 1 807 0
 18058 0272 BA69     		ldr	r2, [r7, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 18059              		.loc 1 806 0
 18060 0274 0198     		ldr	r0, [sp, #4]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 18061              		.loc 1 807 0
 18062 0276 023A     		subs	r2, r2, #2
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 18063              		.loc 1 806 0
 18064 0278 831E     		subs	r3, r0, #2
 18065              	.LVL2324:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 18066              		.loc 1 807 0
 18067 027a 9342     		cmp	r3, r2
 18068 027c C0F0F280 		bcc	.L2361
 18069 0280 0024     		movs	r4, #0
 18070              	.LVL2325:
 18071              	.L2274:
 18072              	.LBE1671:
 18073              	.LBE1670:
3286:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir = dj.fs->win;
 18074              		.loc 1 3286 0
 18075 0282 07F13009 		add	r9, r7, #48
 18076              	.LVL2326:
 547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *d = (BYTE*)dst;
 18077              		.loc 1 547 0
 18078 0286 4A46     		mov	r2, r9
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18079              		.loc 1 549 0
 18080 0288 40F2FF13 		movw	r3, #511
 18081              	.LVL2327:
 18082 028c 00E0     		b	.L2258
 18083              	.LVL2328:
 18084              	.L2293:
 18085              	.LBB1673:
 18086              	.LBB1674:
 18087 028e 0346     		mov	r3, r0
 18088              	.LVL2329:
 18089              	.L2258:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 18090              		.loc 1 550 0
 18091 0290 0021     		movs	r1, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18092              		.loc 1 549 0
 18093 0292 581E     		subs	r0, r3, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 18094              		.loc 1 550 0
 18095 0294 02F8011B 		strb	r1, [r2], #1
 18096              	.LVL2330:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18097              		.loc 1 549 0
 18098 0298 002B     		cmp	r3, #0
 18099 029a F8D1     		bne	.L2293
 18100 029c 4A46     		mov	r2, r9
 18101              	.LVL2331:
 18102 029e 0A23     		movs	r3, #10
 18103 02a0 17E0     		b	.L2259
 18104              	.L2364:
 18105 02a2 00BF     		.align	2
 18106              	.L2363:
 18107 02a4 00000000 		.word	get_fattime
 18108 02a8 00000000 		.word	.LANCHOR2
 18109 02ac 00000000 		.word	disk_status
 18110 02b0 00000000 		.word	disk_initialize
 18111 02b4 00000000 		.word	.LANCHOR3
 18112 02b8 00000000 		.word	.LANCHOR4
 18113 02bc 00000000 		.word	follow_path
 18114 02c0 00000000 		.word	create_chain
 18115 02c4 00000000 		.word	remove_chain.part.7
 18116 02c8 55AAFFFF 		.word	-21931
 18117 02cc 00000000 		.word	disk_read
 18118              	.LVL2332:
 18119              	.L2294:
 18120              	.LBE1674:
 18121              	.LBE1673:
 18122              	.LBB1675:
 18123              	.LBB1676:
 18124 02d0 0346     		mov	r3, r0
 18125              	.LVL2333:
 18126              	.L2259:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 18127              		.loc 1 550 0
 18128 02d2 2021     		movs	r1, #32
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18129              		.loc 1 549 0
 18130 02d4 581E     		subs	r0, r3, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 18131              		.loc 1 550 0
 18132 02d6 02F8011B 		strb	r1, [r2], #1
 18133              	.LVL2334:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18134              		.loc 1 549 0
 18135 02da 002B     		cmp	r3, #0
 18136 02dc F8D1     		bne	.L2294
 18137              	.LBE1676:
 18138              	.LBE1675:
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
 18139              		.loc 1 3292 0
 18140 02de 0198     		ldr	r0, [sp, #4]
 18141              	.LVL2335:
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 18142              		.loc 1 3291 0
 18143 02e0 0296     		str	r6, [sp, #8]
 18144 02e2 C6F3074B 		ubfx	fp, r6, #16, #8
 18145 02e6 4FEA166C 		lsr	ip, r6, #24
 18146 02ea CDF810B0 		str	fp, [sp, #16]
 18147 02ee CDF814C0 		str	ip, [sp, #20]
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
 18148              		.loc 1 3292 0
 18149 02f2 030C     		lsrs	r3, r0, #16
 18150              	.LVL2336:
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 18151              		.loc 1 3291 0
 18152 02f4 DDF810C0 		ldr	ip, [sp, #16]
 18153 02f8 DDF814B0 		ldr	fp, [sp, #20]
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
 18154              		.loc 1 3292 0
 18155 02fc 0393     		str	r3, [sp, #12]
 18156 02fe 0690     		str	r0, [sp, #24]
 18157 0300 C0F30722 		ubfx	r2, r0, #8, #8
 18158              	.LVL2337:
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 18159              		.loc 1 3291 0
 18160 0304 87F848C0 		strb	ip, [r7, #72]
3289:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Name] = '.';
 18161              		.loc 1 3289 0
 18162 0308 2E20     		movs	r0, #46
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 18163              		.loc 1 3291 0
 18164 030a 87F849B0 		strb	fp, [r7, #73]
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
 18165              		.loc 1 3292 0
 18166 030e DDF818C0 		ldr	ip, [sp, #24]
 18167 0312 DDF80CB0 		ldr	fp, [sp, #12]
3289:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Name] = '.';
 18168              		.loc 1 3289 0
 18169 0316 87F83000 		strb	r0, [r7, #48]
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 18170              		.loc 1 3291 0
 18171 031a C6F30721 		ubfx	r1, r6, #8, #8
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
 18172              		.loc 1 3292 0
 18173 031e 1B0A     		lsrs	r3, r3, #8
3290:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 18174              		.loc 1 3290 0
 18175 0320 1020     		movs	r0, #16
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 18176              		.loc 1 3291 0
 18177 0322 8DF81D10 		strb	r1, [sp, #29]
 18178 0326 87F84710 		strb	r1, [r7, #71]
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
 18179              		.loc 1 3292 0
 18180 032a 8DF81E20 		strb	r2, [sp, #30]
 18181 032e 87F84B20 		strb	r2, [r7, #75]
 18182 0332 8DF81F30 		strb	r3, [sp, #31]
 18183 0336 87F84530 		strb	r3, [r7, #69]
3290:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 18184              		.loc 1 3290 0
 18185 033a 87F83B00 		strb	r0, [r7, #59]
3291:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);
 18186              		.loc 1 3291 0
 18187 033e 87F84660 		strb	r6, [r7, #70]
3292:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);
 18188              		.loc 1 3292 0
 18189 0342 87F84AC0 		strb	ip, [r7, #74]
 18190 0346 87F844B0 		strb	fp, [r7, #68]
3293:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_cpy(dir+SZ_DIR, dir, SZ_DIR); 	/* Create ".." entry */
 18191              		.loc 1 3293 0
 18192 034a 07F15001 		add	r1, r7, #80
 18193              	.LVL2338:
 531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *s = (const BYTE*)src;
 18194              		.loc 1 531 0
 18195 034e 4A46     		mov	r2, r9
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18196              		.loc 1 540 0
 18197 0350 1F23     		movs	r3, #31
 18198 0352 00E0     		b	.L2260
 18199              	.LVL2339:
 18200              	.L2295:
 18201              	.LBB1677:
 18202              	.LBB1678:
 18203 0354 2B46     		mov	r3, r5
 18204              	.LVL2340:
 18205              	.L2260:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 18206              		.loc 1 541 0
 18207 0356 12F8010B 		ldrb	r0, [r2], #1	@ zero_extendqisi2
 18208              	.LVL2341:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18209              		.loc 1 540 0
 18210 035a 5D1E     		subs	r5, r3, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 18211              		.loc 1 541 0
 18212 035c 01F8010B 		strb	r0, [r1], #1
 18213              	.LVL2342:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18214              		.loc 1 540 0
 18215 0360 002B     		cmp	r3, #0
 18216 0362 F7D1     		bne	.L2295
 18217              	.LBE1678:
 18218              	.LBE1677:
3294:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[33] = '.'; pcl = dj.sclust;
 18219              		.loc 1 3294 0
 18220 0364 2E22     		movs	r2, #46
 18221              	.LVL2343:
3295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 18222              		.loc 1 3295 0
 18223 0366 0B9D     		ldr	r5, [sp, #44]
 18224              	.LVL2344:
3294:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[33] = '.'; pcl = dj.sclust;
 18225              		.loc 1 3294 0
 18226 0368 87F85120 		strb	r2, [r7, #81]
3295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 18227              		.loc 1 3295 0
 18228 036c 2978     		ldrb	r1, [r5, #0]	@ zero_extendqisi2
 18229              	.LVL2345:
3294:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[33] = '.'; pcl = dj.sclust;
 18230              		.loc 1 3294 0
 18231 036e 0D9A     		ldr	r2, [sp, #52]
 18232              	.LVL2346:
3295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 18233              		.loc 1 3295 0
 18234 0370 0329     		cmp	r1, #3
 18235 0372 7CD0     		beq	.L2261
 18236              	.L2347:
 18237 0374 110C     		lsrs	r1, r2, #16
 18238 0376 C2F30720 		ubfx	r0, r2, #8, #8
 18239 037a 0B0A     		lsrs	r3, r1, #8
 18240              	.LVL2347:
 18241              	.L2262:
3297:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir+SZ_DIR, pcl);
 18242              		.loc 1 3297 0
 18243 037c 87F86A20 		strb	r2, [r7, #106]
 18244 0380 87F86B00 		strb	r0, [r7, #107]
 18245 0384 87F86410 		strb	r1, [r7, #100]
 18246 0388 87F86530 		strb	r3, [r7, #101]
3298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
 18247              		.loc 1 3298 0
 18248 038c 95F80280 		ldrb	r8, [r5, #2]	@ zero_extendqisi2
 18249              	.LVL2348:
 18250 0390 B8F1000F 		cmp	r8, #0
 18251 0394 41D0     		beq	.L2263
 18252              	.LVL2349:
 18253              	.L2339:
3300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->wflag = 1;
 18254              		.loc 1 3300 0
 18255 0396 0123     		movs	r3, #1
3299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->winsect = dsc++;
 18256              		.loc 1 3299 0
 18257 0398 EC62     		str	r4, [r5, #44]
 18258 039a E618     		adds	r6, r4, r3
 18259              	.LVL2350:
3300:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->wflag = 1;
 18260              		.loc 1 3300 0
 18261 039c 2B71     		strb	r3, [r5, #4]
 18262              	.LVL2351:
 18263              	.LBB1679:
 18264              	.LBB1680:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 18265              		.loc 1 728 0
 18266 039e 4CB3     		cbz	r4, .L2264
 18267              	.LVL2352:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 18268              		.loc 1 731 0
 18269 03a0 05F13007 		add	r7, r5, #48
 18270 03a4 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 18271 03a6 DFF830A3 		ldr	sl, .L2365+24
 18272 03aa 3946     		mov	r1, r7
 18273 03ac 2246     		mov	r2, r4
 18274 03ae D047     		blx	sl
 18275              	.LVL2353:
 18276 03b0 0028     		cmp	r0, #0
 18277 03b2 7FF445AF 		bne	.L2253
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 18278              		.loc 1 734 0
 18279 03b6 EB69     		ldr	r3, [r5, #28]
 18280 03b8 2A6A     		ldr	r2, [r5, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 18281              		.loc 1 733 0
 18282 03ba 2871     		strb	r0, [r5, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 18283              		.loc 1 734 0
 18284 03bc 9A18     		adds	r2, r3, r2
 18285 03be A242     		cmp	r2, r4
 18286 03c0 18D9     		bls	.L2264
 18287              	.LBB1681:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18288              		.loc 1 736 0
 18289 03c2 95F803B0 		ldrb	fp, [r5, #3]	@ zero_extendqisi2
 18290              	.LVL2354:
 18291 03c6 BBF1010F 		cmp	fp, #1
 18292 03ca 13D9     		bls	.L2264
 18293 03cc 5246     		mov	r2, sl
 18294 03ce AA46     		mov	sl, r5
 18295 03d0 1546     		mov	r5, r2
 18296              	.LVL2355:
 18297 03d2 01E0     		b	.L2338
 18298              	.LVL2356:
 18299              	.L2362:
 18300 03d4 DAF81C30 		ldr	r3, [sl, #28]
 18301              	.LVL2357:
 18302              	.L2338:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 18303              		.loc 1 737 0
 18304 03d8 E418     		adds	r4, r4, r3
 18305              	.LVL2358:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18306              		.loc 1 736 0
 18307 03da 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 18308              		.loc 1 738 0
 18309 03de 0123     		movs	r3, #1
 18310 03e0 9AF80100 		ldrb	r0, [sl, #1]	@ zero_extendqisi2
 18311 03e4 3946     		mov	r1, r7
 18312 03e6 2246     		mov	r2, r4
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18313              		.loc 1 736 0
 18314 03e8 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 18315              		.loc 1 738 0
 18316 03ec A847     		blx	r5
 18317              	.LVL2359:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18318              		.loc 1 736 0
 18319 03ee BBF1010F 		cmp	fp, #1
 18320 03f2 EFD8     		bhi	.L2362
 18321              	.LVL2360:
 18322              	.L2264:
 18323              	.LBE1681:
 18324              	.LBE1680:
 18325              	.LBE1679:
 18326              	.LBB1682:
 18327              	.LBB1683:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18328              		.loc 1 549 0
 18329 03f4 4A46     		mov	r2, r9
 18330 03f6 40F2FF13 		movw	r3, #511
 18331 03fa 00E0     		b	.L2266
 18332              	.LVL2361:
 18333              	.L2297:
 18334 03fc 0346     		mov	r3, r0
 18335              	.LVL2362:
 18336              	.L2266:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 18337              		.loc 1 550 0
 18338 03fe 0021     		movs	r1, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18339              		.loc 1 549 0
 18340 0400 581E     		subs	r0, r3, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 18341              		.loc 1 550 0
 18342 0402 02F8011B 		strb	r1, [r2], #1
 18343              	.LVL2363:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 18344              		.loc 1 549 0
 18345 0406 002B     		cmp	r3, #0
 18346 0408 F8D1     		bne	.L2297
 18347              	.LBE1683:
 18348              	.LBE1682:
3298:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
 18349              		.loc 1 3298 0
 18350 040a 08F1FF38 		add	r8, r8, #-1
 18351              	.LVL2364:
 18352 040e 18F0FF08 		ands	r8, r8, #255
 18353              	.LVL2365:
 18354 0412 02D0     		beq	.L2263
 18355 0414 0B9D     		ldr	r5, [sp, #44]
3299:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					dj.fs->winsect = dsc++;
 18356              		.loc 1 3299 0
 18357 0416 3446     		mov	r4, r6
 18358              	.LVL2366:
 18359 0418 BDE7     		b	.L2339
 18360              	.LVL2367:
 18361              	.L2263:
3306:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
 18362              		.loc 1 3306 0
 18363 041a 0BA8     		add	r0, sp, #44
 18364              	.LVL2368:
 18365 041c A84B     		ldr	r3, .L2365
 18366 041e 9847     		blx	r3
 18367              	.LVL2369:
3307:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (res != FR_OK) {
 18368              		.loc 1 3307 0
 18369 0420 0446     		mov	r4, r0
 18370 0422 0028     		cmp	r0, #0
 18371 0424 7FF4FCAE 		bne	.L2273
3310:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir = dj.dir;
 18372              		.loc 1 3310 0
 18373 0428 109B     		ldr	r3, [sp, #64]
 18374              	.LVL2370:
3312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);		/* Created time */
 18375              		.loc 1 3312 0
 18376 042a 0298     		ldr	r0, [sp, #8]
 18377              	.LVL2371:
3314:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
 18378              		.loc 1 3314 0
 18379 042c 0B9A     		ldr	r2, [sp, #44]
3312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);		/* Created time */
 18380              		.loc 1 3312 0
 18381 042e 9875     		strb	r0, [r3, #22]
3311:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
 18382              		.loc 1 3311 0
 18383 0430 1021     		movs	r1, #16
 18384 0432 D972     		strb	r1, [r3, #11]
3312:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tim);		/* Created time */
 18385              		.loc 1 3312 0
 18386 0434 9DF81D10 		ldrb	r1, [sp, #29]	@ zero_extendqisi2
 18387 0438 0498     		ldr	r0, [sp, #16]
 18388 043a D975     		strb	r1, [r3, #23]
 18389 043c 0599     		ldr	r1, [sp, #20]
 18390 043e 1876     		strb	r0, [r3, #24]
 18391 0440 5976     		strb	r1, [r3, #25]
3313:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_CLUST(dir, dcl);					/* Table start cluster */
 18392              		.loc 1 3313 0
 18393 0442 0698     		ldr	r0, [sp, #24]
 18394 0444 9DF81E10 		ldrb	r1, [sp, #30]	@ zero_extendqisi2
 18395 0448 9876     		strb	r0, [r3, #26]
 18396 044a D976     		strb	r1, [r3, #27]
 18397 044c 0398     		ldr	r0, [sp, #12]
 18398 044e 9DF81F10 		ldrb	r1, [sp, #31]	@ zero_extendqisi2
 18399 0452 1875     		strb	r0, [r3, #20]
 18400 0454 5975     		strb	r1, [r3, #21]
3314:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
 18401              		.loc 1 3314 0
 18402 0456 0123     		movs	r3, #1
 18403              	.LVL2372:
 18404 0458 1371     		strb	r3, [r2, #4]
3315:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(dj.fs);
 18405              		.loc 1 3315 0
 18406 045a 1046     		mov	r0, r2
 18407 045c 994B     		ldr	r3, .L2365+4
 18408 045e 9847     		blx	r3
 18409              	.LVL2373:
 18410 0460 0446     		mov	r4, r0
 18411              	.LVL2374:
 18412 0462 F3E5     		b	.L2311
 18413              	.LVL2375:
 18414              	.L2361:
 18415              	.LBB1684:
 18416              	.LBB1672:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 18417              		.loc 1 808 0
 18418 0464 BC78     		ldrb	r4, [r7, #2]	@ zero_extendqisi2
 18419              	.LVL2376:
 18420 0466 BA6A     		ldr	r2, [r7, #40]
 18421 0468 04FB0324 		mla	r4, r4, r3, r2
 18422 046c 09E7     		b	.L2274
 18423              	.LVL2377:
 18424              	.L2261:
 18425              	.LBE1672:
 18426              	.LBE1684:
3295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 18427              		.loc 1 3295 0 discriminator 1
 18428 046e 696A     		ldr	r1, [r5, #36]
 18429 0470 9142     		cmp	r1, r2
 18430 0472 7FF47FAF 		bne	.L2347
3295:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 18431              		.loc 1 3295 0 is_stmt 0
 18432 0476 1946     		mov	r1, r3
 18433 0478 1846     		mov	r0, r3
 18434 047a 1A46     		mov	r2, r3
 18435              	.LVL2378:
 18436 047c 7EE7     		b	.L2262
 18437              	.LVL2379:
 18438              	.L2360:
 18439              	.LBB1685:
 18440              	.LBB1669:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 18441              		.loc 1 731 0 is_stmt 1
 18442 047e 07F13008 		add	r8, r7, #48
 18443 0482 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 18444 0484 DFF85092 		ldr	r9, .L2365+24
 18445 0488 4146     		mov	r1, r8
 18446 048a 2246     		mov	r2, r4
 18447 048c 0123     		movs	r3, #1
 18448 048e C847     		blx	r9
 18449              	.LVL2380:
 18450 0490 0028     		cmp	r0, #0
 18451 0492 7FF4D5AE 		bne	.L2253
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 18452              		.loc 1 734 0
 18453 0496 FB69     		ldr	r3, [r7, #28]
 18454 0498 3A6A     		ldr	r2, [r7, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 18455              		.loc 1 733 0
 18456 049a 3871     		strb	r0, [r7, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 18457              		.loc 1 734 0
 18458 049c 9A18     		adds	r2, r3, r2
 18459 049e 9442     		cmp	r4, r2
 18460 04a0 0ED2     		bcs	.L2349
 18461              	.LBB1668:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18462              		.loc 1 736 0
 18463 04a2 FD78     		ldrb	r5, [r7, #3]	@ zero_extendqisi2
 18464              	.LVL2381:
 18465 04a4 012D     		cmp	r5, #1
 18466 04a6 01D8     		bhi	.L2337
 18467 04a8 0AE0     		b	.L2349
 18468              	.LVL2382:
 18469              	.L2257:
 18470 04aa FB69     		ldr	r3, [r7, #28]
 18471              	.LVL2383:
 18472              	.L2337:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 18473              		.loc 1 737 0
 18474 04ac E418     		adds	r4, r4, r3
 18475              	.LVL2384:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18476              		.loc 1 736 0
 18477 04ae 013D     		subs	r5, r5, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 18478              		.loc 1 738 0
 18479 04b0 0123     		movs	r3, #1
 18480 04b2 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 18481 04b4 4146     		mov	r1, r8
 18482 04b6 2246     		mov	r2, r4
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18483              		.loc 1 736 0
 18484 04b8 EDB2     		uxtb	r5, r5
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 18485              		.loc 1 738 0
 18486 04ba C847     		blx	r9
 18487              	.LVL2385:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 18488              		.loc 1 736 0
 18489 04bc 012D     		cmp	r5, #1
 18490 04be F4D8     		bhi	.L2257
 18491              	.LVL2386:
 18492              	.L2349:
 18493 04c0 0B9F     		ldr	r7, [sp, #44]
 18494              	.LVL2387:
 18495 04c2 D6E6     		b	.L2252
 18496              	.LVL2388:
 18497              	.L2351:
 18498              	.LBE1668:
 18499              	.LBE1669:
 18500              	.LBE1685:
 18501              	.LBB1686:
 18502              	.LBB1658:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 18503              		.loc 1 2025 0
 18504 04c4 0235     		adds	r5, r5, #2
 18505              	.LVL2389:
 18506 04c6 A6E5     		b	.L2230
 18507              	.LVL2390:
 18508              	.L2359:
 18509              	.LBB1651:
 18510              	.LBB1640:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 18511              		.loc 1 1992 0
 18512 04c8 94F86810 		ldrb	r1, [r4, #104]	@ zero_extendqisi2
 18513 04cc 94F86970 		ldrb	r7, [r4, #105]	@ zero_extendqisi2
 18514 04d0 94F86630 		ldrb	r3, [r4, #102]	@ zero_extendqisi2
 18515 04d4 94F86720 		ldrb	r2, [r4, #103]	@ zero_extendqisi2
 18516 04d8 DFF8EC81 		ldr	r8, .L2365+8
 18517 04dc 0904     		lsls	r1, r1, #16
 18518 04de 41EA0761 		orr	r1, r1, r7, lsl #24
 18519 04e2 0B43     		orrs	r3, r3, r1
 18520 04e4 43EA0223 		orr	r3, r3, r2, lsl #8
 18521 04e8 23F07F43 		bic	r3, r3, #-16777216
 18522 04ec 4345     		cmp	r3, r8
 18523 04ee 00F0E580 		beq	.L2283
 18524              	.LVL2391:
 18525              	.LBB1637:
 18526              	.LBB1638:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 18527              		.loc 1 1994 0
 18528 04f2 94F88410 		ldrb	r1, [r4, #132]	@ zero_extendqisi2
 18529 04f6 94F88570 		ldrb	r7, [r4, #133]	@ zero_extendqisi2
 18530 04fa 94F88230 		ldrb	r3, [r4, #130]	@ zero_extendqisi2
 18531 04fe 94F88320 		ldrb	r2, [r4, #131]	@ zero_extendqisi2
 18532 0502 0904     		lsls	r1, r1, #16
 18533 0504 41EA0761 		orr	r1, r1, r7, lsl #24
 18534 0508 0B43     		orrs	r3, r3, r1
 18535 050a 43EA0223 		orr	r3, r3, r2, lsl #8
 18536 050e 23F07F43 		bic	r3, r3, #-16777216
 18537              	.LBE1638:
 18538              	.LBE1637:
 18539              	.LBE1640:
 18540              	.LBE1651:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 18541              		.loc 1 2068 0
 18542 0512 4345     		cmp	r3, r8
 18543 0514 3FF4C1AD 		beq	.L2284
 18544              	.LVL2392:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 18545              		.loc 1 2073 0
 18546 0518 94F8F231 		ldrb	r3, [r4, #498]	@ zero_extendqisi2
 18547 051c 002B     		cmp	r3, #0
 18548 051e 3FF4BAAD 		beq	.L2239
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 18549              		.loc 1 2074 0
 18550 0522 94F8F821 		ldrb	r2, [r4, #504]	@ zero_extendqisi2
 18551 0526 94F8F911 		ldrb	r1, [r4, #505]	@ zero_extendqisi2
 18552 052a 94F8F631 		ldrb	r3, [r4, #502]	@ zero_extendqisi2
 18553 052e 94F8F771 		ldrb	r7, [r4, #503]	@ zero_extendqisi2
 18554              	.LBB1652:
 18555              	.LBB1648:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 18556              		.loc 1 1987 0
 18557 0532 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 18558              	.LBE1648:
 18559              	.LBE1652:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 18560              		.loc 1 2074 0
 18561 0534 1204     		lsls	r2, r2, #16
 18562 0536 42EA0162 		orr	r2, r2, r1, lsl #24
 18563 053a 1343     		orrs	r3, r3, r2
 18564 053c 43EA0727 		orr	r7, r3, r7, lsl #8
 18565              	.LVL2393:
 18566              	.LBB1653:
 18567              	.LBB1649:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 18568              		.loc 1 1987 0
 18569 0540 5146     		mov	r1, sl
 18570 0542 3A46     		mov	r2, r7
 18571 0544 0123     		movs	r3, #1
 18572 0546 C847     		blx	r9
 18573              	.LVL2394:
 18574 0548 0028     		cmp	r0, #0
 18575 054a 7FF489AE 		bne	.L2288
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 18576              		.loc 1 1989 0
 18577 054e 94F82F22 		ldrb	r2, [r4, #559]	@ zero_extendqisi2
 18578 0552 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 18579 0556 43EA0223 		orr	r3, r3, r2, lsl #8
 18580 055a 1BB2     		sxth	r3, r3
 18581 055c 5B45     		cmp	r3, fp
 18582 055e 7FF49AAD 		bne	.L2239
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 18583              		.loc 1 1992 0
 18584 0562 94F86810 		ldrb	r1, [r4, #104]	@ zero_extendqisi2
 18585 0566 94F86900 		ldrb	r0, [r4, #105]	@ zero_extendqisi2
 18586 056a 94F86630 		ldrb	r3, [r4, #102]	@ zero_extendqisi2
 18587 056e 94F86720 		ldrb	r2, [r4, #103]	@ zero_extendqisi2
 18588 0572 0904     		lsls	r1, r1, #16
 18589 0574 41EA0061 		orr	r1, r1, r0, lsl #24
 18590 0578 0B43     		orrs	r3, r3, r1
 18591 057a 43EA0223 		orr	r3, r3, r2, lsl #8
 18592 057e 23F07F43 		bic	r3, r3, #-16777216
 18593 0582 4345     		cmp	r3, r8
 18594 0584 3FF48AAD 		beq	.L2236
 18595              	.LVL2395:
 18596              	.LBB1644:
 18597              	.LBB1645:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 18598              		.loc 1 1994 0
 18599 0588 94F88410 		ldrb	r1, [r4, #132]	@ zero_extendqisi2
 18600 058c 94F88500 		ldrb	r0, [r4, #133]	@ zero_extendqisi2
 18601 0590 94F88230 		ldrb	r3, [r4, #130]	@ zero_extendqisi2
 18602 0594 94F88320 		ldrb	r2, [r4, #131]	@ zero_extendqisi2
 18603 0598 0904     		lsls	r1, r1, #16
 18604 059a 41EA0061 		orr	r1, r1, r0, lsl #24
 18605 059e 0B43     		orrs	r3, r3, r1
 18606 05a0 43EA0222 		orr	r2, r3, r2, lsl #8
 18607              	.LBE1645:
 18608              	.LBE1644:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 18609              		.loc 1 1995 0
 18610 05a4 484B     		ldr	r3, .L2365+8
 18611              	.LBB1647:
 18612              	.LBB1646:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 18613              		.loc 1 1994 0
 18614 05a6 22F07F42 		bic	r2, r2, #-16777216
 18615              	.LBE1646:
 18616              	.LBE1647:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 18617              		.loc 1 1995 0
 18618 05aa D31A     		subs	r3, r2, r3
 18619 05ac 18BF     		it	ne
 18620 05ae 0123     		movne	r3, #1
 18621 05b0 6DE5     		b	.L2268
 18622              	.LVL2396:
 18623              	.L2355:
 18624              	.LBE1649:
 18625              	.LBE1653:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 18626              		.loc 1 2140 0
 18627 05b2 94F86110 		ldrb	r1, [r4, #97]	@ zero_extendqisi2
 18628 05b6 94F86020 		ldrb	r2, [r4, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 18629              		.loc 1 2139 0
 18630 05ba 6371     		strb	r3, [r4, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 18631              		.loc 1 2140 0
 18632 05bc 42EA0122 		orr	r2, r2, r1, lsl #8
 18633 05c0 BA18     		adds	r2, r7, r2
 18634 05c2 6261     		str	r2, [r4, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 18635              		.loc 1 2141 0
 18636 05c4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 18637 05c6 5146     		mov	r1, sl
 18638 05c8 0123     		movs	r3, #1
 18639 05ca C847     		blx	r9
 18640              	.LVL2397:
 18641 05cc 0028     		cmp	r0, #0
 18642 05ce 7FF405AE 		bne	.L2247
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 18643              		.loc 1 2142 0
 18644 05d2 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 18645 05d6 94F82F22 		ldrb	r2, [r4, #559]	@ zero_extendqisi2
 18646 05da 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 18647              		.loc 1 2141 0
 18648 05de 3B4B     		ldr	r3, .L2365+12
 18649 05e0 12B2     		sxth	r2, r2
 18650 05e2 9A42     		cmp	r2, r3
 18651 05e4 7FF4FAAD 		bne	.L2247
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 18652              		.loc 1 2143 0
 18653 05e8 94F83210 		ldrb	r1, [r4, #50]	@ zero_extendqisi2
 18654 05ec 94F83300 		ldrb	r0, [r4, #51]	@ zero_extendqisi2
 18655 05f0 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 18656 05f4 94F83120 		ldrb	r2, [r4, #49]	@ zero_extendqisi2
 18657 05f8 0904     		lsls	r1, r1, #16
 18658 05fa 41EA0061 		orr	r1, r1, r0, lsl #24
 18659 05fe 0B43     		orrs	r3, r3, r1
 18660 0600 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 18661              		.loc 1 2142 0
 18662 0604 324B     		ldr	r3, .L2365+16
 18663 0606 9A42     		cmp	r2, r3
 18664 0608 7FF4E8AD 		bne	.L2247
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 18665              		.loc 1 2144 0
 18666 060c 94F81612 		ldrb	r1, [r4, #534]	@ zero_extendqisi2
 18667 0610 94F81702 		ldrb	r0, [r4, #535]	@ zero_extendqisi2
 18668 0614 94F81432 		ldrb	r3, [r4, #532]	@ zero_extendqisi2
 18669 0618 94F81522 		ldrb	r2, [r4, #533]	@ zero_extendqisi2
 18670 061c 0904     		lsls	r1, r1, #16
 18671 061e 41EA0061 		orr	r1, r1, r0, lsl #24
 18672 0622 0B43     		orrs	r3, r3, r1
 18673 0624 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 18674              		.loc 1 2143 0
 18675 0628 2A4B     		ldr	r3, .L2365+20
 18676 062a 9A42     		cmp	r2, r3
 18677 062c 7FF4D6AD 		bne	.L2247
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18678              		.loc 1 2145 0
 18679 0630 94F81EE2 		ldrb	lr, [r4, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18680              		.loc 1 2146 0
 18681 0634 94F81A72 		ldrb	r7, [r4, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18682              		.loc 1 2145 0
 18683 0638 94F81F92 		ldrb	r9, [r4, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18684              		.loc 1 2146 0
 18685 063c 94F81BC2 		ldrb	ip, [r4, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18686              		.loc 1 2145 0
 18687 0640 94F81C22 		ldrb	r2, [r4, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18688              		.loc 1 2146 0
 18689 0644 94F81832 		ldrb	r3, [r4, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18690              		.loc 1 2145 0
 18691 0648 94F81D02 		ldrb	r0, [r4, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18692              		.loc 1 2146 0
 18693 064c 94F81912 		ldrb	r1, [r4, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18694              		.loc 1 2145 0
 18695 0650 4FEA0E4E 		lsl	lr, lr, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18696              		.loc 1 2146 0
 18697 0654 3F04     		lsls	r7, r7, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18698              		.loc 1 2145 0
 18699 0656 4EEA096E 		orr	lr, lr, r9, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18700              		.loc 1 2146 0
 18701 065a 47EA0C67 		orr	r7, r7, ip, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18702              		.loc 1 2145 0
 18703 065e 4EEA0202 		orr	r2, lr, r2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18704              		.loc 1 2146 0
 18705 0662 3B43     		orrs	r3, r3, r7
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18706              		.loc 1 2145 0
 18707 0664 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18708              		.loc 1 2146 0
 18709 0668 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 18710              		.loc 1 2145 0
 18711 066c E260     		str	r2, [r4, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 18712              		.loc 1 2146 0
 18713 066e 2361     		str	r3, [r4, #16]
 18714 0670 B4E5     		b	.L2247
 18715              	.LVL2398:
 18716              	.L2354:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 18717              		.loc 1 2127 0
 18718 0672 5B00     		lsls	r3, r3, #1
 18719              	.LVL2399:
 18720 0674 A3E5     		b	.L2244
 18721              	.LVL2400:
 18722              	.L2243:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 18723              		.loc 1 2116 0
 18724 0676 0233     		adds	r3, r3, #2
 18725              	.LVL2401:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 18726              		.loc 1 2117 0
 18727 0678 BC44     		add	ip, ip, r7
 18728              	.LVL2402:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 18729              		.loc 1 2118 0
 18730 067a 07EB0B00 		add	r0, r7, fp
 18731              	.LVL2403:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 18732              		.loc 1 2116 0
 18733 067e A361     		str	r3, [r4, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 18734              		.loc 1 2117 0
 18735 0680 C4F828C0 		str	ip, [r4, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 18736              		.loc 1 2118 0
 18737 0684 2062     		str	r0, [r4, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 18738              		.loc 1 2120 0
 18739 0686 0029     		cmp	r1, #0
 18740 0688 7FF405AD 		bne	.L2239
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 18741              		.loc 1 2121 0
 18742 068c 94F85EC0 		ldrb	ip, [r4, #94]	@ zero_extendqisi2
 18743 0690 94F85F80 		ldrb	r8, [r4, #95]	@ zero_extendqisi2
 18744 0694 94F85C10 		ldrb	r1, [r4, #92]	@ zero_extendqisi2
 18745              	.LVL2404:
 18746 0698 94F85D00 		ldrb	r0, [r4, #93]	@ zero_extendqisi2
 18747 069c 4FEA0C4C 		lsl	ip, ip, #16
 18748 06a0 4CEA086C 		orr	ip, ip, r8, lsl #24
 18749 06a4 4CEA0101 		orr	r1, ip, r1
 18750 06a8 41EA0021 		orr	r1, r1, r0, lsl #8
 18751 06ac 6162     		str	r1, [r4, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 18752              		.loc 1 2122 0
 18753 06ae 9B00     		lsls	r3, r3, #2
 18754              	.LVL2405:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 18755              		.loc 1 2113 0
 18756 06b0 4FF00308 		mov	r8, #3
 18757 06b4 83E5     		b	.L2244
 18758              	.LVL2406:
 18759              	.L2289:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 18760              		.loc 1 2111 0
 18761 06b6 4FF00108 		mov	r8, #1
 18762 06ba 67E5     		b	.L2242
 18763              	.LVL2407:
 18764              	.L2283:
 18765              	.LBB1654:
 18766              	.LBB1641:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 18767              		.loc 1 1993 0
 18768 06bc 0346     		mov	r3, r0
 18769 06be E5E4     		b	.L2235
 18770              	.L2366:
 18771              		.align	2
 18772              	.L2365:
 18773 06c0 00000000 		.word	dir_register
 18774 06c4 00000000 		.word	sync
 18775 06c8 46415400 		.word	5521734
 18776 06cc 55AAFFFF 		.word	-21931
 18777 06d0 52526141 		.word	1096897106
 18778 06d4 72724161 		.word	1631679090
 18779 06d8 00000000 		.word	disk_write
 18780              	.LBE1641:
 18781              	.LBE1654:
 18782              	.LBE1658:
 18783              	.LBE1686:
 18784              		.cfi_endproc
 18785              	.LFE41:
 18787              		.section	.text.f_chmod,"ax",%progbits
 18788              		.align	2
 18789              		.global	f_chmod
 18790              		.thumb
 18791              		.thumb_func
 18793              	f_chmod:
 18794              	.LFB42:
3336:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 18795              		.loc 1 3336 0
 18796              		.cfi_startproc
 18797              		@ args = 0, pretend = 0, frame = 64
 18798              		@ frame_needed = 0, uses_anonymous_args = 0
 18799              	.LVL2408:
 18800 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 18801              	.LCFI46:
 18802              		.cfi_def_cfa_offset 36
 18803              		.cfi_offset 4, -36
 18804              		.cfi_offset 5, -32
 18805              		.cfi_offset 6, -28
 18806              		.cfi_offset 7, -24
 18807              		.cfi_offset 8, -20
 18808              		.cfi_offset 9, -16
 18809              		.cfi_offset 10, -12
 18810              		.cfi_offset 11, -8
 18811              		.cfi_offset 14, -4
 18812              	.LBB1697:
 18813              	.LBB1698:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 18814              		.loc 1 2023 0
 18815 0004 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 18816 0006 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 18817              		.loc 1 2024 0
 18818 0008 092B     		cmp	r3, #9
 18819              	.LBE1698:
 18820              	.LBE1697:
3336:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 18821              		.loc 1 3336 0
 18822 000a 91B0     		sub	sp, sp, #68
 18823              	.LCFI47:
 18824              		.cfi_def_cfa_offset 104
 18825              	.LVL2409:
3336:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 18826              		.loc 1 3336 0
 18827 000c 0446     		mov	r4, r0
 18828              	.LVL2410:
 18829 000e 0E46     		mov	r6, r1
 18830 0010 1746     		mov	r7, r2
 18831              	.LBB1722:
 18832              	.LBB1719:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 18833              		.loc 1 2024 0
 18834 0012 13D9     		bls	.L2428
 18835              	.LVL2411:
 18836              	.L2368:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 18837              		.loc 1 2037 0
 18838 0014 8D4B     		ldr	r3, .L2435
 18839              	.LVL2412:
 18840 0016 1D68     		ldr	r5, [r3, #0]
 18841              	.LVL2413:
 18842 0018 0795     		str	r5, [sp, #28]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 18843              		.loc 1 2038 0
 18844 001a 002D     		cmp	r5, #0
 18845 001c 21D0     		beq	.L2393
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 18846              		.loc 1 2042 0
 18847 001e 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 18848 0020 B3B1     		cbz	r3, .L2370
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 18849              		.loc 1 2043 0
 18850 0022 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 18851 0024 8A4B     		ldr	r3, .L2435+4
 18852 0026 9847     		blx	r3
 18853              	.LVL2414:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 18854              		.loc 1 2044 0
 18855 0028 C207     		lsls	r2, r0, #31
 18856 002a 11D4     		bmi	.L2370
2045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check write protection if needed */
 18857              		.loc 1 2045 0
 18858 002c 00F00400 		and	r0, r0, #4
 18859              	.LVL2415:
 18860 0030 C0B2     		uxtb	r0, r0
 18861 0032 0028     		cmp	r0, #0
 18862 0034 00F0DC80 		beq	.L2371
 18863              	.L2372:
2046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_WRITE_PROTECTED;
 18864              		.loc 1 2046 0
 18865 0038 0A20     		movs	r0, #10
 18866 003a 06E0     		b	.L2425
 18867              	.LVL2416:
 18868              	.L2428:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 18869              		.loc 1 2024 0
 18870 003c 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 18871              	.LVL2417:
 18872 003e 3A2A     		cmp	r2, #58
 18873 0040 E8D1     		bne	.L2368
 18874              	.LVL2418:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 18875              		.loc 1 2036 0
 18876 0042 0B20     		movs	r0, #11
 18877              	.LVL2419:
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 18878              		.loc 1 2035 0
 18879 0044 002B     		cmp	r3, #0
 18880 0046 00F08C81 		beq	.L2429
 18881              	.LVL2420:
 18882              	.L2425:
 18883              	.LBE1719:
 18884              	.LBE1722:
3364:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 18885              		.loc 1 3364 0
 18886 004a 11B0     		add	sp, sp, #68
 18887 004c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 18888              	.LVL2421:
 18889              	.L2370:
 18890              	.LBB1723:
 18891              	.LBB1720:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 18892              		.loc 1 2054 0
 18893 0050 0020     		movs	r0, #0
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 18894              		.loc 1 2056 0
 18895 0052 804B     		ldr	r3, .L2435+8
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 18896              		.loc 1 2054 0
 18897 0054 2870     		strb	r0, [r5, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 18898              		.loc 1 2055 0
 18899 0056 6870     		strb	r0, [r5, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 18900              		.loc 1 2056 0
 18901 0058 9847     		blx	r3
 18902              	.LVL2422:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 18903              		.loc 1 2057 0
 18904 005a C307     		lsls	r3, r0, #31
 18905 005c 03D5     		bpl	.L2430
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 18906              		.loc 1 2058 0
 18907 005e 0320     		movs	r0, #3
 18908              	.LVL2423:
 18909 0060 F3E7     		b	.L2425
 18910              	.LVL2424:
 18911              	.L2393:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 18912              		.loc 1 2038 0
 18913 0062 0C20     		movs	r0, #12
 18914 0064 F1E7     		b	.L2425
 18915              	.LVL2425:
 18916              	.L2430:
2059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 18917              		.loc 1 2059 0
 18918 0066 00F00402 		and	r2, r0, #4
 18919 006a D2B2     		uxtb	r2, r2
 18920 006c 002A     		cmp	r2, #0
 18921 006e E3D1     		bne	.L2372
 18922              	.LVL2426:
 18923              	.LBB1699:
 18924              	.LBB1700:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 18925              		.loc 1 1987 0
 18926 0070 05F13009 		add	r9, r5, #48
 18927 0074 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 18928              	.LVL2427:
 18929 0076 DFF8F481 		ldr	r8, .L2435+32
 18930 007a 4946     		mov	r1, r9
 18931 007c 0123     		movs	r3, #1
 18932 007e C047     		blx	r8
 18933              	.LVL2428:
 18934 0080 0028     		cmp	r0, #0
 18935 0082 00F0D380 		beq	.L2431
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 18936              		.loc 1 1988 0
 18937 0086 0323     		movs	r3, #3
 18938              	.L2373:
 18939              	.LBE1700:
 18940              	.LBE1699:
 18941              	.LBB1706:
 18942              	.LBB1707:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 18943              		.loc 1 2066 0
 18944 0088 4FF0000A 		mov	sl, #0
 18945              	.LVL2429:
 18946              	.L2388:
 18947              	.LBE1707:
 18948              	.LBE1706:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 18949              		.loc 1 2078 0
 18950 008c 032B     		cmp	r3, #3
 18951 008e 00F0DA80 		beq	.L2402
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 18952              		.loc 1 2079 0
 18953 0092 13B1     		cbz	r3, .L2374
 18954              	.LVL2430:
 18955              	.L2377:
 18956 0094 0D20     		movs	r0, #13
 18957 0096 D8E7     		b	.L2425
 18958              	.LVL2431:
 18959              	.L2398:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 18960              		.loc 1 2066 0
 18961 0098 8246     		mov	sl, r0
 18962              	.LVL2432:
 18963              	.L2374:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 18964              		.loc 1 2083 0
 18965 009a 95F83C20 		ldrb	r2, [r5, #60]	@ zero_extendqisi2
 18966 009e 95F83B30 		ldrb	r3, [r5, #59]	@ zero_extendqisi2
 18967 00a2 43EA0223 		orr	r3, r3, r2, lsl #8
 18968 00a6 B3F5007F 		cmp	r3, #512
 18969 00aa F3D1     		bne	.L2377
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 18970              		.loc 1 2086 0
 18971 00ac 95F84720 		ldrb	r2, [r5, #71]	@ zero_extendqisi2
 18972 00b0 95F84630 		ldrb	r3, [r5, #70]	@ zero_extendqisi2
 18973              	.LVL2433:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 18974              		.loc 1 2087 0
 18975 00b4 53EA0223 		orrs	r3, r3, r2, lsl #8
 18976              	.LVL2434:
 18977 00b8 0293     		str	r3, [sp, #8]
 18978 00ba 0ED1     		bne	.L2378
 18979 00bc 95F85610 		ldrb	r1, [r5, #86]	@ zero_extendqisi2
 18980 00c0 95F85700 		ldrb	r0, [r5, #87]	@ zero_extendqisi2
 18981 00c4 95F85430 		ldrb	r3, [r5, #84]	@ zero_extendqisi2
 18982              	.LVL2435:
 18983 00c8 95F85520 		ldrb	r2, [r5, #85]	@ zero_extendqisi2
 18984 00cc 0904     		lsls	r1, r1, #16
 18985 00ce 41EA0061 		orr	r1, r1, r0, lsl #24
 18986 00d2 0B43     		orrs	r3, r3, r1
 18987 00d4 43EA0222 		orr	r2, r3, r2, lsl #8
 18988 00d8 0292     		str	r2, [sp, #8]
 18989              	.LVL2436:
 18990              	.L2378:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 18991              		.loc 1 2090 0
 18992 00da 95F84020 		ldrb	r2, [r5, #64]	@ zero_extendqisi2
 18993              	.LVL2437:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 18994              		.loc 1 2088 0
 18995 00de 0298     		ldr	r0, [sp, #8]
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 18996              		.loc 1 2090 0
 18997 00e0 EA70     		strb	r2, [r5, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 18998              		.loc 1 2091 0
 18999 00e2 531E     		subs	r3, r2, #1
 19000 00e4 012B     		cmp	r3, #1
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 19001              		.loc 1 2088 0
 19002 00e6 E861     		str	r0, [r5, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 19003              		.loc 1 2091 0
 19004 00e8 D4D8     		bhi	.L2377
 19005              	.LVL2438:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 19006              		.loc 1 2094 0
 19007 00ea 95F83D30 		ldrb	r3, [r5, #61]	@ zero_extendqisi2
 19008              	.LVL2439:
 19009 00ee AB70     		strb	r3, [r5, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 19010              		.loc 1 2095 0
 19011 00f0 002B     		cmp	r3, #0
 19012 00f2 CFD0     		beq	.L2377
 19013 00f4 591E     		subs	r1, r3, #1
 19014 00f6 1942     		tst	r1, r3
 19015 00f8 CCD1     		bne	.L2377
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 19016              		.loc 1 2097 0
 19017 00fa 95F84200 		ldrb	r0, [r5, #66]	@ zero_extendqisi2
 19018 00fe 95F84110 		ldrb	r1, [r5, #65]	@ zero_extendqisi2
 19019 0102 41EA0021 		orr	r1, r1, r0, lsl #8
 19020 0106 88B2     		uxth	r0, r1
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 19021              		.loc 1 2098 0
 19022 0108 0907     		lsls	r1, r1, #28
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 19023              		.loc 1 2097 0
 19024 010a 0390     		str	r0, [sp, #12]
 19025 010c 2881     		strh	r0, [r5, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 19026              		.loc 1 2098 0
 19027 010e C1D1     		bne	.L2377
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 19028              		.loc 1 2100 0
 19029 0110 95F84400 		ldrb	r0, [r5, #68]	@ zero_extendqisi2
 19030 0114 95F84310 		ldrb	r1, [r5, #67]	@ zero_extendqisi2
 19031              	.LVL2440:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 19032              		.loc 1 2101 0
 19033 0118 51EA0021 		orrs	r1, r1, r0, lsl #8
 19034              	.LVL2441:
 19035 011c 0FD1     		bne	.L2379
 19036 011e 95F852C0 		ldrb	ip, [r5, #82]	@ zero_extendqisi2
 19037 0122 95F853B0 		ldrb	fp, [r5, #83]	@ zero_extendqisi2
 19038 0126 95F85000 		ldrb	r0, [r5, #80]	@ zero_extendqisi2
 19039 012a 95F85110 		ldrb	r1, [r5, #81]	@ zero_extendqisi2
 19040              	.LVL2442:
 19041 012e 4FEA0C4C 		lsl	ip, ip, #16
 19042 0132 4CEA0B6C 		orr	ip, ip, fp, lsl #24
 19043 0136 4CEA0000 		orr	r0, ip, r0
 19044 013a 40EA0121 		orr	r1, r0, r1, lsl #8
 19045              	.LVL2443:
 19046              	.L2379:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 19047              		.loc 1 2103 0
 19048 013e 95F83FC0 		ldrb	ip, [r5, #63]	@ zero_extendqisi2
 19049 0142 95F83E00 		ldrb	r0, [r5, #62]	@ zero_extendqisi2
 19050              	.LVL2444:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 19051              		.loc 1 2104 0
 19052 0146 50EA0C20 		orrs	r0, r0, ip, lsl #8
 19053              	.LVL2445:
 19054 014a 0090     		str	r0, [sp, #0]
 19055 014c A2D0     		beq	.L2377
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 19056              		.loc 1 2092 0
 19057 014e 0298     		ldr	r0, [sp, #8]
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 19058              		.loc 1 2107 0
 19059 0150 DDF800B0 		ldr	fp, [sp, #0]
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 19060              		.loc 1 2092 0
 19061 0154 02FB00FC 		mul	ip, r2, r0
 19062              	.LVL2446:
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 19063              		.loc 1 2107 0
 19064 0158 0398     		ldr	r0, [sp, #12]
 19065 015a 0BEB1012 		add	r2, fp, r0, lsr #4
 19066              	.LVL2447:
 19067 015e 6244     		add	r2, r2, ip
 19068              	.LVL2448:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 19069              		.loc 1 2108 0
 19070 0160 8A42     		cmp	r2, r1
 19071 0162 97D8     		bhi	.L2377
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 19072              		.loc 1 2109 0
 19073 0164 891A     		subs	r1, r1, r2
 19074              	.LVL2449:
 19075 0166 B1FBF3F3 		udiv	r3, r1, r3
 19076              	.LVL2450:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 19077              		.loc 1 2110 0
 19078 016a 002B     		cmp	r3, #0
 19079 016c 92D0     		beq	.L2377
 19080              	.LVL2451:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 19081              		.loc 1 2112 0
 19082 016e 40F6F571 		movw	r1, #4085
 19083 0172 8B42     		cmp	r3, r1
 19084 0174 40F27B81 		bls	.L2403
 19085              	.LVL2452:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 19086              		.loc 1 2113 0
 19087 0178 01F57041 		add	r1, r1, #61440
 19088 017c 8B42     		cmp	r3, r1
 19089 017e 00F25681 		bhi	.L2381
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 19090              		.loc 1 2112 0
 19091 0182 4FF0020B 		mov	fp, #2
 19092              	.LVL2453:
 19093              	.L2380:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 19094              		.loc 1 2117 0
 19095 0186 5244     		add	r2, r2, sl
 19096              	.LVL2454:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 19097              		.loc 1 2118 0
 19098 0188 0099     		ldr	r1, [sp, #0]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 19099              		.loc 1 2117 0
 19100 018a AA62     		str	r2, [r5, #40]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 19101              		.loc 1 2124 0
 19102 018c 039A     		ldr	r2, [sp, #12]
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 19103              		.loc 1 2116 0
 19104 018e 0233     		adds	r3, r3, #2
 19105              	.LVL2455:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 19106              		.loc 1 2118 0
 19107 0190 0AEB0100 		add	r0, sl, r1
 19108              	.LVL2456:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 19109              		.loc 1 2116 0
 19110 0194 AB61     		str	r3, [r5, #24]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 19111              		.loc 1 2118 0
 19112 0196 2862     		str	r0, [r5, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 19113              		.loc 1 2124 0
 19114 0198 002A     		cmp	r2, #0
 19115 019a 3FF47BAF 		beq	.L2377
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 19116              		.loc 1 2125 0
 19117 019e 6044     		add	r0, ip, r0
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 19118              		.loc 1 2127 0
 19119 01a0 BBF1020F 		cmp	fp, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 19120              		.loc 1 2125 0
 19121 01a4 6862     		str	r0, [r5, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 19122              		.loc 1 2127 0
 19123 01a6 00F04081 		beq	.L2432
 19124 01aa 0322     		movs	r2, #3
 19125 01ac 02FB03F2 		mul	r2, r2, r3
 19126 01b0 03F00103 		and	r3, r3, #1
 19127              	.LVL2457:
 19128 01b4 03EB5203 		add	r3, r3, r2, lsr #1
 19129 01b8 4FF0010B 		mov	fp, #1
 19130              	.LVL2458:
 19131              	.L2382:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 19132              		.loc 1 2129 0
 19133 01bc 0298     		ldr	r0, [sp, #8]
 19134 01be 03F2FF13 		addw	r3, r3, #511
 19135              	.LVL2459:
 19136 01c2 B0EB532F 		cmp	r0, r3, lsr #9
 19137 01c6 FFF465AF 		bcc	.L2377
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 19138              		.loc 1 2135 0
 19139 01ca 0023     		movs	r3, #0
 19140              	.LVL2460:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 19141              		.loc 1 2134 0
 19142 01cc 4FF0FF32 		mov	r2, #-1
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 19143              		.loc 1 2138 0
 19144 01d0 BBF1030F 		cmp	fp, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 19145              		.loc 1 2134 0
 19146 01d4 2A61     		str	r2, [r5, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 19147              		.loc 1 2135 0
 19148 01d6 EB60     		str	r3, [r5, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 19149              		.loc 1 2138 0
 19150 01d8 00F0C580 		beq	.L2433
 19151              	.LVL2461:
 19152              	.L2385:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 19153              		.loc 1 2151 0
 19154 01dc 1E49     		ldr	r1, .L2435+12
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 19155              		.loc 1 2150 0
 19156 01de 85F800B0 		strb	fp, [r5, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 19157              		.loc 1 2151 0
 19158 01e2 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 19159              		.loc 1 2152 0
 19160 01e4 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 19161              		.loc 1 2151 0
 19162 01e6 0132     		adds	r2, r2, #1
 19163 01e8 0A80     		strh	r2, [r1, #0]	@ movhi
 19164 01ea EA80     		strh	r2, [r5, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 19165              		.loc 1 2152 0
 19166 01ec EB62     		str	r3, [r5, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 19167              		.loc 1 2153 0
 19168 01ee 2B71     		strb	r3, [r5, #4]
 19169              	.LVL2462:
 19170              	.L2371:
 19171              	.LBE1720:
 19172              	.LBE1723:
3345:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 19173              		.loc 1 3345 0
 19174 01f0 1A4B     		ldr	r3, .L2435+16
 19175 01f2 04AA     		add	r2, sp, #16
 19176 01f4 0E93     		str	r3, [sp, #56]
3346:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 19177              		.loc 1 3346 0
 19178 01f6 07A8     		add	r0, sp, #28
 19179              	.LVL2463:
 19180 01f8 2146     		mov	r1, r4
 19181 01fa 194B     		ldr	r3, .L2435+20
3345:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 19182              		.loc 1 3345 0
 19183 01fc 0D92     		str	r2, [sp, #52]
3346:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 19184              		.loc 1 3346 0
 19185 01fe 9847     		blx	r3
 19186              	.LVL2464:
3350:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
 19187              		.loc 1 3350 0
 19188 0200 0028     		cmp	r0, #0
 19189 0202 7FF422AF 		bne	.L2425
3351:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;
 19190              		.loc 1 3351 0
 19191 0206 0C9B     		ldr	r3, [sp, #48]
 19192              	.LVL2465:
3352:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!dir) {						/* Is it a root directory? */
 19193              		.loc 1 3352 0
 19194 0208 73B1     		cbz	r3, .L2404
3356:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
 19195              		.loc 1 3356 0
 19196 020a D97A     		ldrb	r1, [r3, #11]	@ zero_extendqisi2
3357:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
 19197              		.loc 1 3357 0
 19198 020c 079A     		ldr	r2, [sp, #28]
3355:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
 19199              		.loc 1 3355 0
 19200 020e 07F02707 		and	r7, r7, #39
 19201              	.LVL2466:
3356:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
 19202              		.loc 1 3356 0
 19203 0212 21EA0701 		bic	r1, r1, r7
 19204 0216 3740     		ands	r7, r7, r6
 19205              	.LVL2467:
 19206 0218 0F43     		orrs	r7, r7, r1
 19207 021a DF72     		strb	r7, [r3, #11]
3357:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
 19208              		.loc 1 3357 0
 19209 021c 0123     		movs	r3, #1
 19210              	.LVL2468:
 19211 021e 1371     		strb	r3, [r2, #4]
3358:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(dj.fs);
 19212              		.loc 1 3358 0
 19213 0220 1046     		mov	r0, r2
 19214              	.LVL2469:
 19215 0222 104B     		ldr	r3, .L2435+24
 19216 0224 9847     		blx	r3
 19217              	.LVL2470:
 19218 0226 10E7     		b	.L2425
 19219              	.LVL2471:
 19220              	.L2404:
3353:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;
 19221              		.loc 1 3353 0
 19222 0228 0620     		movs	r0, #6
 19223              	.LVL2472:
 19224 022a 0EE7     		b	.L2425
 19225              	.LVL2473:
 19226              	.L2431:
 19227              	.LBB1724:
 19228              	.LBB1721:
 19229              	.LBB1714:
 19230              	.LBB1703:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 19231              		.loc 1 1989 0
 19232 022c 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 19233 0230 95F82FB2 		ldrb	fp, [r5, #559]	@ zero_extendqisi2
 19234 0234 43EA0B2B 		orr	fp, r3, fp, lsl #8
 19235 0238 0B4B     		ldr	r3, .L2435+28
 19236 023a 0FFA8BFB 		sxth	fp, fp
 19237 023e 9B45     		cmp	fp, r3
 19238 0240 16D0     		beq	.L2434
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 19239              		.loc 1 1990 0
 19240 0242 0223     		movs	r3, #2
 19241 0244 20E7     		b	.L2373
 19242              	.LVL2474:
 19243              	.L2402:
 19244              	.LBE1703:
 19245              	.LBE1714:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 19246              		.loc 1 2078 0
 19247 0246 0120     		movs	r0, #1
 19248              	.LVL2475:
 19249 0248 FFE6     		b	.L2425
 19250              	.L2436:
 19251 024a 00BF     		.align	2
 19252              	.L2435:
 19253 024c 00000000 		.word	.LANCHOR2
 19254 0250 00000000 		.word	disk_status
 19255 0254 00000000 		.word	disk_initialize
 19256 0258 00000000 		.word	.LANCHOR3
 19257 025c 00000000 		.word	.LANCHOR4
 19258 0260 00000000 		.word	follow_path
 19259 0264 00000000 		.word	sync
 19260 0268 55AAFFFF 		.word	-21931
 19261 026c 00000000 		.word	disk_read
 19262              	.LVL2476:
 19263              	.L2434:
 19264              	.LBB1715:
 19265              	.LBB1704:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 19266              		.loc 1 1992 0
 19267 0270 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 19268 0274 95F869A0 		ldrb	sl, [r5, #105]	@ zero_extendqisi2
 19269 0278 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 19270 027c 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 19271 0280 DFF8F0C1 		ldr	ip, .L2437
 19272 0284 0904     		lsls	r1, r1, #16
 19273 0286 41EA0A61 		orr	r1, r1, sl, lsl #24
 19274 028a 0B43     		orrs	r3, r3, r1
 19275 028c 43EA0223 		orr	r3, r3, r2, lsl #8
 19276 0290 23F07F43 		bic	r3, r3, #-16777216
 19277 0294 6345     		cmp	r3, ip
 19278 0296 62D0     		beq	.L2397
 19279              	.LVL2477:
 19280              	.LBB1701:
 19281              	.LBB1702:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 19282              		.loc 1 1994 0
 19283 0298 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 19284 029c 95F885A0 		ldrb	sl, [r5, #133]	@ zero_extendqisi2
 19285 02a0 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 19286 02a4 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 19287 02a8 0904     		lsls	r1, r1, #16
 19288 02aa 41EA0A61 		orr	r1, r1, sl, lsl #24
 19289 02ae 0B43     		orrs	r3, r3, r1
 19290 02b0 43EA0223 		orr	r3, r3, r2, lsl #8
 19291 02b4 23F07F43 		bic	r3, r3, #-16777216
 19292              	.LBE1702:
 19293              	.LBE1701:
 19294              	.LBE1704:
 19295              	.LBE1715:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 19296              		.loc 1 2068 0
 19297 02b8 6345     		cmp	r3, ip
 19298 02ba 3FF4EDAE 		beq	.L2398
 19299              	.LVL2478:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 19300              		.loc 1 2073 0
 19301 02be 95F8F231 		ldrb	r3, [r5, #498]	@ zero_extendqisi2
 19302 02c2 002B     		cmp	r3, #0
 19303 02c4 3FF4E6AE 		beq	.L2377
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 19304              		.loc 1 2074 0
 19305 02c8 95F8F821 		ldrb	r2, [r5, #504]	@ zero_extendqisi2
 19306 02cc 95F8F911 		ldrb	r1, [r5, #505]	@ zero_extendqisi2
 19307 02d0 95F8F631 		ldrb	r3, [r5, #502]	@ zero_extendqisi2
 19308 02d4 95F8F7A1 		ldrb	sl, [r5, #503]	@ zero_extendqisi2
 19309              	.LBB1716:
 19310              	.LBB1712:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 19311              		.loc 1 1987 0
 19312 02d8 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 19313 02da CDF804C0 		str	ip, [sp, #4]
 19314              	.LBE1712:
 19315              	.LBE1716:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 19316              		.loc 1 2074 0
 19317 02de 1204     		lsls	r2, r2, #16
 19318 02e0 42EA0162 		orr	r2, r2, r1, lsl #24
 19319 02e4 1343     		orrs	r3, r3, r2
 19320 02e6 43EA0A2A 		orr	sl, r3, sl, lsl #8
 19321              	.LVL2479:
 19322              	.LBB1717:
 19323              	.LBB1713:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 19324              		.loc 1 1987 0
 19325 02ea 4946     		mov	r1, r9
 19326 02ec 5246     		mov	r2, sl
 19327 02ee 0123     		movs	r3, #1
 19328 02f0 C047     		blx	r8
 19329              	.LVL2480:
 19330 02f2 DDF804C0 		ldr	ip, [sp, #4]
 19331 02f6 0028     		cmp	r0, #0
 19332 02f8 A5D1     		bne	.L2402
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 19333              		.loc 1 1989 0
 19334 02fa 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 19335 02fe 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 19336 0302 43EA0223 		orr	r3, r3, r2, lsl #8
 19337 0306 1BB2     		sxth	r3, r3
 19338 0308 5B45     		cmp	r3, fp
 19339 030a 7FF4C3AE 		bne	.L2377
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 19340              		.loc 1 1992 0
 19341 030e 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 19342 0312 95F86900 		ldrb	r0, [r5, #105]	@ zero_extendqisi2
 19343 0316 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 19344 031a 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 19345 031e 0904     		lsls	r1, r1, #16
 19346 0320 41EA0061 		orr	r1, r1, r0, lsl #24
 19347 0324 0B43     		orrs	r3, r3, r1
 19348 0326 43EA0223 		orr	r3, r3, r2, lsl #8
 19349 032a 23F07F43 		bic	r3, r3, #-16777216
 19350 032e 6345     		cmp	r3, ip
 19351 0330 3FF4B3AE 		beq	.L2374
 19352              	.LVL2481:
 19353              	.LBB1708:
 19354              	.LBB1709:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 19355              		.loc 1 1994 0
 19356 0334 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 19357 0338 95F88500 		ldrb	r0, [r5, #133]	@ zero_extendqisi2
 19358 033c 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 19359 0340 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 19360 0344 0904     		lsls	r1, r1, #16
 19361 0346 41EA0061 		orr	r1, r1, r0, lsl #24
 19362 034a 0B43     		orrs	r3, r3, r1
 19363 034c 43EA0222 		orr	r2, r3, r2, lsl #8
 19364              	.LBE1709:
 19365              	.LBE1708:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 19366              		.loc 1 1995 0
 19367 0350 484B     		ldr	r3, .L2437
 19368              	.LBB1711:
 19369              	.LBB1710:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 19370              		.loc 1 1994 0
 19371 0352 22F07F42 		bic	r2, r2, #-16777216
 19372              	.LBE1710:
 19373              	.LBE1711:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 19374              		.loc 1 1995 0
 19375 0356 D31A     		subs	r3, r2, r3
 19376 0358 18BF     		it	ne
 19377 035a 0123     		movne	r3, #1
 19378 035c 96E6     		b	.L2388
 19379              	.LVL2482:
 19380              	.L2397:
 19381              	.LBE1713:
 19382              	.LBE1717:
 19383              	.LBB1718:
 19384              	.LBB1705:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 19385              		.loc 1 1993 0
 19386 035e 0346     		mov	r3, r0
 19387 0360 92E6     		b	.L2373
 19388              	.LVL2483:
 19389              	.L2429:
 19390              	.LBE1705:
 19391              	.LBE1718:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 19392              		.loc 1 2025 0
 19393 0362 0234     		adds	r4, r4, #2
 19394              	.LVL2484:
 19395 0364 56E6     		b	.L2368
 19396              	.LVL2485:
 19397              	.L2433:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 19398              		.loc 1 2140 0
 19399 0366 95F86110 		ldrb	r1, [r5, #97]	@ zero_extendqisi2
 19400 036a 95F86020 		ldrb	r2, [r5, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 19401              		.loc 1 2139 0
 19402 036e 6B71     		strb	r3, [r5, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 19403              		.loc 1 2140 0
 19404 0370 42EA0122 		orr	r2, r2, r1, lsl #8
 19405 0374 5244     		add	r2, sl, r2
 19406 0376 6A61     		str	r2, [r5, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 19407              		.loc 1 2141 0
 19408 0378 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 19409 037a 4946     		mov	r1, r9
 19410 037c 0123     		movs	r3, #1
 19411 037e C047     		blx	r8
 19412              	.LVL2486:
 19413 0380 0028     		cmp	r0, #0
 19414 0382 7FF42BAF 		bne	.L2385
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 19415              		.loc 1 2142 0
 19416 0386 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 19417 038a 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 19418 038e 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 19419              		.loc 1 2141 0
 19420 0392 394B     		ldr	r3, .L2437+4
 19421 0394 12B2     		sxth	r2, r2
 19422 0396 9A42     		cmp	r2, r3
 19423 0398 7FF420AF 		bne	.L2385
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 19424              		.loc 1 2143 0
 19425 039c 95F83210 		ldrb	r1, [r5, #50]	@ zero_extendqisi2
 19426 03a0 95F83300 		ldrb	r0, [r5, #51]	@ zero_extendqisi2
 19427 03a4 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 19428 03a8 95F83120 		ldrb	r2, [r5, #49]	@ zero_extendqisi2
 19429 03ac 0904     		lsls	r1, r1, #16
 19430 03ae 41EA0061 		orr	r1, r1, r0, lsl #24
 19431 03b2 0B43     		orrs	r3, r3, r1
 19432 03b4 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 19433              		.loc 1 2142 0
 19434 03b8 304B     		ldr	r3, .L2437+8
 19435 03ba 9A42     		cmp	r2, r3
 19436 03bc 7FF40EAF 		bne	.L2385
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 19437              		.loc 1 2144 0
 19438 03c0 95F81612 		ldrb	r1, [r5, #534]	@ zero_extendqisi2
 19439 03c4 95F81702 		ldrb	r0, [r5, #535]	@ zero_extendqisi2
 19440 03c8 95F81432 		ldrb	r3, [r5, #532]	@ zero_extendqisi2
 19441 03cc 95F81522 		ldrb	r2, [r5, #533]	@ zero_extendqisi2
 19442 03d0 0904     		lsls	r1, r1, #16
 19443 03d2 41EA0061 		orr	r1, r1, r0, lsl #24
 19444 03d6 0B43     		orrs	r3, r3, r1
 19445 03d8 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 19446              		.loc 1 2143 0
 19447 03dc 284B     		ldr	r3, .L2437+12
 19448 03de 9A42     		cmp	r2, r3
 19449 03e0 7FF4FCAE 		bne	.L2385
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19450              		.loc 1 2145 0
 19451 03e4 95F81EC2 		ldrb	ip, [r5, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19452              		.loc 1 2146 0
 19453 03e8 95F81AE2 		ldrb	lr, [r5, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19454              		.loc 1 2145 0
 19455 03ec 95F81F92 		ldrb	r9, [r5, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19456              		.loc 1 2146 0
 19457 03f0 95F81B82 		ldrb	r8, [r5, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19458              		.loc 1 2145 0
 19459 03f4 95F81C22 		ldrb	r2, [r5, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19460              		.loc 1 2146 0
 19461 03f8 95F81832 		ldrb	r3, [r5, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19462              		.loc 1 2145 0
 19463 03fc 95F81D02 		ldrb	r0, [r5, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19464              		.loc 1 2146 0
 19465 0400 95F81912 		ldrb	r1, [r5, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19466              		.loc 1 2145 0
 19467 0404 4FEA0C4C 		lsl	ip, ip, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19468              		.loc 1 2146 0
 19469 0408 4FEA0E4E 		lsl	lr, lr, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19470              		.loc 1 2145 0
 19471 040c 4CEA096C 		orr	ip, ip, r9, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19472              		.loc 1 2146 0
 19473 0410 4EEA086E 		orr	lr, lr, r8, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19474              		.loc 1 2145 0
 19475 0414 4CEA0202 		orr	r2, ip, r2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19476              		.loc 1 2146 0
 19477 0418 4EEA0303 		orr	r3, lr, r3
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19478              		.loc 1 2145 0
 19479 041c 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19480              		.loc 1 2146 0
 19481 0420 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 19482              		.loc 1 2145 0
 19483 0424 EA60     		str	r2, [r5, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 19484              		.loc 1 2146 0
 19485 0426 2B61     		str	r3, [r5, #16]
 19486 0428 D8E6     		b	.L2385
 19487              	.LVL2487:
 19488              	.L2432:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 19489              		.loc 1 2127 0
 19490 042a 5B00     		lsls	r3, r3, #1
 19491              	.LVL2488:
 19492 042c C6E6     		b	.L2382
 19493              	.LVL2489:
 19494              	.L2381:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 19495              		.loc 1 2118 0
 19496 042e DDF800B0 		ldr	fp, [sp, #0]
 19497 0432 0AEB0B00 		add	r0, sl, fp
 19498 0436 2862     		str	r0, [r5, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 19499              		.loc 1 2120 0
 19500 0438 0398     		ldr	r0, [sp, #12]
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 19501              		.loc 1 2116 0
 19502 043a 0233     		adds	r3, r3, #2
 19503              	.LVL2490:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 19504              		.loc 1 2117 0
 19505 043c 5244     		add	r2, r2, sl
 19506              	.LVL2491:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 19507              		.loc 1 2116 0
 19508 043e AB61     		str	r3, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 19509              		.loc 1 2117 0
 19510 0440 AA62     		str	r2, [r5, #40]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 19511              		.loc 1 2120 0
 19512 0442 0028     		cmp	r0, #0
 19513 0444 7FF426AE 		bne	.L2377
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 19514              		.loc 1 2121 0
 19515 0448 95F85E00 		ldrb	r0, [r5, #94]	@ zero_extendqisi2
 19516 044c 95F85FC0 		ldrb	ip, [r5, #95]	@ zero_extendqisi2
 19517              	.LVL2492:
 19518 0450 95F85C20 		ldrb	r2, [r5, #92]	@ zero_extendqisi2
 19519 0454 95F85D10 		ldrb	r1, [r5, #93]	@ zero_extendqisi2
 19520 0458 0004     		lsls	r0, r0, #16
 19521 045a 40EA0C60 		orr	r0, r0, ip, lsl #24
 19522 045e 0243     		orrs	r2, r2, r0
 19523 0460 42EA0122 		orr	r2, r2, r1, lsl #8
 19524 0464 6A62     		str	r2, [r5, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 19525              		.loc 1 2122 0
 19526 0466 9B00     		lsls	r3, r3, #2
 19527              	.LVL2493:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 19528              		.loc 1 2113 0
 19529 0468 4FF0030B 		mov	fp, #3
 19530 046c A6E6     		b	.L2382
 19531              	.LVL2494:
 19532              	.L2403:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 19533              		.loc 1 2111 0
 19534 046e 4FF0010B 		mov	fp, #1
 19535 0472 88E6     		b	.L2380
 19536              	.L2438:
 19537              		.align	2
 19538              	.L2437:
 19539 0474 46415400 		.word	5521734
 19540 0478 55AAFFFF 		.word	-21931
 19541 047c 52526141 		.word	1096897106
 19542 0480 72724161 		.word	1631679090
 19543              	.LBE1721:
 19544              	.LBE1724:
 19545              		.cfi_endproc
 19546              	.LFE42:
 19548              		.section	.text.f_utime,"ax",%progbits
 19549              		.align	2
 19550              		.global	f_utime
 19551              		.thumb
 19552              		.thumb_func
 19554              	f_utime:
 19555              	.LFB43:
3377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 19556              		.loc 1 3377 0
 19557              		.cfi_startproc
 19558              		@ args = 0, pretend = 0, frame = 56
 19559              		@ frame_needed = 0, uses_anonymous_args = 0
 19560              	.LVL2495:
 19561 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 19562              	.LCFI48:
 19563              		.cfi_def_cfa_offset 36
 19564              		.cfi_offset 4, -36
 19565              		.cfi_offset 5, -32
 19566              		.cfi_offset 6, -28
 19567              		.cfi_offset 7, -24
 19568              		.cfi_offset 8, -20
 19569              		.cfi_offset 9, -16
 19570              		.cfi_offset 10, -12
 19571              		.cfi_offset 11, -8
 19572              		.cfi_offset 14, -4
 19573              	.LBB1735:
 19574              	.LBB1736:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 19575              		.loc 1 2023 0
 19576 0004 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 19577 0006 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 19578              		.loc 1 2024 0
 19579 0008 092B     		cmp	r3, #9
 19580              	.LBE1736:
 19581              	.LBE1735:
3377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 19582              		.loc 1 3377 0
 19583 000a 8FB0     		sub	sp, sp, #60
 19584              	.LCFI49:
 19585              		.cfi_def_cfa_offset 96
 19586              	.LVL2496:
3377:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 19587              		.loc 1 3377 0
 19588 000c 0446     		mov	r4, r0
 19589              	.LVL2497:
 19590 000e 0E46     		mov	r6, r1
 19591              	.LBB1760:
 19592              	.LBB1757:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 19593              		.loc 1 2024 0
 19594 0010 13D9     		bls	.L2500
 19595              	.LVL2498:
 19596              	.L2440:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 19597              		.loc 1 2037 0
 19598 0012 8D4B     		ldr	r3, .L2507
 19599              	.LVL2499:
 19600 0014 1D68     		ldr	r5, [r3, #0]
 19601              	.LVL2500:
 19602 0016 0595     		str	r5, [sp, #20]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 19603              		.loc 1 2038 0
 19604 0018 002D     		cmp	r5, #0
 19605 001a 21D0     		beq	.L2465
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 19606              		.loc 1 2042 0
 19607 001c 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 19608 001e B3B1     		cbz	r3, .L2442
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 19609              		.loc 1 2043 0
 19610 0020 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 19611 0022 8A4B     		ldr	r3, .L2507+4
 19612 0024 9847     		blx	r3
 19613              	.LVL2501:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 19614              		.loc 1 2044 0
 19615 0026 C207     		lsls	r2, r0, #31
 19616 0028 11D4     		bmi	.L2442
2045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check write protection if needed */
 19617              		.loc 1 2045 0
 19618 002a 00F00400 		and	r0, r0, #4
 19619              	.LVL2502:
 19620 002e C0B2     		uxtb	r0, r0
 19621 0030 0028     		cmp	r0, #0
 19622 0032 00F0D980 		beq	.L2443
 19623              	.L2444:
2046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_WRITE_PROTECTED;
 19624              		.loc 1 2046 0
 19625 0036 0A20     		movs	r0, #10
 19626 0038 06E0     		b	.L2497
 19627              	.LVL2503:
 19628              	.L2500:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 19629              		.loc 1 2024 0
 19630 003a 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 19631 003c 3A2A     		cmp	r2, #58
 19632 003e E8D1     		bne	.L2440
 19633              	.LVL2504:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 19634              		.loc 1 2036 0
 19635 0040 0B20     		movs	r0, #11
 19636              	.LVL2505:
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 19637              		.loc 1 2035 0
 19638 0042 002B     		cmp	r3, #0
 19639 0044 00F08781 		beq	.L2501
 19640              	.LVL2506:
 19641              	.L2497:
 19642              	.LBE1757:
 19643              	.LBE1760:
3405:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 19644              		.loc 1 3405 0
 19645 0048 0FB0     		add	sp, sp, #60
 19646 004a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 19647              	.LVL2507:
 19648              	.L2442:
 19649              	.LBB1761:
 19650              	.LBB1758:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 19651              		.loc 1 2054 0
 19652 004e 0020     		movs	r0, #0
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 19653              		.loc 1 2056 0
 19654 0050 7F4B     		ldr	r3, .L2507+8
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 19655              		.loc 1 2054 0
 19656 0052 2870     		strb	r0, [r5, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 19657              		.loc 1 2055 0
 19658 0054 6870     		strb	r0, [r5, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 19659              		.loc 1 2056 0
 19660 0056 9847     		blx	r3
 19661              	.LVL2508:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 19662              		.loc 1 2057 0
 19663 0058 C307     		lsls	r3, r0, #31
 19664 005a 03D5     		bpl	.L2502
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 19665              		.loc 1 2058 0
 19666 005c 0320     		movs	r0, #3
 19667              	.LVL2509:
 19668 005e F3E7     		b	.L2497
 19669              	.LVL2510:
 19670              	.L2465:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 19671              		.loc 1 2038 0
 19672 0060 0C20     		movs	r0, #12
 19673 0062 F1E7     		b	.L2497
 19674              	.LVL2511:
 19675              	.L2502:
2059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 19676              		.loc 1 2059 0
 19677 0064 00F00402 		and	r2, r0, #4
 19678 0068 D2B2     		uxtb	r2, r2
 19679 006a 002A     		cmp	r2, #0
 19680 006c E3D1     		bne	.L2444
 19681              	.LVL2512:
 19682              	.LBB1737:
 19683              	.LBB1738:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 19684              		.loc 1 1987 0
 19685 006e 05F13008 		add	r8, r5, #48
 19686 0072 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 19687              	.LVL2513:
 19688 0074 774F     		ldr	r7, .L2507+12
 19689 0076 4146     		mov	r1, r8
 19690 0078 0123     		movs	r3, #1
 19691 007a B847     		blx	r7
 19692              	.LVL2514:
 19693 007c 0028     		cmp	r0, #0
 19694 007e 00F0D380 		beq	.L2503
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 19695              		.loc 1 1988 0
 19696 0082 0323     		movs	r3, #3
 19697              	.L2445:
 19698              	.LBE1738:
 19699              	.LBE1737:
 19700              	.LBB1744:
 19701              	.LBB1745:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 19702              		.loc 1 2066 0
 19703 0084 4FF00009 		mov	r9, #0
 19704              	.LVL2515:
 19705              	.L2460:
 19706              	.LBE1745:
 19707              	.LBE1744:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 19708              		.loc 1 2078 0
 19709 0088 032B     		cmp	r3, #3
 19710 008a 00F0DA80 		beq	.L2474
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 19711              		.loc 1 2079 0
 19712 008e 13B1     		cbz	r3, .L2446
 19713              	.LVL2516:
 19714              	.L2449:
 19715 0090 0D20     		movs	r0, #13
 19716 0092 D9E7     		b	.L2497
 19717              	.LVL2517:
 19718              	.L2470:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 19719              		.loc 1 2066 0
 19720 0094 8146     		mov	r9, r0
 19721              	.LVL2518:
 19722              	.L2446:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 19723              		.loc 1 2083 0
 19724 0096 95F83C20 		ldrb	r2, [r5, #60]	@ zero_extendqisi2
 19725 009a 95F83B30 		ldrb	r3, [r5, #59]	@ zero_extendqisi2
 19726 009e 43EA0223 		orr	r3, r3, r2, lsl #8
 19727 00a2 B3F5007F 		cmp	r3, #512
 19728 00a6 F3D1     		bne	.L2449
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 19729              		.loc 1 2086 0
 19730 00a8 95F84720 		ldrb	r2, [r5, #71]	@ zero_extendqisi2
 19731 00ac 95F84630 		ldrb	r3, [r5, #70]	@ zero_extendqisi2
 19732              	.LVL2519:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 19733              		.loc 1 2087 0
 19734 00b0 53EA0222 		orrs	r2, r3, r2, lsl #8
 19735              	.LVL2520:
 19736 00b4 0DD1     		bne	.L2450
 19737 00b6 95F85610 		ldrb	r1, [r5, #86]	@ zero_extendqisi2
 19738 00ba 95F85700 		ldrb	r0, [r5, #87]	@ zero_extendqisi2
 19739 00be 95F85430 		ldrb	r3, [r5, #84]	@ zero_extendqisi2
 19740 00c2 95F85520 		ldrb	r2, [r5, #85]	@ zero_extendqisi2
 19741              	.LVL2521:
 19742 00c6 0904     		lsls	r1, r1, #16
 19743 00c8 41EA0061 		orr	r1, r1, r0, lsl #24
 19744 00cc 0B43     		orrs	r3, r3, r1
 19745 00ce 43EA0222 		orr	r2, r3, r2, lsl #8
 19746              	.LVL2522:
 19747              	.L2450:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 19748              		.loc 1 2090 0
 19749 00d2 95F840B0 		ldrb	fp, [r5, #64]	@ zero_extendqisi2
 19750              	.LVL2523:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 19751              		.loc 1 2088 0
 19752 00d6 EA61     		str	r2, [r5, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 19753              		.loc 1 2091 0
 19754 00d8 0BF1FF33 		add	r3, fp, #-1
 19755 00dc 012B     		cmp	r3, #1
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 19756              		.loc 1 2090 0
 19757 00de 85F803B0 		strb	fp, [r5, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 19758              		.loc 1 2091 0
 19759 00e2 D5D8     		bhi	.L2449
 19760              	.LVL2524:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 19761              		.loc 1 2094 0
 19762 00e4 95F83D30 		ldrb	r3, [r5, #61]	@ zero_extendqisi2
 19763              	.LVL2525:
 19764 00e8 AB70     		strb	r3, [r5, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 19765              		.loc 1 2095 0
 19766 00ea 002B     		cmp	r3, #0
 19767 00ec D0D0     		beq	.L2449
 19768 00ee 591E     		subs	r1, r3, #1
 19769 00f0 1942     		tst	r1, r3
 19770 00f2 CDD1     		bne	.L2449
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 19771              		.loc 1 2097 0
 19772 00f4 95F84110 		ldrb	r1, [r5, #65]	@ zero_extendqisi2
 19773 00f8 95F84200 		ldrb	r0, [r5, #66]	@ zero_extendqisi2
 19774 00fc 41EA0020 		orr	r0, r1, r0, lsl #8
 19775 0100 81B2     		uxth	r1, r0
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 19776              		.loc 1 2098 0
 19777 0102 0007     		lsls	r0, r0, #28
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 19778              		.loc 1 2097 0
 19779 0104 2981     		strh	r1, [r5, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 19780              		.loc 1 2098 0
 19781 0106 C3D1     		bne	.L2449
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 19782              		.loc 1 2100 0
 19783 0108 95F844A0 		ldrb	sl, [r5, #68]	@ zero_extendqisi2
 19784 010c 95F84300 		ldrb	r0, [r5, #67]	@ zero_extendqisi2
 19785              	.LVL2526:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 19786              		.loc 1 2101 0
 19787 0110 50EA0A2A 		orrs	sl, r0, sl, lsl #8
 19788              	.LVL2527:
 19789 0114 15D1     		bne	.L2451
 19790 0116 95F85000 		ldrb	r0, [r5, #80]	@ zero_extendqisi2
 19791 011a 95F852C0 		ldrb	ip, [r5, #82]	@ zero_extendqisi2
 19792 011e 95F853A0 		ldrb	sl, [r5, #83]	@ zero_extendqisi2
 19793              	.LVL2528:
 19794 0122 0090     		str	r0, [sp, #0]
 19795 0124 4FEA0C4C 		lsl	ip, ip, #16
 19796 0128 95F85100 		ldrb	r0, [r5, #81]	@ zero_extendqisi2
 19797 012c 4CEA0A6C 		orr	ip, ip, sl, lsl #24
 19798 0130 DDF800A0 		ldr	sl, [sp, #0]
 19799 0134 0190     		str	r0, [sp, #4]
 19800 0136 4CEA0A00 		orr	r0, ip, sl
 19801 013a DDF804C0 		ldr	ip, [sp, #4]
 19802 013e 40EA0C2A 		orr	sl, r0, ip, lsl #8
 19803              	.LVL2529:
 19804              	.L2451:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 19805              		.loc 1 2103 0
 19806 0142 95F83FC0 		ldrb	ip, [r5, #63]	@ zero_extendqisi2
 19807 0146 95F83E00 		ldrb	r0, [r5, #62]	@ zero_extendqisi2
 19808              	.LVL2530:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 19809              		.loc 1 2104 0
 19810 014a 50EA0C2C 		orrs	ip, r0, ip, lsl #8
 19811              	.LVL2531:
 19812 014e 9FD0     		beq	.L2449
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 19813              		.loc 1 2092 0
 19814 0150 0BFB02FB 		mul	fp, fp, r2
 19815              	.LVL2532:
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 19816              		.loc 1 2107 0
 19817 0154 0CEB1110 		add	r0, ip, r1, lsr #4
 19818              	.LVL2533:
 19819 0158 5844     		add	r0, r0, fp
 19820              	.LVL2534:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 19821              		.loc 1 2108 0
 19822 015a 5045     		cmp	r0, sl
 19823 015c 98D8     		bhi	.L2449
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 19824              		.loc 1 2109 0
 19825 015e C0EB0A0A 		rsb	sl, r0, sl
 19826              	.LVL2535:
 19827 0162 BAFBF3F3 		udiv	r3, sl, r3
 19828              	.LVL2536:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 19829              		.loc 1 2110 0
 19830 0166 002B     		cmp	r3, #0
 19831 0168 92D0     		beq	.L2449
 19832              	.LVL2537:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 19833              		.loc 1 2112 0
 19834 016a 40F6F57A 		movw	sl, #4085
 19835 016e 5345     		cmp	r3, sl
 19836 0170 40F27481 		bls	.L2475
 19837              	.LVL2538:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 19838              		.loc 1 2113 0
 19839 0174 0AF5704A 		add	sl, sl, #61440
 19840 0178 5345     		cmp	r3, sl
 19841 017a 00F25081 		bhi	.L2453
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 19842              		.loc 1 2112 0
 19843 017e 4FF0020A 		mov	sl, #2
 19844              	.LVL2539:
 19845              	.L2452:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 19846              		.loc 1 2116 0
 19847 0182 0233     		adds	r3, r3, #2
 19848              	.LVL2540:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 19849              		.loc 1 2117 0
 19850 0184 4844     		add	r0, r0, r9
 19851              	.LVL2541:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 19852              		.loc 1 2118 0
 19853 0186 CC44     		add	ip, r9, ip
 19854              	.LVL2542:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 19855              		.loc 1 2116 0
 19856 0188 AB61     		str	r3, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 19857              		.loc 1 2117 0
 19858 018a A862     		str	r0, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 19859              		.loc 1 2118 0
 19860 018c C5F820C0 		str	ip, [r5, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 19861              		.loc 1 2124 0
 19862 0190 0029     		cmp	r1, #0
 19863 0192 3FF47DAF 		beq	.L2449
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 19864              		.loc 1 2125 0
 19865 0196 0BEB0C01 		add	r1, fp, ip
 19866              	.LVL2543:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 19867              		.loc 1 2127 0
 19868 019a BAF1020F 		cmp	sl, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 19869              		.loc 1 2125 0
 19870 019e 6962     		str	r1, [r5, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 19871              		.loc 1 2127 0
 19872 01a0 00F03B81 		beq	.L2504
 19873 01a4 0321     		movs	r1, #3
 19874 01a6 01FB03F1 		mul	r1, r1, r3
 19875 01aa 03F00103 		and	r3, r3, #1
 19876              	.LVL2544:
 19877 01ae 03EB5103 		add	r3, r3, r1, lsr #1
 19878 01b2 4FF0010A 		mov	sl, #1
 19879              	.LVL2545:
 19880              	.L2454:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 19881              		.loc 1 2129 0
 19882 01b6 03F2FF13 		addw	r3, r3, #511
 19883              	.LVL2546:
 19884 01ba B2EB532F 		cmp	r2, r3, lsr #9
 19885 01be FFF467AF 		bcc	.L2449
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 19886              		.loc 1 2135 0
 19887 01c2 0023     		movs	r3, #0
 19888              	.LVL2547:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 19889              		.loc 1 2134 0
 19890 01c4 4FF0FF32 		mov	r2, #-1
 19891              	.LVL2548:
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 19892              		.loc 1 2138 0
 19893 01c8 BAF1030F 		cmp	sl, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 19894              		.loc 1 2134 0
 19895 01cc 2A61     		str	r2, [r5, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 19896              		.loc 1 2135 0
 19897 01ce EB60     		str	r3, [r5, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 19898              		.loc 1 2138 0
 19899 01d0 00F0C380 		beq	.L2505
 19900              	.LVL2549:
 19901              	.L2457:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 19902              		.loc 1 2151 0
 19903 01d4 2049     		ldr	r1, .L2507+16
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 19904              		.loc 1 2150 0
 19905 01d6 85F800A0 		strb	sl, [r5, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 19906              		.loc 1 2151 0
 19907 01da 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 19908              		.loc 1 2152 0
 19909 01dc 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 19910              		.loc 1 2151 0
 19911 01de 0132     		adds	r2, r2, #1
 19912 01e0 0A80     		strh	r2, [r1, #0]	@ movhi
 19913 01e2 EA80     		strh	r2, [r5, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 19914              		.loc 1 2152 0
 19915 01e4 EB62     		str	r3, [r5, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 19916              		.loc 1 2153 0
 19917 01e6 2B71     		strb	r3, [r5, #4]
 19918              	.LVL2550:
 19919              	.L2443:
 19920              	.LBE1758:
 19921              	.LBE1761:
3386:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(dj);
 19922              		.loc 1 3386 0
 19923 01e8 1C4B     		ldr	r3, .L2507+20
 19924 01ea 0C93     		str	r3, [sp, #48]
 19925 01ec 02AB     		add	r3, sp, #8
 19926 01ee 0B93     		str	r3, [sp, #44]
3387:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 19927              		.loc 1 3387 0
 19928 01f0 05A8     		add	r0, sp, #20
 19929              	.LVL2551:
 19930 01f2 2146     		mov	r1, r4
 19931 01f4 1A4B     		ldr	r3, .L2507+24
 19932 01f6 9847     		blx	r3
 19933              	.LVL2552:
3391:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {
 19934              		.loc 1 3391 0
 19935 01f8 0028     		cmp	r0, #0
 19936 01fa 7FF425AF 		bne	.L2497
3392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			dir = dj.dir;
 19937              		.loc 1 3392 0
 19938 01fe 0A9B     		ldr	r3, [sp, #40]
 19939              	.LVL2553:
3393:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!dir) {					/* Root directory */
 19940              		.loc 1 3393 0
 19941 0200 83B1     		cbz	r3, .L2476
3396:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_WORD(dir+DIR_WrtTime, fno->ftime);
 19942              		.loc 1 3396 0
 19943 0202 F188     		ldrh	r1, [r6, #6]
3398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
 19944              		.loc 1 3398 0
 19945 0204 059A     		ldr	r2, [sp, #20]
3396:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_WORD(dir+DIR_WrtTime, fno->ftime);
 19946              		.loc 1 3396 0
 19947 0206 9975     		strb	r1, [r3, #22]
 19948 0208 F188     		ldrh	r1, [r6, #6]
 19949 020a 090A     		lsrs	r1, r1, #8
 19950 020c D975     		strb	r1, [r3, #23]
3397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				ST_WORD(dir+DIR_WrtDate, fno->fdate);
 19951              		.loc 1 3397 0
 19952 020e B188     		ldrh	r1, [r6, #4]
 19953 0210 1976     		strb	r1, [r3, #24]
 19954 0212 B188     		ldrh	r1, [r6, #4]
 19955 0214 090A     		lsrs	r1, r1, #8
 19956 0216 5976     		strb	r1, [r3, #25]
3398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				dj.fs->wflag = 1;
 19957              		.loc 1 3398 0
 19958 0218 0123     		movs	r3, #1
 19959              	.LVL2554:
 19960 021a 1371     		strb	r3, [r2, #4]
3399:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = sync(dj.fs);
 19961              		.loc 1 3399 0
 19962 021c 1046     		mov	r0, r2
 19963              	.LVL2555:
 19964 021e 114B     		ldr	r3, .L2507+28
 19965 0220 9847     		blx	r3
 19966              	.LVL2556:
 19967 0222 11E7     		b	.L2497
 19968              	.LVL2557:
 19969              	.L2476:
3394:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_INVALID_NAME;
 19970              		.loc 1 3394 0
 19971 0224 0620     		movs	r0, #6
 19972              	.LVL2558:
 19973 0226 0FE7     		b	.L2497
 19974              	.LVL2559:
 19975              	.L2503:
 19976              	.LBB1762:
 19977              	.LBB1759:
 19978              	.LBB1752:
 19979              	.LBB1741:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 19980              		.loc 1 1989 0
 19981 0228 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 19982 022c 95F82FA2 		ldrb	sl, [r5, #559]	@ zero_extendqisi2
 19983 0230 43EA0A2A 		orr	sl, r3, sl, lsl #8
 19984 0234 0C4B     		ldr	r3, .L2507+32
 19985 0236 0FFA8AFA 		sxth	sl, sl
 19986 023a 9A45     		cmp	sl, r3
 19987 023c 16D0     		beq	.L2506
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 19988              		.loc 1 1990 0
 19989 023e 0223     		movs	r3, #2
 19990 0240 20E7     		b	.L2445
 19991              	.LVL2560:
 19992              	.L2474:
 19993              	.LBE1741:
 19994              	.LBE1752:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 19995              		.loc 1 2078 0
 19996 0242 0120     		movs	r0, #1
 19997              	.LVL2561:
 19998 0244 00E7     		b	.L2497
 19999              	.L2508:
 20000 0246 00BF     		.align	2
 20001              	.L2507:
 20002 0248 00000000 		.word	.LANCHOR2
 20003 024c 00000000 		.word	disk_status
 20004 0250 00000000 		.word	disk_initialize
 20005 0254 00000000 		.word	disk_read
 20006 0258 00000000 		.word	.LANCHOR3
 20007 025c 00000000 		.word	.LANCHOR4
 20008 0260 00000000 		.word	follow_path
 20009 0264 00000000 		.word	sync
 20010 0268 55AAFFFF 		.word	-21931
 20011              	.LVL2562:
 20012              	.L2506:
 20013              	.LBB1753:
 20014              	.LBB1742:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 20015              		.loc 1 1992 0
 20016 026c 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 20017 0270 95F869C0 		ldrb	ip, [r5, #105]	@ zero_extendqisi2
 20018 0274 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 20019 0278 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 20020 027c DFF8E4B1 		ldr	fp, .L2509
 20021 0280 0904     		lsls	r1, r1, #16
 20022 0282 41EA0C61 		orr	r1, r1, ip, lsl #24
 20023 0286 0B43     		orrs	r3, r3, r1
 20024 0288 43EA0223 		orr	r3, r3, r2, lsl #8
 20025 028c 23F07F43 		bic	r3, r3, #-16777216
 20026 0290 5B45     		cmp	r3, fp
 20027 0292 5ED0     		beq	.L2469
 20028              	.LVL2563:
 20029              	.LBB1739:
 20030              	.LBB1740:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 20031              		.loc 1 1994 0
 20032 0294 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 20033 0298 95F885C0 		ldrb	ip, [r5, #133]	@ zero_extendqisi2
 20034 029c 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 20035 02a0 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 20036 02a4 0904     		lsls	r1, r1, #16
 20037 02a6 41EA0C61 		orr	r1, r1, ip, lsl #24
 20038 02aa 0B43     		orrs	r3, r3, r1
 20039 02ac 43EA0223 		orr	r3, r3, r2, lsl #8
 20040 02b0 23F07F43 		bic	r3, r3, #-16777216
 20041              	.LBE1740:
 20042              	.LBE1739:
 20043              	.LBE1742:
 20044              	.LBE1753:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 20045              		.loc 1 2068 0
 20046 02b4 5B45     		cmp	r3, fp
 20047 02b6 3FF4EDAE 		beq	.L2470
 20048              	.LVL2564:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 20049              		.loc 1 2073 0
 20050 02ba 95F8F231 		ldrb	r3, [r5, #498]	@ zero_extendqisi2
 20051 02be 002B     		cmp	r3, #0
 20052 02c0 3FF4E6AE 		beq	.L2449
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 20053              		.loc 1 2074 0
 20054 02c4 95F8F821 		ldrb	r2, [r5, #504]	@ zero_extendqisi2
 20055 02c8 95F8F911 		ldrb	r1, [r5, #505]	@ zero_extendqisi2
 20056 02cc 95F8F631 		ldrb	r3, [r5, #502]	@ zero_extendqisi2
 20057 02d0 95F8F791 		ldrb	r9, [r5, #503]	@ zero_extendqisi2
 20058              	.LBB1754:
 20059              	.LBB1750:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 20060              		.loc 1 1987 0
 20061 02d4 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 20062              	.LBE1750:
 20063              	.LBE1754:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 20064              		.loc 1 2074 0
 20065 02d6 1204     		lsls	r2, r2, #16
 20066 02d8 42EA0162 		orr	r2, r2, r1, lsl #24
 20067 02dc 1343     		orrs	r3, r3, r2
 20068 02de 43EA0929 		orr	r9, r3, r9, lsl #8
 20069              	.LVL2565:
 20070              	.LBB1755:
 20071              	.LBB1751:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 20072              		.loc 1 1987 0
 20073 02e2 4146     		mov	r1, r8
 20074 02e4 4A46     		mov	r2, r9
 20075 02e6 0123     		movs	r3, #1
 20076 02e8 B847     		blx	r7
 20077              	.LVL2566:
 20078 02ea 0028     		cmp	r0, #0
 20079 02ec A9D1     		bne	.L2474
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 20080              		.loc 1 1989 0
 20081 02ee 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 20082 02f2 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 20083 02f6 43EA0223 		orr	r3, r3, r2, lsl #8
 20084 02fa 1BB2     		sxth	r3, r3
 20085 02fc 5345     		cmp	r3, sl
 20086 02fe 7FF4C7AE 		bne	.L2449
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 20087              		.loc 1 1992 0
 20088 0302 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 20089 0306 95F86900 		ldrb	r0, [r5, #105]	@ zero_extendqisi2
 20090 030a 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 20091 030e 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 20092 0312 0904     		lsls	r1, r1, #16
 20093 0314 41EA0061 		orr	r1, r1, r0, lsl #24
 20094 0318 0B43     		orrs	r3, r3, r1
 20095 031a 43EA0223 		orr	r3, r3, r2, lsl #8
 20096 031e 23F07F43 		bic	r3, r3, #-16777216
 20097 0322 5B45     		cmp	r3, fp
 20098 0324 3FF4B7AE 		beq	.L2446
 20099              	.LVL2567:
 20100              	.LBB1746:
 20101              	.LBB1747:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 20102              		.loc 1 1994 0
 20103 0328 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 20104 032c 95F88500 		ldrb	r0, [r5, #133]	@ zero_extendqisi2
 20105 0330 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 20106 0334 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 20107 0338 0904     		lsls	r1, r1, #16
 20108 033a 41EA0061 		orr	r1, r1, r0, lsl #24
 20109 033e 0B43     		orrs	r3, r3, r1
 20110 0340 43EA0222 		orr	r2, r3, r2, lsl #8
 20111              	.LBE1747:
 20112              	.LBE1746:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 20113              		.loc 1 1995 0
 20114 0344 474B     		ldr	r3, .L2509
 20115              	.LBB1749:
 20116              	.LBB1748:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 20117              		.loc 1 1994 0
 20118 0346 22F07F42 		bic	r2, r2, #-16777216
 20119              	.LBE1748:
 20120              	.LBE1749:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 20121              		.loc 1 1995 0
 20122 034a D31A     		subs	r3, r2, r3
 20123 034c 18BF     		it	ne
 20124 034e 0123     		movne	r3, #1
 20125 0350 9AE6     		b	.L2460
 20126              	.LVL2568:
 20127              	.L2469:
 20128              	.LBE1751:
 20129              	.LBE1755:
 20130              	.LBB1756:
 20131              	.LBB1743:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 20132              		.loc 1 1993 0
 20133 0352 0346     		mov	r3, r0
 20134 0354 96E6     		b	.L2445
 20135              	.LVL2569:
 20136              	.L2501:
 20137              	.LBE1743:
 20138              	.LBE1756:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 20139              		.loc 1 2025 0
 20140 0356 0234     		adds	r4, r4, #2
 20141              	.LVL2570:
 20142 0358 5BE6     		b	.L2440
 20143              	.LVL2571:
 20144              	.L2505:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 20145              		.loc 1 2140 0
 20146 035a 95F86110 		ldrb	r1, [r5, #97]	@ zero_extendqisi2
 20147 035e 95F86020 		ldrb	r2, [r5, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 20148              		.loc 1 2139 0
 20149 0362 6B71     		strb	r3, [r5, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 20150              		.loc 1 2140 0
 20151 0364 42EA0122 		orr	r2, r2, r1, lsl #8
 20152 0368 4A44     		add	r2, r9, r2
 20153 036a 6A61     		str	r2, [r5, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 20154              		.loc 1 2141 0
 20155 036c 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 20156 036e 4146     		mov	r1, r8
 20157 0370 0123     		movs	r3, #1
 20158 0372 B847     		blx	r7
 20159              	.LVL2572:
 20160 0374 0028     		cmp	r0, #0
 20161 0376 7FF42DAF 		bne	.L2457
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 20162              		.loc 1 2142 0
 20163 037a 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 20164 037e 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 20165 0382 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 20166              		.loc 1 2141 0
 20167 0386 384B     		ldr	r3, .L2509+4
 20168 0388 12B2     		sxth	r2, r2
 20169 038a 9A42     		cmp	r2, r3
 20170 038c 7FF422AF 		bne	.L2457
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 20171              		.loc 1 2143 0
 20172 0390 95F83210 		ldrb	r1, [r5, #50]	@ zero_extendqisi2
 20173 0394 95F83300 		ldrb	r0, [r5, #51]	@ zero_extendqisi2
 20174 0398 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 20175 039c 95F83120 		ldrb	r2, [r5, #49]	@ zero_extendqisi2
 20176 03a0 0904     		lsls	r1, r1, #16
 20177 03a2 41EA0061 		orr	r1, r1, r0, lsl #24
 20178 03a6 0B43     		orrs	r3, r3, r1
 20179 03a8 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 20180              		.loc 1 2142 0
 20181 03ac 2F4B     		ldr	r3, .L2509+8
 20182 03ae 9A42     		cmp	r2, r3
 20183 03b0 7FF410AF 		bne	.L2457
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 20184              		.loc 1 2144 0
 20185 03b4 95F81612 		ldrb	r1, [r5, #534]	@ zero_extendqisi2
 20186 03b8 95F81702 		ldrb	r0, [r5, #535]	@ zero_extendqisi2
 20187 03bc 95F81432 		ldrb	r3, [r5, #532]	@ zero_extendqisi2
 20188 03c0 95F81522 		ldrb	r2, [r5, #533]	@ zero_extendqisi2
 20189 03c4 0904     		lsls	r1, r1, #16
 20190 03c6 41EA0061 		orr	r1, r1, r0, lsl #24
 20191 03ca 0B43     		orrs	r3, r3, r1
 20192 03cc 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 20193              		.loc 1 2143 0
 20194 03d0 274B     		ldr	r3, .L2509+12
 20195 03d2 9A42     		cmp	r2, r3
 20196 03d4 7FF4FEAE 		bne	.L2457
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20197              		.loc 1 2145 0
 20198 03d8 95F81EE2 		ldrb	lr, [r5, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20199              		.loc 1 2146 0
 20200 03dc 95F81A72 		ldrb	r7, [r5, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20201              		.loc 1 2145 0
 20202 03e0 95F81F82 		ldrb	r8, [r5, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20203              		.loc 1 2146 0
 20204 03e4 95F81BC2 		ldrb	ip, [r5, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20205              		.loc 1 2145 0
 20206 03e8 95F81C22 		ldrb	r2, [r5, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20207              		.loc 1 2146 0
 20208 03ec 95F81832 		ldrb	r3, [r5, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20209              		.loc 1 2145 0
 20210 03f0 95F81D02 		ldrb	r0, [r5, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20211              		.loc 1 2146 0
 20212 03f4 95F81912 		ldrb	r1, [r5, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20213              		.loc 1 2145 0
 20214 03f8 4FEA0E4E 		lsl	lr, lr, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20215              		.loc 1 2146 0
 20216 03fc 3F04     		lsls	r7, r7, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20217              		.loc 1 2145 0
 20218 03fe 4EEA086E 		orr	lr, lr, r8, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20219              		.loc 1 2146 0
 20220 0402 47EA0C67 		orr	r7, r7, ip, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20221              		.loc 1 2145 0
 20222 0406 4EEA0202 		orr	r2, lr, r2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20223              		.loc 1 2146 0
 20224 040a 3B43     		orrs	r3, r3, r7
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20225              		.loc 1 2145 0
 20226 040c 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20227              		.loc 1 2146 0
 20228 0410 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 20229              		.loc 1 2145 0
 20230 0414 EA60     		str	r2, [r5, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 20231              		.loc 1 2146 0
 20232 0416 2B61     		str	r3, [r5, #16]
 20233 0418 DCE6     		b	.L2457
 20234              	.LVL2573:
 20235              	.L2504:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 20236              		.loc 1 2127 0
 20237 041a 5B00     		lsls	r3, r3, #1
 20238              	.LVL2574:
 20239 041c CBE6     		b	.L2454
 20240              	.LVL2575:
 20241              	.L2453:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 20242              		.loc 1 2116 0
 20243 041e 0233     		adds	r3, r3, #2
 20244              	.LVL2576:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 20245              		.loc 1 2117 0
 20246 0420 4844     		add	r0, r0, r9
 20247              	.LVL2577:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 20248              		.loc 1 2118 0
 20249 0422 CC44     		add	ip, r9, ip
 20250              	.LVL2578:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 20251              		.loc 1 2116 0
 20252 0424 AB61     		str	r3, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 20253              		.loc 1 2117 0
 20254 0426 A862     		str	r0, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 20255              		.loc 1 2118 0
 20256 0428 C5F820C0 		str	ip, [r5, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 20257              		.loc 1 2120 0
 20258 042c 0029     		cmp	r1, #0
 20259 042e 7FF42FAE 		bne	.L2449
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 20260              		.loc 1 2121 0
 20261 0432 95F85EC0 		ldrb	ip, [r5, #94]	@ zero_extendqisi2
 20262 0436 95F85FA0 		ldrb	sl, [r5, #95]	@ zero_extendqisi2
 20263 043a 95F85C10 		ldrb	r1, [r5, #92]	@ zero_extendqisi2
 20264              	.LVL2579:
 20265 043e 95F85D00 		ldrb	r0, [r5, #93]	@ zero_extendqisi2
 20266 0442 4FEA0C4C 		lsl	ip, ip, #16
 20267 0446 4CEA0A6C 		orr	ip, ip, sl, lsl #24
 20268 044a 4CEA0101 		orr	r1, ip, r1
 20269 044e 41EA0021 		orr	r1, r1, r0, lsl #8
 20270 0452 6962     		str	r1, [r5, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 20271              		.loc 1 2122 0
 20272 0454 9B00     		lsls	r3, r3, #2
 20273              	.LVL2580:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 20274              		.loc 1 2113 0
 20275 0456 4FF0030A 		mov	sl, #3
 20276 045a ACE6     		b	.L2454
 20277              	.LVL2581:
 20278              	.L2475:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 20279              		.loc 1 2111 0
 20280 045c 4FF0010A 		mov	sl, #1
 20281 0460 8FE6     		b	.L2452
 20282              	.L2510:
 20283 0462 00BF     		.align	2
 20284              	.L2509:
 20285 0464 46415400 		.word	5521734
 20286 0468 55AAFFFF 		.word	-21931
 20287 046c 52526141 		.word	1096897106
 20288 0470 72724161 		.word	1631679090
 20289              	.LBE1759:
 20290              	.LBE1762:
 20291              		.cfi_endproc
 20292              	.LFE43:
 20294              		.section	.text.f_rename,"ax",%progbits
 20295              		.align	2
 20296              		.global	f_rename
 20297              		.thumb
 20298              		.thumb_func
 20300              	f_rename:
 20301              	.LFB44:
3418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 20302              		.loc 1 3418 0
 20303              		.cfi_startproc
 20304              		@ args = 0, pretend = 0, frame = 120
 20305              		@ frame_needed = 0, uses_anonymous_args = 0
 20306              	.LVL2582:
 20307 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 20308              	.LCFI50:
 20309              		.cfi_def_cfa_offset 36
 20310              		.cfi_offset 4, -36
 20311              		.cfi_offset 5, -32
 20312              		.cfi_offset 6, -28
 20313              		.cfi_offset 7, -24
 20314              		.cfi_offset 8, -20
 20315              		.cfi_offset 9, -16
 20316              		.cfi_offset 10, -12
 20317              		.cfi_offset 11, -8
 20318              		.cfi_offset 14, -4
 20319              	.LBB1781:
 20320              	.LBB1782:
2023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	vol = p[0] - '0';					/* Is there a drive number? */
 20321              		.loc 1 2023 0
 20322 0004 0378     		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 20323 0006 303B     		subs	r3, r3, #48
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 20324              		.loc 1 2024 0
 20325 0008 092B     		cmp	r3, #9
 20326              	.LBE1782:
 20327              	.LBE1781:
3418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 20328              		.loc 1 3418 0
 20329 000a 9FB0     		sub	sp, sp, #124
 20330              	.LCFI51:
 20331              		.cfi_def_cfa_offset 160
 20332              	.LVL2583:
3418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 20333              		.loc 1 3418 0
 20334 000c 0446     		mov	r4, r0
 20335              	.LVL2584:
 20336 000e 0E46     		mov	r6, r1
 20337              	.LBB1809:
 20338              	.LBB1803:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 20339              		.loc 1 2024 0
 20340 0010 13D9     		bls	.L2593
 20341              	.LVL2585:
 20342              	.L2512:
2037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*rfs = fs = FatFs[vol];				/* Return pointer to the corresponding file system object */
 20343              		.loc 1 2037 0
 20344 0012 954B     		ldr	r3, .L2601
 20345              	.LVL2586:
 20346 0014 1D68     		ldr	r5, [r3, #0]
 20347              	.LVL2587:
 20348 0016 0C95     		str	r5, [sp, #48]
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 20349              		.loc 1 2038 0
 20350 0018 002D     		cmp	r5, #0
 20351 001a 21D0     		beq	.L2546
2042:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fs_type) {					/* If the logical drive has been mounted */
 20352              		.loc 1 2042 0
 20353 001c 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 20354 001e B3B1     		cbz	r3, .L2514
2043:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		stat = disk_status(fs->drv);
 20355              		.loc 1 2043 0
 20356 0020 924B     		ldr	r3, .L2601+4
 20357 0022 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 20358 0024 9847     		blx	r3
 20359              	.LVL2588:
2044:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized (has not been changed)
 20360              		.loc 1 2044 0
 20361 0026 C307     		lsls	r3, r0, #31
 20362 0028 11D4     		bmi	.L2514
2045:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check write protection if needed */
 20363              		.loc 1 2045 0
 20364 002a 00F00403 		and	r3, r0, #4
 20365 002e DBB2     		uxtb	r3, r3
 20366 0030 002B     		cmp	r3, #0
 20367 0032 00F0DB80 		beq	.L2515
 20368              	.LVL2589:
 20369              	.L2516:
2046:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				return FR_WRITE_PROTECTED;
 20370              		.loc 1 2046 0
 20371 0036 0A20     		movs	r0, #10
 20372 0038 06E0     		b	.L2572
 20373              	.LVL2590:
 20374              	.L2593:
2024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol <= 9 && p[1] == ':') {		/* Found a drive number, get and strip it */
 20375              		.loc 1 2024 0
 20376 003a 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 20377 003c 3A2A     		cmp	r2, #58
 20378 003e E8D1     		bne	.L2512
 20379              	.LVL2591:
2036:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_INVALID_DRIVE;
 20380              		.loc 1 2036 0
 20381 0040 0B20     		movs	r0, #11
 20382              	.LVL2592:
2035:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (vol >= _VOLUMES) 				/* Is the drive number valid? */
 20383              		.loc 1 2035 0
 20384 0042 002B     		cmp	r3, #0
 20385 0044 00F0EB81 		beq	.L2594
 20386              	.LVL2593:
 20387              	.L2572:
 20388              	.LBE1803:
 20389              	.LBE1809:
3479:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 20390              		.loc 1 3479 0
 20391 0048 1FB0     		add	sp, sp, #124
 20392 004a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 20393              	.LVL2594:
 20394              	.L2514:
 20395              	.LBB1810:
 20396              	.LBB1804:
2054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
 20397              		.loc 1 2054 0
 20398 004e 0020     		movs	r0, #0
 20399 0050 2870     		strb	r0, [r5, #0]
2055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 20400              		.loc 1 2055 0
 20401 0052 6870     		strb	r0, [r5, #1]
2056:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize low level disk I/O layer */
 20402              		.loc 1 2056 0
 20403 0054 864B     		ldr	r3, .L2601+8
 20404 0056 9847     		blx	r3
 20405              	.LVL2595:
2057:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 20406              		.loc 1 2057 0
 20407 0058 C107     		lsls	r1, r0, #31
 20408 005a 03D5     		bpl	.L2595
2058:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no media or hard error */
 20409              		.loc 1 2058 0
 20410 005c 0320     		movs	r0, #3
 20411              	.LVL2596:
 20412 005e F3E7     		b	.L2572
 20413              	.LVL2597:
 20414              	.L2546:
2038:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 20415              		.loc 1 2038 0
 20416 0060 0C20     		movs	r0, #12
 20417 0062 F1E7     		b	.L2572
 20418              	.LVL2598:
 20419              	.L2595:
2059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!_FS_READONLY && chk_wp && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 20420              		.loc 1 2059 0
 20421 0064 00F00402 		and	r2, r0, #4
 20422 0068 D2B2     		uxtb	r2, r2
 20423 006a 002A     		cmp	r2, #0
 20424 006c E3D1     		bne	.L2516
 20425              	.LVL2599:
 20426              	.LBB1783:
 20427              	.LBB1784:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 20428              		.loc 1 1987 0
 20429 006e 05F13009 		add	r9, r5, #48
 20430 0072 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 20431              	.LVL2600:
 20432 0074 DFF80C82 		ldr	r8, .L2601+28
 20433 0078 4946     		mov	r1, r9
 20434 007a 0123     		movs	r3, #1
 20435 007c C047     		blx	r8
 20436              	.LVL2601:
 20437 007e 0028     		cmp	r0, #0
 20438 0080 00F04981 		beq	.L2596
1988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 3;
 20439              		.loc 1 1988 0
 20440 0084 0323     		movs	r3, #3
 20441              	.L2517:
 20442              	.LBE1784:
 20443              	.LBE1783:
 20444              	.LBB1790:
 20445              	.LBB1791:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 20446              		.loc 1 2066 0
 20447 0086 0027     		movs	r7, #0
 20448              	.LVL2602:
 20449              	.L2540:
 20450              	.LBE1791:
 20451              	.LBE1790:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 20452              		.loc 1 2078 0
 20453 0088 032B     		cmp	r3, #3
 20454 008a 00F05381 		beq	.L2555
2079:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 20455              		.loc 1 2079 0
 20456 008e 13B1     		cbz	r3, .L2518
 20457              	.LVL2603:
 20458              	.L2521:
 20459 0090 0D20     		movs	r0, #13
 20460 0092 D9E7     		b	.L2572
 20461              	.LVL2604:
 20462              	.L2551:
2066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = check_fs(fs, bsect = 0);		/* Load sector 0 and check if it is an FAT-VBR (in SFD) */
 20463              		.loc 1 2066 0
 20464 0094 0746     		mov	r7, r0
 20465              	.LVL2605:
 20466              	.L2518:
2083:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
 20467              		.loc 1 2083 0
 20468 0096 95F83C20 		ldrb	r2, [r5, #60]	@ zero_extendqisi2
 20469 009a 95F83B30 		ldrb	r3, [r5, #59]	@ zero_extendqisi2
 20470 009e 43EA0223 		orr	r3, r3, r2, lsl #8
 20471 00a2 B3F5007F 		cmp	r3, #512
 20472 00a6 F3D1     		bne	.L2521
2086:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
 20473              		.loc 1 2086 0
 20474 00a8 95F84720 		ldrb	r2, [r5, #71]	@ zero_extendqisi2
 20475 00ac 95F84630 		ldrb	r3, [r5, #70]	@ zero_extendqisi2
 20476              	.LVL2606:
2087:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 20477              		.loc 1 2087 0
 20478 00b0 53EA0222 		orrs	r2, r3, r2, lsl #8
 20479              	.LVL2607:
 20480 00b4 0DD1     		bne	.L2522
 20481 00b6 95F85610 		ldrb	r1, [r5, #86]	@ zero_extendqisi2
 20482 00ba 95F85700 		ldrb	r0, [r5, #87]	@ zero_extendqisi2
 20483 00be 95F85430 		ldrb	r3, [r5, #84]	@ zero_extendqisi2
 20484 00c2 95F85520 		ldrb	r2, [r5, #85]	@ zero_extendqisi2
 20485              	.LVL2608:
 20486 00c6 0904     		lsls	r1, r1, #16
 20487 00c8 41EA0061 		orr	r1, r1, r0, lsl #24
 20488 00cc 0B43     		orrs	r3, r3, r1
 20489 00ce 43EA0222 		orr	r2, r3, r2, lsl #8
 20490              	.LVL2609:
 20491              	.L2522:
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 20492              		.loc 1 2090 0
 20493 00d2 95F84000 		ldrb	r0, [r5, #64]	@ zero_extendqisi2
 20494              	.LVL2610:
2088:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fsize = fasize;
 20495              		.loc 1 2088 0
 20496 00d6 EA61     		str	r2, [r5, #28]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 20497              		.loc 1 2091 0
 20498 00d8 431E     		subs	r3, r0, #1
 20499 00da 012B     		cmp	r3, #1
2090:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fats = b = fs->win[BPB_NumFATs];				/* Number of FAT copies */
 20500              		.loc 1 2090 0
 20501 00dc E870     		strb	r0, [r5, #3]
2091:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (b != 1 && b != 2) return FR_NO_FILESYSTEM;		/* (Must be 1 or 2) */
 20502              		.loc 1 2091 0
 20503 00de D7D8     		bhi	.L2521
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 20504              		.loc 1 2094 0
 20505 00e0 95F83D30 		ldrb	r3, [r5, #61]	@ zero_extendqisi2
2092:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fasize *= b;										/* Number of sectors for FAT area */
 20506              		.loc 1 2092 0
 20507 00e4 00FB02F0 		mul	r0, r0, r2
 20508              	.LVL2611:
2094:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->csize = b = fs->win[BPB_SecPerClus];			/* Number of sectors per cluster */
 20509              		.loc 1 2094 0
 20510 00e8 AB70     		strb	r3, [r5, #2]
2095:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!b || (b & (b - 1))) return FR_NO_FILESYSTEM;	/* (Must be power of 2) */
 20511              		.loc 1 2095 0
 20512 00ea 002B     		cmp	r3, #0
 20513 00ec D0D0     		beq	.L2521
 20514 00ee 591E     		subs	r1, r3, #1
 20515 00f0 1942     		tst	r1, r3
 20516 00f2 CDD1     		bne	.L2521
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 20517              		.loc 1 2097 0
 20518 00f4 95F84110 		ldrb	r1, [r5, #65]	@ zero_extendqisi2
 20519 00f8 95F842C0 		ldrb	ip, [r5, #66]	@ zero_extendqisi2
 20520 00fc 41EA0C2C 		orr	ip, r1, ip, lsl #8
 20521 0100 1FFA8CF1 		uxth	r1, ip
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 20522              		.loc 1 2098 0
 20523 0104 1CF00F0F 		tst	ip, #15
2097:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
 20524              		.loc 1 2097 0
 20525 0108 2981     		strh	r1, [r5, #8]	@ movhi
2098:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR)) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be sector 
 20526              		.loc 1 2098 0
 20527 010a C1D1     		bne	.L2521
2100:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
 20528              		.loc 1 2100 0
 20529 010c 95F844A0 		ldrb	sl, [r5, #68]	@ zero_extendqisi2
 20530 0110 95F843C0 		ldrb	ip, [r5, #67]	@ zero_extendqisi2
 20531              	.LVL2612:
2101:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 20532              		.loc 1 2101 0
 20533 0114 5CEA0A2A 		orrs	sl, ip, sl, lsl #8
 20534              	.LVL2613:
 20535 0118 17D1     		bne	.L2523
 20536 011a 95F850C0 		ldrb	ip, [r5, #80]	@ zero_extendqisi2
 20537 011e 95F852A0 		ldrb	sl, [r5, #82]	@ zero_extendqisi2
 20538              	.LVL2614:
 20539 0122 95F853B0 		ldrb	fp, [r5, #83]	@ zero_extendqisi2
 20540 0126 CDF800C0 		str	ip, [sp, #0]
 20541 012a 4FEA0A4A 		lsl	sl, sl, #16
 20542 012e 95F851C0 		ldrb	ip, [r5, #81]	@ zero_extendqisi2
 20543 0132 4AEA0B6A 		orr	sl, sl, fp, lsl #24
 20544 0136 DDF800B0 		ldr	fp, [sp, #0]
 20545 013a CDF804C0 		str	ip, [sp, #4]
 20546 013e 4AEA0B0C 		orr	ip, sl, fp
 20547 0142 DDF804B0 		ldr	fp, [sp, #4]
 20548 0146 4CEA0B2A 		orr	sl, ip, fp, lsl #8
 20549              	.LVL2615:
 20550              	.L2523:
2103:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
 20551              		.loc 1 2103 0
 20552 014a 95F83FB0 		ldrb	fp, [r5, #63]	@ zero_extendqisi2
 20553 014e 95F83EC0 		ldrb	ip, [r5, #62]	@ zero_extendqisi2
 20554              	.LVL2616:
2104:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (BPB_RsvdSecCnt must not be 0) */
 20555              		.loc 1 2104 0
 20556 0152 5CEA0B2B 		orrs	fp, ip, fp, lsl #8
 20557              	.LVL2617:
 20558 0156 9BD0     		beq	.L2521
2107:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
 20559              		.loc 1 2107 0
 20560 0158 0BEB111C 		add	ip, fp, r1, lsr #4
 20561              	.LVL2618:
 20562 015c 8444     		add	ip, ip, r0
 20563              	.LVL2619:
2108:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 20564              		.loc 1 2108 0
 20565 015e D445     		cmp	ip, sl
 20566 0160 96D8     		bhi	.L2521
2109:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 20567              		.loc 1 2109 0
 20568 0162 CCEB0A0A 		rsb	sl, ip, sl
 20569              	.LVL2620:
 20570 0166 BAFBF3F3 		udiv	r3, sl, r3
 20571              	.LVL2621:
2110:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 20572              		.loc 1 2110 0
 20573 016a 002B     		cmp	r3, #0
 20574 016c 90D0     		beq	.L2521
 20575              	.LVL2622:
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 20576              		.loc 1 2112 0
 20577 016e 40F6F57A 		movw	sl, #4085
 20578 0172 5345     		cmp	r3, sl
 20579 0174 40F2F181 		bls	.L2556
 20580              	.LVL2623:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 20581              		.loc 1 2113 0
 20582 0178 0AF5704A 		add	sl, sl, #61440
 20583 017c 5345     		cmp	r3, sl
 20584 017e 00F2CC81 		bhi	.L2525
2112:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 20585              		.loc 1 2112 0
 20586 0182 4FF0020A 		mov	sl, #2
 20587              	.LVL2624:
 20588              	.L2524:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 20589              		.loc 1 2116 0
 20590 0186 0233     		adds	r3, r3, #2
 20591              	.LVL2625:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 20592              		.loc 1 2117 0
 20593 0188 BC44     		add	ip, ip, r7
 20594              	.LVL2626:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 20595              		.loc 1 2118 0
 20596 018a BB44     		add	fp, r7, fp
 20597              	.LVL2627:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 20598              		.loc 1 2116 0
 20599 018c AB61     		str	r3, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 20600              		.loc 1 2117 0
 20601 018e C5F828C0 		str	ip, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 20602              		.loc 1 2118 0
 20603 0192 C5F820B0 		str	fp, [r5, #32]
2124:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
 20604              		.loc 1 2124 0
 20605 0196 0029     		cmp	r1, #0
 20606 0198 3FF47AAF 		beq	.L2521
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 20607              		.loc 1 2125 0
 20608 019c 5844     		add	r0, r0, fp
 20609              	.LVL2628:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 20610              		.loc 1 2127 0
 20611 019e BAF1020F 		cmp	sl, #2
2125:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 20612              		.loc 1 2125 0
 20613 01a2 6862     		str	r0, [r5, #36]
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 20614              		.loc 1 2127 0
 20615 01a4 00F0B781 		beq	.L2597
 20616 01a8 0321     		movs	r1, #3
 20617              	.LVL2629:
 20618 01aa 01FB03F1 		mul	r1, r1, r3
 20619 01ae 03F00103 		and	r3, r3, #1
 20620              	.LVL2630:
 20621 01b2 03EB5103 		add	r3, r3, r1, lsr #1
 20622 01b6 4FF0010A 		mov	sl, #1
 20623              	.LVL2631:
 20624              	.L2526:
2129:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
 20625              		.loc 1 2129 0
 20626 01ba 03F2FF13 		addw	r3, r3, #511
 20627              	.LVL2632:
 20628 01be B2EB532F 		cmp	r2, r3, lsr #9
 20629 01c2 FFF465AF 		bcc	.L2521
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 20630              		.loc 1 2135 0
 20631 01c6 0023     		movs	r3, #0
 20632              	.LVL2633:
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 20633              		.loc 1 2134 0
 20634 01c8 4FF0FF32 		mov	r2, #-1
 20635              	.LVL2634:
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 20636              		.loc 1 2138 0
 20637 01cc BAF1030F 		cmp	sl, #3
2134:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->free_clust = 0xFFFFFFFF;
 20638              		.loc 1 2134 0
 20639 01d0 2A61     		str	r2, [r5, #16]
2135:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->last_clust = 0;
 20640              		.loc 1 2135 0
 20641 01d2 EB60     		str	r3, [r5, #12]
2138:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 20642              		.loc 1 2138 0
 20643 01d4 00F03F81 		beq	.L2598
 20644              	.LVL2635:
 20645              	.L2529:
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 20646              		.loc 1 2151 0
 20647 01d8 2649     		ldr	r1, .L2601+12
2150:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
 20648              		.loc 1 2150 0
 20649 01da 85F800A0 		strb	sl, [r5, #0]
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 20650              		.loc 1 2151 0
 20651 01de 0A88     		ldrh	r2, [r1, #0]
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 20652              		.loc 1 2152 0
 20653 01e0 0023     		movs	r3, #0
2151:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 20654              		.loc 1 2151 0
 20655 01e2 0132     		adds	r2, r2, #1
 20656 01e4 0A80     		strh	r2, [r1, #0]	@ movhi
 20657 01e6 EA80     		strh	r2, [r5, #6]	@ movhi
2152:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->winsect = 0;		/* Invalidate sector cache */
 20658              		.loc 1 2152 0
 20659 01e8 EB62     		str	r3, [r5, #44]
2153:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->wflag = 0;
 20660              		.loc 1 2153 0
 20661 01ea 2B71     		strb	r3, [r5, #4]
 20662              	.LVL2636:
 20663              	.L2515:
 20664              	.LBE1804:
 20665              	.LBE1810:
3428:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		djn.fs = djo.fs;
 20666              		.loc 1 3428 0
 20667 01ec 0C9B     		ldr	r3, [sp, #48]
3430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 20668              		.loc 1 3430 0
 20669 01ee 224D     		ldr	r5, .L2601+16
 20670              	.LVL2637:
3428:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		djn.fs = djo.fs;
 20671              		.loc 1 3428 0
 20672 01f0 1593     		str	r3, [sp, #84]
3429:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(djo);
 20673              		.loc 1 3429 0
 20674 01f2 03AB     		add	r3, sp, #12
 20675 01f4 1293     		str	r3, [sp, #72]
 20676 01f6 214B     		ldr	r3, .L2601+20
3430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 20677              		.loc 1 3430 0
 20678 01f8 0CA8     		add	r0, sp, #48
 20679              	.LVL2638:
 20680 01fa 2146     		mov	r1, r4
3429:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		INIT_BUF(djo);
 20681              		.loc 1 3429 0
 20682 01fc 1393     		str	r3, [sp, #76]
3430:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 20683              		.loc 1 3430 0
 20684 01fe A847     		blx	r5
 20685              	.LVL2639:
3436:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (res == FR_OK) {						/* Old object is found */
 20686              		.loc 1 3436 0
 20687 0200 0028     		cmp	r0, #0
 20688 0202 7FF421AF 		bne	.L2572
3437:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
 20689              		.loc 1 3437 0
 20690 0206 1199     		ldr	r1, [sp, #68]
 20691 0208 0029     		cmp	r1, #0
 20692 020a 00F08280 		beq	.L2557
3440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_cpy(buf, djo.dir+DIR_Attr, 21);		/* Save the object information except for name */
 20693              		.loc 1 3440 0
 20694 020e 0B31     		adds	r1, r1, #11
 20695              	.LVL2640:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20696              		.loc 1 540 0
 20697 0210 1423     		movs	r3, #20
3440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_cpy(buf, djo.dir+DIR_Attr, 21);		/* Save the object information except for name */
 20698              		.loc 1 3440 0
 20699 0212 06AA     		add	r2, sp, #24
 20700              	.LVL2641:
 20701 0214 00E0     		b	.L2532
 20702              	.LVL2642:
 20703              	.L2558:
 20704              	.LBB1811:
 20705              	.LBB1812:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20706              		.loc 1 540 0
 20707 0216 2346     		mov	r3, r4
 20708              	.LVL2643:
 20709              	.L2532:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 20710              		.loc 1 541 0
 20711 0218 11F8010B 		ldrb	r0, [r1], #1	@ zero_extendqisi2
 20712              	.LVL2644:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20713              		.loc 1 540 0
 20714 021c 5C1E     		subs	r4, r3, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 20715              		.loc 1 541 0
 20716 021e 02F8010B 		strb	r0, [r2], #1
 20717              	.LVL2645:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20718              		.loc 1 540 0
 20719 0222 002B     		cmp	r3, #0
 20720 0224 F7D1     		bne	.L2558
 20721 0226 2323     		movs	r3, #35
3441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				mem_cpy(&djn, &djo, sizeof(DIR));		/* Check new object */
 20722              		.loc 1 3441 0
 20723 0228 15A9     		add	r1, sp, #84
 20724              	.LVL2646:
 20725 022a 0CAA     		add	r2, sp, #48
 20726              	.LVL2647:
 20727 022c 00E0     		b	.L2533
 20728              	.LVL2648:
 20729              	.L2559:
 20730              	.LBE1812:
 20731              	.LBE1811:
 20732              	.LBB1813:
 20733              	.LBB1814:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20734              		.loc 1 540 0
 20735 022e 2346     		mov	r3, r4
 20736              	.LVL2649:
 20737              	.L2533:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 20738              		.loc 1 541 0
 20739 0230 12F8010B 		ldrb	r0, [r2], #1	@ zero_extendqisi2
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20740              		.loc 1 540 0
 20741 0234 5C1E     		subs	r4, r3, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 20742              		.loc 1 541 0
 20743 0236 01F8010B 		strb	r0, [r1], #1
 20744              	.LVL2650:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20745              		.loc 1 540 0
 20746 023a 002B     		cmp	r3, #0
 20747 023c F7D1     		bne	.L2559
 20748              	.LBE1814:
 20749              	.LBE1813:
3442:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = follow_path(&djn, path_new);
 20750              		.loc 1 3442 0
 20751 023e 15A8     		add	r0, sp, #84
 20752 0240 3146     		mov	r1, r6
 20753              	.LVL2651:
 20754 0242 A847     		blx	r5
 20755              	.LVL2652:
3443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
 20756              		.loc 1 3443 0
 20757 0244 0028     		cmp	r0, #0
 20758 0246 62D0     		beq	.L2560
3444:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_NO_FILE) { 				/* Is it a valid path and no name collision? */
 20759              		.loc 1 3444 0
 20760 0248 0428     		cmp	r0, #4
 20761 024a 7FF4FDAE 		bne	.L2572
3446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 20762              		.loc 1 3446 0
 20763 024e 15A8     		add	r0, sp, #84
 20764              	.LVL2653:
 20765 0250 0B4B     		ldr	r3, .L2601+24
 20766 0252 9847     		blx	r3
 20767              	.LVL2654:
3447:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (res == FR_OK) {
 20768              		.loc 1 3447 0
 20769 0254 0028     		cmp	r0, #0
 20770 0256 7FF4F7AE 		bne	.L2572
3448:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dir = djn.dir;					/* Copy object information except for name */
 20771              		.loc 1 3448 0
 20772 025a 1A9D     		ldr	r5, [sp, #104]
 20773              	.LVL2655:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20774              		.loc 1 540 0
 20775 025c 1224     		movs	r4, #18
 20776              	.LVL2656:
3449:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						mem_cpy(dir+13, buf+2, 19);
 20777              		.loc 1 3449 0
 20778 025e 05F10D02 		add	r2, r5, #13
 20779              	.LVL2657:
 20780 0262 0DF11A03 		add	r3, sp, #26
 20781              	.LVL2658:
 20782 0266 10E0     		b	.L2534
 20783              	.L2602:
 20784              		.align	2
 20785              	.L2601:
 20786 0268 00000000 		.word	.LANCHOR2
 20787 026c 00000000 		.word	disk_status
 20788 0270 00000000 		.word	disk_initialize
 20789 0274 00000000 		.word	.LANCHOR3
 20790 0278 00000000 		.word	follow_path
 20791 027c 00000000 		.word	.LANCHOR4
 20792 0280 00000000 		.word	dir_register
 20793 0284 00000000 		.word	disk_read
 20794              	.LVL2659:
 20795              	.L2561:
 20796              	.LBB1815:
 20797              	.LBB1816:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20798              		.loc 1 540 0
 20799 0288 0446     		mov	r4, r0
 20800              	.LVL2660:
 20801              	.L2534:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 20802              		.loc 1 541 0
 20803 028a 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 20804              	.LVL2661:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20805              		.loc 1 540 0
 20806 028e 601E     		subs	r0, r4, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 20807              		.loc 1 541 0
 20808 0290 02F8011B 		strb	r1, [r2], #1
 20809              	.LVL2662:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 20810              		.loc 1 540 0
 20811 0294 002C     		cmp	r4, #0
 20812 0296 F7D1     		bne	.L2561
 20813              	.LBE1816:
 20814              	.LBE1815:
3450:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 20815              		.loc 1 3450 0
 20816 0298 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 20817              	.LVL2663:
 20818 029c 43F02003 		orr	r3, r3, #32
 20819 02a0 EB72     		strb	r3, [r5, #11]
3451:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						djo.fs->wflag = 1;
 20820              		.loc 1 3451 0
 20821 02a2 0C9B     		ldr	r3, [sp, #48]
 20822 02a4 0122     		movs	r2, #1
 20823              	.LVL2664:
 20824 02a6 1A71     		strb	r2, [r3, #4]
3452:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the direct
 20825              		.loc 1 3452 0
 20826 02a8 179B     		ldr	r3, [sp, #92]
 20827 02aa 0E9A     		ldr	r2, [sp, #56]
 20828 02ac 9A42     		cmp	r2, r3
 20829 02ae 24D0     		beq	.L2539
3452:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the direct
 20830              		.loc 1 3452 0 is_stmt 0 discriminator 1
 20831 02b0 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 20832 02b2 03F01003 		and	r3, r3, #16
 20833 02b6 DBB2     		uxtb	r3, r3
 20834 02b8 FBB1     		cbz	r3, .L2539
3453:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							dw = clust2sect(djn.fs, LD_CLUST(dir));
 20835              		.loc 1 3453 0 is_stmt 1
 20836 02ba 1598     		ldr	r0, [sp, #84]
 20837              	.LVL2665:
 20838 02bc 6F7D     		ldrb	r7, [r5, #21]	@ zero_extendqisi2
 20839 02be 297D     		ldrb	r1, [r5, #20]	@ zero_extendqisi2
 20840 02c0 EE7E     		ldrb	r6, [r5, #27]	@ zero_extendqisi2
 20841              	.LVL2666:
 20842 02c2 AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 20843              	.LBB1817:
 20844              	.LBB1818:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 20845              		.loc 1 807 0
 20846 02c4 8269     		ldr	r2, [r0, #24]
 20847              	.LBE1818:
 20848              	.LBE1817:
3453:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							dw = clust2sect(djn.fs, LD_CLUST(dir));
 20849              		.loc 1 3453 0
 20850 02c6 41EA0721 		orr	r1, r1, r7, lsl #8
 20851 02ca 43EA0623 		orr	r3, r3, r6, lsl #8
 20852 02ce 43EA0143 		orr	r3, r3, r1, lsl #16
 20853              	.LBB1820:
 20854              	.LBB1819:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 20855              		.loc 1 806 0
 20856 02d2 023B     		subs	r3, r3, #2
 20857              	.LVL2667:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 20858              		.loc 1 807 0
 20859 02d4 023A     		subs	r2, r2, #2
 20860 02d6 9342     		cmp	r3, r2
 20861 02d8 2AD2     		bcs	.L2563
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 20862              		.loc 1 808 0
 20863 02da 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 20864 02dc 826A     		ldr	r2, [r0, #40]
 20865 02de 01FB0321 		mla	r1, r1, r3, r2
 20866              	.LBE1819:
 20867              	.LBE1820:
3454:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							if (!dw) {
 20868              		.loc 1 3454 0
 20869 02e2 29B3     		cbz	r1, .L2563
3457:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								res = move_window(djn.fs, dw);
 20870              		.loc 1 3457 0
 20871 02e4 9E4B     		ldr	r3, .L2603
 20872              	.LVL2668:
 20873 02e6 9847     		blx	r3
 20874              	.LVL2669:
3458:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								dir = djn.fs->win+SZ_DIR;	/* .. entry */
 20875              		.loc 1 3458 0
 20876 02e8 159B     		ldr	r3, [sp, #84]
 20877              	.LVL2670:
3459:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 20878              		.loc 1 3459 0
 20879 02ea 0028     		cmp	r0, #0
 20880 02ec 7FF4ACAE 		bne	.L2572
3459:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 20881              		.loc 1 3459 0 is_stmt 0 discriminator 1
 20882 02f0 93F85120 		ldrb	r2, [r3, #81]	@ zero_extendqisi2
 20883 02f4 2E2A     		cmp	r2, #46
 20884 02f6 00F09480 		beq	.L2599
 20885              	.LVL2671:
 20886              	.L2539:
3467:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
 20887              		.loc 1 3467 0 is_stmt 1
 20888 02fa 0CA8     		add	r0, sp, #48
 20889              	.LVL2672:
 20890 02fc 994B     		ldr	r3, .L2603+4
 20891 02fe 9847     		blx	r3
 20892              	.LVL2673:
3468:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 							if (res == FR_OK)
 20893              		.loc 1 3468 0
 20894 0300 0028     		cmp	r0, #0
 20895 0302 7FF4A1AE 		bne	.L2572
3469:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								res = sync(djo.fs);
 20896              		.loc 1 3469 0
 20897 0306 0C98     		ldr	r0, [sp, #48]
 20898              	.LVL2674:
 20899 0308 974B     		ldr	r3, .L2603+8
 20900 030a 9847     		blx	r3
 20901              	.LVL2675:
 20902 030c 9CE6     		b	.L2572
 20903              	.LVL2676:
 20904              	.L2560:
3443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
 20905              		.loc 1 3443 0
 20906 030e 0820     		movs	r0, #8
 20907              	.LVL2677:
 20908 0310 9AE6     		b	.L2572
 20909              	.LVL2678:
 20910              	.L2557:
3438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				res = FR_NO_FILE;
 20911              		.loc 1 3438 0
 20912 0312 0420     		movs	r0, #4
 20913              	.LVL2679:
 20914 0314 98E6     		b	.L2572
 20915              	.LVL2680:
 20916              	.L2596:
 20917              	.LBB1821:
 20918              	.LBB1805:
 20919              	.LBB1798:
 20920              	.LBB1787:
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 20921              		.loc 1 1989 0
 20922 0316 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 20923 031a 95F82FB2 		ldrb	fp, [r5, #559]	@ zero_extendqisi2
 20924 031e 43EA0B2B 		orr	fp, r3, fp, lsl #8
 20925 0322 924B     		ldr	r3, .L2603+12
 20926 0324 0FFA8BFB 		sxth	fp, fp
 20927 0328 9B45     		cmp	fp, r3
 20928 032a 05D0     		beq	.L2600
1990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 2;
 20929              		.loc 1 1990 0
 20930 032c 0223     		movs	r3, #2
 20931 032e AAE6     		b	.L2517
 20932              	.LVL2681:
 20933              	.L2563:
 20934              	.LBE1787:
 20935              	.LBE1798:
 20936              	.LBE1805:
 20937              	.LBE1821:
3455:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 								res = FR_INT_ERR;
 20938              		.loc 1 3455 0
 20939 0330 0220     		movs	r0, #2
 20940              	.LVL2682:
 20941 0332 89E6     		b	.L2572
 20942              	.LVL2683:
 20943              	.L2555:
 20944              	.LBB1822:
 20945              	.LBB1806:
2078:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;
 20946              		.loc 1 2078 0
 20947 0334 0120     		movs	r0, #1
 20948 0336 87E6     		b	.L2572
 20949              	.LVL2684:
 20950              	.L2600:
 20951              	.LBB1799:
 20952              	.LBB1788:
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 20953              		.loc 1 1992 0
 20954 0338 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 20955 033c 95F86970 		ldrb	r7, [r5, #105]	@ zero_extendqisi2
 20956 0340 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 20957 0344 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 20958 0348 DFF824A2 		ldr	sl, .L2603+16
 20959 034c 0904     		lsls	r1, r1, #16
 20960 034e 41EA0761 		orr	r1, r1, r7, lsl #24
 20961 0352 0B43     		orrs	r3, r3, r1
 20962 0354 43EA0223 		orr	r3, r3, r2, lsl #8
 20963 0358 23F07F43 		bic	r3, r3, #-16777216
 20964 035c 5345     		cmp	r3, sl
 20965 035e 74D0     		beq	.L2550
 20966              	.LVL2685:
 20967              	.LBB1785:
 20968              	.LBB1786:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 20969              		.loc 1 1994 0
 20970 0360 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 20971 0364 95F88570 		ldrb	r7, [r5, #133]	@ zero_extendqisi2
 20972 0368 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 20973 036c 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 20974 0370 0904     		lsls	r1, r1, #16
 20975 0372 41EA0761 		orr	r1, r1, r7, lsl #24
 20976 0376 0B43     		orrs	r3, r3, r1
 20977 0378 43EA0223 		orr	r3, r3, r2, lsl #8
 20978 037c 23F07F43 		bic	r3, r3, #-16777216
 20979              	.LBE1786:
 20980              	.LBE1785:
 20981              	.LBE1788:
 20982              	.LBE1799:
2068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == 1) {						/* Not an FAT-VBR, the physical drive can be partitioned */
 20983              		.loc 1 2068 0
 20984 0380 5345     		cmp	r3, sl
 20985 0382 3FF487AE 		beq	.L2551
 20986              	.LVL2686:
2073:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (tbl[4]) {						/* Is the partition existing? */
 20987              		.loc 1 2073 0
 20988 0386 95F8F231 		ldrb	r3, [r5, #498]	@ zero_extendqisi2
 20989 038a 002B     		cmp	r3, #0
 20990 038c 3FF480AE 		beq	.L2521
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 20991              		.loc 1 2074 0
 20992 0390 95F8F821 		ldrb	r2, [r5, #504]	@ zero_extendqisi2
 20993 0394 95F8F911 		ldrb	r1, [r5, #505]	@ zero_extendqisi2
 20994 0398 95F8F631 		ldrb	r3, [r5, #502]	@ zero_extendqisi2
 20995 039c 95F8F771 		ldrb	r7, [r5, #503]	@ zero_extendqisi2
 20996              	.LBB1800:
 20997              	.LBB1796:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 20998              		.loc 1 1987 0
 20999 03a0 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 21000              	.LBE1796:
 21001              	.LBE1800:
2074:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			bsect = LD_DWORD(&tbl[8]);		/* Partition offset in LBA */
 21002              		.loc 1 2074 0
 21003 03a2 1204     		lsls	r2, r2, #16
 21004 03a4 42EA0162 		orr	r2, r2, r1, lsl #24
 21005 03a8 1343     		orrs	r3, r3, r2
 21006 03aa 43EA0727 		orr	r7, r3, r7, lsl #8
 21007              	.LVL2687:
 21008              	.LBB1801:
 21009              	.LBB1797:
1987:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_read(fs->drv, fs->win, sect, 1) != RES_OK)	/* Load boot record */
 21010              		.loc 1 1987 0
 21011 03ae 4946     		mov	r1, r9
 21012 03b0 3A46     		mov	r2, r7
 21013 03b2 0123     		movs	r3, #1
 21014 03b4 C047     		blx	r8
 21015              	.LVL2688:
 21016 03b6 0028     		cmp	r0, #0
 21017 03b8 BCD1     		bne	.L2555
1989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)		/* Check record signature (always placed at offset 510 
 21018              		.loc 1 1989 0
 21019 03ba 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 21020 03be 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 21021 03c2 43EA0223 		orr	r3, r3, r2, lsl #8
 21022 03c6 1BB2     		sxth	r3, r3
 21023 03c8 5B45     		cmp	r3, fp
 21024 03ca 7FF461AE 		bne	.L2521
1992:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 21025              		.loc 1 1992 0
 21026 03ce 95F86810 		ldrb	r1, [r5, #104]	@ zero_extendqisi2
 21027 03d2 95F86900 		ldrb	r0, [r5, #105]	@ zero_extendqisi2
 21028 03d6 95F86630 		ldrb	r3, [r5, #102]	@ zero_extendqisi2
 21029 03da 95F86720 		ldrb	r2, [r5, #103]	@ zero_extendqisi2
 21030 03de 0904     		lsls	r1, r1, #16
 21031 03e0 41EA0061 		orr	r1, r1, r0, lsl #24
 21032 03e4 0B43     		orrs	r3, r3, r1
 21033 03e6 43EA0223 		orr	r3, r3, r2, lsl #8
 21034 03ea 23F07F43 		bic	r3, r3, #-16777216
 21035 03ee 5345     		cmp	r3, sl
 21036 03f0 3FF451AE 		beq	.L2518
 21037              	.LVL2689:
 21038              	.LBB1792:
 21039              	.LBB1793:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 21040              		.loc 1 1994 0
 21041 03f4 95F88410 		ldrb	r1, [r5, #132]	@ zero_extendqisi2
 21042 03f8 95F88500 		ldrb	r0, [r5, #133]	@ zero_extendqisi2
 21043 03fc 95F88230 		ldrb	r3, [r5, #130]	@ zero_extendqisi2
 21044 0400 95F88320 		ldrb	r2, [r5, #131]	@ zero_extendqisi2
 21045 0404 0904     		lsls	r1, r1, #16
 21046 0406 41EA0061 		orr	r1, r1, r0, lsl #24
 21047 040a 0B43     		orrs	r3, r3, r1
 21048 040c 43EA0222 		orr	r2, r3, r2, lsl #8
 21049              	.LBE1793:
 21050              	.LBE1792:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 21051              		.loc 1 1995 0
 21052 0410 574B     		ldr	r3, .L2603+16
 21053              	.LBB1795:
 21054              	.LBB1794:
1994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)
 21055              		.loc 1 1994 0
 21056 0412 22F07F42 		bic	r2, r2, #-16777216
 21057              	.LBE1794:
 21058              	.LBE1795:
1995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 21059              		.loc 1 1995 0
 21060 0416 D31A     		subs	r3, r2, r3
 21061 0418 18BF     		it	ne
 21062 041a 0123     		movne	r3, #1
 21063 041c 34E6     		b	.L2540
 21064              	.LVL2690:
 21065              	.L2594:
 21066              	.LBE1797:
 21067              	.LBE1801:
2025:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p += 2; *path = p;				/* Return pointer to the path name */
 21068              		.loc 1 2025 0
 21069 041e 0234     		adds	r4, r4, #2
 21070              	.LVL2691:
 21071 0420 F7E5     		b	.L2512
 21072              	.LVL2692:
 21073              	.L2599:
 21074              	.LBE1806:
 21075              	.LBE1822:
3460:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									dw = (djn.fs->fs_type == FS_FAT32 && djn.sclust == djn.fs->dirbase) ? 0 : djn.sclust;
 21076              		.loc 1 3460 0
 21077 0422 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 21078 0424 032A     		cmp	r2, #3
 21079 0426 179A     		ldr	r2, [sp, #92]
 21080 0428 11D0     		beq	.L2590
 21081              	.L2537:
3460:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									dw = (djn.fs->fs_type == FS_FAT32 && djn.sclust == djn.fs->dirbase) ? 0 : djn.sclust;
 21082              		.loc 1 3460 0 is_stmt 0 discriminator 1
 21083 042a 1446     		mov	r4, r2
 21084              	.LVL2693:
 21085              	.L2538:
3461:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									ST_CLUST(dir, dw);
 21086              		.loc 1 3461 0 is_stmt 1 discriminator 3
 21087 042c 220C     		lsrs	r2, r4, #16
 21088 042e 110A     		lsrs	r1, r2, #8
 21089 0430 C4F30720 		ubfx	r0, r4, #8, #8
 21090              	.LVL2694:
 21091 0434 83F86420 		strb	r2, [r3, #100]
3462:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									djn.fs->wflag = 1;
 21092              		.loc 1 3462 0 discriminator 3
 21093 0438 0122     		movs	r2, #1
3461:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									ST_CLUST(dir, dw);
 21094              		.loc 1 3461 0 discriminator 3
 21095 043a 83F86A40 		strb	r4, [r3, #106]
 21096 043e 83F86B00 		strb	r0, [r3, #107]
 21097 0442 83F86510 		strb	r1, [r3, #101]
3462:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									djn.fs->wflag = 1;
 21098              		.loc 1 3462 0 discriminator 3
 21099 0446 1A71     		strb	r2, [r3, #4]
 21100 0448 57E7     		b	.L2539
 21101              	.LVL2695:
 21102              	.L2550:
 21103              	.LBB1823:
 21104              	.LBB1807:
 21105              	.LBB1802:
 21106              	.LBB1789:
1993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return 0;
 21107              		.loc 1 1993 0
 21108 044a 0346     		mov	r3, r0
 21109 044c 1BE6     		b	.L2517
 21110              	.LVL2696:
 21111              	.L2590:
 21112              	.LBE1789:
 21113              	.LBE1802:
 21114              	.LBE1807:
 21115              	.LBE1823:
3460:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 									dw = (djn.fs->fs_type == FS_FAT32 && djn.sclust == djn.fs->dirbase) ? 0 : djn.sclust;
 21116              		.loc 1 3460 0 discriminator 2
 21117 044e 596A     		ldr	r1, [r3, #36]
 21118 0450 8A42     		cmp	r2, r1
 21119 0452 EAD1     		bne	.L2537
 21120 0454 EAE7     		b	.L2538
 21121              	.LVL2697:
 21122              	.L2598:
 21123              	.LBB1824:
 21124              	.LBB1808:
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 21125              		.loc 1 2140 0
 21126 0456 95F86110 		ldrb	r1, [r5, #97]	@ zero_extendqisi2
 21127 045a 95F86020 		ldrb	r2, [r5, #96]	@ zero_extendqisi2
2139:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	 	fs->fsi_flag = 0;
 21128              		.loc 1 2139 0
 21129 045e 6B71     		strb	r3, [r5, #5]
2140:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->fsi_sector = bsect + LD_WORD(fs->win+BPB_FSInfo);
 21130              		.loc 1 2140 0
 21131 0460 42EA0122 		orr	r2, r2, r1, lsl #8
 21132 0464 BA18     		adds	r2, r7, r2
 21133 0466 6A61     		str	r2, [r5, #20]
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 21134              		.loc 1 2141 0
 21135 0468 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 21136 046a 4946     		mov	r1, r9
 21137 046c 0123     		movs	r3, #1
 21138 046e C047     		blx	r8
 21139              	.LVL2698:
 21140 0470 0028     		cmp	r0, #0
 21141 0472 7FF4B1AE 		bne	.L2529
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 21142              		.loc 1 2142 0
 21143 0476 95F82E32 		ldrb	r3, [r5, #558]	@ zero_extendqisi2
 21144 047a 95F82F22 		ldrb	r2, [r5, #559]	@ zero_extendqisi2
 21145 047e 43EA0222 		orr	r2, r3, r2, lsl #8
2141:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_read(fs->drv, fs->win, fs->fsi_sector, 1) == RES_OK &&
 21146              		.loc 1 2141 0
 21147 0482 3A4B     		ldr	r3, .L2603+12
 21148 0484 12B2     		sxth	r2, r2
 21149 0486 9A42     		cmp	r2, r3
 21150 0488 7FF4A6AE 		bne	.L2529
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 21151              		.loc 1 2143 0
 21152 048c 95F83210 		ldrb	r1, [r5, #50]	@ zero_extendqisi2
 21153 0490 95F83300 		ldrb	r0, [r5, #51]	@ zero_extendqisi2
 21154 0494 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 21155 0498 95F83120 		ldrb	r2, [r5, #49]	@ zero_extendqisi2
 21156 049c 0904     		lsls	r1, r1, #16
 21157 049e 41EA0061 		orr	r1, r1, r0, lsl #24
 21158 04a2 0B43     		orrs	r3, r3, r1
 21159 04a4 43EA0222 		orr	r2, r3, r2, lsl #8
2142:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_WORD(fs->win+BS_55AA) == 0xAA55 &&
 21160              		.loc 1 2142 0
 21161 04a8 324B     		ldr	r3, .L2603+20
 21162 04aa 9A42     		cmp	r2, r3
 21163 04ac 7FF494AE 		bne	.L2529
2144:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272) {
 21164              		.loc 1 2144 0
 21165 04b0 95F81612 		ldrb	r1, [r5, #534]	@ zero_extendqisi2
 21166 04b4 95F81702 		ldrb	r0, [r5, #535]	@ zero_extendqisi2
 21167 04b8 95F81432 		ldrb	r3, [r5, #532]	@ zero_extendqisi2
 21168 04bc 95F81522 		ldrb	r2, [r5, #533]	@ zero_extendqisi2
 21169 04c0 0904     		lsls	r1, r1, #16
 21170 04c2 41EA0061 		orr	r1, r1, r0, lsl #24
 21171 04c6 0B43     		orrs	r3, r3, r1
 21172 04c8 43EA0222 		orr	r2, r3, r2, lsl #8
2143:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252 &&
 21173              		.loc 1 2143 0
 21174 04cc 2A4B     		ldr	r3, .L2603+24
 21175 04ce 9A42     		cmp	r2, r3
 21176 04d0 7FF482AE 		bne	.L2529
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21177              		.loc 1 2145 0
 21178 04d4 95F81EE2 		ldrb	lr, [r5, #542]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21179              		.loc 1 2146 0
 21180 04d8 95F81A72 		ldrb	r7, [r5, #538]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21181              		.loc 1 2145 0
 21182 04dc 95F81F82 		ldrb	r8, [r5, #543]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21183              		.loc 1 2146 0
 21184 04e0 95F81BC2 		ldrb	ip, [r5, #539]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21185              		.loc 1 2145 0
 21186 04e4 95F81C22 		ldrb	r2, [r5, #540]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21187              		.loc 1 2146 0
 21188 04e8 95F81832 		ldrb	r3, [r5, #536]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21189              		.loc 1 2145 0
 21190 04ec 95F81D02 		ldrb	r0, [r5, #541]	@ zero_extendqisi2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21191              		.loc 1 2146 0
 21192 04f0 95F81912 		ldrb	r1, [r5, #537]	@ zero_extendqisi2
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21193              		.loc 1 2145 0
 21194 04f4 4FEA0E4E 		lsl	lr, lr, #16
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21195              		.loc 1 2146 0
 21196 04f8 3F04     		lsls	r7, r7, #16
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21197              		.loc 1 2145 0
 21198 04fa 4EEA086E 		orr	lr, lr, r8, lsl #24
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21199              		.loc 1 2146 0
 21200 04fe 47EA0C67 		orr	r7, r7, ip, lsl #24
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21201              		.loc 1 2145 0
 21202 0502 4EEA0202 		orr	r2, lr, r2
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21203              		.loc 1 2146 0
 21204 0506 3B43     		orrs	r3, r3, r7
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21205              		.loc 1 2145 0
 21206 0508 42EA0022 		orr	r2, r2, r0, lsl #8
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21207              		.loc 1 2146 0
 21208 050c 43EA0123 		orr	r3, r3, r1, lsl #8
2145:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
 21209              		.loc 1 2145 0
 21210 0510 EA60     		str	r2, [r5, #12]
2146:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
 21211              		.loc 1 2146 0
 21212 0512 2B61     		str	r3, [r5, #16]
 21213 0514 60E6     		b	.L2529
 21214              	.LVL2699:
 21215              	.L2597:
2127:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 21216              		.loc 1 2127 0
 21217 0516 5B00     		lsls	r3, r3, #1
 21218              	.LVL2700:
 21219 0518 4FE6     		b	.L2526
 21220              	.LVL2701:
 21221              	.L2525:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 21222              		.loc 1 2116 0
 21223 051a 0233     		adds	r3, r3, #2
 21224              	.LVL2702:
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 21225              		.loc 1 2117 0
 21226 051c BC44     		add	ip, ip, r7
 21227              	.LVL2703:
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 21228              		.loc 1 2118 0
 21229 051e 07EB0B00 		add	r0, r7, fp
 21230              	.LVL2704:
2116:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
 21231              		.loc 1 2116 0
 21232 0522 AB61     		str	r3, [r5, #24]
2117:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 21233              		.loc 1 2117 0
 21234 0524 C5F828C0 		str	ip, [r5, #40]
2118:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 21235              		.loc 1 2118 0
 21236 0528 2862     		str	r0, [r5, #32]
2120:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 21237              		.loc 1 2120 0
 21238 052a 0029     		cmp	r1, #0
 21239 052c 7FF4B0AD 		bne	.L2521
2121:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 21240              		.loc 1 2121 0
 21241 0530 95F85EC0 		ldrb	ip, [r5, #94]	@ zero_extendqisi2
 21242 0534 95F85FA0 		ldrb	sl, [r5, #95]	@ zero_extendqisi2
 21243 0538 95F85C10 		ldrb	r1, [r5, #92]	@ zero_extendqisi2
 21244              	.LVL2705:
 21245 053c 95F85D00 		ldrb	r0, [r5, #93]	@ zero_extendqisi2
 21246 0540 4FEA0C4C 		lsl	ip, ip, #16
 21247 0544 4CEA0A6C 		orr	ip, ip, sl, lsl #24
 21248 0548 4CEA0101 		orr	r1, ip, r1
 21249 054c 41EA0021 		orr	r1, r1, r0, lsl #8
 21250 0550 6962     		str	r1, [r5, #36]
2122:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
 21251              		.loc 1 2122 0
 21252 0552 9B00     		lsls	r3, r3, #2
 21253              	.LVL2706:
2113:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 21254              		.loc 1 2113 0
 21255 0554 4FF0030A 		mov	sl, #3
 21256 0558 2FE6     		b	.L2526
 21257              	.LVL2707:
 21258              	.L2556:
2111:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 21259              		.loc 1 2111 0
 21260 055a 4FF0010A 		mov	sl, #1
 21261 055e 12E6     		b	.L2524
 21262              	.L2604:
 21263              		.align	2
 21264              	.L2603:
 21265 0560 00000000 		.word	move_window
 21266 0564 00000000 		.word	dir_remove
 21267 0568 00000000 		.word	sync
 21268 056c 55AAFFFF 		.word	-21931
 21269 0570 46415400 		.word	5521734
 21270 0574 52526141 		.word	1096897106
 21271 0578 72724161 		.word	1631679090
 21272              	.LBE1808:
 21273              	.LBE1824:
 21274              		.cfi_endproc
 21275              	.LFE44:
 21277              		.section	.text.f_mkfs,"ax",%progbits
 21278              		.align	2
 21279              		.global	f_mkfs
 21280              		.thumb
 21281              		.thumb_func
 21283              	f_mkfs:
 21284              	.LFB45:
3561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 21285              		.loc 1 3561 0
 21286              		.cfi_startproc
 21287              		@ args = 0, pretend = 0, frame = 40
 21288              		@ frame_needed = 0, uses_anonymous_args = 0
 21289              	.LVL2708:
 21290 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 21291              	.LCFI52:
 21292              		.cfi_def_cfa_offset 36
 21293              		.cfi_offset 4, -36
 21294              		.cfi_offset 5, -32
 21295              		.cfi_offset 6, -28
 21296              		.cfi_offset 7, -24
 21297              		.cfi_offset 8, -20
 21298              		.cfi_offset 9, -16
 21299              		.cfi_offset 10, -12
 21300              		.cfi_offset 11, -8
 21301              		.cfi_offset 14, -4
 21302 0004 8B46     		mov	fp, r1
 21303 0006 8BB0     		sub	sp, sp, #44
 21304              	.LCFI53:
 21305              		.cfi_def_cfa_offset 80
3561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 21306              		.loc 1 3561 0
 21307 0008 1546     		mov	r5, r2
3574:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (drv >= _VOLUMES) return FR_INVALID_DRIVE;
 21308              		.loc 1 3574 0
 21309 000a 18B1     		cbz	r0, .L2683
 21310 000c 0B20     		movs	r0, #11
 21311              	.LVL2709:
 21312              	.L2678:
3784:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 21313              		.loc 1 3784 0
 21314 000e 0BB0     		add	sp, sp, #44
 21315 0010 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 21316              	.LVL2710:
 21317              	.L2683:
3575:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
 21318              		.loc 1 3575 0
 21319 0014 0129     		cmp	r1, #1
 21320 0016 01D9     		bls	.L2684
 21321              	.L2652:
 21322 0018 1320     		movs	r0, #19
 21323              	.LVL2711:
 21324 001a F8E7     		b	.L2678
 21325              	.LVL2712:
 21326              	.L2684:
3576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (au & (au - 1)) return FR_INVALID_PARAMETER;
 21327              		.loc 1 3576 0
 21328 001c 531E     		subs	r3, r2, #1
 21329 001e 1340     		ands	r3, r3, r2
 21330 0020 FAD1     		bne	.L2652
3577:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs = FatFs[drv];
 21331              		.loc 1 3577 0
 21332 0022 C24A     		ldr	r2, .L2691
 21333              	.LVL2713:
 21334 0024 1468     		ldr	r4, [r2, #0]
 21335              	.LVL2714:
3578:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
 21336              		.loc 1 3578 0
 21337 0026 34B1     		cbz	r4, .L2653
3579:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fs->fs_type = 0;
 21338              		.loc 1 3579 0
 21339 0028 2370     		strb	r3, [r4, #0]
 21340              	.LVL2715:
3584:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	stat = disk_initialize(pdrv);
 21341              		.loc 1 3584 0
 21342 002a C14B     		ldr	r3, .L2691+4
 21343 002c 9847     		blx	r3
 21344              	.LVL2716:
3585:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 21345              		.loc 1 3585 0
 21346 002e C207     		lsls	r2, r0, #31
 21347 0030 03D5     		bpl	.L2685
 21348 0032 0320     		movs	r0, #3
 21349              	.LVL2717:
 21350 0034 EBE7     		b	.L2678
 21351              	.LVL2718:
 21352              	.L2653:
3578:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
 21353              		.loc 1 3578 0
 21354 0036 0C20     		movs	r0, #12
 21355              	.LVL2719:
 21356 0038 E9E7     		b	.L2678
 21357              	.LVL2720:
 21358              	.L2685:
3586:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 21359              		.loc 1 3586 0
 21360 003a 00F00400 		and	r0, r0, #4
 21361              	.LVL2721:
 21362 003e C0B2     		uxtb	r0, r0
 21363 0040 08B1     		cbz	r0, .L2686
 21364 0042 0A20     		movs	r0, #10
 21365 0044 E3E7     		b	.L2678
 21366              	.L2686:
3601:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
 21367              		.loc 1 3601 0
 21368 0046 0121     		movs	r1, #1
 21369 0048 09AA     		add	r2, sp, #36
 21370 004a BA4B     		ldr	r3, .L2691+8
 21371 004c 9847     		blx	r3
 21372              	.LVL2722:
 21373 004e 0028     		cmp	r0, #0
 21374 0050 47D1     		bne	.L2608
 21375              	.LVL2723:
3601:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
 21376              		.loc 1 3601 0 is_stmt 0 discriminator 1
 21377 0052 099A     		ldr	r2, [sp, #36]
 21378 0054 7F2A     		cmp	r2, #127
 21379 0056 44D9     		bls	.L2608
3603:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
 21380              		.loc 1 3603 0 is_stmt 1
 21381 0058 BBF1000F 		cmp	fp, #0
 21382 005c 0CBF     		ite	eq
 21383 005e 4FF03F0A 		moveq	sl, #63
 21384 0062 4FF0000A 		movne	sl, #0
 21385              	.LVL2724:
3604:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 21386              		.loc 1 3604 0
 21387 0066 CAEB0202 		rsb	r2, sl, r2
 21388              	.LVL2725:
 21389 006a 0992     		str	r2, [sp, #36]
 21390              	.LVL2726:
3607:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!au) {				/* AU auto selection */
 21391              		.loc 1 3607 0
 21392 006c 8DB9     		cbnz	r5, .L2610
3608:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
 21393              		.loc 1 3608 0
 21394 006e 4FF4FA61 		mov	r1, #2000
 21395 0072 B2FBF1F1 		udiv	r1, r2, r1
 21396              	.LVL2727:
3609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 21397              		.loc 1 3609 0
 21398 0076 B1F5806F 		cmp	r1, #1024
 21399 007a 80F01D82 		bcs	.L2657
 21400 007e AE48     		ldr	r0, .L2691+12
 21401 0080 0023     		movs	r3, #0
 21402              	.LVL2728:
 21403              	.L2612:
3609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 21404              		.loc 1 3609 0 is_stmt 0 discriminator 2
 21405 0082 0133     		adds	r3, r3, #1
 21406              	.LVL2729:
 21407 0084 30F81350 		ldrh	r5, [r0, r3, lsl #1]
 21408 0088 A942     		cmp	r1, r5
 21409 008a FAD3     		bcc	.L2612
 21410              	.LVL2730:
 21411              	.L2611:
3610:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		au = cst[i];
 21412              		.loc 1 3610 0 is_stmt 1
 21413 008c AB49     		ldr	r1, .L2691+16
 21414              	.LVL2731:
 21415 008e 31F81350 		ldrh	r5, [r1, r3, lsl #1]
 21416              	.LVL2732:
 21417              	.L2610:
3613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (au == 0) au = 1;
 21418              		.loc 1 3613 0
 21419 0092 6D0A     		lsrs	r5, r5, #9
 21420              	.LVL2733:
 21421 0094 37D0     		beq	.L2658
3614:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (au > 128) au = 128;
 21422              		.loc 1 3614 0
 21423 0096 802D     		cmp	r5, #128
 21424 0098 28BF     		it	cs
 21425 009a 8025     		movcs	r5, #128
 21426              	.LVL2734:
 21427              	.L2614:
3617:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = n_vol / au;
 21428              		.loc 1 3617 0
 21429 009c B2FBF5F3 		udiv	r3, r2, r5
 21430              	.LVL2735:
3619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
 21431              		.loc 1 3619 0
 21432 00a0 40F6F571 		movw	r1, #4085
 21433 00a4 8B42     		cmp	r3, r1
 21434 00a6 1ED9     		bls	.L2615
 21435              	.LVL2736:
3620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 21436              		.loc 1 3620 0
 21437 00a8 01F57041 		add	r1, r1, #61440
 21438 00ac 8B42     		cmp	r3, r1
 21439 00ae 40F20582 		bls	.L2687
 21440              	.LVL2737:
3624:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
 21441              		.loc 1 3624 0
 21442 00b2 8233     		adds	r3, r3, #130
 21443              	.LVL2738:
 21444 00b4 9E00     		lsls	r6, r3, #2
 21445 00b6 013E     		subs	r6, r6, #1
3626:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_dir = 0;
 21446              		.loc 1 3626 0
 21447 00b8 0027     		movs	r7, #0
3624:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
 21448              		.loc 1 3624 0
 21449 00ba 760A     		lsrs	r6, r6, #9
 21450              	.LVL2739:
3620:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 21451              		.loc 1 3620 0
 21452 00bc 4FF00308 		mov	r8, #3
3626:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_dir = 0;
 21453              		.loc 1 3626 0
 21454 00c0 0397     		str	r7, [sp, #12]
3625:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_rsv = 32;
 21455              		.loc 1 3625 0
 21456 00c2 4FF02009 		mov	r9, #32
 21457              	.LVL2740:
 21458              	.L2646:
3633:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b_fat = b_vol + n_rsv;				/* FAT area start sector */
 21459              		.loc 1 3633 0
 21460 00c6 09EB0A07 		add	r7, r9, sl
 21461 00ca 0597     		str	r7, [sp, #20]
 21462              	.LVL2741:
3634:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
 21463              		.loc 1 3634 0
 21464 00cc 039F     		ldr	r7, [sp, #12]
 21465              	.LVL2742:
 21466 00ce BB19     		adds	r3, r7, r6
3635:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
 21467              		.loc 1 3635 0
 21468 00d0 059F     		ldr	r7, [sp, #20]
3636:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 21469              		.loc 1 3636 0
 21470 00d2 CAEB0501 		rsb	r1, sl, r5
3635:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
 21471              		.loc 1 3635 0
 21472 00d6 DB19     		adds	r3, r3, r7
 21473              	.LVL2743:
3636:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 21474              		.loc 1 3636 0
 21475 00d8 C918     		adds	r1, r1, r3
 21476 00da 8A42     		cmp	r2, r1
 21477 00dc 15D2     		bcs	.L2618
 21478              	.LVL2744:
 21479              	.L2622:
 21480 00de 0E20     		movs	r0, #14
 21481 00e0 95E7     		b	.L2678
 21482              	.LVL2745:
 21483              	.L2608:
3602:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			return FR_DISK_ERR;
 21484              		.loc 1 3602 0
 21485 00e2 0120     		movs	r0, #1
 21486 00e4 93E7     		b	.L2678
 21487              	.LVL2746:
 21488              	.L2615:
3628:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
 21489              		.loc 1 3628 0
 21490 00e6 0321     		movs	r1, #3
 21491 00e8 01FB03F3 		mul	r3, r1, r3
 21492              	.LVL2747:
 21493 00ec 0133     		adds	r3, r3, #1
 21494 00ee 5B08     		lsrs	r3, r3, #1
 21495 00f0 5B18     		adds	r3, r3, r1
3618:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fmt = FS_FAT12;
 21496              		.loc 1 3618 0
 21497 00f2 4FF00108 		mov	r8, #1
 21498              	.LVL2748:
 21499              	.L2649:
3629:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 21500              		.loc 1 3629 0 discriminator 3
 21501 00f6 03F2FF13 		addw	r3, r3, #511
 21502              	.LVL2749:
3631:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
 21503              		.loc 1 3631 0 discriminator 3
 21504 00fa 2027     		movs	r7, #32
3629:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 21505              		.loc 1 3629 0 discriminator 3
 21506 00fc 5E0A     		lsrs	r6, r3, #9
 21507              	.LVL2750:
3631:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
 21508              		.loc 1 3631 0 discriminator 3
 21509 00fe 0397     		str	r7, [sp, #12]
3630:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_rsv = 1;
 21510              		.loc 1 3630 0 discriminator 3
 21511 0100 4FF00109 		mov	r9, #1
 21512 0104 DFE7     		b	.L2646
 21513              	.LVL2751:
 21514              	.L2658:
3613:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (au == 0) au = 1;
 21515              		.loc 1 3613 0
 21516 0106 0125     		movs	r5, #1
 21517              	.LVL2752:
 21518 0108 C8E7     		b	.L2614
 21519              	.LVL2753:
 21520              	.L2618:
3639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
 21521              		.loc 1 3639 0
 21522 010a 0193     		str	r3, [sp, #4]
 21523 010c 0020     		movs	r0, #0
 21524 010e 0321     		movs	r1, #3
 21525 0110 08AA     		add	r2, sp, #32
 21526              	.LVL2754:
 21527 0112 884F     		ldr	r7, .L2691+8
 21528              	.LVL2755:
 21529 0114 B847     		blx	r7
 21530              	.LVL2756:
 21531 0116 019B     		ldr	r3, [sp, #4]
 21532 0118 20B9     		cbnz	r0, .L2619
 21533              	.LVL2757:
3639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
 21534              		.loc 1 3639 0 is_stmt 0 discriminator 2
 21535 011a 089F     		ldr	r7, [sp, #32]
 21536 011c 17B1     		cbz	r7, .L2619
3639:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
 21537              		.loc 1 3639 0 discriminator 1
 21538 011e B7F5004F 		cmp	r7, #32768
 21539 0122 00D9     		bls	.L2620
 21540              	.L2619:
 21541 0124 0127     		movs	r7, #1
 21542              	.LVL2758:
 21543              	.L2620:
3640:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 21544              		.loc 1 3640 0 is_stmt 1
 21545 0126 7A1E     		subs	r2, r7, #1
 21546 0128 D218     		adds	r2, r2, r3
 21547 012a 7F42     		negs	r7, r7
 21548              	.LVL2759:
 21549 012c 3A40     		ands	r2, r2, r7
3641:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = (n - b_data) / N_FATS;
 21550              		.loc 1 3641 0
 21551 012e D31A     		subs	r3, r2, r3
 21552              	.LVL2760:
3642:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 21553              		.loc 1 3642 0
 21554 0130 B8F1030F 		cmp	r8, #3
3641:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = (n - b_data) / N_FATS;
 21555              		.loc 1 3641 0
 21556 0134 0893     		str	r3, [sp, #32]
 21557              	.LVL2761:
3642:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 21558              		.loc 1 3642 0
 21559 0136 00F0D981 		beq	.L2688
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
 21560              		.loc 1 3650 0
 21561 013a 0999     		ldr	r1, [sp, #36]
 21562 013c 039F     		ldr	r7, [sp, #12]
3646:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat += n;
 21563              		.loc 1 3646 0
 21564 013e F618     		adds	r6, r6, r3
 21565              	.LVL2762:
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
 21566              		.loc 1 3650 0
 21567 0140 C9EB0103 		rsb	r3, r9, r1
 21568              	.LVL2763:
 21569 0144 9B1B     		subs	r3, r3, r6
 21570 0146 DB1B     		subs	r3, r3, r7
 21571 0148 B3FBF5F3 		udiv	r3, r3, r5
3651:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 21572              		.loc 1 3651 0
 21573 014c B8F1020F 		cmp	r8, #2
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
 21574              		.loc 1 3650 0
 21575 0150 0693     		str	r3, [sp, #24]
 21576              	.LVL2764:
3651:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 21577              		.loc 1 3651 0
 21578 0152 00F0BF81 		beq	.L2689
3656:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	case FS_FAT12:	sys = 0x01; break;
 21579              		.loc 1 3656 0
 21580 0156 0121     		movs	r1, #1
 21581              	.LVL2765:
 21582              	.L2623:
3668:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sfd) {	/* No patition table (SFD) */
 21583              		.loc 1 3668 0
 21584 0158 BBF1000F 		cmp	fp, #0
 21585 015c 40F0B381 		bne	.L2662
3671:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			mem_set(fs->win, 0, SS(fs));
 21586              		.loc 1 3671 0
 21587 0160 04F1300B 		add	fp, r4, #48
 21588              	.LVL2766:
 547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *d = (BYTE*)dst;
 21589              		.loc 1 547 0
 21590 0164 5B46     		mov	r3, fp
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21591              		.loc 1 549 0
 21592 0166 40F2FF12 		movw	r2, #511
 21593 016a 00E0     		b	.L2625
 21594              	.LVL2767:
 21595              	.L2663:
 21596              	.LBB1825:
 21597              	.LBB1826:
 21598 016c 3A46     		mov	r2, r7
 21599              	.LVL2768:
 21600              	.L2625:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21601              		.loc 1 550 0
 21602 016e 0020     		movs	r0, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21603              		.loc 1 549 0
 21604 0170 571E     		subs	r7, r2, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21605              		.loc 1 550 0
 21606 0172 03F8010B 		strb	r0, [r3], #1
 21607              	.LVL2769:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21608              		.loc 1 549 0
 21609 0176 002A     		cmp	r2, #0
 21610 0178 F8D1     		bne	.L2663
 21611              	.LVL2770:
 21612              	.LBE1826:
 21613              	.LBE1825:
3678:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 21614              		.loc 1 3678 0
 21615 017a 099F     		ldr	r7, [sp, #36]
 21616              	.LVL2771:
3675:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
 21617              		.loc 1 3675 0
 21618 017c 84F8F121 		strb	r2, [r4, #497]
3678:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 21619              		.loc 1 3678 0
 21620 0180 0AEB070E 		add	lr, sl, r7
 21621 0184 43F6C163 		movw	r3, #16065
 21622              	.LVL2772:
 21623 0188 BEFBF3FE 		udiv	lr, lr, r3
 21624              	.LVL2773:
3679:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[6] = (BYTE)((n >> 2) | 63);	/* Partiiton end sector */
 21625              		.loc 1 3679 0
 21626 018c 4FEA9E00 		lsr	r0, lr, #2
 21627              	.LVL2774:
 21628 0190 40F03F0C 		orr	ip, r0, #63
3682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 21629              		.loc 1 3682 0
 21630 0194 C7F30720 		ubfx	r0, r7, #8, #8
 21631 0198 0290     		str	r0, [sp, #8]
 21632 019a 380C     		lsrs	r0, r7, #16
 21633 019c 0490     		str	r0, [sp, #16]
 21634 019e 380E     		lsrs	r0, r7, #24
 21635 01a0 0790     		str	r0, [sp, #28]
3676:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[4] = sys;					/* System type */
 21636              		.loc 1 3676 0
 21637 01a2 84F8F211 		strb	r1, [r4, #498]
3684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)	/* Write it to the MBR sector */
 21638              		.loc 1 3684 0
 21639 01a6 1046     		mov	r0, r2
3677:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[5] = 254;					/* Partition end head */
 21640              		.loc 1 3677 0
 21641 01a8 FE21     		movs	r1, #254
 21642              	.LVL2775:
3681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
 21643              		.loc 1 3681 0
 21644 01aa 84F8F721 		strb	r2, [r4, #503]
 21645 01ae 84F8F821 		strb	r2, [r4, #504]
 21646 01b2 84F8F921 		strb	r2, [r4, #505]
3682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 21647              		.loc 1 3682 0
 21648 01b6 049A     		ldr	r2, [sp, #16]
 21649              	.LVL2776:
3677:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[5] = 254;					/* Partition end head */
 21650              		.loc 1 3677 0
 21651 01b8 84F8F311 		strb	r1, [r4, #499]
3682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 21652              		.loc 1 3682 0
 21653 01bc 84F8FA71 		strb	r7, [r4, #506]
3681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
 21654              		.loc 1 3681 0
 21655 01c0 3F21     		movs	r1, #63
3682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 21656              		.loc 1 3682 0
 21657 01c2 079F     		ldr	r7, [sp, #28]
3681:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
 21658              		.loc 1 3681 0
 21659 01c4 84F8F611 		strb	r1, [r4, #502]
3682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 21660              		.loc 1 3682 0
 21661 01c8 84F8FC21 		strb	r2, [r4, #508]
 21662 01cc 0299     		ldr	r1, [sp, #8]
 21663 01ce 84F8FD71 		strb	r7, [r4, #509]
3683:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
 21664              		.loc 1 3683 0
 21665 01d2 5522     		movs	r2, #85
3673:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[1] = 1;						/* Partition start head */
 21666              		.loc 1 3673 0
 21667 01d4 0123     		movs	r3, #1
3683:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
 21668              		.loc 1 3683 0
 21669 01d6 84F82E22 		strb	r2, [r4, #558]
3684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)	/* Write it to the MBR sector */
 21670              		.loc 1 3684 0
 21671 01da 594F     		ldr	r7, .L2691+20
3682:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 21672              		.loc 1 3682 0
 21673 01dc 84F8FB11 		strb	r1, [r4, #507]
3683:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
 21674              		.loc 1 3683 0
 21675 01e0 AA22     		movs	r2, #170
 21676 01e2 84F82F22 		strb	r2, [r4, #559]
3673:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[1] = 1;						/* Partition start head */
 21677              		.loc 1 3673 0
 21678 01e6 84F8EF31 		strb	r3, [r4, #495]
3674:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
 21679              		.loc 1 3674 0
 21680 01ea 84F8F031 		strb	r3, [r4, #496]
3679:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[6] = (BYTE)((n >> 2) | 63);	/* Partiiton end sector */
 21681              		.loc 1 3679 0
 21682 01ee 84F8F4C1 		strb	ip, [r4, #500]
3680:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 21683              		.loc 1 3680 0
 21684 01f2 84F8F5E1 		strb	lr, [r4, #501]
3684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)	/* Write it to the MBR sector */
 21685              		.loc 1 3684 0
 21686 01f6 5946     		mov	r1, fp
 21687 01f8 0246     		mov	r2, r0
 21688 01fa 0297     		str	r7, [sp, #8]
3678:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 21689              		.loc 1 3678 0
 21690 01fc CDF820E0 		str	lr, [sp, #32]
3684:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)	/* Write it to the MBR sector */
 21691              		.loc 1 3684 0
 21692 0200 B847     		blx	r7
 21693              	.LVL2777:
 21694 0202 0028     		cmp	r0, #0
 21695 0204 7FF46DAF 		bne	.L2608
3686:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			md = 0xF8;
 21696              		.loc 1 3686 0
 21697 0208 F827     		movs	r7, #248
 21698 020a 0497     		str	r7, [sp, #16]
 21699              	.LVL2778:
 21700              	.L2624:
 547:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	BYTE *d = (BYTE*)dst;
 21701              		.loc 1 547 0
 21702 020c 5A46     		mov	r2, fp
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21703              		.loc 1 549 0
 21704 020e 40F2FF13 		movw	r3, #511
 21705 0212 00E0     		b	.L2626
 21706              	.LVL2779:
 21707              	.L2664:
 21708              	.LBB1827:
 21709              	.LBB1828:
 21710 0214 0346     		mov	r3, r0
 21711              	.LVL2780:
 21712              	.L2626:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21713              		.loc 1 550 0
 21714 0216 0021     		movs	r1, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21715              		.loc 1 549 0
 21716 0218 581E     		subs	r0, r3, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21717              		.loc 1 550 0
 21718 021a 02F8011B 		strb	r1, [r2], #1
 21719              	.LVL2781:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21720              		.loc 1 549 0
 21721 021e 002B     		cmp	r3, #0
 21722 0220 F8D1     		bne	.L2664
 21723 0222 5946     		mov	r1, fp
 21724 0224 0A22     		movs	r2, #10
 21725              	.LVL2782:
 21726 0226 474B     		ldr	r3, .L2691+24
 21727 0228 00E0     		b	.L2627
 21728              	.LVL2783:
 21729              	.L2665:
 21730              	.LBE1828:
 21731              	.LBE1827:
 21732              	.LBB1829:
 21733              	.LBB1830:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21734              		.loc 1 540 0
 21735 022a 3A46     		mov	r2, r7
 21736              	.LVL2784:
 21737              	.L2627:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 21738              		.loc 1 541 0
 21739 022c 13F8010B 		ldrb	r0, [r3], #1	@ zero_extendqisi2
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21740              		.loc 1 540 0
 21741 0230 571E     		subs	r7, r2, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 21742              		.loc 1 541 0
 21743 0232 01F8010B 		strb	r0, [r1], #1
 21744              	.LVL2785:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21745              		.loc 1 540 0
 21746 0236 002A     		cmp	r2, #0
 21747 0238 F7D1     		bne	.L2665
 21748              	.LVL2786:
 21749              	.LBE1830:
 21750              	.LBE1829:
3701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 21751              		.loc 1 3701 0
 21752 023a 099B     		ldr	r3, [sp, #36]
 21753              	.LVL2787:
3695:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_BytsPerSec, i);
 21754              		.loc 1 3695 0
 21755 023c 84F83B20 		strb	r2, [r4, #59]
3697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
 21756              		.loc 1 3697 0
 21757 0240 C9F30720 		ubfx	r0, r9, #8, #8
3700:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_RootEntCnt, i);
 21758              		.loc 1 3700 0
 21759 0244 B8F1030F 		cmp	r8, #3
 21760 0248 14BF     		ite	ne
 21761 024a 0221     		movne	r1, #2
 21762 024c 0021     		moveq	r1, #0
 21763              	.LVL2788:
3695:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_BytsPerSec, i);
 21764              		.loc 1 3695 0
 21765 024e 0227     		movs	r7, #2
 21766              	.LVL2789:
3697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
 21767              		.loc 1 3697 0
 21768 0250 84F83F00 		strb	r0, [r4, #63]
3698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 21769              		.loc 1 3698 0
 21770 0254 0120     		movs	r0, #1
3701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 21771              		.loc 1 3701 0
 21772 0256 B3F5803F 		cmp	r3, #65536
3695:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_BytsPerSec, i);
 21773              		.loc 1 3695 0
 21774 025a 84F83C70 		strb	r7, [r4, #60]
3696:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 21775              		.loc 1 3696 0
 21776 025e 84F83D50 		strb	r5, [r4, #61]
3697:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
 21777              		.loc 1 3697 0
 21778 0262 84F83E90 		strb	r9, [r4, #62]
3698:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 21779              		.loc 1 3698 0
 21780 0266 84F84000 		strb	r0, [r4, #64]
3700:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_RootEntCnt, i);
 21781              		.loc 1 3700 0
 21782 026a 84F84120 		strb	r2, [r4, #65]
 21783 026e 84F84210 		strb	r1, [r4, #66]
3701:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 21784              		.loc 1 3701 0
 21785 0272 80F04F81 		bcs	.L2629
3702:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_TotSec16, n_vol);
 21786              		.loc 1 3702 0
 21787 0276 C3F30722 		ubfx	r2, r3, #8, #8
 21788              	.LVL2790:
 21789 027a 84F84330 		strb	r3, [r4, #67]
 21790 027e 84F84420 		strb	r2, [r4, #68]
 21791              	.L2630:
3707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
 21792              		.loc 1 3707 0
 21793 0282 3F23     		movs	r3, #63
3706:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_Media] = md;					/* Media descriptor */
 21794              		.loc 1 3706 0
 21795 0284 0498     		ldr	r0, [sp, #16]
3707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
 21796              		.loc 1 3707 0
 21797 0286 84F84830 		strb	r3, [r4, #72]
 21798 028a 0027     		movs	r7, #0
3708:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
 21799              		.loc 1 3708 0
 21800 028c FF23     		movs	r3, #255
 21801 028e 84F84A30 		strb	r3, [r4, #74]
3706:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	tbl[BPB_Media] = md;					/* Media descriptor */
 21802              		.loc 1 3706 0
 21803 0292 84F84500 		strb	r0, [r4, #69]
3707:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
 21804              		.loc 1 3707 0
 21805 0296 84F84970 		strb	r7, [r4, #73]
3708:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
 21806              		.loc 1 3708 0
 21807 029a 84F84B70 		strb	r7, [r4, #75]
3709:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_DWORD(tbl+BPB_HiddSec, b_vol);		/* Hidden sectors */
 21808              		.loc 1 3709 0
 21809 029e 84F84CA0 		strb	sl, [r4, #76]
 21810 02a2 84F84D70 		strb	r7, [r4, #77]
 21811 02a6 84F84E70 		strb	r7, [r4, #78]
 21812 02aa 84F84F70 		strb	r7, [r4, #79]
3710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
 21813              		.loc 1 3710 0
 21814 02ae 264B     		ldr	r3, .L2691+28
 21815 02b0 9847     		blx	r3
 21816              	.LVL2791:
3711:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 21817              		.loc 1 3711 0
 21818 02b2 B8F1030F 		cmp	r8, #3
 21819              	.LVL2792:
3710:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
 21820              		.loc 1 3710 0
 21821 02b6 0890     		str	r0, [sp, #32]
3711:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 21822              		.loc 1 3711 0
 21823 02b8 00F03981 		beq	.L2690
3722:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 21824              		.loc 1 3722 0
 21825 02bc C6F30723 		ubfx	r3, r6, #8, #8
 21826 02c0 84F84730 		strb	r3, [r4, #71]
3723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
 21827              		.loc 1 3723 0
 21828 02c4 8023     		movs	r3, #128
3721:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID, n);			/* VSN */
 21829              		.loc 1 3721 0
 21830 02c6 020E     		lsrs	r2, r0, #24
 21831 02c8 C0F30727 		ubfx	r7, r0, #8, #8
 21832 02cc 010C     		lsrs	r1, r0, #16
3723:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
 21833              		.loc 1 3723 0
 21834 02ce 84F85430 		strb	r3, [r4, #84]
3724:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 21835              		.loc 1 3724 0
 21836 02d2 2923     		movs	r3, #41
3721:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID, n);			/* VSN */
 21837              		.loc 1 3721 0
 21838 02d4 84F85700 		strb	r0, [r4, #87]
 21839 02d8 84F85A20 		strb	r2, [r4, #90]
3724:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 21840              		.loc 1 3724 0
 21841 02dc 84F85630 		strb	r3, [r4, #86]
3721:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID, n);			/* VSN */
 21842              		.loc 1 3721 0
 21843 02e0 84F85870 		strb	r7, [r4, #88]
 21844 02e4 84F85910 		strb	r1, [r4, #89]
3722:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 21845              		.loc 1 3722 0
 21846 02e8 84F84660 		strb	r6, [r4, #70]
3725:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(tbl+BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 21847              		.loc 1 3725 0
 21848 02ec 04F15B02 		add	r2, r4, #91
 21849              	.LVL2793:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21850              		.loc 1 540 0
 21851 02f0 1220     		movs	r0, #18
 21852              	.LVL2794:
 531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *s = (const BYTE*)src;
 21853              		.loc 1 531 0
 21854 02f2 164B     		ldr	r3, .L2691+32
 21855 02f4 00E0     		b	.L2634
 21856              	.LVL2795:
 21857              	.L2668:
 21858              	.LBB1831:
 21859              	.LBB1832:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21860              		.loc 1 540 0
 21861 02f6 3846     		mov	r0, r7
 21862              	.LVL2796:
 21863              	.L2634:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 21864              		.loc 1 541 0
 21865 02f8 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21866              		.loc 1 540 0
 21867 02fc 471E     		subs	r7, r0, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 21868              		.loc 1 541 0
 21869 02fe 02F8011B 		strb	r1, [r2], #1
 21870              	.LVL2797:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21871              		.loc 1 540 0
 21872 0302 0028     		cmp	r0, #0
 21873 0304 F7D1     		bne	.L2668
 21874              	.LBE1832:
 21875              	.LBE1831:
3727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
 21876              		.loc 1 3727 0
 21877 0306 5523     		movs	r3, #85
 21878              	.LVL2798:
 21879 0308 84F82E32 		strb	r3, [r4, #558]
 21880 030c AA23     		movs	r3, #170
 21881 030e 84F82F32 		strb	r3, [r4, #559]
3728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
 21882              		.loc 1 3728 0
 21883 0312 5946     		mov	r1, fp
 21884 0314 5246     		mov	r2, sl
 21885              	.LVL2799:
 21886 0316 0123     		movs	r3, #1
 21887 0318 029F     		ldr	r7, [sp, #8]
 21888              	.LVL2800:
 21889 031a B847     		blx	r7
 21890              	.LVL2801:
 21891 031c 0028     		cmp	r0, #0
 21892 031e 7FF4E0AE 		bne	.L2608
 21893              	.LVL2802:
 21894              	.L2647:
 21895              	.LBB1833:
 21896              	.LBB1834:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21897              		.loc 1 549 0 discriminator 1
 21898 0322 5A46     		mov	r2, fp
 21899 0324 40F2FF13 		movw	r3, #511
 21900 0328 13E0     		b	.L2636
 21901              	.L2692:
 21902 032a 00BF     		.align	2
 21903              	.L2691:
 21904 032c 00000000 		.word	.LANCHOR2
 21905 0330 00000000 		.word	disk_initialize
 21906 0334 00000000 		.word	disk_ioctl
 21907 0338 00000000 		.word	.LANCHOR5
 21908 033c 00000000 		.word	.LANCHOR6
 21909 0340 00000000 		.word	disk_write
 21910 0344 14000000 		.word	.LC2
 21911 0348 00000000 		.word	get_fattime
 21912 034c 34000000 		.word	.LC4
 21913              	.LVL2803:
 21914              	.L2669:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21915              		.loc 1 549 0 is_stmt 0
 21916 0350 0346     		mov	r3, r0
 21917              	.LVL2804:
 21918              	.L2636:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21919              		.loc 1 550 0 is_stmt 1
 21920 0352 0021     		movs	r1, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21921              		.loc 1 549 0
 21922 0354 581E     		subs	r0, r3, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21923              		.loc 1 550 0
 21924 0356 02F8011B 		strb	r1, [r2], #1
 21925              	.LVL2805:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21926              		.loc 1 549 0
 21927 035a 002B     		cmp	r3, #0
 21928 035c F8D1     		bne	.L2669
 21929              	.LBE1834:
 21930              	.LBE1833:
3738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fmt != FS_FAT32) {
 21931              		.loc 1 3738 0
 21932 035e B8F1030F 		cmp	r8, #3
 21933 0362 00F03981 		beq	.L2637
3739:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
 21934              		.loc 1 3739 0
 21935 0366 AC4B     		ldr	r3, .L2693
 21936 0368 049F     		ldr	r7, [sp, #16]
 21937 036a B8F1010F 		cmp	r8, #1
 21938 036e 18BF     		it	ne
 21939 0370 6FF0FF03 		mvnne	r3, #255
 21940 0374 3B43     		orrs	r3, r3, r7
 21941              	.LVL2806:
3740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
 21942              		.loc 1 3740 0
 21943 0376 FF22     		movs	r2, #255
 21944              	.LVL2807:
 21945 0378 190E     		lsrs	r1, r3, #24
 21946              	.LVL2808:
3739:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
 21947              		.loc 1 3739 0
 21948 037a 0893     		str	r3, [sp, #32]
 21949              	.LVL2809:
3740:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
 21950              		.loc 1 3740 0
 21951 037c 84F83030 		strb	r3, [r4, #48]
 21952 0380 84F83120 		strb	r2, [r4, #49]
 21953 0384 84F83220 		strb	r2, [r4, #50]
 21954 0388 84F83310 		strb	r1, [r4, #51]
 21955              	.LVL2810:
 21956              	.L2639:
3747:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 21957              		.loc 1 3747 0
 21958 038c 059A     		ldr	r2, [sp, #20]
 21959 038e 029F     		ldr	r7, [sp, #8]
 21960 0390 0123     		movs	r3, #1
 21961 0392 0020     		movs	r0, #0
 21962              	.LVL2811:
 21963 0394 5946     		mov	r1, fp
 21964 0396 02EB0309 		add	r9, r2, r3
 21965              	.LVL2812:
 21966 039a B847     		blx	r7
 21967              	.LVL2813:
 21968 039c 0028     		cmp	r0, #0
 21969 039e 7FF4A0AE 		bne	.L2608
 21970 03a2 5A46     		mov	r2, fp
 21971 03a4 40F2FF13 		movw	r3, #511
 21972 03a8 00E0     		b	.L2640
 21973              	.LVL2814:
 21974              	.L2671:
 21975              	.LBB1835:
 21976              	.LBB1836:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21977              		.loc 1 549 0
 21978 03aa 0346     		mov	r3, r0
 21979              	.LVL2815:
 21980              	.L2640:
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21981              		.loc 1 550 0
 21982 03ac 0021     		movs	r1, #0
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21983              		.loc 1 549 0
 21984 03ae 581E     		subs	r0, r3, #1
 550:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = (BYTE)val;
 21985              		.loc 1 550 0
 21986 03b0 02F8011B 		strb	r1, [r2], #1
 21987              	.LVL2816:
 549:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 21988              		.loc 1 549 0
 21989 03b4 002B     		cmp	r3, #0
 21990 03b6 F8D1     		bne	.L2671
 21991              	.LBE1836:
 21992              	.LBE1835:
3750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
 21993              		.loc 1 3750 0
 21994 03b8 0127     		movs	r7, #1
 21995 03ba C446     		mov	ip, r8
 21996 03bc 0897     		str	r7, [sp, #32]
 21997 03be A846     		mov	r8, r5
 21998 03c0 2546     		mov	r5, r4
 21999              	.LVL2817:
 22000 03c2 0CE0     		b	.L2641
 22001              	.LVL2818:
 22002              	.L2642:
3751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 22003              		.loc 1 3751 0
 22004 03c4 CDF804C0 		str	ip, [sp, #4]
 22005 03c8 029F     		ldr	r7, [sp, #8]
 22006              	.LVL2819:
 22007 03ca B847     		blx	r7
 22008              	.LVL2820:
 22009 03cc DDF804C0 		ldr	ip, [sp, #4]
 22010 03d0 0028     		cmp	r0, #0
 22011 03d2 7FF486AE 		bne	.L2608
3750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
 22012              		.loc 1 3750 0
 22013 03d6 089F     		ldr	r7, [sp, #32]
 22014 03d8 0137     		adds	r7, r7, #1
 22015              	.LVL2821:
 22016 03da 0897     		str	r7, [sp, #32]
 22017              	.LVL2822:
3751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 22018              		.loc 1 3751 0
 22019 03dc A146     		mov	r9, r4
 22020              	.LVL2823:
 22021              	.L2641:
3751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 22022              		.loc 1 3751 0 is_stmt 0 discriminator 1
 22023 03de 0123     		movs	r3, #1
 22024 03e0 0020     		movs	r0, #0
3750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
 22025              		.loc 1 3750 0 is_stmt 1 discriminator 1
 22026 03e2 B742     		cmp	r7, r6
3751:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 22027              		.loc 1 3751 0 discriminator 1
 22028 03e4 4A46     		mov	r2, r9
 22029 03e6 5946     		mov	r1, fp
 22030 03e8 09EB0304 		add	r4, r9, r3
 22031              	.LVL2824:
3750:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
 22032              		.loc 1 3750 0 discriminator 1
 22033 03ec EAD3     		bcc	.L2642
 22034              	.LVL2825:
3757:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	i = (fmt == FS_FAT32) ? au : n_dir;
 22035              		.loc 1 3757 0
 22036 03ee 039F     		ldr	r7, [sp, #12]
 22037              	.LVL2826:
 22038 03f0 2C46     		mov	r4, r5
 22039 03f2 4546     		mov	r5, r8
 22040              	.LVL2827:
 22041 03f4 BCF1030F 		cmp	ip, #3
 22042 03f8 18BF     		it	ne
 22043 03fa 3D46     		movne	r5, r7
 22044 03fc E046     		mov	r8, ip
 22045              	.LVL2828:
 22046              	.L2644:
3759:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 22047              		.loc 1 3759 0
 22048 03fe 4A46     		mov	r2, r9
 22049 0400 0123     		movs	r3, #1
 22050 0402 0020     		movs	r0, #0
 22051 0404 5946     		mov	r1, fp
 22052 0406 029F     		ldr	r7, [sp, #8]
 22053 0408 844E     		ldr	r6, .L2693+4
 22054 040a 9944     		add	r9, r9, r3
 22055              	.LVL2829:
 22056 040c B847     		blx	r7
 22057              	.LVL2830:
 22058 040e 0028     		cmp	r0, #0
 22059 0410 7FF467AE 		bne	.L2608
3761:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	} while (--i);
 22060              		.loc 1 3761 0
 22061 0414 013D     		subs	r5, r5, #1
 22062              	.LVL2831:
 22063 0416 F2D1     		bne	.L2644
3773:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fmt == FS_FAT32) {
 22064              		.loc 1 3773 0
 22065 0418 B8F1030F 		cmp	r8, #3
 22066 041c 43D1     		bne	.L2645
3776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 22067              		.loc 1 3776 0
 22068 041e 069F     		ldr	r7, [sp, #24]
3777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 22069              		.loc 1 3777 0
 22070 0420 84F81D52 		strb	r5, [r4, #541]
3776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 22071              		.loc 1 3776 0
 22072 0424 791E     		subs	r1, r7, #1
 22073 0426 0B0C     		lsrs	r3, r1, #16
 22074 0428 0393     		str	r3, [sp, #12]
 22075 042a C1F30722 		ubfx	r2, r1, #8, #8
 22076 042e 4FEA1169 		lsr	r9, r1, #24
 22077              	.LVL2832:
 22078 0432 84F81812 		strb	r1, [r4, #536]
 22079 0436 0399     		ldr	r1, [sp, #12]
 22080 0438 0292     		str	r2, [sp, #8]
3774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 22081              		.loc 1 3774 0
 22082 043a 6127     		movs	r7, #97
3776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 22083              		.loc 1 3776 0
 22084 043c 84F81A12 		strb	r1, [r4, #538]
3777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 22085              		.loc 1 3777 0
 22086 0440 0221     		movs	r1, #2
3774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 22087              		.loc 1 3774 0
 22088 0442 84F83270 		strb	r7, [r4, #50]
3775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
 22089              		.loc 1 3775 0
 22090 0446 84F81772 		strb	r7, [r4, #535]
3777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 22091              		.loc 1 3777 0
 22092 044a 84F81C12 		strb	r1, [r4, #540]
3776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 22093              		.loc 1 3776 0
 22094 044e 029F     		ldr	r7, [sp, #8]
 22095 0450 84F81B92 		strb	r9, [r4, #539]
3778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
 22096              		.loc 1 3778 0
 22097 0454 5521     		movs	r1, #85
3774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 22098              		.loc 1 3774 0
 22099 0456 4FF0410E 		mov	lr, #65
3775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
 22100              		.loc 1 3775 0
 22101 045a 4FF0720C 		mov	ip, #114
3774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 22102              		.loc 1 3774 0
 22103 045e 4FF05208 		mov	r8, #82
3778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
 22104              		.loc 1 3778 0
 22105 0462 84F82E12 		strb	r1, [r4, #558]
 22106 0466 AA21     		movs	r1, #170
3779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
 22107              		.loc 1 3779 0
 22108 0468 0AF10102 		add	r2, sl, #1
 22109 046c 0123     		movs	r3, #1
3778:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
 22110              		.loc 1 3778 0
 22111 046e 84F82F12 		strb	r1, [r4, #559]
3774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 22112              		.loc 1 3774 0
 22113 0472 84F83080 		strb	r8, [r4, #48]
3779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
 22114              		.loc 1 3779 0
 22115 0476 5946     		mov	r1, fp
3774:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 22116              		.loc 1 3774 0
 22117 0478 84F83180 		strb	r8, [r4, #49]
 22118 047c 84F833E0 		strb	lr, [r4, #51]
3775:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
 22119              		.loc 1 3775 0
 22120 0480 84F814C2 		strb	ip, [r4, #532]
 22121 0484 84F815C2 		strb	ip, [r4, #533]
 22122 0488 84F816E2 		strb	lr, [r4, #534]
3776:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 22123              		.loc 1 3776 0
 22124 048c 84F81972 		strb	r7, [r4, #537]
3777:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 22125              		.loc 1 3777 0
 22126 0490 84F81E52 		strb	r5, [r4, #542]
 22127 0494 84F81F52 		strb	r5, [r4, #543]
3779:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
 22128              		.loc 1 3779 0
 22129 0498 B047     		blx	r6
 22130              	.LVL2833:
3780:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR+7) */
 22131              		.loc 1 3780 0
 22132 049a 2846     		mov	r0, r5
 22133 049c 5946     		mov	r1, fp
 22134 049e 0AF10702 		add	r2, sl, #7
 22135 04a2 0123     		movs	r3, #1
 22136 04a4 B047     		blx	r6
 22137              	.LVL2834:
 22138              	.L2645:
3783:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
 22139              		.loc 1 3783 0
 22140 04a6 0020     		movs	r0, #0
 22141 04a8 0146     		mov	r1, r0
 22142 04aa 0246     		mov	r2, r0
 22143 04ac 5C4B     		ldr	r3, .L2693+8
 22144 04ae 9847     		blx	r3
 22145              	.LVL2835:
 22146 04b0 0030     		adds	r0, r0, #0
 22147 04b2 18BF     		it	ne
 22148 04b4 0120     		movne	r0, #1
 22149 04b6 AAE5     		b	.L2678
 22150              	.LVL2836:
 22151              	.L2657:
3609:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 22152              		.loc 1 3609 0
 22153 04b8 0023     		movs	r3, #0
 22154 04ba E7E5     		b	.L2611
 22155              	.LVL2837:
 22156              	.L2687:
3628:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
 22157              		.loc 1 3628 0
 22158 04bc 0233     		adds	r3, r3, #2
 22159              	.LVL2838:
 22160 04be 5B00     		lsls	r3, r3, #1
 22161              	.LVL2839:
3619:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
 22162              		.loc 1 3619 0
 22163 04c0 4FF00208 		mov	r8, #2
 22164 04c4 17E6     		b	.L2649
 22165              	.LVL2840:
 22166              	.L2662:
 22167 04c6 554F     		ldr	r7, .L2693+4
 22168 04c8 0297     		str	r7, [sp, #8]
3669:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			md = 0xF0;
 22169              		.loc 1 3669 0
 22170 04ca F027     		movs	r7, #240
 22171 04cc 0497     		str	r7, [sp, #16]
 22172 04ce 04F1300B 		add	fp, r4, #48
 22173 04d2 9BE6     		b	.L2624
 22174              	.LVL2841:
 22175              	.L2689:
3651:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 22176              		.loc 1 3651 0 discriminator 1
 22177 04d4 069F     		ldr	r7, [sp, #24]
 22178 04d6 40F6F573 		movw	r3, #4085
 22179              	.LVL2842:
 22180 04da 9F42     		cmp	r7, r3
 22181 04dc 7FF6FFAD 		bls	.L2622
3657:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	case FS_FAT16:	sys = (n_vol < 0x10000) ? 0x04 : 0x06; break;
 22182              		.loc 1 3657 0
 22183 04e0 B1F5803F 		cmp	r1, #65536
 22184 04e4 2CBF     		ite	cs
 22185 04e6 0621     		movcs	r1, #6
 22186 04e8 0421     		movcc	r1, #4
 22187 04ea 35E6     		b	.L2623
 22188              	.LVL2843:
 22189              	.L2688:
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
 22190              		.loc 1 3650 0
 22191 04ec 099A     		ldr	r2, [sp, #36]
 22192 04ee 039F     		ldr	r7, [sp, #12]
3643:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n_rsv += n;
 22193              		.loc 1 3643 0
 22194 04f0 9944     		add	r9, r9, r3
 22195              	.LVL2844:
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
 22196              		.loc 1 3650 0
 22197 04f2 C9EB0202 		rsb	r2, r9, r2
 22198 04f6 921B     		subs	r2, r2, r6
 22199 04f8 D21B     		subs	r2, r2, r7
3644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_fat += n;
 22200              		.loc 1 3644 0
 22201 04fa 059F     		ldr	r7, [sp, #20]
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
 22202              		.loc 1 3650 0
 22203 04fc B2FBF5F2 		udiv	r2, r2, r5
3644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_fat += n;
 22204              		.loc 1 3644 0
 22205 0500 FF18     		adds	r7, r7, r3
3652:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 22206              		.loc 1 3652 0
 22207 0502 4FF6F573 		movw	r3, #65525
 22208 0506 9A42     		cmp	r2, r3
3650:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
 22209              		.loc 1 3650 0
 22210 0508 0692     		str	r2, [sp, #24]
3644:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		b_fat += n;
 22211              		.loc 1 3644 0
 22212 050a 0597     		str	r7, [sp, #20]
 22213              	.LVL2845:
3652:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 22214              		.loc 1 3652 0
 22215 050c 7FF6E7AD 		bls	.L2622
3658:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	default: 		sys = 0x0C; break;
 22216              		.loc 1 3658 0
 22217 0510 0C21     		movs	r1, #12
 22218 0512 21E6     		b	.L2623
 22219              	.LVL2846:
 22220              	.L2629:
3704:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_TotSec32, n_vol);
 22221              		.loc 1 3704 0
 22222 0514 C3F30720 		ubfx	r0, r3, #8, #8
 22223 0518 190C     		lsrs	r1, r3, #16
 22224 051a 1A0E     		lsrs	r2, r3, #24
 22225              	.LVL2847:
 22226 051c 84F85030 		strb	r3, [r4, #80]
 22227 0520 84F85100 		strb	r0, [r4, #81]
 22228 0524 84F85210 		strb	r1, [r4, #82]
 22229 0528 84F85320 		strb	r2, [r4, #83]
 22230 052c A9E6     		b	.L2630
 22231              	.L2690:
3713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 22232              		.loc 1 3713 0
 22233 052e 330E     		lsrs	r3, r6, #24
 22234 0530 84F85730 		strb	r3, [r4, #87]
3714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
 22235              		.loc 1 3714 0
 22236 0534 0223     		movs	r3, #2
 22237 0536 84F85C30 		strb	r3, [r4, #92]
3715:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSInfo record offset (VBR+1) */
 22238              		.loc 1 3715 0
 22239 053a 0123     		movs	r3, #1
 22240 053c 84F86030 		strb	r3, [r4, #96]
3716:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
 22241              		.loc 1 3716 0
 22242 0540 0623     		movs	r3, #6
 22243 0542 84F86230 		strb	r3, [r4, #98]
3717:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 22244              		.loc 1 3717 0
 22245 0546 8023     		movs	r3, #128
3712:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
 22246              		.loc 1 3712 0
 22247 0548 C0F30729 		ubfx	r9, r0, #8, #8
 22248              	.LVL2848:
 22249 054c 4FEA104C 		lsr	ip, r0, #16
 22250 0550 4FEA106E 		lsr	lr, r0, #24
3713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 22251              		.loc 1 3713 0
 22252 0554 320C     		lsrs	r2, r6, #16
 22253 0556 C6F30721 		ubfx	r1, r6, #8, #8
3717:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 22254              		.loc 1 3717 0
 22255 055a 84F87030 		strb	r3, [r4, #112]
3718:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 22256              		.loc 1 3718 0
 22257 055e 2923     		movs	r3, #41
3712:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
 22258              		.loc 1 3712 0
 22259 0560 84F87300 		strb	r0, [r4, #115]
3713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 22260              		.loc 1 3713 0
 22261 0564 84F85620 		strb	r2, [r4, #86]
3718:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 22262              		.loc 1 3718 0
 22263 0568 84F87230 		strb	r3, [r4, #114]
3712:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
 22264              		.loc 1 3712 0
 22265 056c 84F87490 		strb	r9, [r4, #116]
 22266 0570 84F875C0 		strb	ip, [r4, #117]
 22267 0574 84F876E0 		strb	lr, [r4, #118]
3713:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 22268              		.loc 1 3713 0
 22269 0578 84F85460 		strb	r6, [r4, #84]
 22270 057c 84F85510 		strb	r1, [r4, #85]
3714:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
 22271              		.loc 1 3714 0
 22272 0580 84F85D70 		strb	r7, [r4, #93]
 22273 0584 84F85E70 		strb	r7, [r4, #94]
 22274 0588 84F85F70 		strb	r7, [r4, #95]
3715:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSInfo record offset (VBR+1) */
 22275              		.loc 1 3715 0
 22276 058c 84F86170 		strb	r7, [r4, #97]
3716:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
 22277              		.loc 1 3716 0
 22278 0590 84F86370 		strb	r7, [r4, #99]
3719:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		mem_cpy(tbl+BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 22279              		.loc 1 3719 0
 22280 0594 04F17702 		add	r2, r4, #119
 22281              	.LVL2849:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 22282              		.loc 1 540 0
 22283 0598 1220     		movs	r0, #18
 531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	const BYTE *s = (const BYTE*)src;
 22284              		.loc 1 531 0
 22285 059a 224B     		ldr	r3, .L2693+12
 22286 059c 00E0     		b	.L2632
 22287              	.LVL2850:
 22288              	.L2667:
 22289              	.LBB1837:
 22290              	.LBB1838:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 22291              		.loc 1 540 0
 22292 059e 3846     		mov	r0, r7
 22293              	.LVL2851:
 22294              	.L2632:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 22295              		.loc 1 541 0
 22296 05a0 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 22297              		.loc 1 540 0
 22298 05a4 471E     		subs	r7, r0, #1
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 22299              		.loc 1 541 0
 22300 05a6 02F8011B 		strb	r1, [r2], #1
 22301              	.LVL2852:
 540:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (cnt--)
 22302              		.loc 1 540 0
 22303 05aa 0028     		cmp	r0, #0
 22304 05ac F7D1     		bne	.L2667
 22305              	.LBE1838:
 22306              	.LBE1837:
3727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	ST_WORD(tbl+BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
 22307              		.loc 1 3727 0
 22308 05ae 5523     		movs	r3, #85
 22309              	.LVL2853:
 22310 05b0 84F82E32 		strb	r3, [r4, #558]
 22311 05b4 AA23     		movs	r3, #170
 22312 05b6 84F82F32 		strb	r3, [r4, #559]
3728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
 22313              		.loc 1 3728 0
 22314 05ba 5946     		mov	r1, fp
 22315 05bc 5246     		mov	r2, sl
 22316              	.LVL2854:
 22317 05be 0123     		movs	r3, #1
 22318 05c0 029F     		ldr	r7, [sp, #8]
 22319              	.LVL2855:
 22320 05c2 B847     		blx	r7
 22321              	.LVL2856:
 22322 05c4 0028     		cmp	r0, #0
 22323 05c6 7FF48CAD 		bne	.L2608
3731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
 22324              		.loc 1 3731 0
 22325 05ca 5946     		mov	r1, fp
 22326 05cc 0AF10602 		add	r2, sl, #6
 22327 05d0 0123     		movs	r3, #1
 22328 05d2 124F     		ldr	r7, .L2693+4
 22329 05d4 B847     		blx	r7
 22330              	.LVL2857:
 22331 05d6 A4E6     		b	.L2647
 22332              	.LVL2858:
 22333              	.L2637:
3742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n |= 0xFFFFFF00;
 22334              		.loc 1 3742 0
 22335 05d8 049F     		ldr	r7, [sp, #16]
3743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
 22336              		.loc 1 3743 0
 22337 05da FF23     		movs	r3, #255
3742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n |= 0xFFFFFF00;
 22338              		.loc 1 3742 0
 22339 05dc 67F0FF02 		orn	r2, r7, #255
 22340              	.LVL2859:
3743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
 22341              		.loc 1 3743 0
 22342 05e0 84F83130 		strb	r3, [r4, #49]
 22343 05e4 84F83230 		strb	r3, [r4, #50]
 22344 05e8 84F83330 		strb	r3, [r4, #51]
3744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+4, 0xFFFFFFFF);
 22345              		.loc 1 3744 0
 22346 05ec 84F83430 		strb	r3, [r4, #52]
 22347 05f0 84F83530 		strb	r3, [r4, #53]
 22348 05f4 84F83630 		strb	r3, [r4, #54]
 22349 05f8 84F83730 		strb	r3, [r4, #55]
3745:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root dir */
 22350              		.loc 1 3745 0
 22351 05fc 84F83830 		strb	r3, [r4, #56]
 22352 0600 84F83930 		strb	r3, [r4, #57]
 22353 0604 84F83A30 		strb	r3, [r4, #58]
 22354 0608 0F23     		movs	r3, #15
3742:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			n |= 0xFFFFFF00;
 22355              		.loc 1 3742 0
 22356 060a 0892     		str	r2, [sp, #32]
 22357              	.LVL2860:
3743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
 22358              		.loc 1 3743 0
 22359 060c 84F83020 		strb	r2, [r4, #48]
3745:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root dir */
 22360              		.loc 1 3745 0
 22361 0610 84F83B30 		strb	r3, [r4, #59]
 22362 0614 BAE6     		b	.L2639
 22363              	.L2694:
 22364 0616 00BF     		.align	2
 22365              	.L2693:
 22366 0618 00FFFF00 		.word	16776960
 22367 061c 00000000 		.word	disk_write
 22368 0620 00000000 		.word	disk_ioctl
 22369 0624 20000000 		.word	.LC3
 22370              		.cfi_endproc
 22371              	.LFE45:
 22373              		.section	.text.f_gets,"ax",%progbits
 22374              		.align	2
 22375              		.global	f_gets
 22376              		.thumb
 22377              		.thumb_func
 22379              	f_gets:
 22380              	.LFB46:
3869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 22381              		.loc 1 3869 0
 22382              		.cfi_startproc
 22383              		@ args = 0, pretend = 0, frame = 16
 22384              		@ frame_needed = 0, uses_anonymous_args = 0
 22385              	.LVL2861:
 22386 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 22387              	.LCFI54:
 22388              		.cfi_def_cfa_offset 36
 22389              		.cfi_offset 4, -36
 22390              		.cfi_offset 5, -32
 22391              		.cfi_offset 6, -28
 22392              		.cfi_offset 7, -24
 22393              		.cfi_offset 8, -20
 22394              		.cfi_offset 9, -16
 22395              		.cfi_offset 10, -12
 22396              		.cfi_offset 11, -8
 22397              		.cfi_offset 14, -4
 22398 0004 8046     		mov	r8, r0
 22399              	.LVL2862:
 22400 0006 85B0     		sub	sp, sp, #20
 22401              	.LCFI55:
 22402              		.cfi_def_cfa_offset 56
3869:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 22403              		.loc 1 3869 0
 22404 0008 1446     		mov	r4, r2
 22405 000a 01F1FF39 		add	r9, r1, #-1
3871:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	TCHAR c, *p = buff;
 22406              		.loc 1 3871 0
 22407 000e 0746     		mov	r7, r0
3870:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	int n = 0;
 22408              		.loc 1 3870 0
 22409 0010 0025     		movs	r5, #0
 22410              	.LVL2863:
 22411              	.L2696:
3876:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	while (n < len - 1) {			/* Read bytes until buffer gets filled */
 22412              		.loc 1 3876 0 discriminator 1
 22413 0012 4D45     		cmp	r5, r9
 22414 0014 04DA     		bge	.L2699
 22415              	.L2742:
 22416              	.LVL2864:
 22417              	.LBB1855:
 22418              	.LBB1856:
2388:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);				/* Check validity */
 22419              		.loc 1 2388 0
 22420 0016 2368     		ldr	r3, [r4, #0]
 22421 0018 A188     		ldrh	r1, [r4, #4]
 22422              	.LVL2865:
 22423              	.LBB1857:
 22424              	.LBB1858:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 22425              		.loc 1 2177 0
 22426 001a 0BB1     		cbz	r3, .L2699
 22427 001c 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 22428 001e 42B9     		cbnz	r2, .L2758
 22429              	.LVL2866:
 22430              	.L2699:
 22431              	.LBE1858:
 22432              	.LBE1857:
 22433              	.LBE1856:
 22434              	.LBE1855:
3907:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*p = 0;
 22435              		.loc 1 3907 0
 22436 0020 0023     		movs	r3, #0
3908:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 22437              		.loc 1 3908 0
 22438 0022 9D42     		cmp	r5, r3
 22439 0024 08BF     		it	eq
 22440 0026 9846     		moveq	r8, r3
 22441              	.LVL2867:
3907:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	*p = 0;
 22442              		.loc 1 3907 0
 22443 0028 3B70     		strb	r3, [r7, #0]
3909:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 22444              		.loc 1 3909 0
 22445 002a 4046     		mov	r0, r8
 22446 002c 05B0     		add	sp, sp, #20
 22447 002e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 22448              	.LVL2868:
 22449              	.L2758:
 22450              	.LBB1883:
 22451              	.LBB1879:
 22452              	.LBB1862:
 22453              	.LBB1861:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 22454              		.loc 1 2177 0
 22455 0032 DA88     		ldrh	r2, [r3, #6]
 22456 0034 8A42     		cmp	r2, r1
 22457 0036 F3D1     		bne	.L2699
 22458              	.LVL2869:
 22459              	.LBB1859:
 22460              	.LBB1860:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 22461              		.loc 1 2182 0
 22462 0038 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 22463 003a 6E4B     		ldr	r3, .L2761
 22464              	.LVL2870:
 22465 003c 9847     		blx	r3
 22466              	.LVL2871:
 22467 003e C307     		lsls	r3, r0, #31
 22468 0040 EED4     		bmi	.L2699
 22469              	.LBE1860:
 22470              	.LBE1859:
 22471              	.LBE1861:
 22472              	.LBE1862:
2390:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)					/* Aborted file? */
 22473              		.loc 1 2390 0
 22474 0042 A179     		ldrb	r1, [r4, #6]	@ zero_extendqisi2
 22475 0044 0806     		lsls	r0, r1, #24
 22476 0046 EBD4     		bmi	.L2699
2392:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 22477              		.loc 1 2392 0
 22478 0048 C807     		lsls	r0, r1, #31
 22479 004a E9D5     		bpl	.L2699
2394:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	remain = fp->fsize - fp->fptr;
 22480              		.loc 1 2394 0
 22481 004c A368     		ldr	r3, [r4, #8]
 22482              	.LVL2872:
2397:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
 22483              		.loc 1 2397 0
 22484 004e E268     		ldr	r2, [r4, #12]
 22485 0050 9A42     		cmp	r2, r3
 22486 0052 E5D0     		beq	.L2699
2399:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 22487              		.loc 1 2399 0
 22488 0054 DA05     		lsls	r2, r3, #23
 22489 0056 D20D     		lsrs	r2, r2, #23
 22490 0058 002A     		cmp	r2, #0
 22491 005a 3ED1     		bne	.L2700
2400:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 22492              		.loc 1 2400 0
 22493 005c 2668     		ldr	r6, [r4, #0]
 22494 005e B278     		ldrb	r2, [r6, #2]	@ zero_extendqisi2
 22495 0060 013A     		subs	r2, r2, #1
 22496 0062 02EA5322 		and	r2, r2, r3, lsr #9
 22497              	.LVL2873:
2401:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 22498              		.loc 1 2401 0
 22499 0066 12F0FF0B 		ands	fp, r2, #255
 22500 006a 45D0     		beq	.L2701
 22501 006c 6369     		ldr	r3, [r4, #20]
 22502              	.LVL2874:
 22503              	.L2702:
 22504              	.LBB1863:
 22505              	.LBB1864:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 22506              		.loc 1 807 0
 22507 006e B169     		ldr	r1, [r6, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 22508              		.loc 1 806 0
 22509 0070 023B     		subs	r3, r3, #2
 22510              	.LVL2875:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 22511              		.loc 1 807 0
 22512 0072 0239     		subs	r1, r1, #2
 22513 0074 8B42     		cmp	r3, r1
 22514 0076 04D3     		bcc	.L2759
 22515              	.LVL2876:
 22516              	.L2757:
 22517              	.LBE1864:
 22518              	.LBE1863:
2447:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 22519              		.loc 1 2447 0
 22520 0078 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 22521              	.L2756:
 22522 007a 63F07F03 		orn	r3, r3, #127
 22523 007e A371     		strb	r3, [r4, #6]
 22524 0080 CEE7     		b	.L2699
 22525              	.LVL2877:
 22526              	.L2759:
 22527              	.LBB1866:
 22528              	.LBB1865:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 22529              		.loc 1 808 0
 22530 0082 96F802A0 		ldrb	sl, [r6, #2]	@ zero_extendqisi2
 22531 0086 B26A     		ldr	r2, [r6, #40]
 22532 0088 0AFB0323 		mla	r3, sl, r3, r2
 22533              	.LVL2878:
 22534              	.LBE1865:
 22535              	.LBE1866:
2417:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 22536              		.loc 1 2417 0
 22537 008c 002B     		cmp	r3, #0
 22538 008e F3D0     		beq	.L2757
2438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
 22539              		.loc 1 2438 0
 22540 0090 A269     		ldr	r2, [r4, #24]
2418:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 22541              		.loc 1 2418 0
 22542 0092 03EB0B0A 		add	sl, r3, fp
 22543              	.LVL2879:
2438:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
 22544              		.loc 1 2438 0
 22545 0096 9245     		cmp	sl, r2
 22546 0098 1AD0     		beq	.L2717
 22547              	.LBE1879:
2440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
 22548              		.loc 1 2440 0
 22549 009a A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 22550              	.LBB1880:
 22551 009c 03F04003 		and	r3, r3, #64
 22552 00a0 DBB2     		uxtb	r3, r3
2441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 22553              		.loc 1 2441 0
 22554 00a2 04F1240B 		add	fp, r4, #36
2440:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
 22555              		.loc 1 2440 0
 22556 00a6 5BB1     		cbz	r3, .L2718
2441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 22557              		.loc 1 2441 0
 22558 00a8 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 22559 00aa 534E     		ldr	r6, .L2761+4
 22560              	.LVL2880:
 22561 00ac 0123     		movs	r3, #1
 22562 00ae 5946     		mov	r1, fp
 22563 00b0 B047     		blx	r6
 22564              	.LVL2881:
2442:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 22565              		.loc 1 2442 0
 22566 00b2 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
2441:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 22567              		.loc 1 2441 0
 22568 00b4 0028     		cmp	r0, #0
 22569 00b6 E0D1     		bne	.L2756
2443:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					fp->flag &= ~FA__DIRTY;
 22570              		.loc 1 2443 0
 22571 00b8 23F04003 		bic	r3, r3, #64
 22572 00bc 2668     		ldr	r6, [r4, #0]
 22573 00be A371     		strb	r3, [r4, #6]
 22574              	.L2718:
2446:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)	/* Fill sector cache */
 22575              		.loc 1 2446 0
 22576 00c0 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 22577 00c2 4E4E     		ldr	r6, .L2761+8
 22578 00c4 5946     		mov	r1, fp
 22579 00c6 5246     		mov	r2, sl
 22580 00c8 0123     		movs	r3, #1
 22581 00ca B047     		blx	r6
 22582              	.LVL2882:
 22583 00cc 0028     		cmp	r0, #0
 22584 00ce D3D1     		bne	.L2757
 22585              	.L2717:
 22586 00d0 A368     		ldr	r3, [r4, #8]
2450:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 22587              		.loc 1 2450 0
 22588 00d2 C4F818A0 		str	sl, [r4, #24]
 22589 00d6 DA05     		lsls	r2, r3, #23
 22590 00d8 D20D     		lsrs	r2, r2, #23
 22591              	.LVL2883:
 22592              	.L2700:
 22593              	.LBB1867:
 22594              	.LBB1868:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 22595              		.loc 1 541 0
 22596 00da A218     		adds	r2, r4, r2
 22597              	.LVL2884:
 22598              	.LBE1868:
 22599              	.LBE1867:
2398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 22600              		.loc 1 2398 0
 22601 00dc 0133     		adds	r3, r3, #1
 22602              	.LBB1871:
 22603              	.LBB1869:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 22604              		.loc 1 541 0
 22605 00de 92F82420 		ldrb	r2, [r2, #36]	@ zero_extendqisi2
 22606              	.LBE1869:
 22607              	.LBE1871:
2398:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 22608              		.loc 1 2398 0
 22609 00e2 A360     		str	r3, [r4, #8]
 22610              	.LBE1880:
 22611              	.LBE1883:
3901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '\r') continue;	/* Strip '\r' */
 22612              		.loc 1 3901 0
 22613 00e4 0D2A     		cmp	r2, #13
 22614              	.LBB1884:
 22615              	.LBB1881:
 22616              	.LBB1872:
 22617              	.LBB1870:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 22618              		.loc 1 541 0
 22619 00e6 8DF80C20 		strb	r2, [sp, #12]
 22620              	.LVL2885:
 22621              	.LBE1870:
 22622              	.LBE1872:
 22623              	.LBE1881:
 22624              	.LBE1884:
3901:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '\r') continue;	/* Strip '\r' */
 22625              		.loc 1 3901 0
 22626 00ea 94D0     		beq	.L2742
3904:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		n++;
 22627              		.loc 1 3904 0
 22628 00ec 0135     		adds	r5, r5, #1
 22629              	.LVL2886:
3905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 22630              		.loc 1 3905 0
 22631 00ee 0A2A     		cmp	r2, #10
3903:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*p++ = c;
 22632              		.loc 1 3903 0
 22633 00f0 07F8012B 		strb	r2, [r7], #1
 22634              	.LVL2887:
3905:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 22635              		.loc 1 3905 0
 22636 00f4 8DD1     		bne	.L2696
 22637 00f6 93E7     		b	.L2699
 22638              	.LVL2888:
 22639              	.L2701:
 22640              	.LBB1885:
 22641              	.LBB1882:
2402:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 22642              		.loc 1 2402 0
 22643 00f8 3BB9     		cbnz	r3, .L2703
2403:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
 22644              		.loc 1 2403 0
 22645 00fa 2369     		ldr	r3, [r4, #16]
 22646              	.LVL2889:
 22647              	.L2704:
2412:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
 22648              		.loc 1 2412 0
 22649 00fc 012B     		cmp	r3, #1
 22650 00fe 25D9     		bls	.L2755
2413:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 22651              		.loc 1 2413 0
 22652 0100 5A1C     		adds	r2, r3, #1
 22653 0102 23D0     		beq	.L2755
 22654 0104 2668     		ldr	r6, [r4, #0]
2414:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 22655              		.loc 1 2414 0
 22656 0106 6361     		str	r3, [r4, #20]
 22657 0108 B1E7     		b	.L2702
 22658              	.LVL2890:
 22659              	.L2703:
2410:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
 22660              		.loc 1 2410 0
 22661 010a D4F814A0 		ldr	sl, [r4, #20]
 22662              	.LVL2891:
 22663              	.LBB1873:
 22664              	.LBB1874:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 22665              		.loc 1 828 0
 22666 010e BAF1010F 		cmp	sl, #1
 22667 0112 09D9     		bls	.L2751
 22668 0114 B369     		ldr	r3, [r6, #24]
 22669              	.LVL2892:
 22670 0116 9A45     		cmp	sl, r3
 22671 0118 06D2     		bcs	.L2751
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 22672              		.loc 1 831 0
 22673 011a 3378     		ldrb	r3, [r6, #0]	@ zero_extendqisi2
 22674 011c 022B     		cmp	r3, #2
 22675 011e 34D0     		beq	.L2707
 22676 0120 032B     		cmp	r3, #3
 22677 0122 15D0     		beq	.L2708
 22678 0124 012B     		cmp	r3, #1
 22679 0126 03D0     		beq	.L2760
 22680              	.LVL2893:
 22681              	.L2751:
 22682              	.LBE1874:
 22683              	.LBE1873:
2413:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 22684              		.loc 1 2413 0
 22685 0128 61F07F01 		orn	r1, r1, #127
 22686 012c A171     		strb	r1, [r4, #6]
 22687 012e 77E7     		b	.L2699
 22688              	.LVL2894:
 22689              	.L2760:
 22690              	.LBB1878:
 22691              	.LBB1877:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 22692              		.loc 1 834 0
 22693 0130 316A     		ldr	r1, [r6, #32]
 22694 0132 334A     		ldr	r2, .L2761+12
 22695              	.LVL2895:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 22696              		.loc 1 833 0
 22697 0134 0AEB5A03 		add	r3, sl, sl, lsr #1
 22698              	.LVL2896:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 22699              		.loc 1 834 0
 22700 0138 01EB5321 		add	r1, r1, r3, lsr #9
 22701 013c 0192     		str	r2, [sp, #4]
 22702 013e 0093     		str	r3, [sp, #0]
 22703 0140 3046     		mov	r0, r6
 22704 0142 9047     		blx	r2
 22705              	.LVL2897:
 22706 0144 019A     		ldr	r2, [sp, #4]
 22707 0146 009B     		ldr	r3, [sp, #0]
 22708 0148 0028     		cmp	r0, #0
 22709 014a 32D0     		beq	.L2709
 22710              	.LVL2898:
 22711              	.L2755:
 22712 014c A179     		ldrb	r1, [r4, #6]	@ zero_extendqisi2
 22713 014e EBE7     		b	.L2751
 22714              	.LVL2899:
 22715              	.L2708:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 22716              		.loc 1 846 0
 22717 0150 316A     		ldr	r1, [r6, #32]
 22718 0152 2B4B     		ldr	r3, .L2761+12
 22719 0154 3046     		mov	r0, r6
 22720 0156 01EBDA11 		add	r1, r1, sl, lsr #7
 22721 015a 9847     		blx	r3
 22722              	.LVL2900:
 22723 015c 0028     		cmp	r0, #0
 22724 015e F5D1     		bne	.L2755
 22725              	.LVL2901:
 22726              	.LBB1875:
 22727              	.LBB1876:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 22728              		.loc 1 847 0
 22729 0160 4FEA4A62 		lsl	r2, sl, #25
 22730 0164 D20D     		lsrs	r2, r2, #23
 22731 0166 02F13003 		add	r3, r2, #48
 22732 016a F318     		adds	r3, r6, r3
 22733              	.LVL2902:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 22734              		.loc 1 848 0
 22735 016c B618     		adds	r6, r6, r2
 22736              	.LVL2903:
 22737 016e DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 22738 0170 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 22739 0172 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 22740 0174 96F83030 		ldrb	r3, [r6, #48]	@ zero_extendqisi2
 22741              	.LVL2904:
 22742 0178 1206     		lsls	r2, r2, #24
 22743 017a 42EA0042 		orr	r2, r2, r0, lsl #16
 22744 017e 42EA0122 		orr	r2, r2, r1, lsl #8
 22745 0182 1343     		orrs	r3, r3, r2
 22746 0184 23F07043 		bic	r3, r3, #-268435456
 22747 0188 B8E7     		b	.L2704
 22748              	.LVL2905:
 22749              	.L2707:
 22750              	.LBE1876:
 22751              	.LBE1875:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 22752              		.loc 1 841 0
 22753 018a 316A     		ldr	r1, [r6, #32]
 22754 018c 1C4B     		ldr	r3, .L2761+12
 22755 018e 3046     		mov	r0, r6
 22756 0190 01EB1A21 		add	r1, r1, sl, lsr #8
 22757 0194 9847     		blx	r3
 22758              	.LVL2906:
 22759 0196 0028     		cmp	r0, #0
 22760 0198 D8D1     		bne	.L2755
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 22761              		.loc 1 842 0
 22762 019a 4FEA0A63 		lsl	r3, sl, #24
 22763 019e DB0D     		lsrs	r3, r3, #23
 22764              	.LVL2907:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 22765              		.loc 1 843 0
 22766 01a0 F218     		adds	r2, r6, r3
 22767 01a2 1346     		mov	r3, r2
 22768              	.LVL2908:
 22769 01a4 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 22770 01a8 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 22771 01ac 42EA0323 		orr	r3, r2, r3, lsl #8
 22772 01b0 A4E7     		b	.L2704
 22773              	.LVL2909:
 22774              	.L2709:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 22775              		.loc 1 835 0
 22776 01b2 D805     		lsls	r0, r3, #23
 22777 01b4 C00D     		lsrs	r0, r0, #23
 22778 01b6 06EB000E 		add	lr, r6, r0
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 22779              		.loc 1 836 0
 22780 01ba 316A     		ldr	r1, [r6, #32]
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 22781              		.loc 1 835 0
 22782 01bc 9EF830C0 		ldrb	ip, [lr, #48]	@ zero_extendqisi2
 22783              	.LVL2910:
 22784 01c0 0133     		adds	r3, r3, #1
 22785              	.LVL2911:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 22786              		.loc 1 836 0
 22787 01c2 01EB5321 		add	r1, r1, r3, lsr #9
 22788 01c6 8DE80810 		stmia	sp, {r3, ip}
 22789 01ca 3046     		mov	r0, r6
 22790 01cc 9047     		blx	r2
 22791              	.LVL2912:
 22792 01ce 9DE80810 		ldmia	sp, {r3, ip}
 22793 01d2 0028     		cmp	r0, #0
 22794 01d4 BAD1     		bne	.L2755
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 22795              		.loc 1 837 0
 22796 01d6 DB05     		lsls	r3, r3, #23
 22797 01d8 DB0D     		lsrs	r3, r3, #23
 22798 01da F318     		adds	r3, r6, r3
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 22799              		.loc 1 838 0
 22800 01dc 1AF0010F 		tst	sl, #1
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 22801              		.loc 1 837 0
 22802 01e0 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 22803 01e4 4CEA0323 		orr	r3, ip, r3, lsl #8
 22804              	.LVL2913:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 22805              		.loc 1 838 0
 22806 01e8 01D0     		beq	.L2711
 22807 01ea 1B09     		lsrs	r3, r3, #4
 22808              	.LVL2914:
 22809 01ec 86E7     		b	.L2704
 22810              	.LVL2915:
 22811              	.L2711:
 22812 01ee 1B05     		lsls	r3, r3, #20
 22813              	.LVL2916:
 22814 01f0 1B0D     		lsrs	r3, r3, #20
 22815 01f2 83E7     		b	.L2704
 22816              	.L2762:
 22817              		.align	2
 22818              	.L2761:
 22819 01f4 00000000 		.word	disk_status
 22820 01f8 00000000 		.word	disk_write
 22821 01fc 00000000 		.word	disk_read
 22822 0200 00000000 		.word	move_window
 22823              	.LBE1877:
 22824              	.LBE1878:
 22825              	.LBE1882:
 22826              	.LBE1885:
 22827              		.cfi_endproc
 22828              	.LFE46:
 22830              		.section	.text.f_putc,"ax",%progbits
 22831              		.align	2
 22832              		.global	f_putc
 22833              		.thumb
 22834              		.thumb_func
 22836              	f_putc:
 22837              	.LFB47:
3922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 22838              		.loc 1 3922 0
 22839              		.cfi_startproc
 22840              		@ args = 0, pretend = 0, frame = 8
 22841              		@ frame_needed = 0, uses_anonymous_args = 0
 22842              	.LVL2917:
 22843 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 22844              	.LCFI56:
 22845              		.cfi_def_cfa_offset 20
 22846              		.cfi_offset 4, -20
 22847              		.cfi_offset 5, -16
 22848              		.cfi_offset 6, -12
 22849              		.cfi_offset 7, -8
 22850              		.cfi_offset 14, -4
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 22851              		.loc 1 3928 0
 22852 0002 0A28     		cmp	r0, #10
3922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 22853              		.loc 1 3922 0
 22854 0004 83B0     		sub	sp, sp, #12
 22855              	.LCFI57:
 22856              		.cfi_def_cfa_offset 32
3922:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 22857              		.loc 1 3922 0
 22858 0006 0546     		mov	r5, r0
 22859 0008 0C46     		mov	r4, r1
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 22860              		.loc 1 3928 0
 22861 000a 0DD0     		beq	.L2805
 22862              	.LVL2918:
 22863              	.L2764:
 22864              	.LBB1900:
 22865              	.LBB1901:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 22866              		.loc 1 2490 0
 22867 000c 2368     		ldr	r3, [r4, #0]
 22868              	.LBE1901:
 22869              	.LBE1900:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 22870              		.loc 1 3948 0
 22871 000e 8DF80050 		strb	r5, [sp, #0]
 22872              	.LVL2919:
 22873              	.LBB1920:
 22874              	.LBB1916:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 22875              		.loc 1 2490 0
 22876 0012 A188     		ldrh	r1, [r4, #4]
 22877              	.LVL2920:
 22878              	.LBB1902:
 22879              	.LBB1903:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 22880              		.loc 1 2177 0
 22881 0014 23B1     		cbz	r3, .L2787
 22882 0016 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 22883 0018 12B1     		cbz	r2, .L2787
 22884 001a DA88     		ldrh	r2, [r3, #6]
 22885 001c 8A42     		cmp	r2, r1
 22886 001e 0ED0     		beq	.L2806
 22887              	.LVL2921:
 22888              	.L2787:
 22889              	.LBE1903:
 22890              	.LBE1902:
 22891              	.LBE1916:
 22892              	.LBE1920:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 22893              		.loc 1 3952 0 discriminator 2
 22894 0020 4FF0FF30 		mov	r0, #-1
 22895              	.L2803:
3953:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 22896              		.loc 1 3953 0
 22897 0024 03B0     		add	sp, sp, #12
 22898 0026 F0BD     		pop	{r4, r5, r6, r7, pc}
 22899              	.LVL2922:
 22900              	.L2805:
 22901              	.LBB1921:
 22902              	.LBB1922:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 22903              		.loc 1 3948 0
 22904 0028 02A9     		add	r1, sp, #8
 22905              	.LVL2923:
 22906 002a 0D23     		movs	r3, #13
 22907 002c 01F8083D 		strb	r3, [r1, #-8]!
 22908              	.LVL2924:
3951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	f_write(fil, s, btw, &bw);		/* Write the char to the file */
 22909              		.loc 1 3951 0
 22910 0030 2046     		mov	r0, r4
 22911              	.LVL2925:
 22912 0032 6946     		mov	r1, sp
 22913 0034 0122     		movs	r2, #1
 22914 0036 01AB     		add	r3, sp, #4
 22915 0038 4A4E     		ldr	r6, .L2813
 22916 003a B047     		blx	r6
 22917              	.LVL2926:
 22918 003c E6E7     		b	.L2764
 22919              	.LVL2927:
 22920              	.L2806:
 22921              	.LBE1922:
 22922              	.LBE1921:
 22923              	.LBB1923:
 22924              	.LBB1917:
 22925              	.LBB1907:
 22926              	.LBB1906:
 22927              	.LBB1904:
 22928              	.LBB1905:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 22929              		.loc 1 2182 0
 22930 003e 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 22931 0040 494B     		ldr	r3, .L2813+4
 22932              	.LVL2928:
 22933 0042 9847     		blx	r3
 22934              	.LVL2929:
 22935 0044 10F00101 		ands	r1, r0, #1
 22936 0048 EAD1     		bne	.L2787
 22937              	.LBE1905:
 22938              	.LBE1904:
 22939              	.LBE1906:
 22940              	.LBE1907:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 22941              		.loc 1 2492 0
 22942 004a A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 22943 004c 1006     		lsls	r0, r2, #24
 22944 004e 1646     		mov	r6, r2
 22945 0050 E6D4     		bmi	.L2787
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 22946              		.loc 1 2494 0
 22947 0052 02F00203 		and	r3, r2, #2
 22948 0056 DBB2     		uxtb	r3, r3
 22949 0058 002B     		cmp	r3, #0
 22950 005a E1D0     		beq	.L2787
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 22951              		.loc 1 2496 0
 22952 005c E068     		ldr	r0, [r4, #12]
 22953              	.LVL2930:
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 22954              		.loc 1 2498 0
 22955 005e 431C     		adds	r3, r0, #1
 22956 0060 7DD2     		bcs	.L2807
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 22957              		.loc 1 2500 0
 22958 0062 A168     		ldr	r1, [r4, #8]
 22959 0064 CB05     		lsls	r3, r1, #23
 22960 0066 DB0D     		lsrs	r3, r3, #23
 22961 0068 002B     		cmp	r3, #0
 22962 006a 33D1     		bne	.L2769
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 22963              		.loc 1 2501 0
 22964 006c 2368     		ldr	r3, [r4, #0]
 22965 006e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 22966 0070 013A     		subs	r2, r2, #1
 22967 0072 02EA5122 		and	r2, r2, r1, lsr #9
 22968              	.LVL2931:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 22969              		.loc 1 2502 0
 22970 0076 12F0FF05 		ands	r5, r2, #255
 22971 007a 0AD1     		bne	.L2770
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 22972              		.loc 1 2503 0
 22973 007c 0029     		cmp	r1, #0
 22974 007e 4BD1     		bne	.L2771
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 22975              		.loc 1 2504 0
 22976 0080 2169     		ldr	r1, [r4, #16]
 22977              	.LVL2932:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 22978              		.loc 1 2505 0
 22979 0082 0029     		cmp	r1, #0
 22980 0084 50D0     		beq	.L2808
 22981              	.LVL2933:
 22982              	.L2772:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 22983              		.loc 1 2516 0
 22984 0086 0129     		cmp	r1, #1
 22985 0088 0DD0     		beq	.L2780
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 22986              		.loc 1 2517 0
 22987 008a 4B1C     		adds	r3, r1, #1
 22988 008c 0BD0     		beq	.L2780
 22989 008e 2368     		ldr	r3, [r4, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 22990              		.loc 1 2518 0
 22991 0090 6161     		str	r1, [r4, #20]
 22992              	.LVL2934:
 22993              	.L2770:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 22994              		.loc 1 2524 0
 22995 0092 06F04002 		and	r2, r6, #64
 22996 0096 D2B2     		uxtb	r2, r2
 22997 0098 82BB     		cbnz	r2, .L2809
 22998              	.L2778:
 22999              	.LVL2935:
 23000              	.LBB1908:
 23001              	.LBB1909:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 23002              		.loc 1 806 0
 23003 009a 6169     		ldr	r1, [r4, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 23004              		.loc 1 807 0
 23005 009c 9869     		ldr	r0, [r3, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 23006              		.loc 1 806 0
 23007 009e 0239     		subs	r1, r1, #2
 23008              	.LVL2936:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 23009              		.loc 1 807 0
 23010 00a0 0238     		subs	r0, r0, #2
 23011 00a2 8142     		cmp	r1, r0
 23012 00a4 03D3     		bcc	.L2810
 23013              	.LVL2937:
 23014              	.L2780:
 23015              	.LBE1909:
 23016              	.LBE1908:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 23017              		.loc 1 2531 0
 23018 00a6 66F07F06 		orn	r6, r6, #127
 23019 00aa A671     		strb	r6, [r4, #6]
 23020 00ac B8E7     		b	.L2787
 23021              	.LVL2938:
 23022              	.L2810:
 23023              	.LBB1911:
 23024              	.LBB1910:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 23025              		.loc 1 808 0
 23026 00ae 9F78     		ldrb	r7, [r3, #2]	@ zero_extendqisi2
 23027 00b0 9A6A     		ldr	r2, [r3, #40]
 23028 00b2 01FB0727 		mla	r7, r1, r7, r2
 23029              	.LBE1910:
 23030              	.LBE1911:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 23031              		.loc 1 2531 0
 23032 00b6 002F     		cmp	r7, #0
 23033 00b8 F5D0     		beq	.L2780
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 23034              		.loc 1 2559 0
 23035 00ba A269     		ldr	r2, [r4, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 23036              		.loc 1 2560 0
 23037 00bc A168     		ldr	r1, [r4, #8]
 23038              	.LVL2939:
 23039 00be E068     		ldr	r0, [r4, #12]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 23040              		.loc 1 2532 0
 23041 00c0 EF19     		adds	r7, r5, r7
 23042              	.LVL2940:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 23043              		.loc 1 2559 0
 23044 00c2 9742     		cmp	r7, r2
 23045 00c4 01D0     		beq	.L2783
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 23046              		.loc 1 2560 0
 23047 00c6 8142     		cmp	r1, r0
 23048 00c8 34D3     		bcc	.L2811
 23049              	.LVL2941:
 23050              	.L2783:
 23051 00ca CB05     		lsls	r3, r1, #23
 23052 00cc 9DF80050 		ldrb	r5, [sp, #0]	@ zero_extendqisi2
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 23053              		.loc 1 2565 0
 23054 00d0 A761     		str	r7, [r4, #24]
 23055 00d2 DB0D     		lsrs	r3, r3, #23
 23056              	.LVL2942:
 23057              	.L2769:
 23058              	.LBB1912:
 23059              	.LBB1913:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 23060              		.loc 1 541 0
 23061 00d4 E318     		adds	r3, r4, r3
 23062              	.LVL2943:
 23063              	.LBE1913:
 23064              	.LBE1912:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 23065              		.loc 1 2576 0
 23066 00d6 46F04002 		orr	r2, r6, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 23067              		.loc 1 2499 0
 23068 00da 4E1C     		adds	r6, r1, #1
 23069              	.LBB1915:
 23070              	.LBB1914:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 23071              		.loc 1 541 0
 23072 00dc 83F82450 		strb	r5, [r3, #36]
 23073              	.LVL2944:
 23074              	.LBE1914:
 23075              	.LBE1915:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 23076              		.loc 1 2576 0
 23077 00e0 A271     		strb	r2, [r4, #6]
 23078              	.LVL2945:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 23079              		.loc 1 2499 0
 23080 00e2 A660     		str	r6, [r4, #8]
 23081              	.LVL2946:
 23082 00e4 0121     		movs	r1, #1
 23083              	.LVL2947:
 23084              	.L2768:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 23085              		.loc 1 2580 0
 23086 00e6 8642     		cmp	r6, r0
 23087 00e8 88BF     		it	hi
 23088 00ea E660     		strhi	r6, [r4, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 23089              		.loc 1 2581 0
 23090 00ec 42F02002 		orr	r2, r2, #32
 23091              	.LBE1917:
 23092              	.LBE1923:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 23093              		.loc 1 3952 0
 23094 00f0 0129     		cmp	r1, #1
 23095              	.LBB1924:
 23096              	.LBB1918:
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 23097              		.loc 1 2581 0
 23098 00f2 A271     		strb	r2, [r4, #6]
 23099              	.LVL2948:
 23100              	.LBE1918:
 23101              	.LBE1924:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 23102              		.loc 1 3952 0
 23103 00f4 08BF     		it	eq
 23104 00f6 0846     		moveq	r0, r1
 23105 00f8 94D0     		beq	.L2803
 23106 00fa 91E7     		b	.L2787
 23107              	.LVL2949:
 23108              	.L2809:
 23109              	.LBB1925:
 23110              	.LBB1919:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 23111              		.loc 1 2525 0
 23112 00fc 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 23113 00fe A269     		ldr	r2, [r4, #24]
 23114 0100 1A4E     		ldr	r6, .L2813+8
 23115 0102 04F12401 		add	r1, r4, #36
 23116 0106 0123     		movs	r3, #1
 23117 0108 B047     		blx	r6
 23118              	.LVL2950:
 23119 010a 18BB     		cbnz	r0, .L2784
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 23120              		.loc 1 2527 0
 23121 010c A679     		ldrb	r6, [r4, #6]	@ zero_extendqisi2
 23122 010e 2368     		ldr	r3, [r4, #0]
 23123 0110 06F0BF06 		and	r6, r6, #191
 23124 0114 A671     		strb	r6, [r4, #6]
 23125 0116 C0E7     		b	.L2778
 23126              	.LVL2951:
 23127              	.L2771:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 23128              		.loc 1 2513 0
 23129 0118 1846     		mov	r0, r3
 23130              	.LVL2952:
 23131 011a 6169     		ldr	r1, [r4, #20]
 23132 011c 144B     		ldr	r3, .L2813+12
 23133 011e 9847     		blx	r3
 23134              	.LVL2953:
 23135 0120 0146     		mov	r1, r0
 23136              	.LVL2954:
 23137              	.L2773:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 23138              		.loc 1 2515 0
 23139 0122 99B1     		cbz	r1, .L2812
 23140 0124 A679     		ldrb	r6, [r4, #6]	@ zero_extendqisi2
 23141 0126 AEE7     		b	.L2772
 23142              	.LVL2955:
 23143              	.L2808:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 23144              		.loc 1 2506 0
 23145 0128 1846     		mov	r0, r3
 23146              	.LVL2956:
 23147 012a 114B     		ldr	r3, .L2813+12
 23148 012c 9847     		blx	r3
 23149              	.LVL2957:
 23150 012e 0146     		mov	r1, r0
 23151              	.LVL2958:
 23152 0130 2061     		str	r0, [r4, #16]
 23153 0132 F6E7     		b	.L2773
 23154              	.LVL2959:
 23155              	.L2811:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 23156              		.loc 1 2561 0
 23157 0134 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 23158 0136 0F4D     		ldr	r5, .L2813+16
 23159 0138 04F12401 		add	r1, r4, #36
 23160 013c 3A46     		mov	r2, r7
 23161 013e 0123     		movs	r3, #1
 23162              	.LVL2960:
 23163 0140 A847     		blx	r5
 23164              	.LVL2961:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 23165              		.loc 1 2560 0
 23166 0142 38B9     		cbnz	r0, .L2784
 23167 0144 A168     		ldr	r1, [r4, #8]
 23168 0146 E068     		ldr	r0, [r4, #12]
 23169 0148 A679     		ldrb	r6, [r4, #6]	@ zero_extendqisi2
 23170 014a BEE7     		b	.L2783
 23171              	.LVL2962:
 23172              	.L2812:
 23173 014c A668     		ldr	r6, [r4, #8]
 23174 014e E068     		ldr	r0, [r4, #12]
 23175              	.LVL2963:
 23176 0150 A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 23177 0152 C8E7     		b	.L2768
 23178              	.LVL2964:
 23179              	.L2784:
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 23180              		.loc 1 2562 0
 23181 0154 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 23182 0156 63F07F03 		orn	r3, r3, #127
 23183 015a A371     		strb	r3, [r4, #6]
 23184 015c 60E7     		b	.L2787
 23185              	.LVL2965:
 23186              	.L2807:
 23187 015e A668     		ldr	r6, [r4, #8]
 23188 0160 C1E7     		b	.L2768
 23189              	.L2814:
 23190 0162 00BF     		.align	2
 23191              	.L2813:
 23192 0164 00000000 		.word	f_write
 23193 0168 00000000 		.word	disk_status
 23194 016c 00000000 		.word	disk_write
 23195 0170 00000000 		.word	create_chain
 23196 0174 00000000 		.word	disk_read
 23197              	.LBE1919:
 23198              	.LBE1925:
 23199              		.cfi_endproc
 23200              	.LFE47:
 23202              		.section	.text.f_puts,"ax",%progbits
 23203              		.align	2
 23204              		.global	f_puts
 23205              		.thumb
 23206              		.thumb_func
 23208              	f_puts:
 23209              	.LFB48:
3965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 23210              		.loc 1 3965 0
 23211              		.cfi_startproc
 23212              		@ args = 0, pretend = 0, frame = 48
 23213              		@ frame_needed = 0, uses_anonymous_args = 0
 23214              	.LVL2966:
 23215 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 23216              	.LCFI58:
 23217              		.cfi_def_cfa_offset 36
 23218              		.cfi_offset 4, -36
 23219              		.cfi_offset 5, -32
 23220              		.cfi_offset 6, -28
 23221              		.cfi_offset 7, -24
 23222              		.cfi_offset 8, -20
 23223              		.cfi_offset 9, -16
 23224              		.cfi_offset 10, -12
 23225              		.cfi_offset 11, -8
 23226              		.cfi_offset 14, -4
3969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (n = 0; *str; str++, n++) {
 23227              		.loc 1 3969 0
 23228 0004 0478     		ldrb	r4, [r0, #0]	@ zero_extendqisi2
3965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 23229              		.loc 1 3965 0
 23230 0006 8DB0     		sub	sp, sp, #52
 23231              	.LCFI59:
 23232              		.cfi_def_cfa_offset 88
3965:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 23233              		.loc 1 3965 0
 23234 0008 8246     		mov	sl, r0
 23235 000a 8846     		mov	r8, r1
3969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (n = 0; *str; str++, n++) {
 23236              		.loc 1 3969 0
 23237 000c 002C     		cmp	r4, #0
 23238 000e 00F06B82 		beq	.L2920
 23239 0012 4FF0000B 		mov	fp, #0
 23240 0016 0390     		str	r0, [sp, #12]
 23241 0018 DA46     		mov	sl, fp
 23242              	.LVL2967:
 23243              	.L2917:
 23244              	.LBB1990:
 23245              	.LBB1991:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 23246              		.loc 1 3928 0
 23247 001a 0A2C     		cmp	r4, #10
 23248              	.LBB1992:
 23249              	.LBB1993:
 23250              	.LBB1994:
 23251              	.LBB1995:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 23252              		.loc 1 2490 0
 23253 001c D8F80030 		ldr	r3, [r8, #0]
 23254 0020 B8F80410 		ldrh	r1, [r8, #4]
 23255              	.LBE1995:
 23256              	.LBE1994:
 23257              	.LBE1993:
 23258              	.LBE1992:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 23259              		.loc 1 3928 0
 23260 0024 52D0     		beq	.L2817
 23261              	.L2818:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 23262              		.loc 1 3948 0
 23263 0026 8DF82C40 		strb	r4, [sp, #44]
 23264              	.LVL2968:
 23265              	.LBB2016:
 23266              	.LBB2017:
 23267              	.LBB2018:
 23268              	.LBB2019:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 23269              		.loc 1 2177 0
 23270 002a 0BB1     		cbz	r3, .L2911
 23271 002c 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 23272 002e 2AB9     		cbnz	r2, .L3000
 23273              	.LVL2969:
 23274              	.L2911:
 23275              	.LBE2019:
 23276              	.LBE2018:
 23277              	.LBE2017:
 23278              	.LBE2016:
3970:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (f_putc(*str, fil) == EOF) return EOF;
 23279              		.loc 1 3970 0
 23280 0030 4FF0FF3B 		mov	fp, #-1
 23281              	.LVL2970:
 23282              	.L2978:
 23283              	.LBE1991:
 23284              	.LBE1990:
3973:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** }
 23285              		.loc 1 3973 0
 23286 0034 5846     		mov	r0, fp
 23287 0036 0DB0     		add	sp, sp, #52
 23288 0038 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 23289              	.LVL2971:
 23290              	.L3000:
 23291              	.LBB2123:
 23292              	.LBB2120:
 23293              	.LBB2114:
 23294              	.LBB2110:
 23295              	.LBB2023:
 23296              	.LBB2022:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 23297              		.loc 1 2177 0
 23298 003c DA88     		ldrh	r2, [r3, #6]
 23299 003e 8A42     		cmp	r2, r1
 23300 0040 F6D1     		bne	.L2911
 23301              	.LVL2972:
 23302              	.LBB2020:
 23303              	.LBB2021:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 23304              		.loc 1 2182 0
 23305 0042 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 23306 0044 A94B     		ldr	r3, .L3021
 23307              	.LVL2973:
 23308 0046 9847     		blx	r3
 23309              	.LVL2974:
 23310 0048 10F00100 		ands	r0, r0, #1
 23311 004c F0D1     		bne	.L2911
 23312              	.LBE2021:
 23313              	.LBE2020:
 23314              	.LBE2022:
 23315              	.LBE2023:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 23316              		.loc 1 2492 0
 23317 004e 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 23318 0052 1106     		lsls	r1, r2, #24
 23319 0054 1746     		mov	r7, r2
 23320 0056 EBD4     		bmi	.L2911
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 23321              		.loc 1 2494 0
 23322 0058 02F00203 		and	r3, r2, #2
 23323 005c DBB2     		uxtb	r3, r3
 23324 005e 002B     		cmp	r3, #0
 23325 0060 E6D0     		beq	.L2911
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 23326              		.loc 1 2496 0
 23327 0062 D8F80C60 		ldr	r6, [r8, #12]
 23328              	.LVL2975:
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 23329              		.loc 1 2500 0
 23330 0066 D8F80810 		ldr	r1, [r8, #8]
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 23331              		.loc 1 2498 0
 23332 006a 701C     		adds	r0, r6, #1
 23333 006c 80F0C680 		bcs	.L2998
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 23334              		.loc 1 2500 0
 23335 0070 CB05     		lsls	r3, r1, #23
 23336 0072 DB0D     		lsrs	r3, r3, #23
 23337 0074 002B     		cmp	r3, #0
 23338 0076 57D1     		bne	.L2847
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 23339              		.loc 1 2501 0
 23340 0078 D8F80040 		ldr	r4, [r8, #0]
 23341              	.LVL2976:
 23342 007c A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 23343 007e 013B     		subs	r3, r3, #1
 23344 0080 03EA5123 		and	r3, r3, r1, lsr #9
 23345              	.LVL2977:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 23346              		.loc 1 2502 0
 23347 0084 13F0FF09 		ands	r9, r3, #255
 23348 0088 0FD1     		bne	.L2848
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 23349              		.loc 1 2503 0
 23350 008a 0029     		cmp	r1, #0
 23351 008c 40F08180 		bne	.L2849
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 23352              		.loc 1 2504 0
 23353 0090 D8F81050 		ldr	r5, [r8, #16]
 23354              	.LVL2978:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 23355              		.loc 1 2505 0
 23356 0094 002D     		cmp	r5, #0
 23357 0096 00F0A280 		beq	.L3001
 23358              	.LVL2979:
 23359              	.L2850:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 23360              		.loc 1 2516 0
 23361 009a 012D     		cmp	r5, #1
 23362 009c 11D0     		beq	.L2904
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 23363              		.loc 1 2517 0
 23364 009e 6B1C     		adds	r3, r5, #1
 23365 00a0 0FD0     		beq	.L2904
 23366 00a2 D8F80040 		ldr	r4, [r8, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 23367              		.loc 1 2518 0
 23368 00a6 C8F81450 		str	r5, [r8, #20]
 23369              	.L2848:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 23370              		.loc 1 2524 0
 23371 00aa 07F04003 		and	r3, r7, #64
 23372 00ae DBB2     		uxtb	r3, r3
 23373 00b0 002B     		cmp	r3, #0
 23374 00b2 5AD1     		bne	.L3002
 23375              	.L2902:
 23376              	.LVL2980:
 23377              	.LBB2024:
 23378              	.LBB2025:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 23379              		.loc 1 806 0
 23380 00b4 D8F81430 		ldr	r3, [r8, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 23381              		.loc 1 807 0
 23382 00b8 A269     		ldr	r2, [r4, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 23383              		.loc 1 806 0
 23384 00ba 023B     		subs	r3, r3, #2
 23385              	.LVL2981:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 23386              		.loc 1 807 0
 23387 00bc 023A     		subs	r2, r2, #2
 23388 00be 9342     		cmp	r3, r2
 23389 00c0 1BD3     		bcc	.L3003
 23390              	.LVL2982:
 23391              	.L2904:
 23392              	.LBE2025:
 23393              	.LBE2024:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 23394              		.loc 1 2531 0
 23395 00c2 67F07F07 		orn	r7, r7, #127
 23396 00c6 88F80670 		strb	r7, [r8, #6]
 23397 00ca B1E7     		b	.L2911
 23398              	.LVL2983:
 23399              	.L2817:
 23400              	.LBE2110:
 23401              	.LBE2114:
 23402              	.LBB2115:
 23403              	.LBB2014:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 23404              		.loc 1 3948 0
 23405 00cc 0D26     		movs	r6, #13
 23406 00ce 8DF82C60 		strb	r6, [sp, #44]
 23407              	.LVL2984:
 23408              	.LBB2011:
 23409              	.LBB2008:
 23410              	.LBB1996:
 23411              	.LBB1997:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 23412              		.loc 1 2177 0
 23413 00d2 002B     		cmp	r3, #0
 23414 00d4 A7D0     		beq	.L2818
 23415 00d6 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 23416 00d8 002A     		cmp	r2, #0
 23417 00da A4D0     		beq	.L2818
 23418 00dc DA88     		ldrh	r2, [r3, #6]
 23419 00de 8A42     		cmp	r2, r1
 23420 00e0 A1D1     		bne	.L2818
 23421              	.LVL2985:
 23422              	.LBB1998:
 23423              	.LBB1999:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 23424              		.loc 1 2182 0
 23425 00e2 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 23426 00e4 814B     		ldr	r3, .L3021
 23427              	.LVL2986:
 23428 00e6 9847     		blx	r3
 23429              	.LVL2987:
 23430 00e8 10F00103 		ands	r3, r0, #1
 23431 00ec 00F06282 		beq	.L2820
 23432              	.L2997:
 23433 00f0 D8F80030 		ldr	r3, [r8, #0]
 23434 00f4 B8F80410 		ldrh	r1, [r8, #4]
 23435 00f8 95E7     		b	.L2818
 23436              	.LVL2988:
 23437              	.L3003:
 23438              	.LBE1999:
 23439              	.LBE1998:
 23440              	.LBE1997:
 23441              	.LBE1996:
 23442              	.LBE2008:
 23443              	.LBE2011:
 23444              	.LBE2014:
 23445              	.LBE2115:
 23446              	.LBB2116:
 23447              	.LBB2111:
 23448              	.LBB2027:
 23449              	.LBB2026:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 23450              		.loc 1 808 0
 23451 00fa A578     		ldrb	r5, [r4, #2]	@ zero_extendqisi2
 23452 00fc A26A     		ldr	r2, [r4, #40]
 23453 00fe 03FB0525 		mla	r5, r3, r5, r2
 23454              	.LBE2026:
 23455              	.LBE2027:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 23456              		.loc 1 2531 0
 23457 0102 002D     		cmp	r5, #0
 23458 0104 DDD0     		beq	.L2904
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 23459              		.loc 1 2559 0
 23460 0106 D8F81830 		ldr	r3, [r8, #24]
 23461              	.LVL2989:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 23462              		.loc 1 2560 0
 23463 010a D8F80810 		ldr	r1, [r8, #8]
 23464 010e D8F80C60 		ldr	r6, [r8, #12]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 23465              		.loc 1 2532 0
 23466 0112 4D44     		add	r5, r9, r5
 23467              	.LVL2990:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 23468              		.loc 1 2559 0
 23469 0114 9D42     		cmp	r5, r3
 23470 0116 01D0     		beq	.L2907
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 23471              		.loc 1 2560 0
 23472 0118 B142     		cmp	r1, r6
 23473 011a 71D3     		bcc	.L3004
 23474              	.LVL2991:
 23475              	.L2907:
 23476 011c CB05     		lsls	r3, r1, #23
 23477 011e 9DF82C40 		ldrb	r4, [sp, #44]	@ zero_extendqisi2
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 23478              		.loc 1 2565 0
 23479 0122 C8F81850 		str	r5, [r8, #24]
 23480 0126 DB0D     		lsrs	r3, r3, #23
 23481              	.LVL2992:
 23482              	.L2847:
 23483              	.LBB2028:
 23484              	.LBB2029:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 23485              		.loc 1 541 0
 23486 0128 4344     		add	r3, r8, r3
 23487              	.LVL2993:
 23488              	.LBE2029:
 23489              	.LBE2028:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 23490              		.loc 1 2576 0
 23491 012a 47F04002 		orr	r2, r7, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 23492              		.loc 1 2499 0
 23493 012e 0131     		adds	r1, r1, #1
 23494              	.LBB2031:
 23495              	.LBB2030:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 23496              		.loc 1 541 0
 23497 0130 83F82440 		strb	r4, [r3, #36]
 23498              	.LVL2994:
 23499              	.LBE2030:
 23500              	.LBE2031:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 23501              		.loc 1 2576 0
 23502 0134 88F80620 		strb	r2, [r8, #6]
 23503              	.LVL2995:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 23504              		.loc 1 2499 0
 23505 0138 C8F80810 		str	r1, [r8, #8]
 23506              	.LVL2996:
 23507 013c 0123     		movs	r3, #1
 23508              	.LVL2997:
 23509              	.L2846:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 23510              		.loc 1 2580 0
 23511 013e B142     		cmp	r1, r6
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 23512              		.loc 1 2581 0
 23513 0140 42F02002 		orr	r2, r2, #32
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 23514              		.loc 1 2580 0
 23515 0144 88BF     		it	hi
 23516 0146 C8F80C10 		strhi	r1, [r8, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 23517              		.loc 1 2581 0
 23518 014a 88F80620 		strb	r2, [r8, #6]
 23519              	.LVL2998:
 23520              	.LBE2111:
 23521              	.LBE2116:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 23522              		.loc 1 3952 0
 23523 014e 002B     		cmp	r3, #0
 23524 0150 3FF46EAF 		beq	.L2911
 23525              	.LVL2999:
 23526              	.LBE2120:
 23527              	.LBE2123:
3969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (n = 0; *str; str++, n++) {
 23528              		.loc 1 3969 0
 23529 0154 039D     		ldr	r5, [sp, #12]
 23530 0156 15F8014F 		ldrb	r4, [r5, #1]!	@ zero_extendqisi2
 23531 015a 0AF1010A 		add	sl, sl, #1
 23532              	.LVL3000:
 23533 015e 0395     		str	r5, [sp, #12]
 23534 0160 002C     		cmp	r4, #0
 23535 0162 7FF45AAF 		bne	.L2917
 23536 0166 D346     		mov	fp, sl
 23537 0168 64E7     		b	.L2978
 23538              	.LVL3001:
 23539              	.L3002:
 23540              	.LBB2124:
 23541              	.LBB2121:
 23542              	.LBB2117:
 23543              	.LBB2112:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 23544              		.loc 1 2525 0
 23545 016a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 23546 016c D8F81820 		ldr	r2, [r8, #24]
 23547 0170 5F4C     		ldr	r4, .L3021+4
 23548 0172 08F12401 		add	r1, r8, #36
 23549 0176 0123     		movs	r3, #1
 23550 0178 A047     		blx	r4
 23551              	.LVL3002:
 23552 017a 0028     		cmp	r0, #0
 23553 017c 40F0E881 		bne	.L2908
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 23554              		.loc 1 2527 0
 23555 0180 98F80670 		ldrb	r7, [r8, #6]	@ zero_extendqisi2
 23556 0184 D8F80040 		ldr	r4, [r8, #0]
 23557 0188 07F0BF07 		and	r7, r7, #191
 23558 018c 88F80670 		strb	r7, [r8, #6]
 23559 0190 90E7     		b	.L2902
 23560              	.LVL3003:
 23561              	.L2849:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 23562              		.loc 1 2513 0
 23563 0192 D8F81450 		ldr	r5, [r8, #20]
 23564 0196 0595     		str	r5, [sp, #20]
 23565              	.LVL3004:
 23566              	.LBB2032:
 23567              	.LBB2033:
 988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {		/* Create a new chain */
 23568              		.loc 1 988 0
 23569 0198 002D     		cmp	r5, #0
 23570 019a 40F02681 		bne	.L2852
 989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 23571              		.loc 1 989 0
 23572 019e E768     		ldr	r7, [r4, #12]
 23573              	.LVL3005:
 23574 01a0 A369     		ldr	r3, [r4, #24]
 23575              	.LVL3006:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 23576              		.loc 1 990 0
 23577 01a2 002F     		cmp	r7, #0
 23578 01a4 40F01D81 		bne	.L2853
 23579 01a8 0127     		movs	r7, #1
 23580              	.LVL3007:
 23581              	.L2854:
 23582 01aa 3D46     		mov	r5, r7
 23583              	.LVL3008:
 23584              	.L2891:
1001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl++;							/* Next cluster */
 23585              		.loc 1 1001 0
 23586 01ac 0135     		adds	r5, r5, #1
 23587              	.LVL3009:
1002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Wrap around */
 23588              		.loc 1 1002 0
 23589 01ae AB42     		cmp	r3, r5
 23590 01b0 11D8     		bhi	.L2857
 23591              	.LVL3010:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 23592              		.loc 1 1004 0
 23593 01b2 012F     		cmp	r7, #1
 23594 01b4 1CD9     		bls	.L2958
 23595              	.LVL3011:
 23596              	.LBB2034:
 23597              	.LBB2035:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 23598              		.loc 1 828 0
 23599 01b6 022B     		cmp	r3, #2
 23600 01b8 0FD9     		bls	.L2936
1003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ncl = 2;
 23601              		.loc 1 1003 0
 23602 01ba 0225     		movs	r5, #2
 23603              	.LVL3012:
 23604              	.L2860:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 23605              		.loc 1 831 0
 23606 01bc 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 23607 01be 022B     		cmp	r3, #2
 23608 01c0 00F0CA80 		beq	.L2862
 23609 01c4 032B     		cmp	r3, #3
 23610 01c6 6FD0     		beq	.L2863
 23611 01c8 012B     		cmp	r3, #1
 23612 01ca 2AD0     		beq	.L3005
 23613              	.L2897:
 23614              	.LBE2035:
 23615              	.LBE2034:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 23616              		.loc 1 1004 0
 23617 01cc 4FF0FF35 		mov	r5, #-1
 23618              	.LVL3013:
 23619              	.L2898:
 23620 01d0 98F80670 		ldrb	r7, [r8, #6]	@ zero_extendqisi2
 23621 01d4 61E7     		b	.L2850
 23622              	.LVL3014:
 23623              	.L2857:
 23624              	.LBB2090:
 23625              	.LBB2084:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 23626              		.loc 1 828 0
 23627 01d6 012D     		cmp	r5, #1
 23628 01d8 F0D8     		bhi	.L2860
 23629              	.LVL3015:
 23630              	.L2936:
 23631              	.LBE2084:
 23632              	.LBE2090:
 23633              	.LBB2091:
 23634              	.LBB2092:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 23635              		.loc 1 1024 0
 23636 01da 0125     		movs	r5, #1
 23637 01dc F8E7     		b	.L2898
 23638              	.LVL3016:
 23639              	.L3001:
 23640              	.LBE2092:
 23641              	.LBE2091:
 23642              	.LBE2033:
 23643              	.LBE2032:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 23644              		.loc 1 2506 0
 23645 01de 2946     		mov	r1, r5
 23646 01e0 2046     		mov	r0, r4
 23647 01e2 444B     		ldr	r3, .L3021+8
 23648              	.LVL3017:
 23649 01e4 9847     		blx	r3
 23650              	.LVL3018:
 23651 01e6 0546     		mov	r5, r0
 23652              	.LVL3019:
 23653 01e8 C8F81000 		str	r0, [r8, #16]
 23654              	.LVL3020:
 23655              	.L2851:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 23656              		.loc 1 2515 0
 23657 01ec 002D     		cmp	r5, #0
 23658 01ee EFD1     		bne	.L2898
 23659              	.LVL3021:
 23660              	.L2958:
 23661 01f0 D8F80810 		ldr	r1, [r8, #8]
 23662 01f4 D8F80C60 		ldr	r6, [r8, #12]
 23663 01f8 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 23664              	.L2998:
 23665 01fc 0023     		movs	r3, #0
 23666 01fe 9EE7     		b	.L2846
 23667              	.LVL3022:
 23668              	.L3004:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 23669              		.loc 1 2561 0
 23670 0200 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 23671 0202 3D4C     		ldr	r4, .L3021+12
 23672              	.LVL3023:
 23673 0204 08F12401 		add	r1, r8, #36
 23674 0208 2A46     		mov	r2, r5
 23675 020a 0123     		movs	r3, #1
 23676 020c A047     		blx	r4
 23677              	.LVL3024:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 23678              		.loc 1 2560 0
 23679 020e 0028     		cmp	r0, #0
 23680 0210 40F09E81 		bne	.L2908
 23681 0214 D8F80810 		ldr	r1, [r8, #8]
 23682 0218 D8F80C60 		ldr	r6, [r8, #12]
 23683 021c 98F80670 		ldrb	r7, [r8, #6]	@ zero_extendqisi2
 23684 0220 7CE7     		b	.L2907
 23685              	.LVL3025:
 23686              	.L3005:
 23687              	.LBB2107:
 23688              	.LBB2104:
 23689              	.LBB2095:
 23690              	.LBB2085:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 23691              		.loc 1 834 0
 23692 0222 226A     		ldr	r2, [r4, #32]
 23693              	.LBB2036:
 23694              	.LBB2037:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 23695              		.loc 1 727 0
 23696 0224 D4F82CB0 		ldr	fp, [r4, #44]
 23697              	.LBE2037:
 23698              	.LBE2036:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 23699              		.loc 1 833 0
 23700 0228 05EB5506 		add	r6, r5, r5, lsr #1
 23701 022c 0496     		str	r6, [sp, #16]
 23702              	.LVL3026:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 23703              		.loc 1 834 0
 23704 022e 02EB5626 		add	r6, r2, r6, lsr #9
 23705              	.LVL3027:
 23706              	.LBB2044:
 23707              	.LBB2041:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23708              		.loc 1 728 0
 23709 0232 5E45     		cmp	r6, fp
 23710              	.LBE2041:
 23711              	.LBE2044:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 23712              		.loc 1 834 0
 23713 0234 0296     		str	r6, [sp, #8]
 23714              	.LVL3028:
 23715              	.LBB2045:
 23716              	.LBB2042:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23717              		.loc 1 728 0
 23718 0236 0AD0     		beq	.L2913
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 23719              		.loc 1 730 0
 23720 0238 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 23721 023a 002A     		cmp	r2, #0
 23722 023c 40F00C81 		bne	.L2865
 23723              	.LVL3029:
 23724              	.L2868:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 23725              		.loc 1 743 0
 23726 0240 029E     		ldr	r6, [sp, #8]
 23727 0242 002E     		cmp	r6, #0
 23728 0244 40F0F980 		bne	.L3006
 23729 0248 E66A     		ldr	r6, [r4, #44]
 23730 024a 226A     		ldr	r2, [r4, #32]
 23731 024c 0296     		str	r6, [sp, #8]
 23732              	.L2913:
 23733              	.LBE2042:
 23734              	.LBE2045:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 23735              		.loc 1 835 0
 23736 024e 049E     		ldr	r6, [sp, #16]
 23737 0250 F305     		lsls	r3, r6, #23
 23738 0252 DB0D     		lsrs	r3, r3, #23
 23739 0254 0136     		adds	r6, r6, #1
 23740 0256 E318     		adds	r3, r4, r3
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 23741              		.loc 1 836 0
 23742 0258 02EB5622 		add	r2, r2, r6, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 23743              		.loc 1 835 0
 23744 025c 0796     		str	r6, [sp, #28]
 23745              	.LBB2046:
 23746              	.LBB2047:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23747              		.loc 1 728 0
 23748 025e 029E     		ldr	r6, [sp, #8]
 23749              	.LBE2047:
 23750              	.LBE2046:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 23751              		.loc 1 835 0
 23752 0260 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 23753              		.loc 1 836 0
 23754 0264 0492     		str	r2, [sp, #16]
 23755              	.LBB2055:
 23756              	.LBB2051:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23757              		.loc 1 728 0
 23758 0266 9642     		cmp	r6, r2
 23759              	.LBE2051:
 23760              	.LBE2055:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 23761              		.loc 1 835 0
 23762 0268 0993     		str	r3, [sp, #36]
 23763              	.LVL3030:
 23764              	.LBB2056:
 23765              	.LBB2052:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23766              		.loc 1 728 0
 23767 026a 07D0     		beq	.L2914
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 23768              		.loc 1 730 0
 23769 026c 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 23770 026e 002B     		cmp	r3, #0
 23771 0270 40F03C81 		bne	.L2871
 23772              	.LVL3031:
 23773              	.L2873:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 23774              		.loc 1 743 0
 23775 0274 049E     		ldr	r6, [sp, #16]
 23776 0276 002E     		cmp	r6, #0
 23777 0278 40F08C81 		bne	.L3007
 23778              	.L2914:
 23779              	.LBE2052:
 23780              	.LBE2056:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 23781              		.loc 1 837 0
 23782 027c 079E     		ldr	r6, [sp, #28]
 23783 027e F305     		lsls	r3, r6, #23
 23784 0280 DB0D     		lsrs	r3, r3, #23
 23785 0282 E318     		adds	r3, r4, r3
 23786 0284 099E     		ldr	r6, [sp, #36]
 23787 0286 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 23788              		.loc 1 838 0
 23789 028a E907     		lsls	r1, r5, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 23790              		.loc 1 837 0
 23791 028c 46EA0323 		orr	r3, r6, r3, lsl #8
 23792              	.LVL3032:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 23793              		.loc 1 838 0
 23794 0290 40F18D81 		bpl	.L2875
 23795 0294 1B09     		lsrs	r3, r3, #4
 23796              	.LVL3033:
 23797              	.L2876:
 23798              	.LBE2085:
 23799              	.LBE2095:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 23800              		.loc 1 1007 0
 23801 0296 002B     		cmp	r3, #0
 23802 0298 00F00A81 		beq	.L3008
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 23803              		.loc 1 1008 0
 23804 029c 012B     		cmp	r3, #1
 23805 029e 9CD0     		beq	.L2936
1010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
 23806              		.loc 1 1010 0
 23807 02a0 AF42     		cmp	r7, r5
 23808 02a2 A5D0     		beq	.L2958
 23809 02a4 A369     		ldr	r3, [r4, #24]
 23810 02a6 81E7     		b	.L2891
 23811              	.L2863:
 23812              	.LBB2096:
 23813              	.LBB2086:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 23814              		.loc 1 846 0
 23815 02a8 236A     		ldr	r3, [r4, #32]
 23816              	.LBB2057:
 23817              	.LBB2058:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 23818              		.loc 1 727 0
 23819 02aa E66A     		ldr	r6, [r4, #44]
 23820              	.LBE2058:
 23821              	.LBE2057:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 23822              		.loc 1 846 0
 23823 02ac 03EBD51B 		add	fp, r3, r5, lsr #7
 23824              	.LVL3034:
 23825              	.LBB2065:
 23826              	.LBB2062:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23827              		.loc 1 728 0
 23828 02b0 B345     		cmp	fp, r6
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 23829              		.loc 1 727 0
 23830 02b2 0896     		str	r6, [sp, #32]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23831              		.loc 1 728 0
 23832 02b4 05D0     		beq	.L2916
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 23833              		.loc 1 730 0
 23834 02b6 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 23835 02b8 03BB     		cbnz	r3, .L2883
 23836              	.LVL3035:
 23837              	.L2885:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 23838              		.loc 1 743 0
 23839 02ba BBF1000F 		cmp	fp, #0
 23840 02be 40F0AF80 		bne	.L3009
 23841              	.L2916:
 23842              	.LVL3036:
 23843              	.LBE2062:
 23844              	.LBE2065:
 23845              	.LBB2066:
 23846              	.LBB2067:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 23847              		.loc 1 847 0
 23848 02c2 6A06     		lsls	r2, r5, #25
 23849 02c4 D20D     		lsrs	r2, r2, #23
 23850 02c6 02F13003 		add	r3, r2, #48
 23851 02ca E318     		adds	r3, r4, r3
 23852              	.LVL3037:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 23853              		.loc 1 848 0
 23854 02cc A618     		adds	r6, r4, r2
 23855 02ce DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 23856 02d0 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 23857 02d2 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 23858 02d4 96F83030 		ldrb	r3, [r6, #48]	@ zero_extendqisi2
 23859              	.LVL3038:
 23860 02d8 1206     		lsls	r2, r2, #24
 23861 02da 42EA0042 		orr	r2, r2, r0, lsl #16
 23862 02de 42EA0122 		orr	r2, r2, r1, lsl #8
 23863 02e2 1343     		orrs	r3, r3, r2
 23864 02e4 23F07043 		bic	r3, r3, #-268435456
 23865 02e8 D5E7     		b	.L2876
 23866              	.L3022:
 23867 02ea 00BF     		.align	2
 23868              	.L3021:
 23869 02ec 00000000 		.word	disk_status
 23870 02f0 00000000 		.word	disk_write
 23871 02f4 00000000 		.word	create_chain
 23872 02f8 00000000 		.word	disk_read
 23873              	.LVL3039:
 23874              	.L2883:
 23875              	.LBE2067:
 23876              	.LBE2066:
 23877              	.LBB2068:
 23878              	.LBB2063:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 23879              		.loc 1 731 0
 23880 02fc 04F13006 		add	r6, r4, #48
 23881 0300 0496     		str	r6, [sp, #16]
 23882 0302 A04E     		ldr	r6, .L3023
 23883 0304 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 23884 0306 0499     		ldr	r1, [sp, #16]
 23885 0308 089A     		ldr	r2, [sp, #32]
 23886 030a 0696     		str	r6, [sp, #24]
 23887 030c 0123     		movs	r3, #1
 23888 030e B047     		blx	r6
 23889              	.LVL3040:
 23890 0310 0028     		cmp	r0, #0
 23891 0312 7FF45BAF 		bne	.L2897
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 23892              		.loc 1 734 0
 23893 0316 E369     		ldr	r3, [r4, #28]
 23894 0318 226A     		ldr	r2, [r4, #32]
 23895 031a 089E     		ldr	r6, [sp, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 23896              		.loc 1 733 0
 23897 031c 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 23898              		.loc 1 734 0
 23899 031e 9A18     		adds	r2, r3, r2
 23900 0320 9642     		cmp	r6, r2
 23901 0322 CAD2     		bcs	.L2885
 23902              	.LBB2059:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 23903              		.loc 1 736 0
 23904 0324 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 23905              	.LVL3041:
 23906 0328 BCF1010F 		cmp	ip, #1
 23907 032c C5D9     		bls	.L2885
 23908 032e 0795     		str	r5, [sp, #28]
 23909 0330 0997     		str	r7, [sp, #36]
 23910 0332 2546     		mov	r5, r4
 23911 0334 6446     		mov	r4, ip
 23912              	.LVL3042:
 23913 0336 00E0     		b	.L2976
 23914              	.LVL3043:
 23915              	.L3010:
 23916 0338 EB69     		ldr	r3, [r5, #28]
 23917              	.LVL3044:
 23918              	.L2976:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 23919              		.loc 1 737 0
 23920 033a F618     		adds	r6, r6, r3
 23921              	.LVL3045:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 23922              		.loc 1 736 0
 23923 033c 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 23924              		.loc 1 738 0
 23925 033e 0123     		movs	r3, #1
 23926 0340 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 23927 0342 0499     		ldr	r1, [sp, #16]
 23928 0344 069F     		ldr	r7, [sp, #24]
 23929 0346 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 23930              		.loc 1 736 0
 23931 0348 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 23932              		.loc 1 738 0
 23933 034a B847     		blx	r7
 23934              	.LVL3046:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 23935              		.loc 1 736 0
 23936 034c 012C     		cmp	r4, #1
 23937 034e F3D8     		bhi	.L3010
 23938 0350 2C46     		mov	r4, r5
 23939              	.LVL3047:
 23940 0352 099F     		ldr	r7, [sp, #36]
 23941 0354 079D     		ldr	r5, [sp, #28]
 23942              	.LVL3048:
 23943 0356 B0E7     		b	.L2885
 23944              	.LVL3049:
 23945              	.L2862:
 23946              	.LBE2059:
 23947              	.LBE2063:
 23948              	.LBE2068:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 23949              		.loc 1 841 0
 23950 0358 236A     		ldr	r3, [r4, #32]
 23951              	.LBB2069:
 23952              	.LBB2070:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 23953              		.loc 1 727 0
 23954 035a E66A     		ldr	r6, [r4, #44]
 23955              	.LBE2070:
 23956              	.LBE2069:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 23957              		.loc 1 841 0
 23958 035c 03EB152B 		add	fp, r3, r5, lsr #8
 23959              	.LVL3050:
 23960              	.LBB2077:
 23961              	.LBB2074:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23962              		.loc 1 728 0
 23963 0360 B345     		cmp	fp, r6
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 23964              		.loc 1 727 0
 23965 0362 0896     		str	r6, [sp, #32]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 23966              		.loc 1 728 0
 23967 0364 04D0     		beq	.L2915
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 23968              		.loc 1 730 0
 23969 0366 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 23970 0368 6BB9     		cbnz	r3, .L2878
 23971              	.LVL3051:
 23972              	.L2880:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 23973              		.loc 1 743 0
 23974 036a BBF1000F 		cmp	fp, #0
 23975 036e 4AD1     		bne	.L3011
 23976              	.L2915:
 23977              	.LBE2074:
 23978              	.LBE2077:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 23979              		.loc 1 842 0
 23980 0370 2B06     		lsls	r3, r5, #24
 23981 0372 DB0D     		lsrs	r3, r3, #23
 23982              	.LVL3052:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 23983              		.loc 1 843 0
 23984 0374 E218     		adds	r2, r4, r3
 23985 0376 1346     		mov	r3, r2
 23986              	.LVL3053:
 23987 0378 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 23988 037c 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 23989 0380 42EA0323 		orr	r3, r2, r3, lsl #8
 23990 0384 87E7     		b	.L2876
 23991              	.LVL3054:
 23992              	.L2878:
 23993              	.LBB2078:
 23994              	.LBB2075:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 23995              		.loc 1 731 0
 23996 0386 04F13006 		add	r6, r4, #48
 23997 038a 0496     		str	r6, [sp, #16]
 23998 038c 7D4E     		ldr	r6, .L3023
 23999 038e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24000 0390 0499     		ldr	r1, [sp, #16]
 24001 0392 089A     		ldr	r2, [sp, #32]
 24002 0394 0696     		str	r6, [sp, #24]
 24003 0396 0123     		movs	r3, #1
 24004 0398 B047     		blx	r6
 24005              	.LVL3055:
 24006 039a 0028     		cmp	r0, #0
 24007 039c 7FF416AF 		bne	.L2897
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 24008              		.loc 1 734 0
 24009 03a0 E369     		ldr	r3, [r4, #28]
 24010 03a2 226A     		ldr	r2, [r4, #32]
 24011 03a4 089E     		ldr	r6, [sp, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 24012              		.loc 1 733 0
 24013 03a6 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 24014              		.loc 1 734 0
 24015 03a8 9A18     		adds	r2, r3, r2
 24016 03aa 9642     		cmp	r6, r2
 24017 03ac DDD2     		bcs	.L2880
 24018              	.LBB2071:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24019              		.loc 1 736 0
 24020 03ae 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 24021              	.LVL3056:
 24022 03b2 BCF1010F 		cmp	ip, #1
 24023 03b6 D8D9     		bls	.L2880
 24024 03b8 0795     		str	r5, [sp, #28]
 24025 03ba 0997     		str	r7, [sp, #36]
 24026 03bc 2546     		mov	r5, r4
 24027 03be 6446     		mov	r4, ip
 24028              	.LVL3057:
 24029 03c0 00E0     		b	.L2975
 24030              	.LVL3058:
 24031              	.L3012:
 24032 03c2 EB69     		ldr	r3, [r5, #28]
 24033              	.LVL3059:
 24034              	.L2975:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 24035              		.loc 1 737 0
 24036 03c4 F618     		adds	r6, r6, r3
 24037              	.LVL3060:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24038              		.loc 1 736 0
 24039 03c6 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 24040              		.loc 1 738 0
 24041 03c8 0123     		movs	r3, #1
 24042 03ca 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 24043 03cc 0499     		ldr	r1, [sp, #16]
 24044 03ce 069F     		ldr	r7, [sp, #24]
 24045 03d0 3246     		mov	r2, r6
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24046              		.loc 1 736 0
 24047 03d2 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 24048              		.loc 1 738 0
 24049 03d4 B847     		blx	r7
 24050              	.LVL3061:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24051              		.loc 1 736 0
 24052 03d6 012C     		cmp	r4, #1
 24053 03d8 F3D8     		bhi	.L3012
 24054 03da 2C46     		mov	r4, r5
 24055              	.LVL3062:
 24056 03dc 099F     		ldr	r7, [sp, #36]
 24057 03de 079D     		ldr	r5, [sp, #28]
 24058              	.LVL3063:
 24059 03e0 C3E7     		b	.L2880
 24060              	.LVL3064:
 24061              	.L2853:
 24062              	.LBE2071:
 24063              	.LBE2075:
 24064              	.LBE2078:
 24065              	.LBE2086:
 24066              	.LBE2096:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 24067              		.loc 1 990 0
 24068 03e2 9F42     		cmp	r7, r3
 24069 03e4 28BF     		it	cs
 24070 03e6 0127     		movcs	r7, #1
 24071              	.LVL3065:
 24072 03e8 DFE6     		b	.L2854
 24073              	.LVL3066:
 24074              	.L2852:
 24075 03ea 2946     		mov	r1, r5
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 24076              		.loc 1 993 0
 24077 03ec 2046     		mov	r0, r4
 24078 03ee 664B     		ldr	r3, .L3023+4
 24079              	.LVL3067:
 24080 03f0 9847     		blx	r3
 24081              	.LVL3068:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 24082              		.loc 1 994 0
 24083 03f2 0128     		cmp	r0, #1
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 24084              		.loc 1 993 0
 24085 03f4 0546     		mov	r5, r0
 24086              	.LVL3069:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 24087              		.loc 1 994 0
 24088 03f6 7FF6F0AE 		bls	.L2936
 995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 24089              		.loc 1 995 0
 24090 03fa A369     		ldr	r3, [r4, #24]
 24091 03fc 9842     		cmp	r0, r3
 24092 03fe FFF4F5AE 		bcc	.L2851
 24093 0402 059F     		ldr	r7, [sp, #20]
 24094 0404 D1E6     		b	.L2854
 24095              	.LVL3070:
 24096              	.L3011:
 24097              	.LBB2097:
 24098              	.LBB2087:
 24099              	.LBB2079:
 24100              	.LBB2076:
 24101              	.LBB2072:
 24102              	.LBB2073:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 24103              		.loc 1 744 0
 24104 0406 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24105 0408 604E     		ldr	r6, .L3023+8
 24106 040a 04F13001 		add	r1, r4, #48
 24107 040e 5A46     		mov	r2, fp
 24108 0410 0123     		movs	r3, #1
 24109 0412 B047     		blx	r6
 24110              	.LVL3071:
 24111 0414 0028     		cmp	r0, #0
 24112 0416 7FF4D9AE 		bne	.L2897
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 24113              		.loc 1 746 0
 24114 041a C4F82CB0 		str	fp, [r4, #44]
 24115 041e A7E7     		b	.L2915
 24116              	.LVL3072:
 24117              	.L3009:
 24118              	.LBE2073:
 24119              	.LBE2072:
 24120              	.LBE2076:
 24121              	.LBE2079:
 24122              	.LBB2080:
 24123              	.LBB2064:
 24124              	.LBB2060:
 24125              	.LBB2061:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 24126              		.loc 1 744 0
 24127 0420 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24128 0422 5A4E     		ldr	r6, .L3023+8
 24129 0424 04F13001 		add	r1, r4, #48
 24130 0428 5A46     		mov	r2, fp
 24131 042a 0123     		movs	r3, #1
 24132 042c B047     		blx	r6
 24133              	.LVL3073:
 24134 042e 0028     		cmp	r0, #0
 24135 0430 7FF4CCAE 		bne	.L2897
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 24136              		.loc 1 746 0
 24137 0434 C4F82CB0 		str	fp, [r4, #44]
 24138 0438 43E7     		b	.L2916
 24139              	.LVL3074:
 24140              	.L3006:
 24141              	.LBE2061:
 24142              	.LBE2060:
 24143              	.LBE2064:
 24144              	.LBE2080:
 24145              	.LBB2081:
 24146              	.LBB2043:
 24147              	.LBB2038:
 24148              	.LBB2039:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 24149              		.loc 1 744 0
 24150 043a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24151 043c 029A     		ldr	r2, [sp, #8]
 24152 043e DFF84CC1 		ldr	ip, .L3023+8
 24153 0442 04F13001 		add	r1, r4, #48
 24154 0446 0123     		movs	r3, #1
 24155 0448 E047     		blx	ip
 24156              	.LVL3075:
 24157 044a 0028     		cmp	r0, #0
 24158 044c 7FF4BEAE 		bne	.L2897
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 24159              		.loc 1 746 0
 24160 0450 029E     		ldr	r6, [sp, #8]
 24161 0452 226A     		ldr	r2, [r4, #32]
 24162 0454 E662     		str	r6, [r4, #44]
 24163 0456 FAE6     		b	.L2913
 24164              	.LVL3076:
 24165              	.L2865:
 24166              	.LBE2039:
 24167              	.LBE2038:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 24168              		.loc 1 731 0
 24169 0458 04F13006 		add	r6, r4, #48
 24170              	.LVL3077:
 24171 045c 0796     		str	r6, [sp, #28]
 24172 045e 494E     		ldr	r6, .L3023
 24173 0460 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24174 0462 0799     		ldr	r1, [sp, #28]
 24175 0464 0696     		str	r6, [sp, #24]
 24176 0466 5A46     		mov	r2, fp
 24177 0468 B047     		blx	r6
 24178              	.LVL3078:
 24179 046a 0028     		cmp	r0, #0
 24180 046c 7FF4AEAE 		bne	.L2897
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 24181              		.loc 1 734 0
 24182 0470 E369     		ldr	r3, [r4, #28]
 24183 0472 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 24184              		.loc 1 733 0
 24185 0474 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 24186              		.loc 1 734 0
 24187 0476 9A18     		adds	r2, r3, r2
 24188 0478 9345     		cmp	fp, r2
 24189 047a BFF4E1AE 		bcs	.L2868
 24190              	.LBB2040:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24191              		.loc 1 736 0
 24192 047e 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 24193              	.LVL3079:
 24194 0482 BCF1010F 		cmp	ip, #1
 24195 0486 7FF6DBAE 		bls	.L2868
 24196 048a 0895     		str	r5, [sp, #32]
 24197 048c 2546     		mov	r5, r4
 24198 048e 6446     		mov	r4, ip
 24199              	.LVL3080:
 24200 0490 00E0     		b	.L2973
 24201              	.LVL3081:
 24202              	.L3013:
 24203 0492 EB69     		ldr	r3, [r5, #28]
 24204              	.LVL3082:
 24205              	.L2973:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 24206              		.loc 1 737 0
 24207 0494 9B44     		add	fp, fp, r3
 24208              	.LVL3083:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24209              		.loc 1 736 0
 24210 0496 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 24211              		.loc 1 738 0
 24212 0498 0123     		movs	r3, #1
 24213 049a 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 24214 049c 0799     		ldr	r1, [sp, #28]
 24215 049e 069E     		ldr	r6, [sp, #24]
 24216 04a0 5A46     		mov	r2, fp
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24217              		.loc 1 736 0
 24218 04a2 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 24219              		.loc 1 738 0
 24220 04a4 B047     		blx	r6
 24221              	.LVL3084:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24222              		.loc 1 736 0
 24223 04a6 012C     		cmp	r4, #1
 24224 04a8 F3D8     		bhi	.L3013
 24225 04aa 2C46     		mov	r4, r5
 24226              	.LVL3085:
 24227 04ac 089D     		ldr	r5, [sp, #32]
 24228              	.LVL3086:
 24229 04ae C7E6     		b	.L2868
 24230              	.LVL3087:
 24231              	.L3008:
 24232              	.LBE2040:
 24233              	.LBE2043:
 24234              	.LBE2081:
 24235              	.LBE2087:
 24236              	.LBE2097:
 24237              	.LBB2098:
 24238              	.LBB2099:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 24239              		.loc 1 873 0
 24240 04b0 A369     		ldr	r3, [r4, #24]
 24241 04b2 AB42     		cmp	r3, r5
 24242 04b4 7FF691AE 		bls	.L2936
 24243 04b8 2046     		mov	r0, r4
 24244 04ba 2946     		mov	r1, r5
 24245 04bc 6FF07042 		mvn	r2, #-268435456
 24246 04c0 334E     		ldr	r6, .L3023+12
 24247 04c2 B047     		blx	r6
 24248              	.LVL3088:
 24249              	.LBE2099:
 24250              	.LBE2098:
1014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && clst != 0) {
 24251              		.loc 1 1014 0
 24252 04c4 0028     		cmp	r0, #0
 24253 04c6 57D1     		bne	.L2896
 24254 04c8 059F     		ldr	r7, [sp, #20]
 24255 04ca 002F     		cmp	r7, #0
 24256 04cc 47D1     		bne	.L2893
 24257              	.LVL3089:
 24258              	.L2895:
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 24259              		.loc 1 1019 0
 24260 04ce 2369     		ldr	r3, [r4, #16]
1018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 24261              		.loc 1 1018 0
 24262 04d0 E560     		str	r5, [r4, #12]
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 24263              		.loc 1 1019 0
 24264 04d2 5A1C     		adds	r2, r3, #1
 24265 04d4 3FF48AAE 		beq	.L2851
1020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->free_clust--;
 24266              		.loc 1 1020 0
 24267 04d8 013B     		subs	r3, r3, #1
 24268 04da 2361     		str	r3, [r4, #16]
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
 24269              		.loc 1 1021 0
 24270 04dc 0123     		movs	r3, #1
 24271 04de 6371     		strb	r3, [r4, #5]
 24272              	.LVL3090:
 24273              	.LBE2104:
 24274              	.LBE2107:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 24275              		.loc 1 2515 0
 24276 04e0 002D     		cmp	r5, #0
 24277 04e2 7FF475AE 		bne	.L2898
 24278 04e6 83E6     		b	.L2958
 24279              	.LVL3091:
 24280              	.L2920:
 24281              	.LBE2112:
 24282              	.LBE2117:
 24283              	.LBE2121:
 24284              	.LBE2124:
3969:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (n = 0; *str; str++, n++) {
 24285              		.loc 1 3969 0
 24286 04e8 A346     		mov	fp, r4
 24287 04ea A3E5     		b	.L2978
 24288              	.LVL3092:
 24289              	.L2871:
 24290              	.LBB2125:
 24291              	.LBB2122:
 24292              	.LBB2118:
 24293              	.LBB2113:
 24294              	.LBB2108:
 24295              	.LBB2105:
 24296              	.LBB2100:
 24297              	.LBB2088:
 24298              	.LBB2082:
 24299              	.LBB2053:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 24300              		.loc 1 731 0
 24301 04ec 04F13006 		add	r6, r4, #48
 24302              	.LVL3093:
 24303 04f0 0896     		str	r6, [sp, #32]
 24304 04f2 244E     		ldr	r6, .L3023
 24305 04f4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24306 04f6 0899     		ldr	r1, [sp, #32]
 24307 04f8 029A     		ldr	r2, [sp, #8]
 24308              	.LVL3094:
 24309 04fa 0696     		str	r6, [sp, #24]
 24310 04fc 0123     		movs	r3, #1
 24311 04fe B047     		blx	r6
 24312              	.LVL3095:
 24313 0500 0028     		cmp	r0, #0
 24314 0502 7FF463AE 		bne	.L2897
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 24315              		.loc 1 734 0
 24316 0506 E369     		ldr	r3, [r4, #28]
 24317 0508 226A     		ldr	r2, [r4, #32]
 24318 050a 029E     		ldr	r6, [sp, #8]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 24319              		.loc 1 733 0
 24320 050c 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 24321              		.loc 1 734 0
 24322 050e 9A18     		adds	r2, r3, r2
 24323 0510 9642     		cmp	r6, r2
 24324 0512 BFF4AFAE 		bcs	.L2873
 24325              	.LBB2048:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24326              		.loc 1 736 0
 24327 0516 94F803B0 		ldrb	fp, [r4, #3]	@ zero_extendqisi2
 24328              	.LVL3096:
 24329 051a BBF1010F 		cmp	fp, #1
 24330 051e 7FF6A9AE 		bls	.L2873
 24331 0522 AC46     		mov	ip, r5
 24332 0524 00E0     		b	.L2974
 24333              	.LVL3097:
 24334              	.L3014:
 24335 0526 E369     		ldr	r3, [r4, #28]
 24336              	.LVL3098:
 24337              	.L2974:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 24338              		.loc 1 737 0
 24339 0528 F618     		adds	r6, r6, r3
 24340              	.LVL3099:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24341              		.loc 1 736 0
 24342 052a 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 24343              		.loc 1 738 0
 24344 052e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24345 0530 0899     		ldr	r1, [sp, #32]
 24346 0532 CDF804C0 		str	ip, [sp, #4]
 24347 0536 0123     		movs	r3, #1
 24348 0538 3246     		mov	r2, r6
 24349 053a 069D     		ldr	r5, [sp, #24]
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24350              		.loc 1 736 0
 24351 053c 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 24352              		.loc 1 738 0
 24353 0540 A847     		blx	r5
 24354              	.LVL3100:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 24355              		.loc 1 736 0
 24356 0542 BBF1010F 		cmp	fp, #1
 24357 0546 DDF804C0 		ldr	ip, [sp, #4]
 24358 054a ECD8     		bhi	.L3014
 24359 054c 6546     		mov	r5, ip
 24360 054e 91E6     		b	.L2873
 24361              	.LVL3101:
 24362              	.L2908:
 24363              	.LBE2048:
 24364              	.LBE2053:
 24365              	.LBE2082:
 24366              	.LBE2088:
 24367              	.LBE2100:
 24368              	.LBE2105:
 24369              	.LBE2108:
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 24370              		.loc 1 2562 0
 24371 0550 98F80630 		ldrb	r3, [r8, #6]	@ zero_extendqisi2
 24372 0554 63F07F03 		orn	r3, r3, #127
 24373 0558 88F80630 		strb	r3, [r8, #6]
 24374 055c 68E5     		b	.L2911
 24375              	.LVL3102:
 24376              	.L2893:
 24377              	.LBB2109:
 24378              	.LBB2106:
 24379              	.LBB2101:
 24380              	.LBB2093:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 24381              		.loc 1 873 0
 24382 055e 012F     		cmp	r7, #1
 24383 0560 7FF63BAE 		bls	.L2936
 24384 0564 A369     		ldr	r3, [r4, #24]
 24385 0566 9F42     		cmp	r7, r3
 24386 0568 BFF437AE 		bcs	.L2936
 24387 056c 2046     		mov	r0, r4
 24388              	.LVL3103:
 24389 056e 3946     		mov	r1, r7
 24390 0570 2A46     		mov	r2, r5
 24391 0572 B047     		blx	r6
 24392              	.LVL3104:
 24393              	.LBE2093:
 24394              	.LBE2101:
1017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 24395              		.loc 1 1017 0
 24396 0574 0028     		cmp	r0, #0
 24397 0576 AAD0     		beq	.L2895
 24398              	.LVL3105:
 24399              	.L2896:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 24400              		.loc 1 1024 0
 24401 0578 0128     		cmp	r0, #1
 24402 057a 3FF427AE 		beq	.L2897
 24403              	.LBB2102:
 24404              	.LBB2094:
 24405 057e 0125     		movs	r5, #1
 24406              	.LVL3106:
 24407 0580 26E6     		b	.L2898
 24408              	.L3024:
 24409 0582 00BF     		.align	2
 24410              	.L3023:
 24411 0584 00000000 		.word	disk_write
 24412 0588 00000000 		.word	get_fat
 24413 058c 00000000 		.word	disk_read
 24414 0590 00000000 		.word	put_fat.part.4
 24415              	.LVL3107:
 24416              	.L3007:
 24417              	.LBE2094:
 24418              	.LBE2102:
 24419              	.LBB2103:
 24420              	.LBB2089:
 24421              	.LBB2083:
 24422              	.LBB2054:
 24423              	.LBB2049:
 24424              	.LBB2050:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 24425              		.loc 1 744 0
 24426 0594 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 24427 0596 049A     		ldr	r2, [sp, #16]
 24428 0598 6B4E     		ldr	r6, .L3025
 24429 059a 04F13001 		add	r1, r4, #48
 24430 059e 0123     		movs	r3, #1
 24431 05a0 B047     		blx	r6
 24432              	.LVL3108:
 24433 05a2 0028     		cmp	r0, #0
 24434 05a4 7FF412AE 		bne	.L2897
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 24435              		.loc 1 746 0
 24436 05a8 049E     		ldr	r6, [sp, #16]
 24437 05aa E662     		str	r6, [r4, #44]
 24438 05ac 66E6     		b	.L2914
 24439              	.LVL3109:
 24440              	.L2875:
 24441              	.LBE2050:
 24442              	.LBE2049:
 24443              	.LBE2054:
 24444              	.LBE2083:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 24445              		.loc 1 838 0
 24446 05ae 1B05     		lsls	r3, r3, #20
 24447              	.LVL3110:
 24448 05b0 1B0D     		lsrs	r3, r3, #20
 24449 05b2 70E6     		b	.L2876
 24450              	.LVL3111:
 24451              	.L2820:
 24452              	.LBE2089:
 24453              	.LBE2103:
 24454              	.LBE2106:
 24455              	.LBE2109:
 24456              	.LBE2113:
 24457              	.LBE2118:
 24458              	.LBB2119:
 24459              	.LBB2015:
 24460              	.LBB2012:
 24461              	.LBB2009:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 24462              		.loc 1 2492 0
 24463 05b4 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 24464 05b8 1006     		lsls	r0, r2, #24
 24465 05ba 1746     		mov	r7, r2
 24466 05bc 3FF598AD 		bmi	.L2997
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 24467              		.loc 1 2494 0
 24468 05c0 02F00201 		and	r1, r2, #2
 24469 05c4 C9B2     		uxtb	r1, r1
 24470 05c6 0029     		cmp	r1, #0
 24471 05c8 3FF492AD 		beq	.L2997
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 24472              		.loc 1 2496 0
 24473 05cc D8F80C00 		ldr	r0, [r8, #12]
 24474              	.LVL3112:
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 24475              		.loc 1 2500 0
 24476 05d0 D8F80810 		ldr	r1, [r8, #8]
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 24477              		.loc 1 2498 0
 24478 05d4 451C     		adds	r5, r0, #1
 24479 05d6 80F0B380 		bcs	.L3015
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 24480              		.loc 1 2500 0
 24481 05da CB05     		lsls	r3, r1, #23
 24482 05dc DB0D     		lsrs	r3, r3, #23
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 24483              		.loc 1 2501 0
 24484 05de D8F80050 		ldr	r5, [r8, #0]
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 24485              		.loc 1 2500 0
 24486 05e2 002B     		cmp	r3, #0
 24487 05e4 40D1     		bne	.L2824
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 24488              		.loc 1 2501 0
 24489 05e6 AE78     		ldrb	r6, [r5, #2]	@ zero_extendqisi2
 24490 05e8 013E     		subs	r6, r6, #1
 24491 05ea 06EA5126 		and	r6, r6, r1, lsr #9
 24492              	.LVL3113:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 24493              		.loc 1 2502 0
 24494 05ee 16F0FF06 		ands	r6, r6, #255
 24495              	.LVL3114:
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 24496              		.loc 1 2501 0
 24497 05f2 2B46     		mov	r3, r5
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 24498              		.loc 1 2502 0
 24499 05f4 0ED1     		bne	.L2825
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 24500              		.loc 1 2503 0
 24501 05f6 0029     		cmp	r1, #0
 24502 05f8 66D1     		bne	.L2826
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 24503              		.loc 1 2504 0
 24504 05fa D8F81030 		ldr	r3, [r8, #16]
 24505              	.LVL3115:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 24506              		.loc 1 2505 0
 24507 05fe 002B     		cmp	r3, #0
 24508 0600 6ED0     		beq	.L3016
 24509              	.LVL3116:
 24510              	.L2827:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 24511              		.loc 1 2516 0
 24512 0602 012B     		cmp	r3, #1
 24513 0604 00F08480 		beq	.L2999
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 24514              		.loc 1 2517 0
 24515 0608 5A1C     		adds	r2, r3, #1
 24516 060a 00F08180 		beq	.L2999
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 24517              		.loc 1 2518 0
 24518 060e C8F81430 		str	r3, [r8, #20]
 24519 0612 2B46     		mov	r3, r5
 24520              	.LVL3117:
 24521              	.L2825:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 24522              		.loc 1 2524 0
 24523 0614 07F04002 		and	r2, r7, #64
 24524 0618 D2B2     		uxtb	r2, r2
 24525 061a 002A     		cmp	r2, #0
 24526 061c 40D1     		bne	.L3017
 24527              	.L2833:
 24528              	.LVL3118:
 24529              	.LBB2000:
 24530              	.LBB2001:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 24531              		.loc 1 806 0
 24532 061e D8F81410 		ldr	r1, [r8, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 24533              		.loc 1 807 0
 24534 0622 AA69     		ldr	r2, [r5, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 24535              		.loc 1 806 0
 24536 0624 0239     		subs	r1, r1, #2
 24537              	.LVL3119:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 24538              		.loc 1 807 0
 24539 0626 023A     		subs	r2, r2, #2
 24540 0628 9142     		cmp	r1, r2
 24541 062a 06D3     		bcc	.L3018
 24542              	.L2835:
 24543              	.LBE2001:
 24544              	.LBE2000:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 24545              		.loc 1 2531 0
 24546 062c 67F07F07 		orn	r7, r7, #127
 24547 0630 88F80670 		strb	r7, [r8, #6]
 24548              	.LVL3120:
 24549              	.L2831:
 24550 0634 B8F80410 		ldrh	r1, [r8, #4]
 24551 0638 F5E4     		b	.L2818
 24552              	.LVL3121:
 24553              	.L3018:
 24554              	.LBB2003:
 24555              	.LBB2002:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 24556              		.loc 1 808 0
 24557 063a A878     		ldrb	r0, [r5, #2]	@ zero_extendqisi2
 24558 063c AA6A     		ldr	r2, [r5, #40]
 24559 063e 01FB0022 		mla	r2, r1, r0, r2
 24560              	.LBE2002:
 24561              	.LBE2003:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 24562              		.loc 1 2531 0
 24563 0642 002A     		cmp	r2, #0
 24564 0644 F2D0     		beq	.L2835
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 24565              		.loc 1 2559 0
 24566 0646 D8F81830 		ldr	r3, [r8, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 24567              		.loc 1 2560 0
 24568 064a D8F80810 		ldr	r1, [r8, #8]
 24569              	.LVL3122:
 24570 064e D8F80C00 		ldr	r0, [r8, #12]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 24571              		.loc 1 2532 0
 24572 0652 B618     		adds	r6, r6, r2
 24573              	.LVL3123:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 24574              		.loc 1 2559 0
 24575 0654 9E42     		cmp	r6, r3
 24576 0656 01D0     		beq	.L2838
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 24577              		.loc 1 2560 0
 24578 0658 8142     		cmp	r1, r0
 24579 065a 48D3     		bcc	.L3019
 24580              	.LVL3124:
 24581              	.L2838:
 24582 065c CB05     		lsls	r3, r1, #23
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 24583              		.loc 1 2565 0
 24584 065e C8F81860 		str	r6, [r8, #24]
 24585 0662 9DF82C60 		ldrb	r6, [sp, #44]	@ zero_extendqisi2
 24586              	.LVL3125:
 24587 0666 DB0D     		lsrs	r3, r3, #23
 24588              	.LVL3126:
 24589              	.L2824:
 24590              	.LBB2004:
 24591              	.LBB2005:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 24592              		.loc 1 541 0
 24593 0668 4344     		add	r3, r8, r3
 24594              	.LVL3127:
 24595              	.LBE2005:
 24596              	.LBE2004:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 24597              		.loc 1 2576 0
 24598 066a 47F04002 		orr	r2, r7, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 24599              		.loc 1 2499 0
 24600 066e 0131     		adds	r1, r1, #1
 24601              	.LBB2007:
 24602              	.LBB2006:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 24603              		.loc 1 541 0
 24604 0670 83F82460 		strb	r6, [r3, #36]
 24605              	.LVL3128:
 24606              	.LBE2006:
 24607              	.LBE2007:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 24608              		.loc 1 2576 0
 24609 0674 88F80620 		strb	r2, [r8, #6]
 24610              	.LVL3129:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 24611              		.loc 1 2499 0
 24612 0678 C8F80810 		str	r1, [r8, #8]
 24613              	.LVL3130:
 24614 067c 0123     		movs	r3, #1
 24615              	.LVL3131:
 24616              	.L2823:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 24617              		.loc 1 2580 0
 24618 067e 8842     		cmp	r0, r1
 24619 0680 38BF     		it	cc
 24620 0682 C8F80C10 		strcc	r1, [r8, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 24621              		.loc 1 2581 0
 24622 0686 42F02002 		orr	r2, r2, #32
 24623              	.LBE2009:
 24624              	.LBE2012:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 24625              		.loc 1 3952 0
 24626 068a 012B     		cmp	r3, #1
 24627              	.LBB2013:
 24628              	.LBB2010:
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 24629              		.loc 1 2581 0
 24630 068c 88F80620 		strb	r2, [r8, #6]
 24631              	.LVL3132:
 24632 0690 07BF     		ittee	eq
 24633 0692 2B46     		moveq	r3, r5
 24634              	.LVL3133:
 24635 0694 B8F80410 		ldrheq	r1, [r8, #4]
 24636 0698 B8F80410 		ldrhne	r1, [r8, #4]
 24637 069c 2B46     		movne	r3, r5
 24638 069e C2E4     		b	.L2818
 24639              	.LVL3134:
 24640              	.L3017:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 24641              		.loc 1 2525 0
 24642 06a0 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 24643 06a2 D8F81820 		ldr	r2, [r8, #24]
 24644 06a6 294D     		ldr	r5, .L3025+4
 24645 06a8 08F12401 		add	r1, r8, #36
 24646 06ac 0123     		movs	r3, #1
 24647 06ae A847     		blx	r5
 24648              	.LVL3135:
 24649 06b0 0028     		cmp	r0, #0
 24650 06b2 3CD1     		bne	.L2839
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 24651              		.loc 1 2527 0
 24652 06b4 98F80670 		ldrb	r7, [r8, #6]	@ zero_extendqisi2
 24653 06b8 D8F80050 		ldr	r5, [r8, #0]
 24654 06bc 07F0BF07 		and	r7, r7, #191
 24655 06c0 88F80670 		strb	r7, [r8, #6]
 24656 06c4 2B46     		mov	r3, r5
 24657 06c6 AAE7     		b	.L2833
 24658              	.LVL3136:
 24659              	.L2826:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 24660              		.loc 1 2513 0
 24661 06c8 214B     		ldr	r3, .L3025+8
 24662              	.LVL3137:
 24663 06ca D8F81410 		ldr	r1, [r8, #20]
 24664              	.LVL3138:
 24665 06ce 2846     		mov	r0, r5
 24666              	.LVL3139:
 24667 06d0 9847     		blx	r3
 24668              	.LVL3140:
 24669 06d2 0346     		mov	r3, r0
 24670              	.LVL3141:
 24671              	.L2828:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 24672              		.loc 1 2515 0
 24673 06d4 13B3     		cbz	r3, .L3020
 24674 06d6 98F80670 		ldrb	r7, [r8, #6]	@ zero_extendqisi2
 24675 06da D8F80050 		ldr	r5, [r8, #0]
 24676 06de 90E7     		b	.L2827
 24677              	.LVL3142:
 24678              	.L3016:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 24679              		.loc 1 2506 0
 24680 06e0 1B4B     		ldr	r3, .L3025+8
 24681              	.LVL3143:
 24682 06e2 2846     		mov	r0, r5
 24683              	.LVL3144:
 24684 06e4 9847     		blx	r3
 24685              	.LVL3145:
 24686 06e6 0346     		mov	r3, r0
 24687              	.LVL3146:
 24688 06e8 C8F81000 		str	r0, [r8, #16]
 24689 06ec F2E7     		b	.L2828
 24690              	.LVL3147:
 24691              	.L3019:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 24692              		.loc 1 2561 0
 24693 06ee 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 24694 06f0 154D     		ldr	r5, .L3025
 24695              	.LVL3148:
 24696 06f2 08F12401 		add	r1, r8, #36
 24697 06f6 3246     		mov	r2, r6
 24698 06f8 0123     		movs	r3, #1
 24699 06fa A847     		blx	r5
 24700              	.LVL3149:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 24701              		.loc 1 2560 0
 24702 06fc B8B9     		cbnz	r0, .L2839
 24703 06fe D8F80810 		ldr	r1, [r8, #8]
 24704 0702 D8F80C00 		ldr	r0, [r8, #12]
 24705 0706 98F80670 		ldrb	r7, [r8, #6]	@ zero_extendqisi2
 24706 070a D8F80050 		ldr	r5, [r8, #0]
 24707 070e A5E7     		b	.L2838
 24708              	.LVL3150:
 24709              	.L2999:
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 24710              		.loc 1 2517 0
 24711 0710 67F07F07 		orn	r7, r7, #127
 24712 0714 88F80670 		strb	r7, [r8, #6]
 24713 0718 2B46     		mov	r3, r5
 24714              	.LVL3151:
 24715 071a 8BE7     		b	.L2831
 24716              	.LVL3152:
 24717              	.L3020:
 24718 071c D8F80810 		ldr	r1, [r8, #8]
 24719 0720 D8F80C00 		ldr	r0, [r8, #12]
 24720              	.LVL3153:
 24721 0724 D8F80050 		ldr	r5, [r8, #0]
 24722 0728 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 24723 072c A7E7     		b	.L2823
 24724              	.LVL3154:
 24725              	.L2839:
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 24726              		.loc 1 2562 0
 24727 072e 98F80620 		ldrb	r2, [r8, #6]	@ zero_extendqisi2
 24728 0732 D8F80030 		ldr	r3, [r8, #0]
 24729 0736 62F07F02 		orn	r2, r2, #127
 24730 073a 88F80620 		strb	r2, [r8, #6]
 24731 073e 79E7     		b	.L2831
 24732              	.LVL3155:
 24733              	.L3015:
 24734 0740 D8F80050 		ldr	r5, [r8, #0]
 24735 0744 9BE7     		b	.L2823
 24736              	.L3026:
 24737 0746 00BF     		.align	2
 24738              	.L3025:
 24739 0748 00000000 		.word	disk_read
 24740 074c 00000000 		.word	disk_write
 24741 0750 00000000 		.word	create_chain
 24742              	.LBE2010:
 24743              	.LBE2013:
 24744              	.LBE2015:
 24745              	.LBE2119:
 24746              	.LBE2122:
 24747              	.LBE2125:
 24748              		.cfi_endproc
 24749              	.LFE48:
 24751              		.section	.text.f_printf,"ax",%progbits
 24752              		.align	2
 24753              		.global	f_printf
 24754              		.thumb
 24755              		.thumb_func
 24757              	f_printf:
 24758              	.LFB49:
3986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 24759              		.loc 1 3986 0
 24760              		.cfi_startproc
 24761              		@ args = 4, pretend = 12, frame = 80
 24762              		@ frame_needed = 0, uses_anonymous_args = 1
 24763              	.LVL3156:
 24764 0000 0EB4     		push	{r1, r2, r3}
 24765              	.LCFI60:
 24766              		.cfi_def_cfa_offset 12
 24767              		.cfi_offset 1, -12
 24768              		.cfi_offset 2, -8
 24769              		.cfi_offset 3, -4
 24770 0002 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 24771              	.LCFI61:
 24772              		.cfi_def_cfa_offset 48
 24773              		.cfi_offset 4, -48
 24774              		.cfi_offset 5, -44
 24775              		.cfi_offset 6, -40
 24776              		.cfi_offset 7, -36
 24777              		.cfi_offset 8, -32
 24778              		.cfi_offset 9, -28
 24779              		.cfi_offset 10, -24
 24780              		.cfi_offset 11, -20
 24781              		.cfi_offset 14, -16
 24782 0006 94B0     		sub	sp, sp, #80
 24783              	.LCFI62:
 24784              		.cfi_def_cfa_offset 128
3986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 24785              		.loc 1 3986 0
 24786 0008 1DAB     		add	r3, sp, #116
3997:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (cc = res = 0; cc != EOF; res += cc) {
 24787              		.loc 1 3997 0
 24788 000a 4FF0000A 		mov	sl, #0
3986:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** {
 24789              		.loc 1 3986 0
 24790 000e 53F8044B 		ldr	r4, [r3], #4
3995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	va_start(arp, str);
 24791              		.loc 1 3995 0
 24792 0012 D346     		mov	fp, sl
 24793 0014 0E93     		str	r3, [sp, #56]
 24794              	.LVL3157:
 24795 0016 8246     		mov	sl, r0
 24796              	.LVL3158:
 24797              	.L3722:
3998:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
 24798              		.loc 1 3998 0
 24799 0018 1D9D     		ldr	r5, [sp, #116]
 24800 001a 2C78     		ldrb	r4, [r5, #0]	@ zero_extendqisi2
 24801              	.LVL3159:
3999:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) break;			/* End of string */
 24802              		.loc 1 3999 0
 24803 001c 002C     		cmp	r4, #0
 24804 001e 00F09A82 		beq	.L3029
 24805              	.LVL3160:
 24806              	.L3848:
4000:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c != '%') {				/* Non escape character */
 24807              		.loc 1 4000 0
 24808 0022 252C     		cmp	r4, #37
 24809 0024 14D0     		beq	.L3030
 24810              	.LVL3161:
 24811              	.LBB2374:
 24812              	.LBB2375:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 24813              		.loc 1 3928 0
 24814 0026 0A2C     		cmp	r4, #10
 24815 0028 00F01683 		beq	.L3836
 24816              	.L3031:
 24817              	.LBB2376:
 24818              	.LBB2377:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 24819              		.loc 1 2490 0
 24820 002c DAF80030 		ldr	r3, [sl, #0]
 24821              	.LBE2377:
 24822              	.LBE2376:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 24823              		.loc 1 3948 0
 24824 0030 8DF83440 		strb	r4, [sp, #52]
 24825              	.LVL3162:
 24826              	.LBB2401:
 24827              	.LBB2392:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 24828              		.loc 1 2490 0
 24829 0034 BAF80410 		ldrh	r1, [sl, #4]
 24830              	.LVL3163:
 24831              	.LBB2378:
 24832              	.LBB2379:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 24833              		.loc 1 2177 0
 24834 0038 1BB1     		cbz	r3, .L3436
 24835 003a 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 24836 003c 002A     		cmp	r2, #0
 24837 003e 40F0A482 		bne	.L3837
 24838              	.LVL3164:
 24839              	.L3436:
 24840              	.LBE2379:
 24841              	.LBE2378:
 24842              	.LBE2392:
 24843              	.LBE2401:
 24844              	.LBE2375:
 24845              	.LBE2374:
4072:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	va_end(arp);
 24846              		.loc 1 4072 0
 24847 0042 4FF0FF30 		mov	r0, #-1
 24848              	.L3753:
 24849              		.loc 1 4074 0
 24850 0046 14B0     		add	sp, sp, #80
 24851 0048 BDE8F04F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 24852 004c 03B0     		add	sp, sp, #12
 24853 004e 7047     		bx	lr
 24854              	.L3030:
 24855              	.LVL3165:
4006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
 24856              		.loc 1 4006 0
 24857 0050 1D9E     		ldr	r6, [sp, #116]
 24858 0052 7478     		ldrb	r4, [r6, #1]	@ zero_extendqisi2
 24859              	.LVL3166:
4007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 24860              		.loc 1 4007 0
 24861 0054 302C     		cmp	r4, #48
 24862 0056 00F09182 		beq	.L3838
4010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (c == '-') {			/* Flag: left justified */
 24863              		.loc 1 4010 0
 24864 005a 2D2C     		cmp	r4, #45
 24865 005c 00F0E582 		beq	.L3057
4006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
 24866              		.loc 1 4006 0
 24867 0060 1D9D     		ldr	r5, [sp, #116]
 24868 0062 0021     		movs	r1, #0
 24869 0064 0235     		adds	r5, r5, #2
 24870              	.LVL3167:
 24871 0066 1D95     		str	r5, [sp, #116]
4005:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		w = f = 0;
 24872              		.loc 1 4005 0
 24873 0068 0846     		mov	r0, r1
4006:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
 24874              		.loc 1 4006 0
 24875 006a 0425     		movs	r5, #4
 24876              	.LVL3168:
 24877              	.L3056:
4014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (IsDigit(c)) {		/* Precision */
 24878              		.loc 1 4014 0 discriminator 1
 24879 006c A4F13003 		sub	r3, r4, #48
 24880 0070 092B     		cmp	r3, #9
 24881 0072 4FF00008 		mov	r8, #0
 24882 0076 0DD8     		bhi	.L3058
4014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (IsDigit(c)) {		/* Precision */
 24883              		.loc 1 4014 0 is_stmt 0
 24884 0078 1D9B     		ldr	r3, [sp, #116]
 24885              	.LVL3169:
 24886              	.L3059:
4015:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			w = w * 10 + c - '0';
 24887              		.loc 1 4015 0 is_stmt 1
 24888 007a 08EB8808 		add	r8, r8, r8, lsl #2
 24889 007e 04EB4808 		add	r8, r4, r8, lsl #1
4016:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			c = *str++;
 24890              		.loc 1 4016 0
 24891 0082 13F8014B 		ldrb	r4, [r3], #1	@ zero_extendqisi2
 24892              	.LVL3170:
4014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (IsDigit(c)) {		/* Precision */
 24893              		.loc 1 4014 0
 24894 0086 A4F13002 		sub	r2, r4, #48
 24895 008a 092A     		cmp	r2, #9
4015:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			w = w * 10 + c - '0';
 24896              		.loc 1 4015 0
 24897 008c A8F13008 		sub	r8, r8, #48
 24898              	.LVL3171:
4014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (IsDigit(c)) {		/* Precision */
 24899              		.loc 1 4014 0
 24900 0090 F3D9     		bls	.L3059
 24901 0092 1D93     		str	r3, [sp, #116]
 24902              	.LVL3172:
 24903              	.L3058:
4018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 24904              		.loc 1 4018 0
 24905 0094 6C2C     		cmp	r4, #108
 24906 0096 00F06A82 		beq	.L3060
4018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 24907              		.loc 1 4018 0 is_stmt 0 discriminator 1
 24908 009a 4C2C     		cmp	r4, #76
 24909 009c 00F06782 		beq	.L3060
4018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 24910              		.loc 1 4018 0
 24911 00a0 0025     		movs	r5, #0
 24912              	.L3061:
 24913              	.LVL3173:
4021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!c) break;
 24914              		.loc 1 4021 0 is_stmt 1
 24915 00a2 002C     		cmp	r4, #0
 24916 00a4 00F05782 		beq	.L3029
 24917              	.LVL3174:
4023:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (IsLower(d)) d -= 0x20;
 24918              		.loc 1 4023 0
 24919 00a8 A4F16103 		sub	r3, r4, #97
 24920 00ac 192B     		cmp	r3, #25
 24921 00ae 9ABF     		itte	ls
 24922 00b0 A4F12002 		subls	r2, r4, #32
 24923 00b4 D2B2     		uxtbls	r2, r2
 24924              	.LVL3175:
 24925 00b6 2246     		movhi	r2, r4
 24926              	.LVL3176:
4024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (d) {				/* Type is... */
 24927              		.loc 1 4024 0
 24928 00b8 A2F14203 		sub	r3, r2, #66
 24929 00bc 162B     		cmp	r3, #22
 24930 00be 00F24F82 		bhi	.L3063
 24931 00c2 DFE813F0 		tbh	[pc, r3, lsl #1]
 24932              	.L3070:
 24933 00c6 4B02     		.2byte	(.L3064-.L3070)/2
 24934 00c8 2B02     		.2byte	(.L3065-.L3070)/2
 24935 00ca 1F02     		.2byte	(.L3066-.L3070)/2
 24936 00cc 4D02     		.2byte	(.L3063-.L3070)/2
 24937 00ce 4D02     		.2byte	(.L3063-.L3070)/2
 24938 00d0 4D02     		.2byte	(.L3063-.L3070)/2
 24939 00d2 4D02     		.2byte	(.L3063-.L3070)/2
 24940 00d4 4D02     		.2byte	(.L3063-.L3070)/2
 24941 00d6 4D02     		.2byte	(.L3063-.L3070)/2
 24942 00d8 4D02     		.2byte	(.L3063-.L3070)/2
 24943 00da 4D02     		.2byte	(.L3063-.L3070)/2
 24944 00dc 4D02     		.2byte	(.L3063-.L3070)/2
 24945 00de 4D02     		.2byte	(.L3063-.L3070)/2
 24946 00e0 9B00     		.2byte	(.L3471-.L3070)/2
 24947 00e2 4D02     		.2byte	(.L3063-.L3070)/2
 24948 00e4 4D02     		.2byte	(.L3063-.L3070)/2
 24949 00e6 4D02     		.2byte	(.L3063-.L3070)/2
 24950 00e8 1C00     		.2byte	(.L3068-.L3070)/2
 24951 00ea 4D02     		.2byte	(.L3063-.L3070)/2
 24952 00ec 1F02     		.2byte	(.L3066-.L3070)/2
 24953 00ee 4D02     		.2byte	(.L3063-.L3070)/2
 24954 00f0 4D02     		.2byte	(.L3063-.L3070)/2
 24955 00f2 1700     		.2byte	(.L3472-.L3070)/2
 24956              	.L3472:
 24957 00f4 1023     		movs	r3, #16
 24958              	.L3069:
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
 24959              		.loc 1 4052 0
 24960 00f6 002D     		cmp	r5, #0
 24961 00f8 40F08480 		bne	.L3462
 24962 00fc 09E2     		b	.L3130
 24963              	.L3068:
4026:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = va_arg(arp, TCHAR*);
 24964              		.loc 1 4026 0
 24965 00fe 0E9B     		ldr	r3, [sp, #56]
 24966 0100 1F68     		ldr	r7, [r3, #0]
 24967              	.LVL3177:
4027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (j = 0; p[j]; j++) ;
 24968              		.loc 1 4027 0
 24969 0102 3D78     		ldrb	r5, [r7, #0]	@ zero_extendqisi2
4026:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			p = va_arg(arp, TCHAR*);
 24970              		.loc 1 4026 0
 24971 0104 0433     		adds	r3, r3, #4
 24972 0106 0E93     		str	r3, [sp, #56]
4027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (j = 0; p[j]; j++) ;
 24973              		.loc 1 4027 0
 24974 0108 002D     		cmp	r5, #0
 24975 010a 01F0C486 		beq	.L3473
 24976 010e 0025     		movs	r5, #0
 24977              	.LVL3178:
 24978              	.L3072:
4027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (j = 0; p[j]; j++) ;
 24979              		.loc 1 4027 0 is_stmt 0 discriminator 2
 24980 0110 0135     		adds	r5, r5, #1
 24981              	.LVL3179:
 24982 0112 7B5D     		ldrb	r3, [r7, r5]	@ zero_extendqisi2
 24983 0114 002B     		cmp	r3, #0
 24984 0116 FBD1     		bne	.L3072
 24985              	.LVL3180:
 24986 0118 6C1C     		adds	r4, r5, #1
 24987              	.LVL3181:
4029:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!(f & 2)) {
 24988              		.loc 1 4029 0 is_stmt 1
 24989 011a 0029     		cmp	r1, #0
 24990 011c 00F0A182 		beq	.L3839
 24991              	.LVL3182:
 24992              	.L3474:
4028:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			chc = 0;
 24993              		.loc 1 4028 0
 24994 0120 0026     		movs	r6, #0
 24995              	.LVL3183:
 24996              	.L3073:
4032:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			chc += (cc = f_puts(p, fil));
 24997              		.loc 1 4032 0
 24998 0122 3846     		mov	r0, r7
 24999 0124 5146     		mov	r1, sl
 25000 0126 334B     		ldr	r3, .L3924
 25001 0128 9847     		blx	r3
 25002              	.LVL3184:
4033:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while (j++ < w) chc += (cc = f_putc(' ', fil));
 25003              		.loc 1 4033 0
 25004 012a 4545     		cmp	r5, r8
4032:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			chc += (cc = f_puts(p, fil));
 25005              		.loc 1 4032 0
 25006 012c 0644     		add	r6, r0, r6
 25007              	.LVL3185:
4033:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while (j++ < w) chc += (cc = f_putc(' ', fil));
 25008              		.loc 1 4033 0
 25009 012e 09D3     		bcc	.L3725
 25010 0130 00F000BD 		b	.L3097
 25011              	.LVL3186:
 25012              	.L3439:
 25013              	.LBB2418:
 25014              	.LBB2419:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 25015              		.loc 1 3952 0
 25016 0134 4FF0FF30 		mov	r0, #-1
 25017              	.L3119:
 25018              	.LBE2419:
 25019              	.LBE2418:
4033:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			while (j++ < w) chc += (cc = f_putc(' ', fil));
 25020              		.loc 1 4033 0
 25021 0138 631C     		adds	r3, r4, #1
 25022 013a 4445     		cmp	r4, r8
 25023 013c 0644     		add	r6, r6, r0
 25024              	.LVL3187:
 25025 013e 80F0F984 		bcs	.L3097
 25026 0142 1C46     		mov	r4, r3
 25027              	.LVL3188:
 25028              	.L3725:
 25029              	.LBB2454:
 25030              	.LBB2448:
 25031              	.LBB2420:
 25032              	.LBB2421:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 25033              		.loc 1 2490 0
 25034 0144 DAF80030 		ldr	r3, [sl, #0]
 25035 0148 BAF80410 		ldrh	r1, [sl, #4]
 25036              	.LBE2421:
 25037              	.LBE2420:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 25038              		.loc 1 3948 0
 25039 014c 2025     		movs	r5, #32
 25040 014e 8DF83450 		strb	r5, [sp, #52]
 25041              	.LVL3189:
 25042              	.LBB2441:
 25043              	.LBB2434:
 25044              	.LBB2422:
 25045              	.LBB2423:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 25046              		.loc 1 2177 0
 25047 0152 002B     		cmp	r3, #0
 25048 0154 EED0     		beq	.L3439
 25049 0156 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 25050 0158 002A     		cmp	r2, #0
 25051 015a EBD0     		beq	.L3439
 25052 015c DA88     		ldrh	r2, [r3, #6]
 25053 015e 8A42     		cmp	r2, r1
 25054 0160 E8D1     		bne	.L3439
 25055              	.LVL3190:
 25056              	.LBB2424:
 25057              	.LBB2425:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 25058              		.loc 1 2182 0
 25059 0162 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 25060 0164 244B     		ldr	r3, .L3924+4
 25061              	.LVL3191:
 25062 0166 9847     		blx	r3
 25063              	.LVL3192:
 25064 0168 10F00101 		ands	r1, r0, #1
 25065 016c E2D1     		bne	.L3439
 25066              	.LBE2425:
 25067              	.LBE2424:
 25068              	.LBE2423:
 25069              	.LBE2422:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 25070              		.loc 1 2492 0
 25071 016e 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 25072 0172 1306     		lsls	r3, r2, #24
 25073 0174 1746     		mov	r7, r2
 25074 0176 DDD4     		bmi	.L3439
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 25075              		.loc 1 2494 0
 25076 0178 02F00203 		and	r3, r2, #2
 25077 017c DBB2     		uxtb	r3, r3
 25078 017e 002B     		cmp	r3, #0
 25079 0180 D8D0     		beq	.L3439
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 25080              		.loc 1 2496 0
 25081 0182 DAF80C00 		ldr	r0, [sl, #12]
 25082              	.LVL3193:
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 25083              		.loc 1 2498 0
 25084 0186 431C     		adds	r3, r0, #1
 25085 0188 81F08387 		bcs	.L3840
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 25086              		.loc 1 2500 0
 25087 018c DAF80810 		ldr	r1, [sl, #8]
 25088 0190 CB05     		lsls	r3, r1, #23
 25089 0192 DB0D     		lsrs	r3, r3, #23
 25090 0194 002B     		cmp	r3, #0
 25091 0196 41F09084 		bne	.L3102
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 25092              		.loc 1 2501 0
 25093 019a DAF80030 		ldr	r3, [sl, #0]
 25094 019e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 25095 01a0 013A     		subs	r2, r2, #1
 25096 01a2 02EA5122 		and	r2, r2, r1, lsr #9
 25097              	.LVL3194:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 25098              		.loc 1 2502 0
 25099 01a6 12F0FF05 		ands	r5, r2, #255
 25100 01aa 0FD1     		bne	.L3103
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 25101              		.loc 1 2503 0
 25102 01ac 0029     		cmp	r1, #0
 25103 01ae 41F04885 		bne	.L3104
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 25104              		.loc 1 2504 0
 25105 01b2 DAF81010 		ldr	r1, [sl, #16]
 25106              	.LVL3195:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 25107              		.loc 1 2505 0
 25108 01b6 0029     		cmp	r1, #0
 25109 01b8 01F05D85 		beq	.L3841
 25110              	.LVL3196:
 25111              	.L3105:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 25112              		.loc 1 2516 0
 25113 01bc 0129     		cmp	r1, #1
 25114 01be 13D0     		beq	.L3113
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 25115              		.loc 1 2517 0
 25116 01c0 4B1C     		adds	r3, r1, #1
 25117 01c2 11D0     		beq	.L3113
 25118 01c4 DAF80030 		ldr	r3, [sl, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 25119              		.loc 1 2518 0
 25120 01c8 CAF81410 		str	r1, [sl, #20]
 25121              	.LVL3197:
 25122              	.L3103:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 25123              		.loc 1 2524 0
 25124 01cc 07F04002 		and	r2, r7, #64
 25125 01d0 D2B2     		uxtb	r2, r2
 25126 01d2 002A     		cmp	r2, #0
 25127 01d4 41F0F584 		bne	.L3842
 25128              	.L3111:
 25129              	.LVL3198:
 25130              	.LBB2426:
 25131              	.LBB2427:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 25132              		.loc 1 806 0
 25133 01d8 DAF81420 		ldr	r2, [sl, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 25134              		.loc 1 807 0
 25135 01dc 9969     		ldr	r1, [r3, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 25136              		.loc 1 806 0
 25137 01de 023A     		subs	r2, r2, #2
 25138              	.LVL3199:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 25139              		.loc 1 807 0
 25140 01e0 0239     		subs	r1, r1, #2
 25141 01e2 8A42     		cmp	r2, r1
 25142 01e4 C1F05084 		bcc	.L3843
 25143              	.LVL3200:
 25144              	.L3113:
 25145              	.LBE2427:
 25146              	.LBE2426:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 25147              		.loc 1 2531 0
 25148 01e8 67F07F07 		orn	r7, r7, #127
 25149 01ec 8AF80670 		strb	r7, [sl, #6]
 25150 01f0 A0E7     		b	.L3439
 25151              	.L3925:
 25152 01f2 00BF     		.align	2
 25153              	.L3924:
 25154 01f4 00000000 		.word	f_puts
 25155 01f8 00000000 		.word	disk_status
 25156              	.LVL3201:
 25157              	.L3471:
 25158              	.LBE2434:
 25159              	.LBE2441:
 25160              	.LBE2448:
 25161              	.LBE2454:
4024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (d) {				/* Type is... */
 25162              		.loc 1 4024 0
 25163 01fc 0823     		movs	r3, #8
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
 25164              		.loc 1 4052 0
 25165 01fe 002D     		cmp	r5, #0
 25166 0200 00F08481 		beq	.L3127
 25167              	.L3462:
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
 25168              		.loc 1 4052 0 is_stmt 0 discriminator 1
 25169 0204 0E9D     		ldr	r5, [sp, #56]
 25170 0206 2E1D     		adds	r6, r5, #4
4053:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 25171              		.loc 1 4053 0 is_stmt 1 discriminator 1
 25172 0208 442A     		cmp	r2, #68
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
 25173              		.loc 1 4052 0 discriminator 1
 25174 020a 0E96     		str	r6, [sp, #56]
 25175 020c 2D68     		ldr	r5, [r5, #0]
 25176              	.LVL3202:
4053:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 25177              		.loc 1 4053 0 discriminator 1
 25178 020e 00F01882 		beq	.L3128
 25179              	.LVL3203:
 25180              	.L3129:
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25181              		.loc 1 4059 0
 25182 0212 B5FBF3F2 		udiv	r2, r5, r3
 25183 0216 03FB1255 		mls	r5, r3, r2, r5
 25184              	.LVL3204:
 25185 021a EDB2     		uxtb	r5, r5
 25186              	.LVL3205:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25187              		.loc 1 4060 0
 25188 021c 092D     		cmp	r5, #9
 25189 021e 05D9     		bls	.L3131
 25190 0220 782C     		cmp	r4, #120
 25191 0222 14BF     		ite	ne
 25192 0224 0726     		movne	r6, #7
 25193 0226 2726     		moveq	r6, #39
 25194 0228 7519     		adds	r5, r6, r5
 25195              	.LVL3206:
 25196 022a EDB2     		uxtb	r5, r5
 25197              	.LVL3207:
 25198              	.L3131:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25199              		.loc 1 4061 0
 25200 022c 3035     		adds	r5, r5, #48
 25201              	.LVL3208:
 25202 022e 8DF84050 		strb	r5, [sp, #64]
 25203              	.LVL3209:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25204              		.loc 1 4062 0
 25205 0232 002A     		cmp	r2, #0
 25206 0234 01F09D85 		beq	.L3486
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25207              		.loc 1 4059 0
 25208 0238 B2FBF3F5 		udiv	r5, r2, r3
 25209              	.LVL3210:
 25210 023c 03FB1522 		mls	r2, r3, r5, r2
 25211              	.LVL3211:
 25212 0240 D2B2     		uxtb	r2, r2
 25213              	.LVL3212:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25214              		.loc 1 4060 0
 25215 0242 092A     		cmp	r2, #9
 25216 0244 05D9     		bls	.L3134
 25217 0246 782C     		cmp	r4, #120
 25218 0248 14BF     		ite	ne
 25219 024a 0726     		movne	r6, #7
 25220 024c 2726     		moveq	r6, #39
 25221 024e B218     		adds	r2, r6, r2
 25222              	.LVL3213:
 25223 0250 D2B2     		uxtb	r2, r2
 25224              	.LVL3214:
 25225              	.L3134:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25226              		.loc 1 4061 0
 25227 0252 3032     		adds	r2, r2, #48
 25228              	.LVL3215:
 25229 0254 8DF84120 		strb	r2, [sp, #65]
 25230              	.LVL3216:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25231              		.loc 1 4062 0
 25232 0258 002D     		cmp	r5, #0
 25233 025a 01F08E85 		beq	.L3488
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25234              		.loc 1 4059 0
 25235 025e B5FBF3F2 		udiv	r2, r5, r3
 25236              	.LVL3217:
 25237 0262 03FB1255 		mls	r5, r3, r2, r5
 25238              	.LVL3218:
 25239 0266 EDB2     		uxtb	r5, r5
 25240              	.LVL3219:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25241              		.loc 1 4060 0
 25242 0268 092D     		cmp	r5, #9
 25243 026a 05D9     		bls	.L3136
 25244 026c 782C     		cmp	r4, #120
 25245 026e 14BF     		ite	ne
 25246 0270 0726     		movne	r6, #7
 25247 0272 2726     		moveq	r6, #39
 25248 0274 7519     		adds	r5, r6, r5
 25249              	.LVL3220:
 25250 0276 EDB2     		uxtb	r5, r5
 25251              	.LVL3221:
 25252              	.L3136:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25253              		.loc 1 4061 0
 25254 0278 3035     		adds	r5, r5, #48
 25255              	.LVL3222:
 25256 027a 8DF84250 		strb	r5, [sp, #66]
 25257              	.LVL3223:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25258              		.loc 1 4062 0
 25259 027e 002A     		cmp	r2, #0
 25260 0280 01F08085 		beq	.L3490
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25261              		.loc 1 4059 0
 25262 0284 B2FBF3F5 		udiv	r5, r2, r3
 25263              	.LVL3224:
 25264 0288 03FB1522 		mls	r2, r3, r5, r2
 25265              	.LVL3225:
 25266 028c D2B2     		uxtb	r2, r2
 25267              	.LVL3226:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25268              		.loc 1 4060 0
 25269 028e 092A     		cmp	r2, #9
 25270 0290 05D9     		bls	.L3138
 25271 0292 782C     		cmp	r4, #120
 25272 0294 14BF     		ite	ne
 25273 0296 0726     		movne	r6, #7
 25274 0298 2726     		moveq	r6, #39
 25275 029a B218     		adds	r2, r6, r2
 25276              	.LVL3227:
 25277 029c D2B2     		uxtb	r2, r2
 25278              	.LVL3228:
 25279              	.L3138:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25280              		.loc 1 4061 0
 25281 029e 3032     		adds	r2, r2, #48
 25282              	.LVL3229:
 25283 02a0 8DF84320 		strb	r2, [sp, #67]
 25284              	.LVL3230:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25285              		.loc 1 4062 0
 25286 02a4 002D     		cmp	r5, #0
 25287 02a6 01F07285 		beq	.L3492
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25288              		.loc 1 4059 0
 25289 02aa B5FBF3F6 		udiv	r6, r5, r3
 25290 02ae 03FB1652 		mls	r2, r3, r6, r5
 25291              	.LVL3231:
 25292 02b2 D2B2     		uxtb	r2, r2
 25293              	.LVL3232:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25294              		.loc 1 4060 0
 25295 02b4 092A     		cmp	r2, #9
 25296 02b6 05D9     		bls	.L3140
 25297 02b8 782C     		cmp	r4, #120
 25298 02ba 14BF     		ite	ne
 25299 02bc 0725     		movne	r5, #7
 25300 02be 2725     		moveq	r5, #39
 25301 02c0 AA18     		adds	r2, r5, r2
 25302              	.LVL3233:
 25303 02c2 D2B2     		uxtb	r2, r2
 25304              	.LVL3234:
 25305              	.L3140:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25306              		.loc 1 4061 0
 25307 02c4 3032     		adds	r2, r2, #48
 25308              	.LVL3235:
 25309 02c6 8DF84420 		strb	r2, [sp, #68]
 25310              	.LVL3236:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25311              		.loc 1 4062 0
 25312 02ca 002E     		cmp	r6, #0
 25313 02cc 01F03E85 		beq	.L3494
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25314              		.loc 1 4059 0
 25315 02d0 B6FBF3F2 		udiv	r2, r6, r3
 25316              	.LVL3237:
 25317 02d4 03FB1265 		mls	r5, r3, r2, r6
 25318 02d8 EDB2     		uxtb	r5, r5
 25319              	.LVL3238:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25320              		.loc 1 4060 0
 25321 02da 092D     		cmp	r5, #9
 25322 02dc 05D9     		bls	.L3142
 25323 02de 782C     		cmp	r4, #120
 25324 02e0 14BF     		ite	ne
 25325 02e2 0726     		movne	r6, #7
 25326 02e4 2726     		moveq	r6, #39
 25327 02e6 7519     		adds	r5, r6, r5
 25328              	.LVL3239:
 25329 02e8 EDB2     		uxtb	r5, r5
 25330              	.LVL3240:
 25331              	.L3142:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25332              		.loc 1 4061 0
 25333 02ea 3035     		adds	r5, r5, #48
 25334              	.LVL3241:
 25335 02ec 8DF84550 		strb	r5, [sp, #69]
 25336              	.LVL3242:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25337              		.loc 1 4062 0
 25338 02f0 002A     		cmp	r2, #0
 25339 02f2 01F05685 		beq	.L3496
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25340              		.loc 1 4059 0
 25341 02f6 B2FBF3F5 		udiv	r5, r2, r3
 25342              	.LVL3243:
 25343 02fa 03FB1522 		mls	r2, r3, r5, r2
 25344              	.LVL3244:
 25345 02fe D2B2     		uxtb	r2, r2
 25346              	.LVL3245:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25347              		.loc 1 4060 0
 25348 0300 092A     		cmp	r2, #9
 25349 0302 05D9     		bls	.L3144
 25350 0304 782C     		cmp	r4, #120
 25351 0306 14BF     		ite	ne
 25352 0308 0726     		movne	r6, #7
 25353 030a 2726     		moveq	r6, #39
 25354 030c B218     		adds	r2, r6, r2
 25355              	.LVL3246:
 25356 030e D2B2     		uxtb	r2, r2
 25357              	.LVL3247:
 25358              	.L3144:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25359              		.loc 1 4061 0
 25360 0310 3032     		adds	r2, r2, #48
 25361              	.LVL3248:
 25362 0312 8DF84620 		strb	r2, [sp, #70]
 25363              	.LVL3249:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25364              		.loc 1 4062 0
 25365 0316 002D     		cmp	r5, #0
 25366 0318 01F07085 		beq	.L3498
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25367              		.loc 1 4059 0
 25368 031c B5FBF3F6 		udiv	r6, r5, r3
 25369 0320 03FB1652 		mls	r2, r3, r6, r5
 25370              	.LVL3250:
 25371 0324 D2B2     		uxtb	r2, r2
 25372              	.LVL3251:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25373              		.loc 1 4060 0
 25374 0326 092A     		cmp	r2, #9
 25375 0328 05D9     		bls	.L3146
 25376 032a 782C     		cmp	r4, #120
 25377 032c 14BF     		ite	ne
 25378 032e 0725     		movne	r5, #7
 25379 0330 2725     		moveq	r5, #39
 25380 0332 AA18     		adds	r2, r5, r2
 25381              	.LVL3252:
 25382 0334 D2B2     		uxtb	r2, r2
 25383              	.LVL3253:
 25384              	.L3146:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25385              		.loc 1 4061 0
 25386 0336 3032     		adds	r2, r2, #48
 25387              	.LVL3254:
 25388 0338 8DF84720 		strb	r2, [sp, #71]
 25389              	.LVL3255:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25390              		.loc 1 4062 0
 25391 033c 002E     		cmp	r6, #0
 25392 033e 01F02B85 		beq	.L3500
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25393              		.loc 1 4059 0
 25394 0342 B6FBF3F2 		udiv	r2, r6, r3
 25395              	.LVL3256:
 25396 0346 03FB1265 		mls	r5, r3, r2, r6
 25397 034a EDB2     		uxtb	r5, r5
 25398              	.LVL3257:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25399              		.loc 1 4060 0
 25400 034c 092D     		cmp	r5, #9
 25401 034e 05D9     		bls	.L3148
 25402 0350 782C     		cmp	r4, #120
 25403 0352 14BF     		ite	ne
 25404 0354 0726     		movne	r6, #7
 25405 0356 2726     		moveq	r6, #39
 25406 0358 7519     		adds	r5, r6, r5
 25407              	.LVL3258:
 25408 035a EDB2     		uxtb	r5, r5
 25409              	.LVL3259:
 25410              	.L3148:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25411              		.loc 1 4061 0
 25412 035c 3035     		adds	r5, r5, #48
 25413              	.LVL3260:
 25414 035e 8DF84850 		strb	r5, [sp, #72]
 25415              	.LVL3261:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25416              		.loc 1 4062 0
 25417 0362 002A     		cmp	r2, #0
 25418 0364 01F03685 		beq	.L3502
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25419              		.loc 1 4059 0
 25420 0368 B2FBF3F5 		udiv	r5, r2, r3
 25421              	.LVL3262:
 25422 036c 03FB1522 		mls	r2, r3, r5, r2
 25423              	.LVL3263:
 25424 0370 D2B2     		uxtb	r2, r2
 25425              	.LVL3264:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25426              		.loc 1 4060 0
 25427 0372 092A     		cmp	r2, #9
 25428 0374 05D9     		bls	.L3150
 25429 0376 782C     		cmp	r4, #120
 25430 0378 14BF     		ite	ne
 25431 037a 0726     		movne	r6, #7
 25432 037c 2726     		moveq	r6, #39
 25433 037e B218     		adds	r2, r6, r2
 25434              	.LVL3265:
 25435 0380 D2B2     		uxtb	r2, r2
 25436              	.LVL3266:
 25437              	.L3150:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25438              		.loc 1 4061 0
 25439 0382 3032     		adds	r2, r2, #48
 25440              	.LVL3267:
 25441 0384 8DF84920 		strb	r2, [sp, #73]
 25442              	.LVL3268:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25443              		.loc 1 4062 0
 25444 0388 002D     		cmp	r5, #0
 25445 038a 01F02885 		beq	.L3504
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25446              		.loc 1 4059 0
 25447 038e B5FBF3F2 		udiv	r2, r5, r3
 25448              	.LVL3269:
 25449 0392 03FB1255 		mls	r5, r3, r2, r5
 25450              	.LVL3270:
 25451 0396 EDB2     		uxtb	r5, r5
 25452              	.LVL3271:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25453              		.loc 1 4060 0
 25454 0398 092D     		cmp	r5, #9
 25455 039a 05D9     		bls	.L3152
 25456 039c 782C     		cmp	r4, #120
 25457 039e 14BF     		ite	ne
 25458 03a0 0726     		movne	r6, #7
 25459 03a2 2726     		moveq	r6, #39
 25460 03a4 7519     		adds	r5, r6, r5
 25461              	.LVL3272:
 25462 03a6 EDB2     		uxtb	r5, r5
 25463              	.LVL3273:
 25464              	.L3152:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25465              		.loc 1 4061 0
 25466 03a8 3035     		adds	r5, r5, #48
 25467              	.LVL3274:
 25468 03aa 8DF84A50 		strb	r5, [sp, #74]
 25469              	.LVL3275:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25470              		.loc 1 4062 0
 25471 03ae 002A     		cmp	r2, #0
 25472 03b0 01F01A85 		beq	.L3506
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25473              		.loc 1 4059 0
 25474 03b4 B2FBF3F5 		udiv	r5, r2, r3
 25475              	.LVL3276:
 25476 03b8 03FB1522 		mls	r2, r3, r5, r2
 25477              	.LVL3277:
 25478 03bc D2B2     		uxtb	r2, r2
 25479              	.LVL3278:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25480              		.loc 1 4060 0
 25481 03be 092A     		cmp	r2, #9
 25482 03c0 05D9     		bls	.L3154
 25483 03c2 782C     		cmp	r4, #120
 25484 03c4 14BF     		ite	ne
 25485 03c6 0726     		movne	r6, #7
 25486 03c8 2726     		moveq	r6, #39
 25487 03ca B218     		adds	r2, r6, r2
 25488              	.LVL3279:
 25489 03cc D2B2     		uxtb	r2, r2
 25490              	.LVL3280:
 25491              	.L3154:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25492              		.loc 1 4061 0
 25493 03ce 3032     		adds	r2, r2, #48
 25494              	.LVL3281:
 25495 03d0 8DF84B20 		strb	r2, [sp, #75]
 25496              	.LVL3282:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25497              		.loc 1 4062 0
 25498 03d4 002D     		cmp	r5, #0
 25499 03d6 01F00C85 		beq	.L3508
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25500              		.loc 1 4059 0
 25501 03da B5FBF3F2 		udiv	r2, r5, r3
 25502              	.LVL3283:
 25503 03de 03FB1255 		mls	r5, r3, r2, r5
 25504              	.LVL3284:
 25505 03e2 EDB2     		uxtb	r5, r5
 25506              	.LVL3285:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25507              		.loc 1 4060 0
 25508 03e4 092D     		cmp	r5, #9
 25509 03e6 05D9     		bls	.L3156
 25510 03e8 782C     		cmp	r4, #120
 25511 03ea 14BF     		ite	ne
 25512 03ec 0726     		movne	r6, #7
 25513 03ee 2726     		moveq	r6, #39
 25514 03f0 7519     		adds	r5, r6, r5
 25515              	.LVL3286:
 25516 03f2 EDB2     		uxtb	r5, r5
 25517              	.LVL3287:
 25518              	.L3156:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25519              		.loc 1 4061 0
 25520 03f4 3035     		adds	r5, r5, #48
 25521              	.LVL3288:
 25522 03f6 8DF84C50 		strb	r5, [sp, #76]
 25523              	.LVL3289:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25524              		.loc 1 4062 0
 25525 03fa 002A     		cmp	r2, #0
 25526 03fc 01F05185 		beq	.L3510
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25527              		.loc 1 4059 0
 25528 0400 B2FBF3F5 		udiv	r5, r2, r3
 25529              	.LVL3290:
 25530 0404 03FB1522 		mls	r2, r3, r5, r2
 25531              	.LVL3291:
 25532 0408 D2B2     		uxtb	r2, r2
 25533              	.LVL3292:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25534              		.loc 1 4060 0
 25535 040a 092A     		cmp	r2, #9
 25536 040c 05D9     		bls	.L3158
 25537 040e 782C     		cmp	r4, #120
 25538 0410 14BF     		ite	ne
 25539 0412 0726     		movne	r6, #7
 25540 0414 2726     		moveq	r6, #39
 25541 0416 B218     		adds	r2, r6, r2
 25542              	.LVL3293:
 25543 0418 D2B2     		uxtb	r2, r2
 25544              	.LVL3294:
 25545              	.L3158:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25546              		.loc 1 4061 0
 25547 041a 3032     		adds	r2, r2, #48
 25548              	.LVL3295:
 25549 041c 8DF84D20 		strb	r2, [sp, #77]
 25550              	.LVL3296:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25551              		.loc 1 4062 0
 25552 0420 002D     		cmp	r5, #0
 25553 0422 01F01685 		beq	.L3512
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25554              		.loc 1 4059 0
 25555 0426 B5FBF3F2 		udiv	r2, r5, r3
 25556              	.LVL3297:
 25557 042a 03FB1255 		mls	r5, r3, r2, r5
 25558              	.LVL3298:
 25559 042e EDB2     		uxtb	r5, r5
 25560              	.LVL3299:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25561              		.loc 1 4060 0
 25562 0430 092D     		cmp	r5, #9
 25563 0432 05D9     		bls	.L3160
 25564 0434 782C     		cmp	r4, #120
 25565 0436 14BF     		ite	ne
 25566 0438 0726     		movne	r6, #7
 25567 043a 2726     		moveq	r6, #39
 25568 043c 7519     		adds	r5, r6, r5
 25569              	.LVL3300:
 25570 043e EDB2     		uxtb	r5, r5
 25571              	.LVL3301:
 25572              	.L3160:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25573              		.loc 1 4061 0
 25574 0440 3035     		adds	r5, r5, #48
 25575              	.LVL3302:
 25576 0442 8DF84E50 		strb	r5, [sp, #78]
 25577              	.LVL3303:
4062:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		} while (v && i < sizeof(s) / sizeof(s[0]));
 25578              		.loc 1 4062 0
 25579 0446 002A     		cmp	r2, #0
 25580 0448 01F00885 		beq	.L3514
4059:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			d = (TCHAR)(v % r); v /= r;
 25581              		.loc 1 4059 0
 25582 044c B2FBF3F5 		udiv	r5, r2, r3
 25583              	.LVL3304:
 25584 0450 03FB1523 		mls	r3, r3, r5, r2
 25585 0454 DBB2     		uxtb	r3, r3
 25586              	.LVL3305:
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25587              		.loc 1 4060 0
 25588 0456 092B     		cmp	r3, #9
 25589 0458 05D9     		bls	.L3162
4060:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 25590              		.loc 1 4060 0 is_stmt 0 discriminator 1
 25591 045a 782C     		cmp	r4, #120
 25592 045c 14BF     		ite	ne
 25593 045e 0724     		movne	r4, #7
 25594 0460 2724     		moveq	r4, #39
 25595              	.LVL3306:
 25596 0462 E318     		adds	r3, r4, r3
 25597              	.LVL3307:
 25598 0464 DBB2     		uxtb	r3, r3
 25599              	.LVL3308:
 25600              	.L3162:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 25601              		.loc 1 4061 0 is_stmt 1
 25602 0466 3033     		adds	r3, r3, #48
 25603              	.LVL3309:
 25604 0468 8DF84F30 		strb	r3, [sp, #79]
 25605              	.LVL3310:
 25606 046c 4FF01009 		mov	r9, #16
 25607 0470 0F22     		movs	r2, #15
 25608              	.LVL3311:
 25609              	.L3133:
4063:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (f & 8) s[i++] = '-';
 25610              		.loc 1 4063 0
 25611 0472 00F00803 		and	r3, r0, #8
 25612 0476 DBB2     		uxtb	r3, r3
 25613 0478 3BB1     		cbz	r3, .L3164
4063:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (f & 8) s[i++] = '-';
 25614              		.loc 1 4063 0 is_stmt 0 discriminator 1
 25615 047a 14AC     		add	r4, sp, #80
 25616 047c 04EB0903 		add	r3, r4, r9
 25617 0480 2D24     		movs	r4, #45
 25618 0482 03F8104C 		strb	r4, [r3, #-16]
 25619 0486 02F10209 		add	r9, r2, #2
 25620              	.LVL3312:
 25621              	.L3164:
4064:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 25622              		.loc 1 4064 0 is_stmt 1
 25623 048a 10F0010F 		tst	r0, #1
 25624 048e 0CBF     		ite	eq
 25625 0490 2027     		moveq	r7, #32
 25626 0492 3027     		movne	r7, #48
 25627              	.LVL3313:
4066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (!(f & 2) && j++ < w) res += (cc = f_putc(d, fil));
 25628              		.loc 1 4066 0
 25629 0494 0029     		cmp	r1, #0
 25630 0496 41F05E84 		bne	.L3166
 25631 049a C145     		cmp	r9, r8
 25632 049c 09F10104 		add	r4, r9, #1
 25633              	.LVL3314:
 25634 04a0 DAF80030 		ldr	r3, [sl, #0]
 25635 04a4 BAF80420 		ldrh	r2, [sl, #4]
 25636 04a8 81F04984 		bcs	.L3844
 25637 04ac BB46     		mov	fp, r7
 25638              	.LVL3315:
 25639 04ae CDF81890 		str	r9, [sp, #24]
 25640 04b2 CDF81080 		str	r8, [sp, #16]
 25641 04b6 8946     		mov	r9, r1
 25642              	.LVL3316:
 25643 04b8 A046     		mov	r8, r4
 25644              	.LBB2455:
 25645              	.LBB2456:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 25646              		.loc 1 3948 0
 25647 04ba 8DF834B0 		strb	fp, [sp, #52]
 25648              	.LVL3317:
 25649              	.LBB2457:
 25650              	.LBB2458:
 25651              	.LBB2459:
 25652              	.LBB2460:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 25653              		.loc 1 2177 0
 25654 04be 0BB1     		cbz	r3, .L3443
 25655 04c0 1978     		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 25656 04c2 81B9     		cbnz	r1, .L3845
 25657              	.LVL3318:
 25658              	.L3443:
 25659              	.LBE2460:
 25660              	.LBE2459:
 25661              	.LBE2458:
 25662              	.LBE2457:
 25663              	.LBE2456:
 25664              	.LBE2455:
4066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (!(f & 2) && j++ < w) res += (cc = f_putc(d, fil));
 25665              		.loc 1 4066 0
 25666 04c4 049D     		ldr	r5, [sp, #16]
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 25667              		.loc 1 3952 0
 25668 04c6 4FF0FF30 		mov	r0, #-1
4066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (!(f & 2) && j++ < w) res += (cc = f_putc(d, fil));
 25669              		.loc 1 4066 0
 25670 04ca A845     		cmp	r8, r5
 25671 04cc 8144     		add	r9, r9, r0
 25672              	.LVL3319:
 25673 04ce 08F10101 		add	r1, r8, #1
 25674              	.LVL3320:
 25675 04d2 80F09C81 		bcs	.L3846
 25676              	.L3580:
 25677 04d6 8846     		mov	r8, r1
 25678              	.LVL3321:
 25679              	.LBB2591:
 25680              	.LBB2582:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 25681              		.loc 1 3948 0
 25682 04d8 8DF834B0 		strb	fp, [sp, #52]
 25683              	.LVL3322:
 25684              	.LBB2573:
 25685              	.LBB2564:
 25686              	.LBB2464:
 25687              	.LBB2463:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 25688              		.loc 1 2177 0
 25689 04dc 002B     		cmp	r3, #0
 25690 04de F1D0     		beq	.L3443
 25691 04e0 1978     		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 25692              	.LVL3323:
 25693 04e2 0029     		cmp	r1, #0
 25694 04e4 EED0     		beq	.L3443
 25695              	.LVL3324:
 25696              	.L3845:
 25697 04e6 D988     		ldrh	r1, [r3, #6]
 25698 04e8 9142     		cmp	r1, r2
 25699 04ea EBD1     		bne	.L3443
 25700              	.LVL3325:
 25701              	.LBB2461:
 25702              	.LBB2462:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 25703              		.loc 1 2182 0
 25704 04ec 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 25705 04ee B34B     		ldr	r3, .L3926
 25706              	.LVL3326:
 25707 04f0 9847     		blx	r3
 25708              	.LVL3327:
 25709 04f2 10F00100 		ands	r0, r0, #1
 25710 04f6 00F01981 		beq	.L3170
 25711              	.L3824:
 25712 04fa DAF80030 		ldr	r3, [sl, #0]
 25713 04fe BAF80420 		ldrh	r2, [sl, #4]
 25714 0502 DFE7     		b	.L3443
 25715              	.LVL3328:
 25716              	.L3066:
 25717              	.LBE2462:
 25718              	.LBE2461:
 25719              	.LBE2463:
 25720              	.LBE2464:
 25721              	.LBE2564:
 25722              	.LBE2573:
 25723              	.LBE2582:
 25724              	.LBE2591:
4024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (d) {				/* Type is... */
 25725              		.loc 1 4024 0
 25726 0504 0A23     		movs	r3, #10
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
 25727              		.loc 1 4052 0
 25728 0506 002D     		cmp	r5, #0
 25729 0508 7FF47CAE 		bne	.L3462
 25730              	.L3127:
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
 25731              		.loc 1 4052 0 is_stmt 0 discriminator 2
 25732 050c 442A     		cmp	r2, #68
 25733 050e 00F09480 		beq	.L3847
 25734              	.L3130:
 25735 0512 0E9A     		ldr	r2, [sp, #56]
 25736              	.LVL3329:
 25737 0514 151D     		adds	r5, r2, #4
 25738 0516 0E95     		str	r5, [sp, #56]
 25739 0518 1568     		ldr	r5, [r2, #0]
 25740              	.LVL3330:
 25741 051a 7AE6     		b	.L3129
 25742              	.LVL3331:
 25743              	.L3065:
4037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cc = f_putc((TCHAR)va_arg(arp, int), fil); continue;
 25744              		.loc 1 4037 0 is_stmt 1
 25745 051c 0E9B     		ldr	r3, [sp, #56]
 25746 051e 1C78     		ldrb	r4, [r3, #0]	@ zero_extendqisi2
 25747              	.LVL3332:
 25748 0520 0433     		adds	r3, r3, #4
 25749              	.LVL3333:
 25750              	.LBB2592:
 25751              	.LBB2593:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 25752              		.loc 1 3928 0
 25753 0522 0A2C     		cmp	r4, #10
 25754              	.LBE2593:
 25755              	.LBE2592:
4037:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			cc = f_putc((TCHAR)va_arg(arp, int), fil); continue;
 25756              		.loc 1 4037 0
 25757 0524 0E93     		str	r3, [sp, #56]
 25758              	.LBB2595:
 25759              	.LBB2594:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 25760              		.loc 1 3928 0
 25761 0526 1DD0     		beq	.L3831
 25762              	.LVL3334:
 25763              	.L3125:
 25764              	.LBE2594:
 25765              	.LBE2595:
 25766              	.LBB2596:
 25767              	.LBB2597:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 25768              		.loc 1 3948 0
 25769 0528 14A9     		add	r1, sp, #80
3951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	f_write(fil, s, btw, &bw);		/* Write the char to the file */
 25770              		.loc 1 3951 0
 25771 052a 5046     		mov	r0, sl
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 25772              		.loc 1 3948 0
 25773 052c 01F81C4D 		strb	r4, [r1, #-28]!
 25774              	.LVL3335:
3951:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	f_write(fil, s, btw, &bw);		/* Write the char to the file */
 25775              		.loc 1 3951 0
 25776 0530 0122     		movs	r2, #1
 25777 0532 0FAB     		add	r3, sp, #60
 25778 0534 A24C     		ldr	r4, .L3926+4
 25779 0536 A047     		blx	r4
 25780              	.LVL3336:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 25781              		.loc 1 3952 0
 25782 0538 0F9E     		ldr	r6, [sp, #60]
 25783              	.LVL3337:
 25784 053a 012E     		cmp	r6, #1
 25785 053c 14BF     		ite	ne
 25786 053e 4FF0FF36 		movne	r6, #-1
 25787 0542 0126     		moveq	r6, #1
 25788              	.LVL3338:
 25789              	.L3121:
 25790              	.LBE2597:
 25791              	.LBE2596:
3997:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (cc = res = 0; cc != EOF; res += cc) {
 25792              		.loc 1 3997 0
 25793 0544 721C     		adds	r2, r6, #1
 25794 0546 B344     		add	fp, fp, r6
 25795              	.LVL3339:
 25796 0548 3FF47BAD 		beq	.L3436
3998:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
 25797              		.loc 1 3998 0
 25798 054c 1D9D     		ldr	r5, [sp, #116]
 25799 054e 2C78     		ldrb	r4, [r5, #0]	@ zero_extendqisi2
 25800              	.LVL3340:
3999:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (c == 0) break;			/* End of string */
 25801              		.loc 1 3999 0
 25802 0550 002C     		cmp	r4, #0
 25803 0552 7FF466AD 		bne	.L3848
 25804              	.LVL3341:
 25805              	.L3029:
 25806 0556 DA46     		mov	sl, fp
4072:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	va_end(arp);
 25807              		.loc 1 4072 0
 25808 0558 5846     		mov	r0, fp
 25809 055a 74E5     		b	.L3753
 25810              	.LVL3342:
 25811              	.L3064:
4024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		switch (d) {				/* Type is... */
 25812              		.loc 1 4024 0
 25813 055c 0223     		movs	r3, #2
 25814 055e CAE5     		b	.L3069
 25815              	.L3063:
 25816              	.LVL3343:
 25817              	.LBB2599:
 25818              	.LBB2598:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 25819              		.loc 1 3928 0
 25820 0560 0A2C     		cmp	r4, #10
 25821 0562 E1D1     		bne	.L3125
 25822              	.LVL3344:
 25823              	.L3831:
 25824 0564 0D20     		movs	r0, #13
 25825              	.LVL3345:
 25826 0566 5146     		mov	r1, sl
 25827 0568 964B     		ldr	r3, .L3926+8
 25828 056a 9847     		blx	r3
 25829              	.LVL3346:
 25830 056c DCE7     		b	.L3125
 25831              	.L3060:
 25832              	.LVL3347:
 25833              	.LBE2598:
 25834              	.LBE2599:
4019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			f |= 4; c = *str++;
 25835              		.loc 1 4019 0
 25836 056e 1D9E     		ldr	r6, [sp, #116]
 25837 0570 16F8014B 		ldrb	r4, [r6], #1	@ zero_extendqisi2
 25838 0574 2846     		mov	r0, r5
 25839 0576 1D96     		str	r6, [sp, #116]
 25840              	.LVL3348:
 25841 0578 0425     		movs	r5, #4
 25842              	.LVL3349:
 25843 057a 92E5     		b	.L3061
 25844              	.LVL3350:
 25845              	.L3838:
4008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			f = 1; c = *str++;
 25846              		.loc 1 4008 0
 25847 057c B478     		ldrb	r4, [r6, #2]	@ zero_extendqisi2
 25848              	.LVL3351:
 25849 057e 0336     		adds	r6, r6, #3
 25850              	.LVL3352:
 25851 0580 0021     		movs	r1, #0
 25852 0582 1D96     		str	r6, [sp, #116]
 25853              	.LVL3353:
 25854 0584 0525     		movs	r5, #5
 25855 0586 0120     		movs	r0, #1
 25856 0588 70E5     		b	.L3056
 25857              	.LVL3354:
 25858              	.L3837:
 25859              	.LBB2600:
 25860              	.LBB2410:
 25861              	.LBB2402:
 25862              	.LBB2393:
 25863              	.LBB2383:
 25864              	.LBB2382:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 25865              		.loc 1 2177 0
 25866 058a DA88     		ldrh	r2, [r3, #6]
 25867 058c 8A42     		cmp	r2, r1
 25868 058e 7FF458AD 		bne	.L3436
 25869              	.LVL3355:
 25870              	.LBB2380:
 25871              	.LBB2381:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 25872              		.loc 1 2182 0
 25873 0592 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 25874 0594 894B     		ldr	r3, .L3926
 25875              	.LVL3356:
 25876 0596 9847     		blx	r3
 25877              	.LVL3357:
 25878 0598 10F00100 		ands	r0, r0, #1
 25879 059c 7FF451AD 		bne	.L3436
 25880              	.LBE2381:
 25881              	.LBE2380:
 25882              	.LBE2382:
 25883              	.LBE2383:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 25884              		.loc 1 2492 0
 25885 05a0 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 25886 05a4 1306     		lsls	r3, r2, #24
 25887 05a6 1546     		mov	r5, r2
 25888 05a8 3FF54BAD 		bmi	.L3436
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 25889              		.loc 1 2494 0
 25890 05ac 02F00203 		and	r3, r2, #2
 25891 05b0 DBB2     		uxtb	r3, r3
 25892 05b2 002B     		cmp	r3, #0
 25893 05b4 3FF445AD 		beq	.L3436
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 25894              		.loc 1 2496 0
 25895 05b8 DAF80C70 		ldr	r7, [sl, #12]
 25896              	.LVL3358:
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 25897              		.loc 1 2498 0
 25898 05bc 791C     		adds	r1, r7, #1
 25899 05be 81F06B85 		bcs	.L3849
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 25900              		.loc 1 2500 0
 25901 05c2 DAF80810 		ldr	r1, [sl, #8]
 25902 05c6 CB05     		lsls	r3, r1, #23
 25903 05c8 DB0D     		lsrs	r3, r3, #23
 25904 05ca 002B     		cmp	r3, #0
 25905 05cc 41F0A882 		bne	.L3036
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 25906              		.loc 1 2501 0
 25907 05d0 DAF80030 		ldr	r3, [sl, #0]
 25908 05d4 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 25909 05d6 013A     		subs	r2, r2, #1
 25910 05d8 02EA5122 		and	r2, r2, r1, lsr #9
 25911              	.LVL3359:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 25912              		.loc 1 2502 0
 25913 05dc 12F0FF04 		ands	r4, r2, #255
 25914              	.LVL3360:
 25915 05e0 0FD1     		bne	.L3037
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 25916              		.loc 1 2503 0
 25917 05e2 0029     		cmp	r1, #0
 25918 05e4 41F03A83 		bne	.L3038
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 25919              		.loc 1 2504 0
 25920 05e8 DAF81010 		ldr	r1, [sl, #16]
 25921              	.LVL3361:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 25922              		.loc 1 2505 0
 25923 05ec 0029     		cmp	r1, #0
 25924 05ee 01F07183 		beq	.L3850
 25925              	.LVL3362:
 25926              	.L3039:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 25927              		.loc 1 2516 0
 25928 05f2 0129     		cmp	r1, #1
 25929 05f4 13D0     		beq	.L3047
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 25930              		.loc 1 2517 0
 25931 05f6 4A1C     		adds	r2, r1, #1
 25932 05f8 11D0     		beq	.L3047
 25933 05fa DAF80030 		ldr	r3, [sl, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 25934              		.loc 1 2518 0
 25935 05fe CAF81410 		str	r1, [sl, #20]
 25936              	.LVL3363:
 25937              	.L3037:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 25938              		.loc 1 2524 0
 25939 0602 05F04002 		and	r2, r5, #64
 25940 0606 D2B2     		uxtb	r2, r2
 25941 0608 002A     		cmp	r2, #0
 25942 060a 41F0EF82 		bne	.L3851
 25943              	.L3045:
 25944              	.LVL3364:
 25945              	.LBB2384:
 25946              	.LBB2385:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 25947              		.loc 1 806 0
 25948 060e DAF81410 		ldr	r1, [sl, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 25949              		.loc 1 807 0
 25950 0612 9A69     		ldr	r2, [r3, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 25951              		.loc 1 806 0
 25952 0614 0239     		subs	r1, r1, #2
 25953              	.LVL3365:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 25954              		.loc 1 807 0
 25955 0616 023A     		subs	r2, r2, #2
 25956 0618 9142     		cmp	r1, r2
 25957 061a C1F06882 		bcc	.L3852
 25958              	.LVL3366:
 25959              	.L3047:
 25960              	.LBE2385:
 25961              	.LBE2384:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 25962              		.loc 1 2531 0
 25963 061e 65F07F05 		orn	r5, r5, #127
 25964 0622 D346     		mov	fp, sl
 25965 0624 8AF80650 		strb	r5, [sl, #6]
 25966 0628 0BE5     		b	.L3436
 25967              	.LVL3367:
 25968              	.L3057:
 25969              	.LBE2393:
 25970              	.LBE2402:
 25971              	.LBE2410:
 25972              	.LBE2600:
4011:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				f = 2; c = *str++;
 25973              		.loc 1 4011 0
 25974 062a 1D9E     		ldr	r6, [sp, #116]
 25975              	.LVL3368:
 25976 062c 0221     		movs	r1, #2
 25977 062e B478     		ldrb	r4, [r6, #2]	@ zero_extendqisi2
 25978              	.LVL3369:
 25979 0630 0336     		adds	r6, r6, #3
 25980              	.LVL3370:
 25981 0632 0625     		movs	r5, #6
 25982 0634 1D96     		str	r6, [sp, #116]
 25983              	.LVL3371:
 25984 0636 0846     		mov	r0, r1
 25985 0638 18E5     		b	.L3056
 25986              	.LVL3372:
 25987              	.L3847:
4052:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		v = (f & 4) ? (ULONG)va_arg(arp, long) : ((d == 'D') ? (ULONG)(long)va_arg(arp, int) : (ULONG)va_
 25988              		.loc 1 4052 0 discriminator 1
 25989 063a 0E9A     		ldr	r2, [sp, #56]
 25990              	.LVL3373:
 25991 063c 151D     		adds	r5, r2, #4
 25992 063e 0E95     		str	r5, [sp, #56]
 25993 0640 1568     		ldr	r5, [r2, #0]
 25994              	.LVL3374:
 25995              	.L3128:
4053:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 25996              		.loc 1 4053 0 discriminator 1
 25997 0642 002D     		cmp	r5, #0
 25998 0644 BFF6E5AD 		bge	.L3129
 25999 0648 00F00201 		and	r1, r0, #2
4055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			f |= 8;
 26000              		.loc 1 4055 0
 26001 064c 40F00800 		orr	r0, r0, #8
 26002              	.LVL3375:
4054:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			v = 0 - v;
 26003              		.loc 1 4054 0
 26004 0650 6D42     		negs	r5, r5
 26005              	.LVL3376:
 26006 0652 C9B2     		uxtb	r1, r1
4055:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			f |= 8;
 26007              		.loc 1 4055 0
 26008 0654 C0B2     		uxtb	r0, r0
 26009              	.LVL3377:
 26010 0656 DCE5     		b	.L3129
 26011              	.LVL3378:
 26012              	.L3836:
 26013              	.LBB2601:
 26014              	.LBB2411:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 26015              		.loc 1 3928 0
 26016 0658 0D20     		movs	r0, #13
 26017 065a 5146     		mov	r1, sl
 26018 065c 594B     		ldr	r3, .L3926+8
 26019 065e 9847     		blx	r3
 26020              	.LVL3379:
 26021 0660 E4E4     		b	.L3031
 26022              	.LVL3380:
 26023              	.L3839:
 26024              	.LBE2411:
 26025              	.LBE2601:
4030:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (j++ < w) chc += (cc = f_putc(' ', fil));
 26026              		.loc 1 4030 0 discriminator 1
 26027 0662 4545     		cmp	r5, r8
 26028 0664 38BF     		it	cc
 26029 0666 0E46     		movcc	r6, r1
 26030 0668 09D3     		bcc	.L3074
 26031 066a 01F044BC 		b	.L3923
 26032              	.LVL3381:
 26033              	.L3438:
 26034              	.LBB2602:
 26035              	.LBB2603:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 26036              		.loc 1 3952 0
 26037 066e 4FF0FF33 		mov	r3, #-1
 26038              	.L3096:
 26039              	.LBE2603:
 26040              	.LBE2602:
4030:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (j++ < w) chc += (cc = f_putc(' ', fil));
 26041              		.loc 1 4030 0
 26042 0672 651C     		adds	r5, r4, #1
 26043 0674 4445     		cmp	r4, r8
 26044 0676 1E44     		add	r6, r6, r3
 26045              	.LVL3382:
 26046 0678 80F08282 		bcs	.L3854
 26047 067c 2C46     		mov	r4, r5
 26048              	.LVL3383:
 26049              	.L3074:
 26050              	.LBB2635:
 26051              	.LBB2630:
 26052              	.LBB2604:
 26053              	.LBB2605:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 26054              		.loc 1 2490 0
 26055 067e DAF80030 		ldr	r3, [sl, #0]
 26056 0682 BAF80410 		ldrh	r1, [sl, #4]
 26057              	.LBE2605:
 26058              	.LBE2604:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 26059              		.loc 1 3948 0
 26060 0686 2025     		movs	r5, #32
 26061 0688 8DF83450 		strb	r5, [sp, #52]
 26062              	.LVL3384:
 26063              	.LBB2624:
 26064              	.LBB2618:
 26065              	.LBB2606:
 26066              	.LBB2607:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 26067              		.loc 1 2177 0
 26068 068c 002B     		cmp	r3, #0
 26069 068e EED0     		beq	.L3438
 26070 0690 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 26071 0692 002A     		cmp	r2, #0
 26072 0694 EBD0     		beq	.L3438
 26073 0696 DA88     		ldrh	r2, [r3, #6]
 26074 0698 8A42     		cmp	r2, r1
 26075 069a E8D1     		bne	.L3438
 26076              	.LVL3385:
 26077              	.LBB2608:
 26078              	.LBB2609:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 26079              		.loc 1 2182 0
 26080 069c 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 26081 069e 474B     		ldr	r3, .L3926
 26082              	.LVL3386:
 26083 06a0 9847     		blx	r3
 26084              	.LVL3387:
 26085 06a2 10F00101 		ands	r1, r0, #1
 26086 06a6 E2D1     		bne	.L3438
 26087              	.LBE2609:
 26088              	.LBE2608:
 26089              	.LBE2607:
 26090              	.LBE2606:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 26091              		.loc 1 2492 0
 26092 06a8 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 26093 06ac 1006     		lsls	r0, r2, #24
 26094 06ae 9646     		mov	lr, r2
 26095 06b0 DDD4     		bmi	.L3438
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 26096              		.loc 1 2494 0
 26097 06b2 02F00203 		and	r3, r2, #2
 26098 06b6 DBB2     		uxtb	r3, r3
 26099 06b8 002B     		cmp	r3, #0
 26100 06ba D8D0     		beq	.L3438
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 26101              		.loc 1 2496 0
 26102 06bc DAF80C00 		ldr	r0, [sl, #12]
 26103              	.LVL3388:
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 26104              		.loc 1 2498 0
 26105 06c0 431C     		adds	r3, r0, #1
 26106 06c2 81F01785 		bcs	.L3855
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 26107              		.loc 1 2500 0
 26108 06c6 DAF80810 		ldr	r1, [sl, #8]
 26109 06ca CB05     		lsls	r3, r1, #23
 26110 06cc DB0D     		lsrs	r3, r3, #23
 26111 06ce 002B     		cmp	r3, #0
 26112 06d0 41F05C82 		bne	.L3079
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 26113              		.loc 1 2501 0
 26114 06d4 DAF80030 		ldr	r3, [sl, #0]
 26115 06d8 9D78     		ldrb	r5, [r3, #2]	@ zero_extendqisi2
 26116 06da 013D     		subs	r5, r5, #1
 26117 06dc 05EA5125 		and	r5, r5, r1, lsr #9
 26118              	.LVL3389:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 26119              		.loc 1 2502 0
 26120 06e0 15F0FF05 		ands	r5, r5, #255
 26121              	.LVL3390:
 26122 06e4 0FD1     		bne	.L3080
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 26123              		.loc 1 2503 0
 26124 06e6 0029     		cmp	r1, #0
 26125 06e8 41F0FB82 		bne	.L3081
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 26126              		.loc 1 2504 0
 26127 06ec DAF81010 		ldr	r1, [sl, #16]
 26128              	.LVL3391:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 26129              		.loc 1 2505 0
 26130 06f0 0029     		cmp	r1, #0
 26131 06f2 01F01583 		beq	.L3856
 26132              	.LVL3392:
 26133              	.L3082:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 26134              		.loc 1 2516 0
 26135 06f6 0129     		cmp	r1, #1
 26136 06f8 13D0     		beq	.L3090
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 26137              		.loc 1 2517 0
 26138 06fa 4A1C     		adds	r2, r1, #1
 26139 06fc 11D0     		beq	.L3090
 26140 06fe DAF80030 		ldr	r3, [sl, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 26141              		.loc 1 2518 0
 26142 0702 CAF81410 		str	r1, [sl, #20]
 26143              	.LVL3393:
 26144              	.L3080:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 26145              		.loc 1 2524 0
 26146 0706 0EF04002 		and	r2, lr, #64
 26147 070a D2B2     		uxtb	r2, r2
 26148 070c 002A     		cmp	r2, #0
 26149 070e 41F08282 		bne	.L3857
 26150              	.L3088:
 26151              	.LVL3394:
 26152              	.LBB2610:
 26153              	.LBB2611:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 26154              		.loc 1 806 0
 26155 0712 DAF81420 		ldr	r2, [sl, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 26156              		.loc 1 807 0
 26157 0716 9969     		ldr	r1, [r3, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 26158              		.loc 1 806 0
 26159 0718 023A     		subs	r2, r2, #2
 26160              	.LVL3395:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 26161              		.loc 1 807 0
 26162 071a 0239     		subs	r1, r1, #2
 26163 071c 8A42     		cmp	r2, r1
 26164 071e C1F01C82 		bcc	.L3858
 26165              	.LVL3396:
 26166              	.L3090:
 26167              	.LBE2611:
 26168              	.LBE2610:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 26169              		.loc 1 2531 0
 26170 0722 6EF07F0E 		orn	lr, lr, #127
 26171 0726 8AF806E0 		strb	lr, [sl, #6]
 26172 072a A0E7     		b	.L3438
 26173              	.LVL3397:
 26174              	.L3170:
 26175              	.LBE2618:
 26176              	.LBE2624:
 26177              	.LBE2630:
 26178              	.LBE2635:
 26179              	.LBB2636:
 26180              	.LBB2583:
 26181              	.LBB2574:
 26182              	.LBB2565:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 26183              		.loc 1 2492 0
 26184 072c 9AF80610 		ldrb	r1, [sl, #6]	@ zero_extendqisi2
 26185 0730 0C06     		lsls	r4, r1, #24
 26186 0732 0E46     		mov	r6, r1
 26187 0734 3FF5E1AE 		bmi	.L3824
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 26188              		.loc 1 2494 0
 26189 0738 01F00203 		and	r3, r1, #2
 26190 073c DBB2     		uxtb	r3, r3
 26191 073e 002B     		cmp	r3, #0
 26192 0740 3FF4DBAE 		beq	.L3824
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 26193              		.loc 1 2496 0
 26194 0744 DAF80C70 		ldr	r7, [sl, #12]
 26195              	.LVL3398:
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 26196              		.loc 1 2500 0
 26197 0748 DAF80820 		ldr	r2, [sl, #8]
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 26198              		.loc 1 2498 0
 26199 074c 7C1C     		adds	r4, r7, #1
 26200 074e 81F08A83 		bcs	.L3859
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 26201              		.loc 1 2500 0
 26202 0752 D305     		lsls	r3, r2, #23
 26203 0754 DB0D     		lsrs	r3, r3, #23
 26204 0756 002B     		cmp	r3, #0
 26205 0758 36D1     		bne	.L3517
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 26206              		.loc 1 2501 0
 26207 075a DAF80030 		ldr	r3, [sl, #0]
 26208 075e 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 26209 0760 0139     		subs	r1, r1, #1
 26210 0762 01EA5221 		and	r1, r1, r2, lsr #9
 26211              	.LVL3399:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 26212              		.loc 1 2502 0
 26213 0766 11F0FF07 		ands	r7, r1, #255
 26214              	.LVL3400:
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 26215              		.loc 1 2501 0
 26216 076a 1C46     		mov	r4, r3
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 26217              		.loc 1 2502 0
 26218 076c 10D1     		bne	.L3175
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 26219              		.loc 1 2503 0
 26220 076e 002A     		cmp	r2, #0
 26221 0770 40F0EA80 		bne	.L3176
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 26222              		.loc 1 2504 0
 26223 0774 DAF81050 		ldr	r5, [sl, #16]
 26224              	.LVL3401:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 26225              		.loc 1 2505 0
 26226 0778 002D     		cmp	r5, #0
 26227 077a 00F01C81 		beq	.L3860
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 26228              		.loc 1 2516 0
 26229 077e 012D     		cmp	r5, #1
 26230 0780 00F00E81 		beq	.L3829
 26231              	.LVL3402:
 26232              	.L3221:
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 26233              		.loc 1 2517 0
 26234 0784 6B1C     		adds	r3, r5, #1
 26235 0786 00F00B81 		beq	.L3829
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 26236              		.loc 1 2518 0
 26237 078a CAF81450 		str	r5, [sl, #20]
 26238 078e 2346     		mov	r3, r4
 26239              	.L3175:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 26240              		.loc 1 2524 0
 26241 0790 06F04002 		and	r2, r6, #64
 26242 0794 D2B2     		uxtb	r2, r2
 26243 0796 002A     		cmp	r2, #0
 26244 0798 40F0C180 		bne	.L3861
 26245              	.L3224:
 26246              	.LVL3403:
 26247              	.LBB2465:
 26248              	.LBB2466:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 26249              		.loc 1 806 0
 26250 079c DAF81420 		ldr	r2, [sl, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 26251              		.loc 1 807 0
 26252 07a0 A169     		ldr	r1, [r4, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 26253              		.loc 1 806 0
 26254 07a2 023A     		subs	r2, r2, #2
 26255              	.LVL3404:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 26256              		.loc 1 807 0
 26257 07a4 0239     		subs	r1, r1, #2
 26258 07a6 8A42     		cmp	r2, r1
 26259 07a8 C0F0A080 		bcc	.L3862
 26260              	.L3226:
 26261              	.LBE2466:
 26262              	.LBE2465:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 26263              		.loc 1 2531 0
 26264 07ac 66F07F06 		orn	r6, r6, #127
 26265 07b0 8AF80660 		strb	r6, [sl, #6]
 26266              	.LVL3405:
 26267              	.L3222:
 26268 07b4 BAF80420 		ldrh	r2, [sl, #4]
 26269 07b8 84E6     		b	.L3443
 26270              	.L3927:
 26271 07ba 00BF     		.align	2
 26272              	.L3926:
 26273 07bc 00000000 		.word	disk_status
 26274 07c0 00000000 		.word	f_write
 26275 07c4 00000000 		.word	f_putc
 26276              	.LVL3406:
 26277              	.L3517:
 26278 07c8 DAF80040 		ldr	r4, [sl, #0]
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 26279              		.loc 1 2500 0
 26280 07cc 5846     		mov	r0, fp
 26281              	.LVL3407:
 26282              	.L3174:
 26283              	.LBB2468:
 26284              	.LBB2469:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 26285              		.loc 1 541 0
 26286 07ce 5344     		add	r3, sl, r3
 26287              	.LVL3408:
 26288              	.LBE2469:
 26289              	.LBE2468:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 26290              		.loc 1 2576 0
 26291 07d0 46F04001 		orr	r1, r6, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 26292              		.loc 1 2499 0
 26293 07d4 0132     		adds	r2, r2, #1
 26294              	.LBB2471:
 26295              	.LBB2470:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 26296              		.loc 1 541 0
 26297 07d6 83F82400 		strb	r0, [r3, #36]
 26298              	.LVL3409:
 26299              	.LBE2470:
 26300              	.LBE2471:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 26301              		.loc 1 2576 0
 26302 07da 8AF80610 		strb	r1, [sl, #6]
 26303              	.LVL3410:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 26304              		.loc 1 2499 0
 26305 07de CAF80820 		str	r2, [sl, #8]
 26306              	.LVL3411:
 26307 07e2 0120     		movs	r0, #1
 26308              	.LVL3412:
 26309              	.L3173:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 26310              		.loc 1 2580 0
 26311 07e4 BA42     		cmp	r2, r7
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 26312              		.loc 1 2581 0
 26313 07e6 41F02001 		orr	r1, r1, #32
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 26314              		.loc 1 2580 0
 26315 07ea 88BF     		it	hi
 26316 07ec CAF80C20 		strhi	r2, [sl, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 26317              		.loc 1 2581 0
 26318 07f0 8AF80610 		strb	r1, [sl, #6]
 26319              	.LVL3413:
 26320 07f4 BAF80420 		ldrh	r2, [sl, #4]
 26321 07f8 2346     		mov	r3, r4
 26322              	.LBE2565:
 26323              	.LBE2574:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 26324              		.loc 1 3952 0
 26325 07fa 0028     		cmp	r0, #0
 26326 07fc 3FF462AE 		beq	.L3443
 26327              	.LBE2583:
 26328              	.LBE2636:
4066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (!(f & 2) && j++ < w) res += (cc = f_putc(d, fil));
 26329              		.loc 1 4066 0
 26330 0800 049D     		ldr	r5, [sp, #16]
 26331 0802 A845     		cmp	r8, r5
 26332 0804 8144     		add	r9, r9, r0
 26333              	.LVL3414:
 26334 0806 08F10101 		add	r1, r8, #1
 26335              	.LVL3415:
 26336 080a FFF464AE 		bcc	.L3580
 26337              	.LVL3416:
 26338              	.L3846:
 26339 080e CB46     		mov	fp, r9
 26340              	.LVL3417:
 26341 0810 DDF81890 		ldr	r9, [sp, #24]
 26342              	.LVL3418:
 26343 0814 0891     		str	r1, [sp, #32]
 26344 0816 D846     		mov	r8, fp
 26345 0818 0795     		str	r5, [sp, #28]
 26346 081a CB46     		mov	fp, r9
 26347              	.LVL3419:
 26348 081c 0AE0     		b	.L3727
 26349              	.LVL3420:
 26350              	.L3453:
 26351              	.LBB2637:
 26352              	.LBB2638:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 26353              		.loc 1 3952 0
 26354 081e 4FF0FF33 		mov	r3, #-1
 26355              	.LBE2638:
 26356              	.LBE2637:
4067:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do res += (cc = f_putc(s[--i], fil)); while(i);
 26357              		.loc 1 4067 0
 26358 0822 9844     		add	r8, r8, r3
 26359              	.LVL3421:
 26360 0824 BBF1000F 		cmp	fp, #0
 26361 0828 00F0FD81 		beq	.L3368
 26362              	.L3874:
 26363 082c DAF80030 		ldr	r3, [sl, #0]
 26364 0830 BAF80420 		ldrh	r2, [sl, #4]
 26365              	.LVL3422:
 26366              	.L3727:
4067:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do res += (cc = f_putc(s[--i], fil)); while(i);
 26367              		.loc 1 4067 0 is_stmt 0 discriminator 1
 26368 0834 14AC     		add	r4, sp, #80
 26369 0836 0BF1FF3B 		add	fp, fp, #-1
 26370              	.LVL3423:
 26371 083a 04EB0B01 		add	r1, r4, fp
 26372 083e 11F8104C 		ldrb	r4, [r1, #-16]	@ zero_extendqisi2
 26373              	.LVL3424:
 26374              	.LBB2911:
 26375              	.LBB2895:
3928:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (c == '\n') f_putc ('\r', fil);	/* LF -> CRLF conversion */
 26376              		.loc 1 3928 0 is_stmt 1 discriminator 1
 26377 0842 0A2C     		cmp	r4, #10
 26378 0844 00F05982 		beq	.L3863
 26379              	.LVL3425:
 26380              	.L3234:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 26381              		.loc 1 3948 0
 26382 0848 8DF83440 		strb	r4, [sp, #52]
 26383              	.LVL3426:
 26384              	.LBB2639:
 26385              	.LBB2640:
 26386              	.LBB2641:
 26387              	.LBB2642:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 26388              		.loc 1 2177 0
 26389 084c 002B     		cmp	r3, #0
 26390 084e E6D0     		beq	.L3453
 26391 0850 1978     		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 26392 0852 0029     		cmp	r1, #0
 26393 0854 E3D0     		beq	.L3453
 26394 0856 D988     		ldrh	r1, [r3, #6]
 26395 0858 9142     		cmp	r1, r2
 26396 085a E0D1     		bne	.L3453
 26397              	.LVL3427:
 26398              	.LBB2643:
 26399              	.LBB2644:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 26400              		.loc 1 2182 0
 26401 085c 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 26402 085e B84B     		ldr	r3, .L3928
 26403              	.LVL3428:
 26404 0860 9847     		blx	r3
 26405              	.LVL3429:
 26406 0862 10F00100 		ands	r0, r0, #1
 26407 0866 DAD1     		bne	.L3453
 26408              	.LBE2644:
 26409              	.LBE2643:
 26410              	.LBE2642:
 26411              	.LBE2641:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 26412              		.loc 1 2492 0
 26413 0868 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 26414 086c 1106     		lsls	r1, r2, #24
 26415 086e 1646     		mov	r6, r2
 26416 0870 D5D4     		bmi	.L3453
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 26417              		.loc 1 2494 0
 26418 0872 02F00203 		and	r3, r2, #2
 26419 0876 DBB2     		uxtb	r3, r3
 26420 0878 002B     		cmp	r3, #0
 26421 087a D0D0     		beq	.L3453
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 26422              		.loc 1 2496 0
 26423 087c DAF80C70 		ldr	r7, [sl, #12]
 26424              	.LVL3430:
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 26425              		.loc 1 2500 0
 26426 0880 DAF80810 		ldr	r1, [sl, #8]
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 26427              		.loc 1 2498 0
 26428 0884 781C     		adds	r0, r7, #1
 26429 0886 80F01083 		bcs	.L3826
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 26430              		.loc 1 2500 0
 26431 088a CB05     		lsls	r3, r1, #23
 26432 088c DB0D     		lsrs	r3, r3, #23
 26433 088e 002B     		cmp	r3, #0
 26434 0890 40F0AE81 		bne	.L3263
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 26435              		.loc 1 2501 0
 26436 0894 DAF80040 		ldr	r4, [sl, #0]
 26437 0898 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 26438 089a 013B     		subs	r3, r3, #1
 26439 089c 03EA5123 		and	r3, r3, r1, lsr #9
 26440              	.LVL3431:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 26441              		.loc 1 2502 0
 26442 08a0 13F0FF09 		ands	r9, r3, #255
 26443 08a4 0FD1     		bne	.L3264
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 26444              		.loc 1 2503 0
 26445 08a6 0029     		cmp	r1, #0
 26446 08a8 40F0A482 		bne	.L3265
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 26447              		.loc 1 2504 0
 26448 08ac DAF81070 		ldr	r7, [sl, #16]
 26449              	.LVL3432:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 26450              		.loc 1 2505 0
 26451 08b0 002F     		cmp	r7, #0
 26452 08b2 00F0CF82 		beq	.L3864
 26453              	.LVL3433:
 26454              	.L3266:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 26455              		.loc 1 2516 0
 26456 08b6 012F     		cmp	r7, #1
 26457 08b8 13D0     		beq	.L3361
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 26458              		.loc 1 2517 0
 26459 08ba 7A1C     		adds	r2, r7, #1
 26460 08bc 11D0     		beq	.L3361
 26461 08be DAF80040 		ldr	r4, [sl, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 26462              		.loc 1 2518 0
 26463 08c2 CAF81470 		str	r7, [sl, #20]
 26464              	.L3264:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 26465              		.loc 1 2524 0
 26466 08c6 06F04003 		and	r3, r6, #64
 26467 08ca DBB2     		uxtb	r3, r3
 26468 08cc 002B     		cmp	r3, #0
 26469 08ce 40F02E82 		bne	.L3865
 26470              	.L3359:
 26471              	.LVL3434:
 26472              	.LBB2645:
 26473              	.LBB2646:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 26474              		.loc 1 806 0
 26475 08d2 DAF81430 		ldr	r3, [sl, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 26476              		.loc 1 807 0
 26477 08d6 A269     		ldr	r2, [r4, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 26478              		.loc 1 806 0
 26479 08d8 023B     		subs	r3, r3, #2
 26480              	.LVL3435:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 26481              		.loc 1 807 0
 26482 08da 023A     		subs	r2, r2, #2
 26483 08dc 9342     		cmp	r3, r2
 26484 08de C0F06E81 		bcc	.L3866
 26485              	.LVL3436:
 26486              	.L3361:
 26487              	.LBE2646:
 26488              	.LBE2645:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 26489              		.loc 1 2531 0
 26490 08e2 66F07F06 		orn	r6, r6, #127
 26491 08e6 8AF80660 		strb	r6, [sl, #6]
 26492 08ea 98E7     		b	.L3453
 26493              	.LVL3437:
 26494              	.L3862:
 26495              	.LBE2640:
 26496              	.LBE2639:
 26497              	.LBE2895:
 26498              	.LBE2911:
 26499              	.LBB2912:
 26500              	.LBB2584:
 26501              	.LBB2575:
 26502              	.LBB2566:
 26503              	.LBB2472:
 26504              	.LBB2467:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 26505              		.loc 1 808 0
 26506 08ec A578     		ldrb	r5, [r4, #2]	@ zero_extendqisi2
 26507 08ee A16A     		ldr	r1, [r4, #40]
 26508 08f0 02FB0515 		mla	r5, r2, r5, r1
 26509              	.LBE2467:
 26510              	.LBE2472:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 26511              		.loc 1 2531 0
 26512 08f4 002D     		cmp	r5, #0
 26513 08f6 3FF459AF 		beq	.L3226
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 26514              		.loc 1 2559 0
 26515 08fa DAF81830 		ldr	r3, [sl, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 26516              		.loc 1 2560 0
 26517 08fe DAF80820 		ldr	r2, [sl, #8]
 26518              	.LVL3438:
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 26519              		.loc 1 2532 0
 26520 0902 7D19     		adds	r5, r7, r5
 26521              	.LVL3439:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 26522              		.loc 1 2559 0
 26523 0904 9D42     		cmp	r5, r3
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 26524              		.loc 1 2560 0
 26525 0906 DAF80C70 		ldr	r7, [sl, #12]
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 26526              		.loc 1 2559 0
 26527 090a 01D0     		beq	.L3229
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 26528              		.loc 1 2560 0
 26529 090c BA42     		cmp	r2, r7
 26530 090e 65D3     		bcc	.L3867
 26531              	.LVL3440:
 26532              	.L3229:
 26533 0910 D305     		lsls	r3, r2, #23
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 26534              		.loc 1 2565 0
 26535 0912 CAF81850 		str	r5, [sl, #24]
 26536 0916 DB0D     		lsrs	r3, r3, #23
 26537 0918 9DF83400 		ldrb	r0, [sp, #52]	@ zero_extendqisi2
 26538 091c 57E7     		b	.L3174
 26539              	.LVL3441:
 26540              	.L3861:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 26541              		.loc 1 2525 0
 26542 091e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 26543 0920 DAF81820 		ldr	r2, [sl, #24]
 26544 0924 874C     		ldr	r4, .L3928+4
 26545 0926 0AF12401 		add	r1, sl, #36
 26546 092a 0123     		movs	r3, #1
 26547 092c A047     		blx	r4
 26548              	.LVL3442:
 26549 092e 0028     		cmp	r0, #0
 26550 0930 41F07182 		bne	.L3230
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 26551              		.loc 1 2527 0
 26552 0934 9AF80660 		ldrb	r6, [sl, #6]	@ zero_extendqisi2
 26553 0938 DAF80040 		ldr	r4, [sl, #0]
 26554 093c 06F0BF06 		and	r6, r6, #191
 26555 0940 8AF80660 		strb	r6, [sl, #6]
 26556 0944 2346     		mov	r3, r4
 26557 0946 29E7     		b	.L3224
 26558              	.LVL3443:
 26559              	.L3176:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 26560              		.loc 1 2513 0
 26561 0948 DAF81450 		ldr	r5, [sl, #20]
 26562 094c 0895     		str	r5, [sp, #32]
 26563              	.LVL3444:
 26564              	.LBB2473:
 26565              	.LBB2474:
 988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {		/* Create a new chain */
 26566              		.loc 1 988 0
 26567 094e 002D     		cmp	r5, #0
 26568 0950 40F00781 		bne	.L3179
 989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 26569              		.loc 1 989 0
 26570 0954 D3F80CC0 		ldr	ip, [r3, #12]
 26571              	.LVL3445:
 26572 0958 9B69     		ldr	r3, [r3, #24]
 26573              	.LVL3446:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 26574              		.loc 1 990 0
 26575 095a BCF1000F 		cmp	ip, #0
 26576 095e 40F0FB80 		bne	.L3180
 26577 0962 4FF0010C 		mov	ip, #1
 26578              	.LVL3447:
 26579              	.L3181:
 26580 0966 6546     		mov	r5, ip
 26581 0968 0097     		str	r7, [sp, #0]
 26582 096a 6646     		mov	r6, ip
 26583              	.LVL3448:
 26584              	.L3213:
1001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl++;							/* Next cluster */
 26585              		.loc 1 1001 0
 26586 096c 0135     		adds	r5, r5, #1
 26587              	.LVL3449:
1002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Wrap around */
 26588              		.loc 1 1002 0
 26589 096e AB42     		cmp	r3, r5
 26590 0970 1CD8     		bhi	.L3184
 26591              	.LVL3450:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 26592              		.loc 1 1004 0
 26593 0972 012E     		cmp	r6, #1
 26594 0974 28D9     		bls	.L3670
 26595              	.LVL3451:
 26596              	.LBB2475:
 26597              	.LBB2476:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 26598              		.loc 1 828 0
 26599 0976 022B     		cmp	r3, #2
 26600 0978 1AD9     		bls	.L3773
1003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ncl = 2;
 26601              		.loc 1 1003 0
 26602 097a 0225     		movs	r5, #2
 26603              	.LVL3452:
 26604              	.L3187:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 26605              		.loc 1 831 0
 26606 097c 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 26607 097e 022B     		cmp	r3, #2
 26608 0980 00F0BF80 		beq	.L3189
 26609 0984 032B     		cmp	r3, #3
 26610 0986 77D0     		beq	.L3190
 26611 0988 012B     		cmp	r3, #1
 26612 098a 3AD0     		beq	.L3868
 26613              	.L3772:
 26614 098c 009F     		ldr	r7, [sp, #0]
 26615              	.L3219:
 26616              	.LBE2476:
 26617              	.LBE2475:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 26618              		.loc 1 1004 0
 26619 098e 4FF0FF35 		mov	r5, #-1
 26620              	.LVL3453:
 26621              	.L3220:
 26622              	.LBE2474:
 26623              	.LBE2473:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 26624              		.loc 1 2516 0
 26625 0992 012D     		cmp	r5, #1
 26626 0994 9AF80660 		ldrb	r6, [sl, #6]	@ zero_extendqisi2
 26627 0998 DAF80040 		ldr	r4, [sl, #0]
 26628 099c 7FF4F2AE 		bne	.L3221
 26629              	.L3829:
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 26630              		.loc 1 2517 0
 26631 09a0 66F07F06 		orn	r6, r6, #127
 26632 09a4 8AF80660 		strb	r6, [sl, #6]
 26633 09a8 2346     		mov	r3, r4
 26634 09aa 03E7     		b	.L3222
 26635              	.LVL3454:
 26636              	.L3184:
 26637              	.LBB2555:
 26638              	.LBB2546:
 26639              	.LBB2529:
 26640              	.LBB2520:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 26641              		.loc 1 828 0
 26642 09ac 012D     		cmp	r5, #1
 26643 09ae E5D8     		bhi	.L3187
 26644              	.LVL3455:
 26645              	.L3773:
 26646 09b0 009F     		ldr	r7, [sp, #0]
 26647              	.L3531:
 26648              	.LBE2520:
 26649              	.LBE2529:
 26650              	.LBB2530:
 26651              	.LBB2531:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 26652              		.loc 1 1024 0
 26653 09b2 0125     		movs	r5, #1
 26654 09b4 EDE7     		b	.L3220
 26655              	.LVL3456:
 26656              	.L3860:
 26657              	.LBE2531:
 26658              	.LBE2530:
 26659              	.LBE2546:
 26660              	.LBE2555:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 26661              		.loc 1 2506 0
 26662 09b6 1846     		mov	r0, r3
 26663 09b8 2946     		mov	r1, r5
 26664              	.LVL3457:
 26665 09ba 634B     		ldr	r3, .L3928+8
 26666              	.LVL3458:
 26667 09bc 9847     		blx	r3
 26668              	.LVL3459:
 26669 09be 0546     		mov	r5, r0
 26670              	.LVL3460:
 26671 09c0 CAF81000 		str	r0, [sl, #16]
 26672              	.LVL3461:
 26673              	.L3178:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 26674              		.loc 1 2515 0
 26675 09c4 002D     		cmp	r5, #0
 26676 09c6 E4D1     		bne	.L3220
 26677              	.LVL3462:
 26678              	.L3670:
 26679 09c8 DAF80820 		ldr	r2, [sl, #8]
 26680 09cc DAF80C70 		ldr	r7, [sl, #12]
 26681 09d0 DAF80040 		ldr	r4, [sl, #0]
 26682 09d4 9AF80610 		ldrb	r1, [sl, #6]	@ zero_extendqisi2
 26683 09d8 0020     		movs	r0, #0
 26684 09da 03E7     		b	.L3173
 26685              	.LVL3463:
 26686              	.L3867:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 26687              		.loc 1 2561 0
 26688 09dc 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 26689 09de 5B4C     		ldr	r4, .L3928+12
 26690              	.LVL3464:
 26691 09e0 0AF12401 		add	r1, sl, #36
 26692 09e4 2A46     		mov	r2, r5
 26693 09e6 0123     		movs	r3, #1
 26694 09e8 A047     		blx	r4
 26695              	.LVL3465:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 26696              		.loc 1 2560 0
 26697 09ea 0028     		cmp	r0, #0
 26698 09ec 41F01382 		bne	.L3230
 26699 09f0 DAF80820 		ldr	r2, [sl, #8]
 26700 09f4 DAF80C70 		ldr	r7, [sl, #12]
 26701 09f8 9AF80660 		ldrb	r6, [sl, #6]	@ zero_extendqisi2
 26702 09fc DAF80040 		ldr	r4, [sl, #0]
 26703 0a00 86E7     		b	.L3229
 26704              	.LVL3466:
 26705              	.L3868:
 26706              	.LBB2556:
 26707              	.LBB2547:
 26708              	.LBB2534:
 26709              	.LBB2521:
 26710              	.LBB2477:
 26711              	.LBB2478:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 26712              		.loc 1 727 0
 26713 0a02 E76A     		ldr	r7, [r4, #44]
 26714              	.LBE2478:
 26715              	.LBE2477:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 26716              		.loc 1 834 0
 26717 0a04 216A     		ldr	r1, [r4, #32]
 26718              	.LBB2487:
 26719              	.LBB2482:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 26720              		.loc 1 727 0
 26721 0a06 0797     		str	r7, [sp, #28]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 26722              		.loc 1 728 0
 26723 0a08 0798     		ldr	r0, [sp, #28]
 26724              	.LBE2482:
 26725              	.LBE2487:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 26726              		.loc 1 833 0
 26727 0a0a 05EB5507 		add	r7, r5, r5, lsr #1
 26728 0a0e 0997     		str	r7, [sp, #36]
 26729              	.LVL3467:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 26730              		.loc 1 834 0
 26731 0a10 01EB5727 		add	r7, r1, r7, lsr #9
 26732              	.LVL3468:
 26733              	.LBB2488:
 26734              	.LBB2483:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 26735              		.loc 1 728 0
 26736 0a14 8742     		cmp	r7, r0
 26737              	.LBE2483:
 26738              	.LBE2488:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 26739              		.loc 1 834 0
 26740 0a16 0397     		str	r7, [sp, #12]
 26741              	.LVL3469:
 26742              	.LBB2489:
 26743              	.LBB2484:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 26744              		.loc 1 728 0
 26745 0a18 08D0     		beq	.L3440
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 26746              		.loc 1 730 0
 26747 0a1a 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 26748 0a1c 002A     		cmp	r2, #0
 26749 0a1e 40F0B086 		bne	.L3192
 26750              	.LVL3470:
 26751              	.L3195:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 26752              		.loc 1 743 0
 26753 0a22 039F     		ldr	r7, [sp, #12]
 26754 0a24 002F     		cmp	r7, #0
 26755 0a26 40F03B86 		bne	.L3869
 26756 0a2a 216A     		ldr	r1, [r4, #32]
 26757              	.L3440:
 26758              	.LBE2484:
 26759              	.LBE2489:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 26760              		.loc 1 835 0
 26761 0a2c 099F     		ldr	r7, [sp, #36]
 26762 0a2e FB05     		lsls	r3, r7, #23
 26763 0a30 DB0D     		lsrs	r3, r3, #23
 26764 0a32 E218     		adds	r2, r4, r3
 26765 0a34 7B1C     		adds	r3, r7, #1
 26766 0a36 92F830C0 		ldrb	ip, [r2, #48]	@ zero_extendqisi2
 26767              	.LVL3471:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 26768              		.loc 1 836 0
 26769 0a3a 0293     		str	r3, [sp, #8]
 26770 0a3c 01EB5321 		add	r1, r1, r3, lsr #9
 26771 0a40 CDF804C0 		str	ip, [sp, #4]
 26772 0a44 2046     		mov	r0, r4
 26773 0a46 424A     		ldr	r2, .L3928+16
 26774 0a48 9047     		blx	r2
 26775              	.LVL3472:
 26776 0a4a 029B     		ldr	r3, [sp, #8]
 26777 0a4c DDF804C0 		ldr	ip, [sp, #4]
 26778 0a50 0028     		cmp	r0, #0
 26779 0a52 9BD1     		bne	.L3772
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 26780              		.loc 1 837 0
 26781 0a54 DB05     		lsls	r3, r3, #23
 26782 0a56 DB0D     		lsrs	r3, r3, #23
 26783 0a58 E318     		adds	r3, r4, r3
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 26784              		.loc 1 838 0
 26785 0a5a E907     		lsls	r1, r5, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 26786              		.loc 1 837 0
 26787 0a5c 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 26788 0a60 4CEA0323 		orr	r3, ip, r3, lsl #8
 26789              	.LVL3473:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 26790              		.loc 1 838 0
 26791 0a64 41F14C82 		bpl	.L3197
 26792 0a68 1B09     		lsrs	r3, r3, #4
 26793              	.LVL3474:
 26794              	.L3198:
 26795              	.LBE2521:
 26796              	.LBE2534:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 26797              		.loc 1 1007 0
 26798 0a6a 5BB3     		cbz	r3, .L3870
 26799              	.L3732:
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 26800              		.loc 1 1008 0
 26801 0a6c 012B     		cmp	r3, #1
 26802 0a6e 9FD0     		beq	.L3773
1010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
 26803              		.loc 1 1010 0
 26804 0a70 AE42     		cmp	r6, r5
 26805 0a72 A9D0     		beq	.L3670
 26806 0a74 A369     		ldr	r3, [r4, #24]
 26807 0a76 79E7     		b	.L3213
 26808              	.L3190:
 26809              	.LBB2535:
 26810              	.LBB2522:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 26811              		.loc 1 846 0
 26812 0a78 236A     		ldr	r3, [r4, #32]
 26813              	.LBB2490:
 26814              	.LBB2491:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 26815              		.loc 1 727 0
 26816 0a7a E06A     		ldr	r0, [r4, #44]
 26817              	.LBE2491:
 26818              	.LBE2490:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 26819              		.loc 1 846 0
 26820 0a7c 03EBD513 		add	r3, r3, r5, lsr #7
 26821              	.LBB2499:
 26822              	.LBB2495:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 26823              		.loc 1 728 0
 26824 0a80 8342     		cmp	r3, r0
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 26825              		.loc 1 727 0
 26826 0a82 0790     		str	r0, [sp, #28]
 26827              	.LBE2495:
 26828              	.LBE2499:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 26829              		.loc 1 846 0
 26830 0a84 0393     		str	r3, [sp, #12]
 26831              	.LVL3475:
 26832              	.LBB2500:
 26833              	.LBB2496:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 26834              		.loc 1 728 0
 26835 0a86 07D0     		beq	.L3442
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 26836              		.loc 1 730 0
 26837 0a88 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 26838              	.LVL3476:
 26839 0a8a 002B     		cmp	r3, #0
 26840 0a8c 40F03D87 		bne	.L3205
 26841              	.LVL3477:
 26842              	.L3207:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 26843              		.loc 1 743 0
 26844 0a90 039F     		ldr	r7, [sp, #12]
 26845 0a92 002F     		cmp	r7, #0
 26846 0a94 40F08580 		bne	.L3871
 26847              	.L3442:
 26848              	.LVL3478:
 26849              	.LBE2496:
 26850              	.LBE2500:
 26851              	.LBB2501:
 26852              	.LBB2502:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 26853              		.loc 1 847 0
 26854 0a98 6A06     		lsls	r2, r5, #25
 26855 0a9a D20D     		lsrs	r2, r2, #23
 26856 0a9c 02F13003 		add	r3, r2, #48
 26857 0aa0 E318     		adds	r3, r4, r3
 26858              	.LVL3479:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 26859              		.loc 1 848 0
 26860 0aa2 04EB020C 		add	ip, r4, r2
 26861 0aa6 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 26862 0aa8 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 26863 0aaa 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 26864 0aac 9CF83030 		ldrb	r3, [ip, #48]	@ zero_extendqisi2
 26865              	.LVL3480:
 26866 0ab0 1206     		lsls	r2, r2, #24
 26867 0ab2 42EA0042 		orr	r2, r2, r0, lsl #16
 26868 0ab6 42EA0122 		orr	r2, r2, r1, lsl #8
 26869 0aba 1343     		orrs	r3, r3, r2
 26870 0abc 23F07043 		bic	r3, r3, #-268435456
 26871              	.LBE2502:
 26872              	.LBE2501:
 26873              	.LBE2522:
 26874              	.LBE2535:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 26875              		.loc 1 1007 0
 26876 0ac0 002B     		cmp	r3, #0
 26877 0ac2 D3D1     		bne	.L3732
 26878              	.LVL3481:
 26879              	.L3870:
 26880              	.LBB2536:
 26881              	.LBB2537:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 26882              		.loc 1 873 0
 26883 0ac4 A369     		ldr	r3, [r4, #24]
 26884 0ac6 009F     		ldr	r7, [sp, #0]
 26885              	.LVL3482:
 26886 0ac8 AB42     		cmp	r3, r5
 26887 0aca 7FF672AF 		bls	.L3531
 26888 0ace 2046     		mov	r0, r4
 26889 0ad0 2946     		mov	r1, r5
 26890 0ad2 6FF07042 		mvn	r2, #-268435456
 26891 0ad6 1F4E     		ldr	r6, .L3928+20
 26892 0ad8 B047     		blx	r6
 26893              	.LVL3483:
 26894              	.LBE2537:
 26895              	.LBE2536:
1014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && clst != 0) {
 26896              		.loc 1 1014 0
 26897 0ada 0028     		cmp	r0, #0
 26898 0adc 41F0B381 		bne	.L3218
 26899 0ae0 0898     		ldr	r0, [sp, #32]
 26900              	.LVL3484:
 26901 0ae2 0028     		cmp	r0, #0
 26902 0ae4 41F0A181 		bne	.L3215
 26903              	.L3217:
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 26904              		.loc 1 1019 0
 26905 0ae8 2369     		ldr	r3, [r4, #16]
1018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 26906              		.loc 1 1018 0
 26907 0aea E560     		str	r5, [r4, #12]
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 26908              		.loc 1 1019 0
 26909 0aec 5A1C     		adds	r2, r3, #1
 26910 0aee 3FF469AF 		beq	.L3178
1020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->free_clust--;
 26911              		.loc 1 1020 0
 26912 0af2 013B     		subs	r3, r3, #1
 26913 0af4 2361     		str	r3, [r4, #16]
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
 26914              		.loc 1 1021 0
 26915 0af6 0123     		movs	r3, #1
 26916 0af8 6371     		strb	r3, [r4, #5]
 26917              	.LVL3485:
 26918              	.LBE2547:
 26919              	.LBE2556:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 26920              		.loc 1 2515 0
 26921 0afa 002D     		cmp	r5, #0
 26922 0afc 7FF449AF 		bne	.L3220
 26923 0b00 62E7     		b	.L3670
 26924              	.LVL3486:
 26925              	.L3189:
 26926              	.LBB2557:
 26927              	.LBB2548:
 26928              	.LBB2538:
 26929              	.LBB2523:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 26930              		.loc 1 841 0
 26931 0b02 236A     		ldr	r3, [r4, #32]
 26932              	.LBB2503:
 26933              	.LBB2504:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 26934              		.loc 1 727 0
 26935 0b04 E06A     		ldr	r0, [r4, #44]
 26936              	.LBE2504:
 26937              	.LBE2503:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 26938              		.loc 1 841 0
 26939 0b06 03EB1523 		add	r3, r3, r5, lsr #8
 26940              	.LBB2512:
 26941              	.LBB2508:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 26942              		.loc 1 728 0
 26943 0b0a 8342     		cmp	r3, r0
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 26944              		.loc 1 727 0
 26945 0b0c 0790     		str	r0, [sp, #28]
 26946              	.LBE2508:
 26947              	.LBE2512:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 26948              		.loc 1 841 0
 26949 0b0e 0393     		str	r3, [sp, #12]
 26950              	.LVL3487:
 26951              	.LBB2513:
 26952              	.LBB2509:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 26953              		.loc 1 728 0
 26954 0b10 05D0     		beq	.L3441
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 26955              		.loc 1 730 0
 26956 0b12 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 26957              	.LVL3488:
 26958 0b14 002B     		cmp	r3, #0
 26959 0b16 40F0C686 		bne	.L3200
 26960              	.LVL3489:
 26961              	.L3202:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 26962              		.loc 1 743 0
 26963 0b1a 039F     		ldr	r7, [sp, #12]
 26964 0b1c 9FBB     		cbnz	r7, .L3872
 26965              	.L3441:
 26966              	.LBE2509:
 26967              	.LBE2513:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 26968              		.loc 1 842 0
 26969 0b1e 2B06     		lsls	r3, r5, #24
 26970 0b20 DB0D     		lsrs	r3, r3, #23
 26971              	.LVL3490:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 26972              		.loc 1 843 0
 26973 0b22 E218     		adds	r2, r4, r3
 26974 0b24 1346     		mov	r3, r2
 26975              	.LVL3491:
 26976 0b26 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 26977 0b2a 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 26978 0b2e 42EA0323 		orr	r3, r2, r3, lsl #8
 26979 0b32 9AE7     		b	.L3198
 26980              	.LVL3492:
 26981              	.L3097:
 26982              	.LBE2523:
 26983              	.LBE2538:
 26984              	.LBE2548:
 26985              	.LBE2557:
 26986              	.LBE2566:
 26987              	.LBE2575:
 26988              	.LBE2584:
 26989              	.LBE2912:
4034:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (cc != EOF) cc = chc;
 26990              		.loc 1 4034 0
 26991 0b34 0130     		adds	r0, r0, #1
 26992 0b36 7FF405AD 		bne	.L3121
 26993 0b3a FFF782BA 		b	.L3436
 26994              	.L3929:
 26995 0b3e 00BF     		.align	2
 26996              	.L3928:
 26997 0b40 00000000 		.word	disk_status
 26998 0b44 00000000 		.word	disk_write
 26999 0b48 00000000 		.word	create_chain
 27000 0b4c 00000000 		.word	disk_read
 27001 0b50 00000000 		.word	move_window
 27002 0b54 00000000 		.word	put_fat.part.4
 27003              	.LVL3493:
 27004              	.L3180:
 27005              	.LBB2913:
 27006              	.LBB2585:
 27007              	.LBB2576:
 27008              	.LBB2567:
 27009              	.LBB2558:
 27010              	.LBB2549:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 27011              		.loc 1 990 0
 27012 0b58 9C45     		cmp	ip, r3
 27013 0b5a 28BF     		it	cs
 27014 0b5c 4FF0010C 		movcs	ip, #1
 27015              	.LVL3494:
 27016 0b60 01E7     		b	.L3181
 27017              	.LVL3495:
 27018              	.L3179:
 27019 0b62 2946     		mov	r1, r5
 27020              	.LVL3496:
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 27021              		.loc 1 993 0
 27022 0b64 1846     		mov	r0, r3
 27023 0b66 B74B     		ldr	r3, .L3930
 27024              	.LVL3497:
 27025 0b68 9847     		blx	r3
 27026              	.LVL3498:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 27027              		.loc 1 994 0
 27028 0b6a 0128     		cmp	r0, #1
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 27029              		.loc 1 993 0
 27030 0b6c 0546     		mov	r5, r0
 27031              	.LVL3499:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 27032              		.loc 1 994 0
 27033 0b6e 7FF620AF 		bls	.L3531
 995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 27034              		.loc 1 995 0
 27035 0b72 A369     		ldr	r3, [r4, #24]
 27036 0b74 9842     		cmp	r0, r3
 27037 0b76 FFF425AF 		bcc	.L3178
 27038 0b7a DDF820C0 		ldr	ip, [sp, #32]
 27039 0b7e F2E6     		b	.L3181
 27040              	.LVL3500:
 27041              	.L3854:
 27042 0b80 6C1C     		adds	r4, r5, #1
 27043 0b82 FFF7CEBA 		b	.L3073
 27044              	.LVL3501:
 27045              	.L3872:
 27046              	.LBB2539:
 27047              	.LBB2524:
 27048              	.LBB2514:
 27049              	.LBB2510:
 27050              	.LBB2505:
 27051              	.LBB2506:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 27052              		.loc 1 744 0
 27053 0b86 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 27054 0b88 039A     		ldr	r2, [sp, #12]
 27055 0b8a DFF8C4C2 		ldr	ip, .L3930+12
 27056 0b8e 04F13001 		add	r1, r4, #48
 27057 0b92 0123     		movs	r3, #1
 27058 0b94 E047     		blx	ip
 27059              	.LVL3502:
 27060 0b96 0028     		cmp	r0, #0
 27061 0b98 7FF4F8AE 		bne	.L3772
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 27062              		.loc 1 746 0
 27063 0b9c 039F     		ldr	r7, [sp, #12]
 27064 0b9e E762     		str	r7, [r4, #44]
 27065 0ba0 BDE7     		b	.L3441
 27066              	.LVL3503:
 27067              	.L3871:
 27068              	.LBE2506:
 27069              	.LBE2505:
 27070              	.LBE2510:
 27071              	.LBE2514:
 27072              	.LBB2515:
 27073              	.LBB2497:
 27074              	.LBB2492:
 27075              	.LBB2493:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 27076              		.loc 1 744 0
 27077 0ba2 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 27078 0ba4 039A     		ldr	r2, [sp, #12]
 27079 0ba6 DFF8A8C2 		ldr	ip, .L3930+12
 27080 0baa 04F13001 		add	r1, r4, #48
 27081 0bae 0123     		movs	r3, #1
 27082 0bb0 E047     		blx	ip
 27083              	.LVL3504:
 27084 0bb2 0028     		cmp	r0, #0
 27085 0bb4 7FF4EAAE 		bne	.L3772
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 27086              		.loc 1 746 0
 27087 0bb8 039F     		ldr	r7, [sp, #12]
 27088 0bba E762     		str	r7, [r4, #44]
 27089 0bbc 6CE7     		b	.L3442
 27090              	.LVL3505:
 27091              	.L3866:
 27092              	.LBE2493:
 27093              	.LBE2492:
 27094              	.LBE2497:
 27095              	.LBE2515:
 27096              	.LBE2524:
 27097              	.LBE2539:
 27098              	.LBE2549:
 27099              	.LBE2558:
 27100              	.LBE2567:
 27101              	.LBE2576:
 27102              	.LBE2585:
 27103              	.LBE2913:
 27104              	.LBB2914:
 27105              	.LBB2896:
 27106              	.LBB2856:
 27107              	.LBB2843:
 27108              	.LBB2648:
 27109              	.LBB2647:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 27110              		.loc 1 808 0
 27111 0bbe A578     		ldrb	r5, [r4, #2]	@ zero_extendqisi2
 27112 0bc0 A26A     		ldr	r2, [r4, #40]
 27113 0bc2 03FB0525 		mla	r5, r3, r5, r2
 27114              	.LBE2647:
 27115              	.LBE2648:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 27116              		.loc 1 2531 0
 27117 0bc6 002D     		cmp	r5, #0
 27118 0bc8 3FF48BAE 		beq	.L3361
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 27119              		.loc 1 2559 0
 27120 0bcc DAF81830 		ldr	r3, [sl, #24]
 27121              	.LVL3506:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 27122              		.loc 1 2560 0
 27123 0bd0 DAF80810 		ldr	r1, [sl, #8]
 27124 0bd4 DAF80C70 		ldr	r7, [sl, #12]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 27125              		.loc 1 2532 0
 27126 0bd8 4D44     		add	r5, r9, r5
 27127              	.LVL3507:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 27128              		.loc 1 2559 0
 27129 0bda 9D42     		cmp	r5, r3
 27130 0bdc 02D0     		beq	.L3364
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 27131              		.loc 1 2560 0
 27132 0bde B942     		cmp	r1, r7
 27133 0be0 C0F06981 		bcc	.L3873
 27134              	.LVL3508:
 27135              	.L3364:
 27136 0be4 CB05     		lsls	r3, r1, #23
 27137 0be6 9DF83440 		ldrb	r4, [sp, #52]	@ zero_extendqisi2
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 27138              		.loc 1 2565 0
 27139 0bea CAF81850 		str	r5, [sl, #24]
 27140 0bee DB0D     		lsrs	r3, r3, #23
 27141              	.LVL3509:
 27142              	.L3263:
 27143              	.LBB2649:
 27144              	.LBB2650:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 27145              		.loc 1 541 0
 27146 0bf0 5344     		add	r3, sl, r3
 27147              	.LVL3510:
 27148              	.LBE2650:
 27149              	.LBE2649:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 27150              		.loc 1 2576 0
 27151 0bf2 46F04002 		orr	r2, r6, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 27152              		.loc 1 2499 0
 27153 0bf6 0131     		adds	r1, r1, #1
 27154              	.LBB2652:
 27155              	.LBB2651:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 27156              		.loc 1 541 0
 27157 0bf8 83F82440 		strb	r4, [r3, #36]
 27158              	.LVL3511:
 27159              	.LBE2651:
 27160              	.LBE2652:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 27161              		.loc 1 2576 0
 27162 0bfc 8AF80620 		strb	r2, [sl, #6]
 27163              	.LVL3512:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 27164              		.loc 1 2499 0
 27165 0c00 CAF80810 		str	r1, [sl, #8]
 27166              	.LVL3513:
 27167 0c04 0123     		movs	r3, #1
 27168              	.LVL3514:
 27169              	.L3262:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 27170              		.loc 1 2580 0
 27171 0c06 8F42     		cmp	r7, r1
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 27172              		.loc 1 2581 0
 27173 0c08 42F02002 		orr	r2, r2, #32
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 27174              		.loc 1 2580 0
 27175 0c0c 38BF     		it	cc
 27176 0c0e CAF80C10 		strcc	r1, [sl, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 27177              		.loc 1 2581 0
 27178 0c12 8AF80620 		strb	r2, [sl, #6]
 27179              	.LVL3515:
 27180              	.LBE2843:
 27181              	.LBE2856:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 27182              		.loc 1 3952 0
 27183 0c16 002B     		cmp	r3, #0
 27184 0c18 3FF401AE 		beq	.L3453
 27185              	.LBE2896:
 27186              	.LBE2914:
4067:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		do res += (cc = f_putc(s[--i], fil)); while(i);
 27187              		.loc 1 4067 0
 27188 0c1c 9844     		add	r8, r8, r3
 27189              	.LVL3516:
 27190 0c1e BBF1000F 		cmp	fp, #0
 27191 0c22 7FF403AE 		bne	.L3874
 27192              	.LVL3517:
 27193              	.L3368:
4068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (j++ < w) res += (cc = f_putc(' ', fil));
 27194              		.loc 1 4068 0 discriminator 1
 27195 0c26 089C     		ldr	r4, [sp, #32]
 27196 0c28 C346     		mov	fp, r8
 27197 0c2a DDF81C80 		ldr	r8, [sp, #28]
 27198              	.LVL3518:
 27199 0c2e 4445     		cmp	r4, r8
 27200 0c30 04F10109 		add	r9, r4, #1
 27201              	.LVL3519:
 27202 0c34 80F0C480 		bcs	.L3370
 27203 0c38 4346     		mov	r3, r8
 27204              	.LVL3520:
 27205 0c3a D846     		mov	r8, fp
 27206 0c3c 9B46     		mov	fp, r3
 27207              	.LVL3521:
 27208 0c3e 08E0     		b	.L3746
 27209              	.LVL3522:
 27210              	.L3457:
 27211              	.LBB2915:
 27212              	.LBB2916:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 27213              		.loc 1 3952 0
 27214 0c40 4FF0FF33 		mov	r3, #-1
 27215              	.LBE2916:
 27216              	.LBE2915:
4068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (j++ < w) res += (cc = f_putc(' ', fil));
 27217              		.loc 1 4068 0
 27218 0c44 D945     		cmp	r9, fp
 27219 0c46 9844     		add	r8, r8, r3
 27220              	.LVL3523:
 27221 0c48 09F10102 		add	r2, r9, #1
 27222              	.LVL3524:
 27223 0c4c 80F0B780 		bcs	.L3875
 27224              	.L3579:
 27225 0c50 9146     		mov	r9, r2
 27226              	.LVL3525:
 27227              	.L3746:
 27228              	.LBB3048:
 27229              	.LBB3036:
 27230              	.LBB2917:
 27231              	.LBB2918:
2490:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	res = validate(fp->fs, fp->id);			/* Check validity */
 27232              		.loc 1 2490 0
 27233 0c52 DAF80030 		ldr	r3, [sl, #0]
 27234 0c56 BAF80410 		ldrh	r1, [sl, #4]
 27235              	.LBE2918:
 27236              	.LBE2917:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 27237              		.loc 1 3948 0
 27238 0c5a 2024     		movs	r4, #32
 27239 0c5c 8DF83440 		strb	r4, [sp, #52]
 27240              	.LVL3526:
 27241              	.LBB3024:
 27242              	.LBB3012:
 27243              	.LBB2919:
 27244              	.LBB2920:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 27245              		.loc 1 2177 0
 27246 0c60 002B     		cmp	r3, #0
 27247 0c62 EDD0     		beq	.L3457
 27248 0c64 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 27249 0c66 002A     		cmp	r2, #0
 27250 0c68 EAD0     		beq	.L3457
 27251 0c6a DA88     		ldrh	r2, [r3, #6]
 27252 0c6c 8A42     		cmp	r2, r1
 27253 0c6e E7D1     		bne	.L3457
 27254              	.LVL3527:
 27255              	.LBB2921:
 27256              	.LBB2922:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 27257              		.loc 1 2182 0
 27258 0c70 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 27259 0c72 754B     		ldr	r3, .L3930+4
 27260              	.LVL3528:
 27261 0c74 9847     		blx	r3
 27262              	.LVL3529:
 27263 0c76 10F00100 		ands	r0, r0, #1
 27264 0c7a E1D1     		bne	.L3457
 27265              	.LBE2922:
 27266              	.LBE2921:
 27267              	.LBE2920:
 27268              	.LBE2919:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 27269              		.loc 1 2492 0
 27270 0c7c 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 27271 0c80 1306     		lsls	r3, r2, #24
 27272 0c82 1546     		mov	r5, r2
 27273 0c84 DCD4     		bmi	.L3457
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 27274              		.loc 1 2494 0
 27275 0c86 02F00203 		and	r3, r2, #2
 27276 0c8a DBB2     		uxtb	r3, r3
 27277 0c8c 002B     		cmp	r3, #0
 27278 0c8e D7D0     		beq	.L3457
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 27279              		.loc 1 2496 0
 27280 0c90 DAF80C70 		ldr	r7, [sl, #12]
 27281              	.LVL3530:
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 27282              		.loc 1 2500 0
 27283 0c94 DAF80810 		ldr	r1, [sl, #8]
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 27284              		.loc 1 2498 0
 27285 0c98 7B1C     		adds	r3, r7, #1
 27286 0c9a 80F00182 		bcs	.L3827
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 27287              		.loc 1 2500 0
 27288 0c9e CB05     		lsls	r3, r1, #23
 27289 0ca0 DB0D     		lsrs	r3, r3, #23
 27290 0ca2 002B     		cmp	r3, #0
 27291 0ca4 6FD1     		bne	.L3375
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 27292              		.loc 1 2501 0
 27293 0ca6 DAF80040 		ldr	r4, [sl, #0]
 27294 0caa A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 27295 0cac 013B     		subs	r3, r3, #1
 27296 0cae 03EA5123 		and	r3, r3, r1, lsr #9
 27297              	.LVL3531:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 27298              		.loc 1 2502 0
 27299 0cb2 13F0FF07 		ands	r7, r3, #255
 27300              	.LVL3532:
 27301 0cb6 0FD1     		bne	.L3376
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 27302              		.loc 1 2503 0
 27303 0cb8 0029     		cmp	r1, #0
 27304 0cba 40F00D81 		bne	.L3377
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 27305              		.loc 1 2504 0
 27306 0cbe DAF81060 		ldr	r6, [sl, #16]
 27307              	.LVL3533:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 27308              		.loc 1 2505 0
 27309 0cc2 002E     		cmp	r6, #0
 27310 0cc4 00F0DC81 		beq	.L3876
 27311              	.LVL3534:
 27312              	.L3378:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 27313              		.loc 1 2516 0
 27314 0cc8 012E     		cmp	r6, #1
 27315 0cca 11D0     		beq	.L3427
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 27316              		.loc 1 2517 0
 27317 0ccc 711C     		adds	r1, r6, #1
 27318 0cce 0FD0     		beq	.L3427
 27319 0cd0 DAF80040 		ldr	r4, [sl, #0]
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 27320              		.loc 1 2518 0
 27321 0cd4 CAF81460 		str	r6, [sl, #20]
 27322              	.L3376:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 27323              		.loc 1 2524 0
 27324 0cd8 05F04003 		and	r3, r5, #64
 27325 0cdc DBB2     		uxtb	r3, r3
 27326 0cde 002B     		cmp	r3, #0
 27327 0ce0 74D1     		bne	.L3877
 27328              	.L3425:
 27329              	.LVL3535:
 27330              	.LBB2923:
 27331              	.LBB2924:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 27332              		.loc 1 806 0
 27333 0ce2 DAF81430 		ldr	r3, [sl, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 27334              		.loc 1 807 0
 27335 0ce6 A269     		ldr	r2, [r4, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 27336              		.loc 1 806 0
 27337 0ce8 023B     		subs	r3, r3, #2
 27338              	.LVL3536:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 27339              		.loc 1 807 0
 27340 0cea 023A     		subs	r2, r2, #2
 27341 0cec 9342     		cmp	r3, r2
 27342 0cee 32D3     		bcc	.L3878
 27343              	.LVL3537:
 27344              	.L3427:
 27345              	.LBE2924:
 27346              	.LBE2923:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 27347              		.loc 1 2531 0
 27348 0cf0 65F07F05 		orn	r5, r5, #127
 27349 0cf4 8AF80650 		strb	r5, [sl, #6]
 27350 0cf8 A2E7     		b	.L3457
 27351              	.LVL3538:
 27352              	.L3863:
 27353              	.LBE3012:
 27354              	.LBE3024:
 27355              	.LBE3036:
 27356              	.LBE3048:
 27357              	.LBB3049:
 27358              	.LBB2897:
 27359              	.LBB2857:
 27360              	.LBB2858:
3948:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	s[0] = (BYTE)c;
 27361              		.loc 1 3948 0
 27362 0cfa 0D26     		movs	r6, #13
 27363 0cfc 8DF83460 		strb	r6, [sp, #52]
 27364              	.LVL3539:
 27365              	.LBB2859:
 27366              	.LBB2860:
 27367              	.LBB2861:
 27368              	.LBB2862:
2177:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!fs || !fs->fs_type || fs->id != id)
 27369              		.loc 1 2177 0
 27370 0d00 002B     		cmp	r3, #0
 27371 0d02 3FF4A1AD 		beq	.L3234
 27372 0d06 1978     		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 27373              	.LVL3540:
 27374 0d08 0029     		cmp	r1, #0
 27375 0d0a 3FF49DAD 		beq	.L3234
 27376 0d0e D988     		ldrh	r1, [r3, #6]
 27377 0d10 9142     		cmp	r1, r2
 27378 0d12 7FF499AD 		bne	.L3234
 27379              	.LVL3541:
 27380              	.LBB2863:
 27381              	.LBB2864:
2182:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (disk_status(fs->drv) & STA_NOINIT)
 27382              		.loc 1 2182 0
 27383 0d16 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 27384 0d18 4B4B     		ldr	r3, .L3930+4
 27385              	.LVL3542:
 27386 0d1a 9847     		blx	r3
 27387              	.LVL3543:
 27388 0d1c 10F00103 		ands	r3, r0, #1
 27389 0d20 01F0F280 		beq	.L3236
 27390              	.L3825:
 27391 0d24 DAF80030 		ldr	r3, [sl, #0]
 27392 0d28 BAF80420 		ldrh	r2, [sl, #4]
 27393 0d2c 8CE5     		b	.L3234
 27394              	.LVL3544:
 27395              	.L3865:
 27396              	.LBE2864:
 27397              	.LBE2863:
 27398              	.LBE2862:
 27399              	.LBE2861:
 27400              	.LBE2860:
 27401              	.LBE2859:
 27402              	.LBE2858:
 27403              	.LBE2857:
 27404              	.LBB2881:
 27405              	.LBB2844:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 27406              		.loc 1 2525 0
 27407 0d2e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 27408 0d30 DAF81820 		ldr	r2, [sl, #24]
 27409 0d34 454C     		ldr	r4, .L3930+8
 27410 0d36 0AF12401 		add	r1, sl, #36
 27411 0d3a 0123     		movs	r3, #1
 27412 0d3c A047     		blx	r4
 27413              	.LVL3545:
 27414 0d3e 0028     		cmp	r0, #0
 27415 0d40 40F0F587 		bne	.L3365
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 27416              		.loc 1 2527 0
 27417 0d44 9AF80660 		ldrb	r6, [sl, #6]	@ zero_extendqisi2
 27418 0d48 DAF80040 		ldr	r4, [sl, #0]
 27419 0d4c 06F0BF06 		and	r6, r6, #191
 27420 0d50 8AF80660 		strb	r6, [sl, #6]
 27421 0d54 BDE5     		b	.L3359
 27422              	.LVL3546:
 27423              	.L3878:
 27424              	.LBE2844:
 27425              	.LBE2881:
 27426              	.LBE2897:
 27427              	.LBE3049:
 27428              	.LBB3050:
 27429              	.LBB3037:
 27430              	.LBB3025:
 27431              	.LBB3013:
 27432              	.LBB2926:
 27433              	.LBB2925:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 27434              		.loc 1 808 0
 27435 0d56 A678     		ldrb	r6, [r4, #2]	@ zero_extendqisi2
 27436 0d58 A26A     		ldr	r2, [r4, #40]
 27437 0d5a 03FB0626 		mla	r6, r3, r6, r2
 27438              	.LBE2925:
 27439              	.LBE2926:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 27440              		.loc 1 2531 0
 27441 0d5e 002E     		cmp	r6, #0
 27442 0d60 C6D0     		beq	.L3427
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 27443              		.loc 1 2559 0
 27444 0d62 DAF81820 		ldr	r2, [sl, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 27445              		.loc 1 2560 0
 27446 0d66 DAF80810 		ldr	r1, [sl, #8]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 27447              		.loc 1 2532 0
 27448 0d6a BE19     		adds	r6, r7, r6
 27449              	.LVL3547:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 27450              		.loc 1 2559 0
 27451 0d6c 9642     		cmp	r6, r2
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 27452              		.loc 1 2560 0
 27453 0d6e DAF80C70 		ldr	r7, [sl, #12]
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 27454              		.loc 1 2559 0
 27455 0d72 02D0     		beq	.L3430
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 27456              		.loc 1 2560 0
 27457 0d74 B942     		cmp	r1, r7
 27458 0d76 C0F09581 		bcc	.L3879
 27459              	.LVL3548:
 27460              	.L3430:
 27461 0d7a CB05     		lsls	r3, r1, #23
 27462 0d7c 9DF83440 		ldrb	r4, [sp, #52]	@ zero_extendqisi2
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 27463              		.loc 1 2565 0
 27464 0d80 CAF81860 		str	r6, [sl, #24]
 27465 0d84 DB0D     		lsrs	r3, r3, #23
 27466              	.LVL3549:
 27467              	.L3375:
 27468              	.LBB2927:
 27469              	.LBB2928:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 27470              		.loc 1 541 0
 27471 0d86 5344     		add	r3, sl, r3
 27472              	.LVL3550:
 27473              	.LBE2928:
 27474              	.LBE2927:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 27475              		.loc 1 2576 0
 27476 0d88 45F04002 		orr	r2, r5, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 27477              		.loc 1 2499 0
 27478 0d8c 0131     		adds	r1, r1, #1
 27479              	.LBB2930:
 27480              	.LBB2929:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 27481              		.loc 1 541 0
 27482 0d8e 83F82440 		strb	r4, [r3, #36]
 27483              	.LVL3551:
 27484              	.LBE2929:
 27485              	.LBE2930:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 27486              		.loc 1 2576 0
 27487 0d92 8AF80620 		strb	r2, [sl, #6]
 27488              	.LVL3552:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 27489              		.loc 1 2499 0
 27490 0d96 CAF80810 		str	r1, [sl, #8]
 27491              	.LVL3553:
 27492 0d9a 0123     		movs	r3, #1
 27493              	.LVL3554:
 27494              	.L3374:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 27495              		.loc 1 2580 0
 27496 0d9c 8F42     		cmp	r7, r1
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 27497              		.loc 1 2581 0
 27498 0d9e 42F02002 		orr	r2, r2, #32
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 27499              		.loc 1 2580 0
 27500 0da2 38BF     		it	cc
 27501 0da4 CAF80C10 		strcc	r1, [sl, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 27502              		.loc 1 2581 0
 27503 0da8 8AF80620 		strb	r2, [sl, #6]
 27504              	.LVL3555:
 27505              	.LBE3013:
 27506              	.LBE3025:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 27507              		.loc 1 3952 0
 27508 0dac 002B     		cmp	r3, #0
 27509 0dae 3FF447AF 		beq	.L3457
 27510              	.LBE3037:
 27511              	.LBE3050:
4068:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (j++ < w) res += (cc = f_putc(' ', fil));
 27512              		.loc 1 4068 0
 27513 0db2 D945     		cmp	r9, fp
 27514 0db4 9844     		add	r8, r8, r3
 27515              	.LVL3556:
 27516 0db6 09F10102 		add	r2, r9, #1
 27517              	.LVL3557:
 27518 0dba FFF449AF 		bcc	.L3579
 27519              	.LVL3558:
 27520              	.L3875:
 27521 0dbe C346     		mov	fp, r8
 27522              	.LVL3559:
 27523              	.L3370:
4069:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cc != EOF) cc = res;
 27524              		.loc 1 4069 0
 27525 0dc0 0133     		adds	r3, r3, #1
 27526 0dc2 3FF43EA9 		beq	.L3436
 27527 0dc6 5E46     		mov	r6, fp
 27528 0dc8 FFF7BCBB 		b	.L3121
 27529              	.LVL3560:
 27530              	.L3877:
 27531              	.LBB3051:
 27532              	.LBB3038:
 27533              	.LBB3026:
 27534              	.LBB3014:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 27535              		.loc 1 2525 0
 27536 0dcc 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 27537 0dce DAF81820 		ldr	r2, [sl, #24]
 27538 0dd2 1E4C     		ldr	r4, .L3930+8
 27539 0dd4 0AF12401 		add	r1, sl, #36
 27540 0dd8 0123     		movs	r3, #1
 27541 0dda A047     		blx	r4
 27542              	.LVL3561:
 27543 0ddc 0028     		cmp	r0, #0
 27544 0dde 41F01280 		bne	.L3431
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 27545              		.loc 1 2527 0
 27546 0de2 9AF80650 		ldrb	r5, [sl, #6]	@ zero_extendqisi2
 27547 0de6 DAF80040 		ldr	r4, [sl, #0]
 27548 0dea 05F0BF05 		and	r5, r5, #191
 27549 0dee 8AF80650 		strb	r5, [sl, #6]
 27550 0df2 76E7     		b	.L3425
 27551              	.LVL3562:
 27552              	.L3265:
 27553              	.LBE3014:
 27554              	.LBE3026:
 27555              	.LBE3038:
 27556              	.LBE3051:
 27557              	.LBB3052:
 27558              	.LBB2898:
 27559              	.LBB2882:
 27560              	.LBB2845:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 27561              		.loc 1 2513 0
 27562 0df4 DAF81450 		ldr	r5, [sl, #20]
 27563 0df8 0495     		str	r5, [sp, #16]
 27564              	.LVL3563:
 27565              	.LBB2653:
 27566              	.LBB2654:
 988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {		/* Create a new chain */
 27567              		.loc 1 988 0
 27568 0dfa 002D     		cmp	r5, #0
 27569 0dfc 40F0AC82 		bne	.L3309
 989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 27570              		.loc 1 989 0
 27571 0e00 E668     		ldr	r6, [r4, #12]
 27572              	.LVL3564:
 27573 0e02 A369     		ldr	r3, [r4, #24]
 27574              	.LVL3565:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 27575              		.loc 1 990 0
 27576 0e04 002E     		cmp	r6, #0
 27577 0e06 40F00582 		bne	.L3310
 27578 0e0a 0126     		movs	r6, #1
 27579              	.LVL3566:
 27580              	.L3311:
 27581 0e0c 3746     		mov	r7, r6
 27582              	.LVL3567:
 27583              	.L3348:
1001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl++;							/* Next cluster */
 27584              		.loc 1 1001 0
 27585 0e0e 0137     		adds	r7, r7, #1
 27586              	.LVL3568:
1002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Wrap around */
 27587              		.loc 1 1002 0
 27588 0e10 9F42     		cmp	r7, r3
 27589 0e12 13D3     		bcc	.L3314
 27590              	.LVL3569:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 27591              		.loc 1 1004 0
 27592 0e14 012E     		cmp	r6, #1
 27593 0e16 42D9     		bls	.L3672
 27594              	.LVL3570:
 27595              	.LBB2655:
 27596              	.LBB2656:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 27597              		.loc 1 828 0
 27598 0e18 022B     		cmp	r3, #2
 27599 0e1a 11D9     		bls	.L3561
1003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ncl = 2;
 27600              		.loc 1 1003 0
 27601 0e1c 0227     		movs	r7, #2
 27602              	.LVL3571:
 27603              	.L3317:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 27604              		.loc 1 831 0
 27605 0e1e 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 27606 0e20 022B     		cmp	r3, #2
 27607 0e22 00F01081 		beq	.L3319
 27608 0e26 032B     		cmp	r3, #3
 27609 0e28 00F0CA80 		beq	.L3320
 27610 0e2c 012B     		cmp	r3, #1
 27611 0e2e 00F08380 		beq	.L3880
 27612              	.L3354:
 27613              	.LBE2656:
 27614              	.LBE2655:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 27615              		.loc 1 1004 0
 27616 0e32 4FF0FF37 		mov	r7, #-1
 27617              	.LVL3572:
 27618              	.L3355:
 27619 0e36 9AF80660 		ldrb	r6, [sl, #6]	@ zero_extendqisi2
 27620 0e3a 3CE5     		b	.L3266
 27621              	.LVL3573:
 27622              	.L3314:
 27623              	.LBB2718:
 27624              	.LBB2711:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 27625              		.loc 1 828 0
 27626 0e3c 012F     		cmp	r7, #1
 27627 0e3e EED8     		bhi	.L3317
 27628              	.LVL3574:
 27629              	.L3561:
 27630              	.LBE2711:
 27631              	.LBE2718:
 27632              	.LBB2719:
 27633              	.LBB2720:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 27634              		.loc 1 1024 0
 27635 0e40 0127     		movs	r7, #1
 27636 0e42 F8E7     		b	.L3355
 27637              	.L3931:
 27638              		.align	2
 27639              	.L3930:
 27640 0e44 00000000 		.word	get_fat
 27641 0e48 00000000 		.word	disk_status
 27642 0e4c 00000000 		.word	disk_write
 27643 0e50 00000000 		.word	disk_read
 27644              	.LVL3575:
 27645              	.L3864:
 27646              	.LBE2720:
 27647              	.LBE2719:
 27648              	.LBE2654:
 27649              	.LBE2653:
 27650              	.LBB2741:
 27651              	.LBB2742:
 989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 27652              		.loc 1 989 0
 27653 0e54 D4F80CC0 		ldr	ip, [r4, #12]
 27654              	.LVL3576:
 27655 0e58 A369     		ldr	r3, [r4, #24]
 27656              	.LVL3577:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 27657              		.loc 1 990 0
 27658 0e5a BCF1000F 		cmp	ip, #0
 27659 0e5e 40F0D481 		bne	.L3267
 27660 0e62 4FF0010C 		mov	ip, #1
 27661              	.LVL3578:
 27662              	.L3268:
 27663 0e66 6646     		mov	r6, ip
 27664 0e68 0397     		str	r7, [sp, #12]
 27665 0e6a 6546     		mov	r5, ip
 27666              	.LVL3579:
 27667              	.L3303:
1001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl++;							/* Next cluster */
 27668              		.loc 1 1001 0
 27669 0e6c 0136     		adds	r6, r6, #1
 27670              	.LVL3580:
1002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Wrap around */
 27671              		.loc 1 1002 0
 27672 0e6e 9E42     		cmp	r6, r3
 27673 0e70 1DD3     		bcc	.L3269
 27674              	.LVL3581:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 27675              		.loc 1 1004 0
 27676 0e72 012D     		cmp	r5, #1
 27677 0e74 40F20281 		bls	.L3788
 27678              	.LVL3582:
 27679              	.LBB2743:
 27680              	.LBB2744:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 27681              		.loc 1 828 0
 27682 0e78 022B     		cmp	r3, #2
 27683 0e7a 1AD9     		bls	.L3545
1003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ncl = 2;
 27684              		.loc 1 1003 0
 27685 0e7c 0226     		movs	r6, #2
 27686              	.LVL3583:
 27687              	.L3273:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 27688              		.loc 1 831 0
 27689 0e7e 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 27690 0e80 022B     		cmp	r3, #2
 27691 0e82 00F02081 		beq	.L3275
 27692 0e86 032B     		cmp	r3, #3
 27693 0e88 00F09B81 		beq	.L3276
 27694 0e8c 012B     		cmp	r3, #1
 27695 0e8e 00F04381 		beq	.L3881
 27696              	.L3306:
 27697              	.LBE2744:
 27698              	.LBE2743:
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
 27699              		.loc 1 1021 0
 27700 0e92 4FF0FF37 		mov	r7, #-1
 27701              	.L3271:
 27702              	.LVL3584:
 27703              	.LBE2742:
 27704              	.LBE2741:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 27705              		.loc 1 2506 0
 27706 0e96 CAF81070 		str	r7, [sl, #16]
 27707              	.LVL3585:
 27708              	.L3308:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 27709              		.loc 1 2515 0
 27710 0e9a 002F     		cmp	r7, #0
 27711 0e9c CBD1     		bne	.L3355
 27712              	.LVL3586:
 27713              	.L3672:
 27714 0e9e DAF80810 		ldr	r1, [sl, #8]
 27715 0ea2 DAF80C70 		ldr	r7, [sl, #12]
 27716 0ea6 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 27717              	.L3826:
 27718 0eaa 0023     		movs	r3, #0
 27719 0eac ABE6     		b	.L3262
 27720              	.LVL3587:
 27721              	.L3269:
 27722              	.LBB2827:
 27723              	.LBB2819:
 27724              	.LBB2809:
 27725              	.LBB2801:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 27726              		.loc 1 828 0
 27727 0eae 012E     		cmp	r6, #1
 27728 0eb0 E5D8     		bhi	.L3273
 27729              	.LVL3588:
 27730              	.L3545:
 27731              	.LBE2801:
 27732              	.LBE2809:
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 27733              		.loc 1 1008 0
 27734 0eb2 0127     		movs	r7, #1
 27735 0eb4 EFE7     		b	.L3271
 27736              	.LVL3589:
 27737              	.L3873:
 27738              	.LBE2819:
 27739              	.LBE2827:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 27740              		.loc 1 2561 0
 27741 0eb6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 27742 0eb8 944C     		ldr	r4, .L3932
 27743              	.LVL3590:
 27744 0eba 0AF12401 		add	r1, sl, #36
 27745 0ebe 2A46     		mov	r2, r5
 27746 0ec0 0123     		movs	r3, #1
 27747 0ec2 A047     		blx	r4
 27748              	.LVL3591:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 27749              		.loc 1 2560 0
 27750 0ec4 0028     		cmp	r0, #0
 27751 0ec6 40F03287 		bne	.L3365
 27752 0eca DAF80810 		ldr	r1, [sl, #8]
 27753 0ece DAF80C70 		ldr	r7, [sl, #12]
 27754 0ed2 9AF80660 		ldrb	r6, [sl, #6]	@ zero_extendqisi2
 27755 0ed6 85E6     		b	.L3364
 27756              	.LVL3592:
 27757              	.L3377:
 27758              	.LBE2845:
 27759              	.LBE2882:
 27760              	.LBE2898:
 27761              	.LBE3052:
 27762              	.LBB3053:
 27763              	.LBB3039:
 27764              	.LBB3027:
 27765              	.LBB3015:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 27766              		.loc 1 2513 0
 27767 0ed8 DAF81450 		ldr	r5, [sl, #20]
 27768 0edc 0495     		str	r5, [sp, #16]
 27769              	.LVL3593:
 27770              	.LBB2931:
 27771              	.LBB2932:
 988:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst == 0) {		/* Create a new chain */
 27772              		.loc 1 988 0
 27773 0ede 002D     		cmp	r5, #0
 27774 0ee0 40F04D82 		bne	.L3380
 989:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 27775              		.loc 1 989 0
 27776 0ee4 D4F80CC0 		ldr	ip, [r4, #12]
 27777              	.LVL3594:
 27778 0ee8 A369     		ldr	r3, [r4, #24]
 27779              	.LVL3595:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 27780              		.loc 1 990 0
 27781 0eea BCF1000F 		cmp	ip, #0
 27782 0eee 40F04182 		bne	.L3381
 27783 0ef2 4FF0010C 		mov	ip, #1
 27784              	.LVL3596:
 27785              	.L3382:
 27786 0ef6 6646     		mov	r6, ip
 27787 0ef8 0B97     		str	r7, [sp, #44]
 27788 0efa 6546     		mov	r5, ip
 27789              	.LVL3597:
 27790              	.L3414:
1001:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl++;							/* Next cluster */
 27791              		.loc 1 1001 0
 27792 0efc 0136     		adds	r6, r6, #1
 27793              	.LVL3598:
1002:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Wrap around */
 27794              		.loc 1 1002 0
 27795 0efe B342     		cmp	r3, r6
 27796 0f00 15D8     		bhi	.L3385
 27797              	.LVL3599:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 27798              		.loc 1 1004 0
 27799 0f02 012D     		cmp	r5, #1
 27800 0f04 40F2C680 		bls	.L3674
 27801              	.LVL3600:
 27802              	.LBB2933:
 27803              	.LBB2934:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 27804              		.loc 1 828 0
 27805 0f08 022B     		cmp	r3, #2
 27806 0f0a 12D9     		bls	.L3820
1003:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			ncl = 2;
 27807              		.loc 1 1003 0
 27808 0f0c 0226     		movs	r6, #2
 27809              	.LVL3601:
 27810              	.L3388:
 831:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	switch (fs->fs_type) {
 27811              		.loc 1 831 0
 27812 0f0e 2378     		ldrb	r3, [r4, #0]	@ zero_extendqisi2
 27813 0f10 022B     		cmp	r3, #2
 27814 0f12 00F00682 		beq	.L3390
 27815 0f16 032B     		cmp	r3, #3
 27816 0f18 00F0BE81 		beq	.L3391
 27817 0f1c 012B     		cmp	r3, #1
 27818 0f1e 00F07D81 		beq	.L3882
 27819              	.L3819:
 27820 0f22 0B9F     		ldr	r7, [sp, #44]
 27821              	.L3420:
 27822              	.LBE2934:
 27823              	.LBE2933:
1004:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 27824              		.loc 1 1004 0
 27825 0f24 4FF0FF36 		mov	r6, #-1
 27826              	.LVL3602:
 27827              	.L3421:
 27828 0f28 9AF80650 		ldrb	r5, [sl, #6]	@ zero_extendqisi2
 27829 0f2c CCE6     		b	.L3378
 27830              	.LVL3603:
 27831              	.L3385:
 27832              	.LBB2983:
 27833              	.LBB2976:
 828:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Chack range */
 27834              		.loc 1 828 0
 27835 0f2e 012E     		cmp	r6, #1
 27836 0f30 EDD8     		bhi	.L3388
 27837              	.LVL3604:
 27838              	.L3820:
 27839 0f32 0B9F     		ldr	r7, [sp, #44]
 27840              	.L3577:
 27841              	.LBE2976:
 27842              	.LBE2983:
 27843              	.LBB2984:
 27844              	.LBB2985:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 27845              		.loc 1 1024 0
 27846 0f34 0126     		movs	r6, #1
 27847 0f36 F7E7     		b	.L3421
 27848              	.LVL3605:
 27849              	.L3880:
 27850              	.LBE2985:
 27851              	.LBE2984:
 27852              	.LBE2932:
 27853              	.LBE2931:
 27854              	.LBE3015:
 27855              	.LBE3027:
 27856              	.LBE3039:
 27857              	.LBE3053:
 27858              	.LBB3054:
 27859              	.LBB2899:
 27860              	.LBB2883:
 27861              	.LBB2846:
 27862              	.LBB2828:
 27863              	.LBB2733:
 27864              	.LBB2723:
 27865              	.LBB2712:
 27866              	.LBB2657:
 27867              	.LBB2658:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 27868              		.loc 1 727 0
 27869 0f38 E56A     		ldr	r5, [r4, #44]
 27870              	.LBE2658:
 27871              	.LBE2657:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 27872              		.loc 1 834 0
 27873 0f3a 226A     		ldr	r2, [r4, #32]
 27874              	.LBB2667:
 27875              	.LBB2662:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 27876              		.loc 1 727 0
 27877 0f3c 0395     		str	r5, [sp, #12]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 27878              		.loc 1 728 0
 27879 0f3e 0398     		ldr	r0, [sp, #12]
 27880              	.LBE2662:
 27881              	.LBE2667:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 27882              		.loc 1 833 0
 27883 0f40 07EB5705 		add	r5, r7, r7, lsr #1
 27884 0f44 0695     		str	r5, [sp, #24]
 27885              	.LVL3606:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 27886              		.loc 1 834 0
 27887 0f46 02EB5525 		add	r5, r2, r5, lsr #9
 27888              	.LVL3607:
 27889              	.LBB2668:
 27890              	.LBB2663:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 27891              		.loc 1 728 0
 27892 0f4a 8542     		cmp	r5, r0
 27893              	.LBE2663:
 27894              	.LBE2668:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 27895              		.loc 1 834 0
 27896 0f4c 0B95     		str	r5, [sp, #44]
 27897              	.LVL3608:
 27898              	.LBB2669:
 27899              	.LBB2664:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 27900              		.loc 1 728 0
 27901 0f4e 0AD0     		beq	.L3449
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 27902              		.loc 1 730 0
 27903 0f50 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 27904 0f52 002A     		cmp	r2, #0
 27905 0f54 40F04B82 		bne	.L3322
 27906              	.LVL3609:
 27907              	.L3325:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 27908              		.loc 1 743 0
 27909 0f58 0B9D     		ldr	r5, [sp, #44]
 27910 0f5a 002D     		cmp	r5, #0
 27911 0f5c 40F02B82 		bne	.L3883
 27912 0f60 E56A     		ldr	r5, [r4, #44]
 27913 0f62 226A     		ldr	r2, [r4, #32]
 27914 0f64 0B95     		str	r5, [sp, #44]
 27915              	.L3449:
 27916              	.LBE2664:
 27917              	.LBE2669:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 27918              		.loc 1 835 0
 27919 0f66 069D     		ldr	r5, [sp, #24]
 27920 0f68 EB05     		lsls	r3, r5, #23
 27921 0f6a DB0D     		lsrs	r3, r3, #23
 27922 0f6c 0135     		adds	r5, r5, #1
 27923 0f6e E318     		adds	r3, r4, r3
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 27924              		.loc 1 836 0
 27925 0f70 02EB5522 		add	r2, r2, r5, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 27926              		.loc 1 835 0
 27927 0f74 0695     		str	r5, [sp, #24]
 27928              	.LBB2670:
 27929              	.LBB2671:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 27930              		.loc 1 728 0
 27931 0f76 0B9D     		ldr	r5, [sp, #44]
 27932              	.LBE2671:
 27933              	.LBE2670:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 27934              		.loc 1 835 0
 27935 0f78 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 27936              		.loc 1 836 0
 27937 0f7c 0392     		str	r2, [sp, #12]
 27938              	.LBB2678:
 27939              	.LBB2675:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 27940              		.loc 1 728 0
 27941 0f7e 9542     		cmp	r5, r2
 27942              	.LBE2675:
 27943              	.LBE2678:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 27944              		.loc 1 835 0
 27945 0f80 0A93     		str	r3, [sp, #40]
 27946              	.LVL3610:
 27947              	.LBB2679:
 27948              	.LBB2676:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 27949              		.loc 1 728 0
 27950 0f82 07D0     		beq	.L3450
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 27951              		.loc 1 730 0
 27952 0f84 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 27953 0f86 002B     		cmp	r3, #0
 27954 0f88 40F01285 		bne	.L3328
 27955              	.LVL3611:
 27956              	.L3330:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 27957              		.loc 1 743 0
 27958 0f8c 039D     		ldr	r5, [sp, #12]
 27959 0f8e 002D     		cmp	r5, #0
 27960 0f90 40F0FB84 		bne	.L3884
 27961              	.L3450:
 27962              	.LBE2676:
 27963              	.LBE2679:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 27964              		.loc 1 837 0
 27965 0f94 069D     		ldr	r5, [sp, #24]
 27966 0f96 EB05     		lsls	r3, r5, #23
 27967 0f98 DB0D     		lsrs	r3, r3, #23
 27968 0f9a E318     		adds	r3, r4, r3
 27969 0f9c 0A9D     		ldr	r5, [sp, #40]
 27970 0f9e 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 27971              		.loc 1 838 0
 27972 0fa2 F807     		lsls	r0, r7, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 27973              		.loc 1 837 0
 27974 0fa4 45EA0323 		orr	r3, r5, r3, lsl #8
 27975              	.LVL3612:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 27976              		.loc 1 838 0
 27977 0fa8 40F1A187 		bpl	.L3332
 27978 0fac 1B09     		lsrs	r3, r3, #4
 27979              	.LVL3613:
 27980              	.L3333:
 27981              	.LBE2712:
 27982              	.LBE2723:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 27983              		.loc 1 1007 0
 27984 0fae 63B3     		cbz	r3, .L3885
 27985              	.L3745:
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 27986              		.loc 1 1008 0
 27987 0fb0 012B     		cmp	r3, #1
 27988 0fb2 3FF445AF 		beq	.L3561
1010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
 27989              		.loc 1 1010 0
 27990 0fb6 BE42     		cmp	r6, r7
 27991 0fb8 3FF471AF 		beq	.L3672
 27992 0fbc A369     		ldr	r3, [r4, #24]
 27993 0fbe 26E7     		b	.L3348
 27994              	.L3320:
 27995              	.LBB2724:
 27996              	.LBB2713:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 27997              		.loc 1 846 0
 27998 0fc0 236A     		ldr	r3, [r4, #32]
 27999              	.LBB2680:
 28000              	.LBB2681:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28001              		.loc 1 727 0
 28002 0fc2 E56A     		ldr	r5, [r4, #44]
 28003              	.LBE2681:
 28004              	.LBE2680:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28005              		.loc 1 846 0
 28006 0fc4 03EBD713 		add	r3, r3, r7, lsr #7
 28007              	.LBB2689:
 28008              	.LBB2685:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28009              		.loc 1 728 0
 28010 0fc8 AB42     		cmp	r3, r5
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28011              		.loc 1 727 0
 28012 0fca 0A95     		str	r5, [sp, #40]
 28013              	.LBE2685:
 28014              	.LBE2689:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28015              		.loc 1 846 0
 28016 0fcc 0393     		str	r3, [sp, #12]
 28017              	.LVL3614:
 28018              	.LBB2690:
 28019              	.LBB2686:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28020              		.loc 1 728 0
 28021 0fce 07D0     		beq	.L3452
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28022              		.loc 1 730 0
 28023 0fd0 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 28024              	.LVL3615:
 28025 0fd2 002B     		cmp	r3, #0
 28026 0fd4 40F04A82 		bne	.L3340
 28027              	.LVL3616:
 28028              	.L3342:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28029              		.loc 1 743 0
 28030 0fd8 039D     		ldr	r5, [sp, #12]
 28031 0fda 002D     		cmp	r5, #0
 28032 0fdc 40F0FA81 		bne	.L3886
 28033              	.L3452:
 28034              	.LVL3617:
 28035              	.LBE2686:
 28036              	.LBE2690:
 28037              	.LBB2691:
 28038              	.LBB2692:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 28039              		.loc 1 847 0
 28040 0fe0 7A06     		lsls	r2, r7, #25
 28041 0fe2 D20D     		lsrs	r2, r2, #23
 28042 0fe4 02F13003 		add	r3, r2, #48
 28043 0fe8 E318     		adds	r3, r4, r3
 28044              	.LVL3618:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 28045              		.loc 1 848 0
 28046 0fea A518     		adds	r5, r4, r2
 28047 0fec DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 28048 0fee 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 28049 0ff0 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 28050 0ff2 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 28051              	.LVL3619:
 28052 0ff6 1206     		lsls	r2, r2, #24
 28053 0ff8 42EA0042 		orr	r2, r2, r0, lsl #16
 28054 0ffc 42EA0122 		orr	r2, r2, r1, lsl #8
 28055 1000 1343     		orrs	r3, r3, r2
 28056 1002 23F07043 		bic	r3, r3, #-268435456
 28057              	.LBE2692:
 28058              	.LBE2691:
 28059              	.LBE2713:
 28060              	.LBE2724:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 28061              		.loc 1 1007 0
 28062 1006 002B     		cmp	r3, #0
 28063 1008 D2D1     		bne	.L3745
 28064              	.LVL3620:
 28065              	.L3885:
 28066              	.LBB2725:
 28067              	.LBB2726:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 28068              		.loc 1 873 0
 28069 100a A369     		ldr	r3, [r4, #24]
 28070 100c BB42     		cmp	r3, r7
 28071 100e 7FF617AF 		bls	.L3561
 28072 1012 2046     		mov	r0, r4
 28073 1014 3946     		mov	r1, r7
 28074 1016 6FF07042 		mvn	r2, #-268435456
 28075 101a 3D4D     		ldr	r5, .L3932+4
 28076 101c A847     		blx	r5
 28077              	.LVL3621:
 28078              	.LBE2726:
 28079              	.LBE2725:
1014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && clst != 0) {
 28080              		.loc 1 1014 0
 28081 101e 0028     		cmp	r0, #0
 28082 1020 40F0D286 		bne	.L3353
 28083 1024 049E     		ldr	r6, [sp, #16]
 28084 1026 002E     		cmp	r6, #0
 28085 1028 40F0C086 		bne	.L3350
 28086              	.LVL3622:
 28087              	.L3352:
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 28088              		.loc 1 1019 0
 28089 102c 2369     		ldr	r3, [r4, #16]
1018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 28090              		.loc 1 1018 0
 28091 102e E760     		str	r7, [r4, #12]
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 28092              		.loc 1 1019 0
 28093 1030 591C     		adds	r1, r3, #1
 28094 1032 3FF432AF 		beq	.L3308
1020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->free_clust--;
 28095              		.loc 1 1020 0
 28096 1036 013B     		subs	r3, r3, #1
 28097 1038 2361     		str	r3, [r4, #16]
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
 28098              		.loc 1 1021 0
 28099 103a 0123     		movs	r3, #1
 28100 103c 6371     		strb	r3, [r4, #5]
 28101              	.LVL3623:
 28102              	.LBE2733:
 28103              	.LBE2828:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 28104              		.loc 1 2515 0
 28105 103e 002F     		cmp	r7, #0
 28106 1040 7FF4F9AE 		bne	.L3355
 28107 1044 2BE7     		b	.L3672
 28108              	.LVL3624:
 28109              	.L3319:
 28110              	.LBB2829:
 28111              	.LBB2734:
 28112              	.LBB2727:
 28113              	.LBB2714:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28114              		.loc 1 841 0
 28115 1046 236A     		ldr	r3, [r4, #32]
 28116              	.LBB2693:
 28117              	.LBB2694:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28118              		.loc 1 727 0
 28119 1048 E56A     		ldr	r5, [r4, #44]
 28120              	.LBE2694:
 28121              	.LBE2693:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28122              		.loc 1 841 0
 28123 104a 03EB1723 		add	r3, r3, r7, lsr #8
 28124              	.LBB2702:
 28125              	.LBB2698:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28126              		.loc 1 728 0
 28127 104e AB42     		cmp	r3, r5
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28128              		.loc 1 727 0
 28129 1050 0A95     		str	r5, [sp, #40]
 28130              	.LBE2698:
 28131              	.LBE2702:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28132              		.loc 1 841 0
 28133 1052 0393     		str	r3, [sp, #12]
 28134              	.LVL3625:
 28135              	.LBB2703:
 28136              	.LBB2699:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28137              		.loc 1 728 0
 28138 1054 07D0     		beq	.L3451
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28139              		.loc 1 730 0
 28140 1056 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 28141              	.LVL3626:
 28142 1058 002B     		cmp	r3, #0
 28143 105a 40F03782 		bne	.L3335
 28144              	.LVL3627:
 28145              	.L3337:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28146              		.loc 1 743 0
 28147 105e 039D     		ldr	r5, [sp, #12]
 28148 1060 002D     		cmp	r5, #0
 28149 1062 40F09B81 		bne	.L3887
 28150              	.L3451:
 28151              	.LBE2699:
 28152              	.LBE2703:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 28153              		.loc 1 842 0
 28154 1066 3B06     		lsls	r3, r7, #24
 28155 1068 DB0D     		lsrs	r3, r3, #23
 28156              	.LVL3628:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 28157              		.loc 1 843 0
 28158 106a E218     		adds	r2, r4, r3
 28159 106c 1346     		mov	r3, r2
 28160              	.LVL3629:
 28161 106e 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 28162 1072 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 28163 1076 42EA0323 		orr	r3, r2, r3, lsl #8
 28164 107a 98E7     		b	.L3333
 28165              	.LVL3630:
 28166              	.L3788:
 28167 107c 039F     		ldr	r7, [sp, #12]
 28168 107e 0AE7     		b	.L3271
 28169              	.LVL3631:
 28170              	.L3876:
 28171              	.LBE2714:
 28172              	.LBE2727:
 28173              	.LBE2734:
 28174              	.LBE2829:
 28175              	.LBE2846:
 28176              	.LBE2883:
 28177              	.LBE2899:
 28178              	.LBE3054:
 28179              	.LBB3055:
 28180              	.LBB3040:
 28181              	.LBB3028:
 28182              	.LBB3016:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 28183              		.loc 1 2506 0
 28184 1080 3146     		mov	r1, r6
 28185 1082 2046     		mov	r0, r4
 28186 1084 234B     		ldr	r3, .L3932+8
 28187              	.LVL3632:
 28188 1086 9847     		blx	r3
 28189              	.LVL3633:
 28190 1088 0646     		mov	r6, r0
 28191              	.LVL3634:
 28192 108a CAF81000 		str	r0, [sl, #16]
 28193              	.LVL3635:
 28194              	.L3379:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 28195              		.loc 1 2515 0
 28196 108e 002E     		cmp	r6, #0
 28197 1090 7FF44AAF 		bne	.L3421
 28198              	.LVL3636:
 28199              	.L3674:
 28200 1094 DAF80810 		ldr	r1, [sl, #8]
 28201 1098 DAF80C70 		ldr	r7, [sl, #12]
 28202 109c 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 28203              	.L3827:
 28204 10a0 0023     		movs	r3, #0
 28205 10a2 7BE6     		b	.L3374
 28206              	.LVL3637:
 28207              	.L3879:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 28208              		.loc 1 2561 0
 28209 10a4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 28210 10a6 194C     		ldr	r4, .L3932
 28211              	.LVL3638:
 28212 10a8 0AF12401 		add	r1, sl, #36
 28213 10ac 3246     		mov	r2, r6
 28214 10ae 0123     		movs	r3, #1
 28215              	.LVL3639:
 28216 10b0 A047     		blx	r4
 28217              	.LVL3640:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 28218              		.loc 1 2560 0
 28219 10b2 0028     		cmp	r0, #0
 28220 10b4 40F0A786 		bne	.L3431
 28221 10b8 DAF80810 		ldr	r1, [sl, #8]
 28222 10bc DAF80C70 		ldr	r7, [sl, #12]
 28223 10c0 9AF80650 		ldrb	r5, [sl, #6]	@ zero_extendqisi2
 28224 10c4 59E6     		b	.L3430
 28225              	.LVL3641:
 28226              	.L3275:
 28227              	.LBE3016:
 28228              	.LBE3028:
 28229              	.LBE3040:
 28230              	.LBE3055:
 28231              	.LBB3056:
 28232              	.LBB2900:
 28233              	.LBB2884:
 28234              	.LBB2847:
 28235              	.LBB2830:
 28236              	.LBB2820:
 28237              	.LBB2810:
 28238              	.LBB2802:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28239              		.loc 1 841 0
 28240 10c6 236A     		ldr	r3, [r4, #32]
 28241              	.LBB2745:
 28242              	.LBB2746:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28243              		.loc 1 727 0
 28244 10c8 E06A     		ldr	r0, [r4, #44]
 28245              	.LBE2746:
 28246              	.LBE2745:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28247              		.loc 1 841 0
 28248 10ca 03EB1623 		add	r3, r3, r6, lsr #8
 28249              	.LBB2754:
 28250              	.LBB2750:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28251              		.loc 1 728 0
 28252 10ce 8342     		cmp	r3, r0
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28253              		.loc 1 727 0
 28254 10d0 0A90     		str	r0, [sp, #40]
 28255              	.LBE2750:
 28256              	.LBE2754:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28257              		.loc 1 841 0
 28258 10d2 0493     		str	r3, [sp, #16]
 28259              	.LVL3642:
 28260              	.LBB2755:
 28261              	.LBB2751:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28262              		.loc 1 728 0
 28263 10d4 07D0     		beq	.L3447
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28264              		.loc 1 730 0
 28265 10d6 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 28266              	.LVL3643:
 28267 10d8 002B     		cmp	r3, #0
 28268 10da 40F04F82 		bne	.L3291
 28269              	.LVL3644:
 28270              	.L3293:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28271              		.loc 1 743 0
 28272 10de 049F     		ldr	r7, [sp, #16]
 28273 10e0 002F     		cmp	r7, #0
 28274 10e2 40F02382 		bne	.L3888
 28275              	.L3447:
 28276              	.LBE2751:
 28277              	.LBE2755:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 28278              		.loc 1 842 0
 28279 10e6 3306     		lsls	r3, r6, #24
 28280 10e8 DB0D     		lsrs	r3, r3, #23
 28281              	.LVL3645:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 28282              		.loc 1 843 0
 28283 10ea E218     		adds	r2, r4, r3
 28284 10ec 1346     		mov	r3, r2
 28285              	.LVL3646:
 28286 10ee 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 28287 10f2 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 28288 10f6 42EA0323 		orr	r3, r2, r3, lsl #8
 28289              	.LVL3647:
 28290              	.L3289:
 28291              	.LBE2802:
 28292              	.LBE2810:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 28293              		.loc 1 1007 0
 28294 10fa 002B     		cmp	r3, #0
 28295 10fc 49D0     		beq	.L3889
 28296              	.L3739:
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 28297              		.loc 1 1008 0
 28298 10fe 012B     		cmp	r3, #1
 28299 1100 3FF4D7AE 		beq	.L3545
1010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
 28300              		.loc 1 1010 0
 28301 1104 B542     		cmp	r5, r6
 28302 1106 B9D0     		beq	.L3788
 28303 1108 A369     		ldr	r3, [r4, #24]
 28304 110a AFE6     		b	.L3303
 28305              	.L3933:
 28306              		.align	2
 28307              	.L3932:
 28308 110c 00000000 		.word	disk_read
 28309 1110 00000000 		.word	put_fat.part.4
 28310 1114 00000000 		.word	create_chain
 28311              	.L3881:
 28312              	.LVL3648:
 28313              	.LBB2811:
 28314              	.LBB2803:
 28315              	.LBB2756:
 28316              	.LBB2757:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28317              		.loc 1 727 0
 28318 1118 E76A     		ldr	r7, [r4, #44]
 28319              	.LBE2757:
 28320              	.LBE2756:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28321              		.loc 1 834 0
 28322 111a 226A     		ldr	r2, [r4, #32]
 28323              	.LBB2766:
 28324              	.LBB2761:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28325              		.loc 1 727 0
 28326 111c 0B97     		str	r7, [sp, #44]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28327              		.loc 1 728 0
 28328 111e 0B98     		ldr	r0, [sp, #44]
 28329              	.LBE2761:
 28330              	.LBE2766:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 28331              		.loc 1 833 0
 28332 1120 06EB5607 		add	r7, r6, r6, lsr #1
 28333 1124 0697     		str	r7, [sp, #24]
 28334              	.LVL3649:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28335              		.loc 1 834 0
 28336 1126 02EB5727 		add	r7, r2, r7, lsr #9
 28337              	.LVL3650:
 28338              	.LBB2767:
 28339              	.LBB2762:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28340              		.loc 1 728 0
 28341 112a 8742     		cmp	r7, r0
 28342              	.LBE2762:
 28343              	.LBE2767:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28344              		.loc 1 834 0
 28345 112c 0497     		str	r7, [sp, #16]
 28346              	.LVL3651:
 28347              	.LBB2768:
 28348              	.LBB2763:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28349              		.loc 1 728 0
 28350 112e 0AD0     		beq	.L3445
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28351              		.loc 1 730 0
 28352 1130 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 28353 1132 002A     		cmp	r2, #0
 28354 1134 40F05382 		bne	.L3278
 28355              	.LVL3652:
 28356              	.L3281:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28357              		.loc 1 743 0
 28358 1138 049F     		ldr	r7, [sp, #16]
 28359 113a 002F     		cmp	r7, #0
 28360 113c 40F00382 		bne	.L3890
 28361 1140 E76A     		ldr	r7, [r4, #44]
 28362 1142 226A     		ldr	r2, [r4, #32]
 28363 1144 0497     		str	r7, [sp, #16]
 28364              	.L3445:
 28365              	.LBE2763:
 28366              	.LBE2768:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 28367              		.loc 1 835 0
 28368 1146 069F     		ldr	r7, [sp, #24]
 28369 1148 FB05     		lsls	r3, r7, #23
 28370 114a DB0D     		lsrs	r3, r3, #23
 28371 114c 0137     		adds	r7, r7, #1
 28372 114e E318     		adds	r3, r4, r3
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28373              		.loc 1 836 0
 28374 1150 02EB5722 		add	r2, r2, r7, lsr #9
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 28375              		.loc 1 835 0
 28376 1154 0997     		str	r7, [sp, #36]
 28377              	.LBB2769:
 28378              	.LBB2770:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28379              		.loc 1 728 0
 28380 1156 049F     		ldr	r7, [sp, #16]
 28381              	.LBE2770:
 28382              	.LBE2769:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 28383              		.loc 1 835 0
 28384 1158 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28385              		.loc 1 836 0
 28386 115c 0692     		str	r2, [sp, #24]
 28387              	.LBB2778:
 28388              	.LBB2774:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28389              		.loc 1 728 0
 28390 115e 9742     		cmp	r7, r2
 28391              	.LBE2774:
 28392              	.LBE2778:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 28393              		.loc 1 835 0
 28394 1160 0B93     		str	r3, [sp, #44]
 28395              	.LVL3653:
 28396              	.LBB2779:
 28397              	.LBB2775:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28398              		.loc 1 728 0
 28399 1162 07D0     		beq	.L3446
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28400              		.loc 1 730 0
 28401 1164 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 28402 1166 002B     		cmp	r3, #0
 28403 1168 40F05784 		bne	.L3284
 28404              	.LVL3654:
 28405              	.L3286:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28406              		.loc 1 743 0
 28407 116c 069F     		ldr	r7, [sp, #24]
 28408 116e 002F     		cmp	r7, #0
 28409 1170 40F0FD83 		bne	.L3891
 28410              	.L3446:
 28411              	.LBE2775:
 28412              	.LBE2779:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 28413              		.loc 1 837 0
 28414 1174 099F     		ldr	r7, [sp, #36]
 28415 1176 FB05     		lsls	r3, r7, #23
 28416 1178 DB0D     		lsrs	r3, r3, #23
 28417 117a E318     		adds	r3, r4, r3
 28418 117c 0B9F     		ldr	r7, [sp, #44]
 28419 117e 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 28420              		.loc 1 838 0
 28421 1182 F207     		lsls	r2, r6, #31
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 28422              		.loc 1 837 0
 28423 1184 47EA0323 		orr	r3, r7, r3, lsl #8
 28424              	.LVL3655:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 28425              		.loc 1 838 0
 28426 1188 40F19E86 		bpl	.L3288
 28427 118c 1B09     		lsrs	r3, r3, #4
 28428              	.LVL3656:
 28429              	.LBE2803:
 28430              	.LBE2811:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 28431              		.loc 1 1007 0
 28432 118e 002B     		cmp	r3, #0
 28433 1190 B5D1     		bne	.L3739
 28434              	.LVL3657:
 28435              	.L3889:
 28436              	.LBB2812:
 28437              	.LBB2813:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 28438              		.loc 1 873 0
 28439 1192 A369     		ldr	r3, [r4, #24]
 28440 1194 B342     		cmp	r3, r6
 28441 1196 7FF68CAE 		bls	.L3545
 28442 119a 2046     		mov	r0, r4
 28443 119c 3146     		mov	r1, r6
 28444 119e 6FF07042 		mvn	r2, #-268435456
 28445 11a2 AD4B     		ldr	r3, .L3934
 28446 11a4 9847     		blx	r3
 28447              	.LVL3658:
 28448              	.LBE2813:
 28449              	.LBE2812:
1017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 28450              		.loc 1 1017 0
 28451 11a6 0028     		cmp	r0, #0
 28452 11a8 40F09E87 		bne	.L3305
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 28453              		.loc 1 1019 0
 28454 11ac 2369     		ldr	r3, [r4, #16]
1018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 28455              		.loc 1 1018 0
 28456 11ae E660     		str	r6, [r4, #12]
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 28457              		.loc 1 1019 0
 28458 11b0 5F1C     		adds	r7, r3, #1
 28459 11b2 00F09986 		beq	.L3546
1020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->free_clust--;
 28460              		.loc 1 1020 0
 28461 11b6 013B     		subs	r3, r3, #1
 28462 11b8 2361     		str	r3, [r4, #16]
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
 28463              		.loc 1 1021 0
 28464 11ba 0123     		movs	r3, #1
 28465 11bc 6371     		strb	r3, [r4, #5]
 28466 11be 3746     		mov	r7, r6
 28467 11c0 69E6     		b	.L3271
 28468              	.LVL3659:
 28469              	.L3276:
 28470              	.LBB2814:
 28471              	.LBB2804:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28472              		.loc 1 846 0
 28473 11c2 236A     		ldr	r3, [r4, #32]
 28474              	.LBB2780:
 28475              	.LBB2781:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28476              		.loc 1 727 0
 28477 11c4 E06A     		ldr	r0, [r4, #44]
 28478              	.LBE2781:
 28479              	.LBE2780:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28480              		.loc 1 846 0
 28481 11c6 03EBD613 		add	r3, r3, r6, lsr #7
 28482              	.LBB2789:
 28483              	.LBB2785:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28484              		.loc 1 728 0
 28485 11ca 8342     		cmp	r3, r0
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28486              		.loc 1 727 0
 28487 11cc 0A90     		str	r0, [sp, #40]
 28488              	.LBE2785:
 28489              	.LBE2789:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28490              		.loc 1 846 0
 28491 11ce 0493     		str	r3, [sp, #16]
 28492              	.LVL3660:
 28493              	.LBB2790:
 28494              	.LBB2786:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28495              		.loc 1 728 0
 28496 11d0 07D0     		beq	.L3448
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28497              		.loc 1 730 0
 28498 11d2 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 28499              	.LVL3661:
 28500 11d4 002B     		cmp	r3, #0
 28501 11d6 40F03282 		bne	.L3296
 28502              	.LVL3662:
 28503              	.L3298:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28504              		.loc 1 743 0
 28505 11da 049F     		ldr	r7, [sp, #16]
 28506 11dc 002F     		cmp	r7, #0
 28507 11de 40F0C081 		bne	.L3892
 28508              	.L3448:
 28509              	.LVL3663:
 28510              	.LBE2786:
 28511              	.LBE2790:
 28512              	.LBB2791:
 28513              	.LBB2792:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 28514              		.loc 1 847 0
 28515 11e2 7206     		lsls	r2, r6, #25
 28516 11e4 D20D     		lsrs	r2, r2, #23
 28517 11e6 02F13003 		add	r3, r2, #48
 28518 11ea E318     		adds	r3, r4, r3
 28519              	.LVL3664:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 28520              		.loc 1 848 0
 28521 11ec A718     		adds	r7, r4, r2
 28522 11ee DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 28523 11f0 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 28524 11f2 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 28525 11f4 97F83030 		ldrb	r3, [r7, #48]	@ zero_extendqisi2
 28526              	.LVL3665:
 28527 11f8 1206     		lsls	r2, r2, #24
 28528 11fa 42EA0042 		orr	r2, r2, r0, lsl #16
 28529 11fe 42EA0122 		orr	r2, r2, r1, lsl #8
 28530 1202 1343     		orrs	r3, r3, r2
 28531 1204 23F07043 		bic	r3, r3, #-268435456
 28532 1208 77E7     		b	.L3289
 28533              	.LVL3666:
 28534              	.L3267:
 28535              	.LBE2792:
 28536              	.LBE2791:
 28537              	.LBE2804:
 28538              	.LBE2814:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 28539              		.loc 1 990 0
 28540 120a 9C45     		cmp	ip, r3
 28541 120c 28BF     		it	cs
 28542 120e 4FF0010C 		movcs	ip, #1
 28543              	.LVL3667:
 28544 1212 28E6     		b	.L3268
 28545              	.LVL3668:
 28546              	.L3310:
 28547              	.LBE2820:
 28548              	.LBE2830:
 28549              	.LBB2831:
 28550              	.LBB2735:
 28551 1214 9E42     		cmp	r6, r3
 28552 1216 28BF     		it	cs
 28553 1218 0126     		movcs	r6, #1
 28554              	.LVL3669:
 28555 121a F7E5     		b	.L3311
 28556              	.LVL3670:
 28557              	.L3882:
 28558              	.LBE2735:
 28559              	.LBE2831:
 28560              	.LBE2847:
 28561              	.LBE2884:
 28562              	.LBE2900:
 28563              	.LBE3056:
 28564              	.LBB3057:
 28565              	.LBB3041:
 28566              	.LBB3029:
 28567              	.LBB3017:
 28568              	.LBB3005:
 28569              	.LBB2998:
 28570              	.LBB2988:
 28571              	.LBB2977:
 28572              	.LBB2935:
 28573              	.LBB2936:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28574              		.loc 1 727 0
 28575 121c E76A     		ldr	r7, [r4, #44]
 28576              	.LBE2936:
 28577              	.LBE2935:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28578              		.loc 1 834 0
 28579 121e 216A     		ldr	r1, [r4, #32]
 28580              	.LBB2945:
 28581              	.LBB2940:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28582              		.loc 1 727 0
 28583 1220 0397     		str	r7, [sp, #12]
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28584              		.loc 1 728 0
 28585 1222 0398     		ldr	r0, [sp, #12]
 28586              	.LBE2940:
 28587              	.LBE2945:
 833:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 28588              		.loc 1 833 0
 28589 1224 06EB5607 		add	r7, r6, r6, lsr #1
 28590 1228 0797     		str	r7, [sp, #28]
 28591              	.LVL3671:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28592              		.loc 1 834 0
 28593 122a 01EB5727 		add	r7, r1, r7, lsr #9
 28594              	.LVL3672:
 28595              	.LBB2946:
 28596              	.LBB2941:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28597              		.loc 1 728 0
 28598 122e 8742     		cmp	r7, r0
 28599              	.LBE2941:
 28600              	.LBE2946:
 834:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28601              		.loc 1 834 0
 28602 1230 0597     		str	r7, [sp, #20]
 28603              	.LVL3673:
 28604              	.LBB2947:
 28605              	.LBB2942:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28606              		.loc 1 728 0
 28607 1232 08D0     		beq	.L3454
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28608              		.loc 1 730 0
 28609 1234 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 28610 1236 002A     		cmp	r2, #0
 28611 1238 40F0D482 		bne	.L3393
 28612              	.LVL3674:
 28613              	.L3396:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28614              		.loc 1 743 0
 28615 123c 059F     		ldr	r7, [sp, #20]
 28616 123e 002F     		cmp	r7, #0
 28617 1240 40F03E82 		bne	.L3893
 28618 1244 216A     		ldr	r1, [r4, #32]
 28619              	.L3454:
 28620              	.LBE2942:
 28621              	.LBE2947:
 835:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 28622              		.loc 1 835 0
 28623 1246 079F     		ldr	r7, [sp, #28]
 28624 1248 FB05     		lsls	r3, r7, #23
 28625 124a DB0D     		lsrs	r3, r3, #23
 28626 124c E218     		adds	r2, r4, r3
 28627 124e 7B1C     		adds	r3, r7, #1
 28628 1250 92F830C0 		ldrb	ip, [r2, #48]	@ zero_extendqisi2
 28629              	.LVL3675:
 836:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 28630              		.loc 1 836 0
 28631 1254 0293     		str	r3, [sp, #8]
 28632 1256 01EB5321 		add	r1, r1, r3, lsr #9
 28633 125a CDF804C0 		str	ip, [sp, #4]
 28634 125e 2046     		mov	r0, r4
 28635 1260 7E4A     		ldr	r2, .L3934+4
 28636 1262 9047     		blx	r2
 28637              	.LVL3676:
 28638 1264 029B     		ldr	r3, [sp, #8]
 28639 1266 DDF804C0 		ldr	ip, [sp, #4]
 28640 126a 0028     		cmp	r0, #0
 28641 126c 7FF459AE 		bne	.L3819
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 28642              		.loc 1 837 0
 28643 1270 DB05     		lsls	r3, r3, #23
 28644 1272 DB0D     		lsrs	r3, r3, #23
 28645 1274 E318     		adds	r3, r4, r3
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 28646              		.loc 1 838 0
 28647 1276 F707     		lsls	r7, r6, #31
 28648              	.LVL3677:
 837:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 28649              		.loc 1 837 0
 28650 1278 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 28651 127c 4CEA0323 		orr	r3, ip, r3, lsl #8
 28652              	.LVL3678:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 28653              		.loc 1 838 0
 28654 1280 40F12E86 		bpl	.L3398
 28655 1284 1B09     		lsrs	r3, r3, #4
 28656              	.LVL3679:
 28657              	.L3399:
 28658              	.LBE2977:
 28659              	.LBE2988:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 28660              		.loc 1 1007 0
 28661 1286 6BB3     		cbz	r3, .L3894
 28662              	.L3752:
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 28663              		.loc 1 1008 0
 28664 1288 012B     		cmp	r3, #1
 28665 128a 3FF452AE 		beq	.L3820
1010:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
 28666              		.loc 1 1010 0
 28667 128e B542     		cmp	r5, r6
 28668 1290 3FF400AF 		beq	.L3674
 28669 1294 A369     		ldr	r3, [r4, #24]
 28670 1296 31E6     		b	.L3414
 28671              	.L3391:
 28672              	.LBB2989:
 28673              	.LBB2978:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28674              		.loc 1 846 0
 28675 1298 236A     		ldr	r3, [r4, #32]
 28676              	.LBB2948:
 28677              	.LBB2949:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28678              		.loc 1 727 0
 28679 129a E06A     		ldr	r0, [r4, #44]
 28680              	.LBE2949:
 28681              	.LBE2948:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28682              		.loc 1 846 0
 28683 129c 03EBD613 		add	r3, r3, r6, lsr #7
 28684              	.LBB2957:
 28685              	.LBB2953:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28686              		.loc 1 728 0
 28687 12a0 8342     		cmp	r3, r0
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28688              		.loc 1 727 0
 28689 12a2 0390     		str	r0, [sp, #12]
 28690              	.LBE2953:
 28691              	.LBE2957:
 846:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 28692              		.loc 1 846 0
 28693 12a4 0593     		str	r3, [sp, #20]
 28694              	.LVL3680:
 28695              	.LBB2958:
 28696              	.LBB2954:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28697              		.loc 1 728 0
 28698 12a6 07D0     		beq	.L3456
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28699              		.loc 1 730 0
 28700 12a8 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 28701              	.LVL3681:
 28702 12aa 002B     		cmp	r3, #0
 28703 12ac 40F0CA82 		bne	.L3406
 28704              	.LVL3682:
 28705              	.L3408:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28706              		.loc 1 743 0
 28707 12b0 059F     		ldr	r7, [sp, #20]
 28708 12b2 002F     		cmp	r7, #0
 28709 12b4 40F01882 		bne	.L3895
 28710              	.L3456:
 28711              	.LVL3683:
 28712              	.LBE2954:
 28713              	.LBE2958:
 28714              	.LBB2959:
 28715              	.LBB2960:
 847:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 28716              		.loc 1 847 0
 28717 12b8 7206     		lsls	r2, r6, #25
 28718 12ba D20D     		lsrs	r2, r2, #23
 28719 12bc 02F13003 		add	r3, r2, #48
 28720 12c0 E318     		adds	r3, r4, r3
 28721              	.LVL3684:
 848:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 28722              		.loc 1 848 0
 28723 12c2 04EB020C 		add	ip, r4, r2
 28724 12c6 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 28725 12c8 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 28726 12ca 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 28727 12cc 9CF83030 		ldrb	r3, [ip, #48]	@ zero_extendqisi2
 28728              	.LVL3685:
 28729 12d0 1206     		lsls	r2, r2, #24
 28730 12d2 42EA0042 		orr	r2, r2, r0, lsl #16
 28731 12d6 42EA0122 		orr	r2, r2, r1, lsl #8
 28732 12da 1343     		orrs	r3, r3, r2
 28733 12dc 23F07043 		bic	r3, r3, #-268435456
 28734              	.LBE2960:
 28735              	.LBE2959:
 28736              	.LBE2978:
 28737              	.LBE2989:
1007:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 28738              		.loc 1 1007 0
 28739 12e0 002B     		cmp	r3, #0
 28740 12e2 D1D1     		bne	.L3752
 28741              	.LVL3686:
 28742              	.L3894:
 28743              	.LBB2990:
 28744              	.LBB2991:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 28745              		.loc 1 873 0
 28746 12e4 A369     		ldr	r3, [r4, #24]
 28747 12e6 0B9F     		ldr	r7, [sp, #44]
 28748              	.LVL3687:
 28749 12e8 B342     		cmp	r3, r6
 28750 12ea 7FF623AE 		bls	.L3577
 28751 12ee 2046     		mov	r0, r4
 28752 12f0 3146     		mov	r1, r6
 28753 12f2 6FF07042 		mvn	r2, #-268435456
 28754 12f6 584D     		ldr	r5, .L3934
 28755 12f8 A847     		blx	r5
 28756              	.LVL3688:
 28757              	.LBE2991:
 28758              	.LBE2990:
1014:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK && clst != 0) {
 28759              		.loc 1 1014 0
 28760 12fa 0028     		cmp	r0, #0
 28761 12fc 40F0C585 		bne	.L3419
 28762 1300 0498     		ldr	r0, [sp, #16]
 28763              	.LVL3689:
 28764 1302 0028     		cmp	r0, #0
 28765 1304 40F0B385 		bne	.L3416
 28766              	.L3418:
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 28767              		.loc 1 1019 0
 28768 1308 2369     		ldr	r3, [r4, #16]
1018:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 28769              		.loc 1 1018 0
 28770 130a E660     		str	r6, [r4, #12]
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 28771              		.loc 1 1019 0
 28772 130c 581C     		adds	r0, r3, #1
 28773 130e 3FF4BEAE 		beq	.L3379
1020:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->free_clust--;
 28774              		.loc 1 1020 0
 28775 1312 013B     		subs	r3, r3, #1
 28776 1314 2361     		str	r3, [r4, #16]
1021:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->fsi_flag = 1;
 28777              		.loc 1 1021 0
 28778 1316 0123     		movs	r3, #1
 28779 1318 6371     		strb	r3, [r4, #5]
 28780              	.LVL3690:
 28781              	.LBE2998:
 28782              	.LBE3005:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 28783              		.loc 1 2515 0
 28784 131a 002E     		cmp	r6, #0
 28785 131c 7FF404AE 		bne	.L3421
 28786 1320 B8E6     		b	.L3674
 28787              	.LVL3691:
 28788              	.L3390:
 28789              	.LBB3006:
 28790              	.LBB2999:
 28791              	.LBB2992:
 28792              	.LBB2979:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28793              		.loc 1 841 0
 28794 1322 236A     		ldr	r3, [r4, #32]
 28795              	.LBB2961:
 28796              	.LBB2962:
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28797              		.loc 1 727 0
 28798 1324 E06A     		ldr	r0, [r4, #44]
 28799              	.LBE2962:
 28800              	.LBE2961:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28801              		.loc 1 841 0
 28802 1326 03EB1623 		add	r3, r3, r6, lsr #8
 28803              	.LBB2969:
 28804              	.LBB2966:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28805              		.loc 1 728 0
 28806 132a 8342     		cmp	r3, r0
 727:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	wsect = fs->winsect;
 28807              		.loc 1 727 0
 28808 132c 0390     		str	r0, [sp, #12]
 28809              	.LBE2966:
 28810              	.LBE2969:
 841:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 28811              		.loc 1 841 0
 28812 132e 0593     		str	r3, [sp, #20]
 28813              	.LVL3692:
 28814              	.LBB2970:
 28815              	.LBB2967:
 728:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (wsect != sector) {	/* Changed current window */
 28816              		.loc 1 728 0
 28817 1330 07D0     		beq	.L3455
 730:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->wflag) {	/* Write back dirty window if needed */
 28818              		.loc 1 730 0
 28819 1332 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 28820              	.LVL3693:
 28821 1334 002B     		cmp	r3, #0
 28822 1336 40F0F381 		bne	.L3401
 28823              	.LVL3694:
 28824              	.L3403:
 743:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (sector) {
 28825              		.loc 1 743 0
 28826 133a 059F     		ldr	r7, [sp, #20]
 28827 133c 002F     		cmp	r7, #0
 28828 133e 40F0E181 		bne	.L3896
 28829              	.L3455:
 28830              	.LBE2967:
 28831              	.LBE2970:
 842:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 28832              		.loc 1 842 0
 28833 1342 3306     		lsls	r3, r6, #24
 28834 1344 DB0D     		lsrs	r3, r3, #23
 28835              	.LVL3695:
 843:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return LD_WORD(p);
 28836              		.loc 1 843 0
 28837 1346 E218     		adds	r2, r4, r3
 28838 1348 1346     		mov	r3, r2
 28839              	.LVL3696:
 28840 134a 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 28841 134e 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 28842 1352 42EA0323 		orr	r3, r2, r3, lsl #8
 28843 1356 96E7     		b	.L3399
 28844              	.LVL3697:
 28845              	.L3309:
 28846 1358 2946     		mov	r1, r5
 28847              	.LBE2979:
 28848              	.LBE2992:
 28849              	.LBE2999:
 28850              	.LBE3006:
 28851              	.LBE3017:
 28852              	.LBE3029:
 28853              	.LBE3041:
 28854              	.LBE3057:
 28855              	.LBB3058:
 28856              	.LBB2901:
 28857              	.LBB2885:
 28858              	.LBB2848:
 28859              	.LBB2832:
 28860              	.LBB2736:
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 28861              		.loc 1 993 0
 28862 135a 2046     		mov	r0, r4
 28863 135c 404B     		ldr	r3, .L3934+8
 28864              	.LVL3698:
 28865 135e 9847     		blx	r3
 28866              	.LVL3699:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 28867              		.loc 1 994 0
 28868 1360 0128     		cmp	r0, #1
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 28869              		.loc 1 993 0
 28870 1362 0746     		mov	r7, r0
 28871              	.LVL3700:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 28872              		.loc 1 994 0
 28873 1364 7FF66CAD 		bls	.L3561
 995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 28874              		.loc 1 995 0
 28875 1368 A369     		ldr	r3, [r4, #24]
 28876 136a 9842     		cmp	r0, r3
 28877 136c FFF495AD 		bcc	.L3308
 28878 1370 049E     		ldr	r6, [sp, #16]
 28879 1372 4BE5     		b	.L3311
 28880              	.LVL3701:
 28881              	.L3381:
 28882              	.LBE2736:
 28883              	.LBE2832:
 28884              	.LBE2848:
 28885              	.LBE2885:
 28886              	.LBE2901:
 28887              	.LBE3058:
 28888              	.LBB3059:
 28889              	.LBB3042:
 28890              	.LBB3030:
 28891              	.LBB3018:
 28892              	.LBB3007:
 28893              	.LBB3000:
 990:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 28894              		.loc 1 990 0
 28895 1374 9C45     		cmp	ip, r3
 28896 1376 28BF     		it	cs
 28897 1378 4FF0010C 		movcs	ip, #1
 28898              	.LVL3702:
 28899 137c BBE5     		b	.L3382
 28900              	.LVL3703:
 28901              	.L3380:
 28902 137e 2946     		mov	r1, r5
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 28903              		.loc 1 993 0
 28904 1380 2046     		mov	r0, r4
 28905 1382 374B     		ldr	r3, .L3934+8
 28906              	.LVL3704:
 28907 1384 9847     		blx	r3
 28908              	.LVL3705:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 28909              		.loc 1 994 0
 28910 1386 0128     		cmp	r0, #1
 993:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
 28911              		.loc 1 993 0
 28912 1388 0646     		mov	r6, r0
 28913              	.LVL3706:
 994:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < 2) return 1;			/* It is an invalid cluster */
 28914              		.loc 1 994 0
 28915 138a 7FF6D3AD 		bls	.L3577
 995:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 28916              		.loc 1 995 0
 28917 138e A369     		ldr	r3, [r4, #24]
 28918 1390 9842     		cmp	r0, r3
 28919 1392 FFF47CAE 		bcc	.L3379
 28920 1396 DDF810C0 		ldr	ip, [sp, #16]
 28921 139a ACE5     		b	.L3382
 28922              	.LVL3707:
 28923              	.L3887:
 28924              	.LBE3000:
 28925              	.LBE3007:
 28926              	.LBE3018:
 28927              	.LBE3030:
 28928              	.LBE3042:
 28929              	.LBE3059:
 28930              	.LBB3060:
 28931              	.LBB2902:
 28932              	.LBB2886:
 28933              	.LBB2849:
 28934              	.LBB2833:
 28935              	.LBB2737:
 28936              	.LBB2728:
 28937              	.LBB2715:
 28938              	.LBB2704:
 28939              	.LBB2700:
 28940              	.LBB2695:
 28941              	.LBB2696:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 28942              		.loc 1 744 0
 28943 139c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 28944 139e 039A     		ldr	r2, [sp, #12]
 28945 13a0 304D     		ldr	r5, .L3934+12
 28946 13a2 04F13001 		add	r1, r4, #48
 28947 13a6 0123     		movs	r3, #1
 28948 13a8 A847     		blx	r5
 28949              	.LVL3708:
 28950 13aa 0028     		cmp	r0, #0
 28951 13ac 7FF441AD 		bne	.L3354
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 28952              		.loc 1 746 0
 28953 13b0 039D     		ldr	r5, [sp, #12]
 28954 13b2 E562     		str	r5, [r4, #44]
 28955 13b4 57E6     		b	.L3451
 28956              	.LVL3709:
 28957              	.L3883:
 28958              	.LBE2696:
 28959              	.LBE2695:
 28960              	.LBE2700:
 28961              	.LBE2704:
 28962              	.LBB2705:
 28963              	.LBB2665:
 28964              	.LBB2659:
 28965              	.LBB2660:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 28966              		.loc 1 744 0
 28967 13b6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 28968 13b8 0B9A     		ldr	r2, [sp, #44]
 28969 13ba DFF8A8C0 		ldr	ip, .L3934+12
 28970 13be 04F13001 		add	r1, r4, #48
 28971 13c2 0123     		movs	r3, #1
 28972 13c4 E047     		blx	ip
 28973              	.LVL3710:
 28974 13c6 0028     		cmp	r0, #0
 28975 13c8 7FF433AD 		bne	.L3354
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 28976              		.loc 1 746 0
 28977 13cc 0B9D     		ldr	r5, [sp, #44]
 28978 13ce 226A     		ldr	r2, [r4, #32]
 28979 13d0 E562     		str	r5, [r4, #44]
 28980 13d2 C8E5     		b	.L3449
 28981              	.LVL3711:
 28982              	.L3886:
 28983              	.LBE2660:
 28984              	.LBE2659:
 28985              	.LBE2665:
 28986              	.LBE2705:
 28987              	.LBB2706:
 28988              	.LBB2687:
 28989              	.LBB2682:
 28990              	.LBB2683:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 28991              		.loc 1 744 0
 28992 13d4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 28993 13d6 039A     		ldr	r2, [sp, #12]
 28994 13d8 224D     		ldr	r5, .L3934+12
 28995 13da 04F13001 		add	r1, r4, #48
 28996 13de 0123     		movs	r3, #1
 28997 13e0 A847     		blx	r5
 28998              	.LVL3712:
 28999 13e2 0028     		cmp	r0, #0
 29000 13e4 7FF425AD 		bne	.L3354
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29001              		.loc 1 746 0
 29002 13e8 039D     		ldr	r5, [sp, #12]
 29003 13ea E562     		str	r5, [r4, #44]
 29004 13ec F8E5     		b	.L3452
 29005              	.LVL3713:
 29006              	.L3322:
 29007              	.LBE2683:
 29008              	.LBE2682:
 29009              	.LBE2687:
 29010              	.LBE2706:
 29011              	.LBB2707:
 29012              	.LBB2666:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29013              		.loc 1 731 0
 29014 13ee 04F13005 		add	r5, r4, #48
 29015              	.LVL3714:
 29016 13f2 0995     		str	r5, [sp, #36]
 29017 13f4 1C4D     		ldr	r5, .L3934+16
 29018 13f6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29019              	.LVL3715:
 29020 13f8 0999     		ldr	r1, [sp, #36]
 29021 13fa 039A     		ldr	r2, [sp, #12]
 29022 13fc 0595     		str	r5, [sp, #20]
 29023 13fe A847     		blx	r5
 29024              	.LVL3716:
 29025 1400 0028     		cmp	r0, #0
 29026 1402 7FF416AD 		bne	.L3354
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29027              		.loc 1 734 0
 29028 1406 E369     		ldr	r3, [r4, #28]
 29029 1408 226A     		ldr	r2, [r4, #32]
 29030 140a 039D     		ldr	r5, [sp, #12]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29031              		.loc 1 733 0
 29032 140c 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29033              		.loc 1 734 0
 29034 140e 9A18     		adds	r2, r3, r2
 29035 1410 9542     		cmp	r5, r2
 29036 1412 BFF4A1AD 		bcs	.L3325
 29037              	.LBB2661:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29038              		.loc 1 736 0
 29039 1416 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29040              	.LVL3717:
 29041 141a BCF1010F 		cmp	ip, #1
 29042 141e 7FF69BAD 		bls	.L3325
 29043 1422 CDF828B0 		str	fp, [sp, #40]
 29044 1426 2546     		mov	r5, r4
 29045              	.LVL3718:
 29046 1428 E346     		mov	fp, ip
 29047 142a 0096     		str	r6, [sp, #0]
 29048 142c 039C     		ldr	r4, [sp, #12]
 29049              	.LVL3719:
 29050 142e 00E0     		b	.L3741
 29051              	.LVL3720:
 29052              	.L3897:
 29053 1430 EB69     		ldr	r3, [r5, #28]
 29054              	.LVL3721:
 29055              	.L3741:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29056              		.loc 1 737 0
 29057 1432 E418     		adds	r4, r4, r3
 29058              	.LVL3722:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29059              		.loc 1 736 0
 29060 1434 0BF1FF3B 		add	fp, fp, #-1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29061              		.loc 1 738 0
 29062 1438 0123     		movs	r3, #1
 29063 143a 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 29064 143c 0999     		ldr	r1, [sp, #36]
 29065 143e 059E     		ldr	r6, [sp, #20]
 29066 1440 2246     		mov	r2, r4
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29067              		.loc 1 736 0
 29068 1442 5FFA8BFB 		uxtb	fp, fp
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29069              		.loc 1 738 0
 29070 1446 B047     		blx	r6
 29071              	.LVL3723:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29072              		.loc 1 736 0
 29073 1448 BBF1010F 		cmp	fp, #1
 29074 144c F0D8     		bhi	.L3897
 29075 144e DDF828B0 		ldr	fp, [sp, #40]
 29076              	.LVL3724:
 29077 1452 009E     		ldr	r6, [sp, #0]
 29078 1454 2C46     		mov	r4, r5
 29079              	.LVL3725:
 29080 1456 7FE5     		b	.L3325
 29081              	.L3935:
 29082              		.align	2
 29083              	.L3934:
 29084 1458 00000000 		.word	put_fat.part.4
 29085 145c 00000000 		.word	move_window
 29086 1460 00000000 		.word	get_fat
 29087 1464 00000000 		.word	disk_read
 29088 1468 00000000 		.word	disk_write
 29089              	.LVL3726:
 29090              	.L3340:
 29091              	.LBE2661:
 29092              	.LBE2666:
 29093              	.LBE2707:
 29094              	.LBB2708:
 29095              	.LBB2688:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29096              		.loc 1 731 0
 29097 146c 04F13005 		add	r5, r4, #48
 29098              	.LVL3727:
 29099 1470 0695     		str	r5, [sp, #24]
 29100 1472 9B4D     		ldr	r5, .L3936
 29101 1474 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29102 1476 0699     		ldr	r1, [sp, #24]
 29103 1478 0A9A     		ldr	r2, [sp, #40]
 29104 147a 0595     		str	r5, [sp, #20]
 29105 147c 0123     		movs	r3, #1
 29106 147e A847     		blx	r5
 29107              	.LVL3728:
 29108 1480 0028     		cmp	r0, #0
 29109 1482 7FF4D6AC 		bne	.L3354
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29110              		.loc 1 734 0
 29111 1486 E369     		ldr	r3, [r4, #28]
 29112 1488 226A     		ldr	r2, [r4, #32]
 29113 148a 0A9D     		ldr	r5, [sp, #40]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29114              		.loc 1 733 0
 29115 148c 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29116              		.loc 1 734 0
 29117 148e 9A18     		adds	r2, r3, r2
 29118 1490 9542     		cmp	r5, r2
 29119 1492 BFF4A1AD 		bcs	.L3342
 29120              	.LBB2684:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29121              		.loc 1 736 0
 29122 1496 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29123              	.LVL3729:
 29124 149a BCF1010F 		cmp	ip, #1
 29125 149e 7FF69BAD 		bls	.L3342
 29126 14a2 0996     		str	r6, [sp, #36]
 29127 14a4 0B97     		str	r7, [sp, #44]
 29128 14a6 2646     		mov	r6, r4
 29129 14a8 6446     		mov	r4, ip
 29130              	.LVL3730:
 29131 14aa 00E0     		b	.L3744
 29132              	.LVL3731:
 29133              	.L3898:
 29134 14ac F369     		ldr	r3, [r6, #28]
 29135              	.LVL3732:
 29136              	.L3744:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29137              		.loc 1 737 0
 29138 14ae ED18     		adds	r5, r5, r3
 29139              	.LVL3733:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29140              		.loc 1 736 0
 29141 14b0 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29142              		.loc 1 738 0
 29143 14b2 0123     		movs	r3, #1
 29144 14b4 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 29145 14b6 0699     		ldr	r1, [sp, #24]
 29146 14b8 059F     		ldr	r7, [sp, #20]
 29147 14ba 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29148              		.loc 1 736 0
 29149 14bc E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29150              		.loc 1 738 0
 29151 14be B847     		blx	r7
 29152              	.LVL3734:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29153              		.loc 1 736 0
 29154 14c0 012C     		cmp	r4, #1
 29155 14c2 F3D8     		bhi	.L3898
 29156 14c4 3446     		mov	r4, r6
 29157              	.LVL3735:
 29158 14c6 0B9F     		ldr	r7, [sp, #44]
 29159 14c8 099E     		ldr	r6, [sp, #36]
 29160              	.LVL3736:
 29161 14ca 85E5     		b	.L3342
 29162              	.LVL3737:
 29163              	.L3335:
 29164              	.LBE2684:
 29165              	.LBE2688:
 29166              	.LBE2708:
 29167              	.LBB2709:
 29168              	.LBB2701:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29169              		.loc 1 731 0
 29170 14cc 04F13005 		add	r5, r4, #48
 29171              	.LVL3738:
 29172 14d0 0695     		str	r5, [sp, #24]
 29173 14d2 834D     		ldr	r5, .L3936
 29174 14d4 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29175 14d6 0699     		ldr	r1, [sp, #24]
 29176 14d8 0A9A     		ldr	r2, [sp, #40]
 29177 14da 0595     		str	r5, [sp, #20]
 29178 14dc 0123     		movs	r3, #1
 29179 14de A847     		blx	r5
 29180              	.LVL3739:
 29181 14e0 0028     		cmp	r0, #0
 29182 14e2 7FF4A6AC 		bne	.L3354
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29183              		.loc 1 734 0
 29184 14e6 E369     		ldr	r3, [r4, #28]
 29185 14e8 226A     		ldr	r2, [r4, #32]
 29186 14ea 0A9D     		ldr	r5, [sp, #40]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29187              		.loc 1 733 0
 29188 14ec 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29189              		.loc 1 734 0
 29190 14ee 9A18     		adds	r2, r3, r2
 29191 14f0 9542     		cmp	r5, r2
 29192 14f2 BFF4B4AD 		bcs	.L3337
 29193              	.LBB2697:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29194              		.loc 1 736 0
 29195 14f6 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29196              	.LVL3740:
 29197 14fa BCF1010F 		cmp	ip, #1
 29198 14fe 7FF6AEAD 		bls	.L3337
 29199 1502 0996     		str	r6, [sp, #36]
 29200 1504 0B97     		str	r7, [sp, #44]
 29201 1506 2646     		mov	r6, r4
 29202 1508 6446     		mov	r4, ip
 29203              	.LVL3741:
 29204 150a 00E0     		b	.L3743
 29205              	.LVL3742:
 29206              	.L3899:
 29207 150c F369     		ldr	r3, [r6, #28]
 29208              	.LVL3743:
 29209              	.L3743:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29210              		.loc 1 737 0
 29211 150e ED18     		adds	r5, r5, r3
 29212              	.LVL3744:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29213              		.loc 1 736 0
 29214 1510 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29215              		.loc 1 738 0
 29216 1512 0123     		movs	r3, #1
 29217 1514 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 29218 1516 0699     		ldr	r1, [sp, #24]
 29219 1518 059F     		ldr	r7, [sp, #20]
 29220 151a 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29221              		.loc 1 736 0
 29222 151c E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29223              		.loc 1 738 0
 29224 151e B847     		blx	r7
 29225              	.LVL3745:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29226              		.loc 1 736 0
 29227 1520 012C     		cmp	r4, #1
 29228 1522 F3D8     		bhi	.L3899
 29229 1524 3446     		mov	r4, r6
 29230              	.LVL3746:
 29231 1526 0B9F     		ldr	r7, [sp, #44]
 29232 1528 099E     		ldr	r6, [sp, #36]
 29233              	.LVL3747:
 29234 152a 98E5     		b	.L3337
 29235              	.LVL3748:
 29236              	.L3888:
 29237              	.LBE2697:
 29238              	.LBE2701:
 29239              	.LBE2709:
 29240              	.LBE2715:
 29241              	.LBE2728:
 29242              	.LBE2737:
 29243              	.LBE2833:
 29244              	.LBB2834:
 29245              	.LBB2821:
 29246              	.LBB2815:
 29247              	.LBB2805:
 29248              	.LBB2793:
 29249              	.LBB2752:
 29250              	.LBB2747:
 29251              	.LBB2748:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 29252              		.loc 1 744 0
 29253 152c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29254 152e 049A     		ldr	r2, [sp, #16]
 29255 1530 6C4F     		ldr	r7, .L3936+4
 29256 1532 04F13001 		add	r1, r4, #48
 29257 1536 0123     		movs	r3, #1
 29258 1538 B847     		blx	r7
 29259              	.LVL3749:
 29260 153a 0028     		cmp	r0, #0
 29261 153c 7FF4A9AC 		bne	.L3306
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29262              		.loc 1 746 0
 29263 1540 049F     		ldr	r7, [sp, #16]
 29264 1542 E762     		str	r7, [r4, #44]
 29265 1544 CFE5     		b	.L3447
 29266              	.LVL3750:
 29267              	.L3890:
 29268              	.LBE2748:
 29269              	.LBE2747:
 29270              	.LBE2752:
 29271              	.LBE2793:
 29272              	.LBB2794:
 29273              	.LBB2764:
 29274              	.LBB2758:
 29275              	.LBB2759:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 29276              		.loc 1 744 0
 29277 1546 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29278 1548 049A     		ldr	r2, [sp, #16]
 29279 154a 664F     		ldr	r7, .L3936+4
 29280 154c 04F13001 		add	r1, r4, #48
 29281 1550 0123     		movs	r3, #1
 29282 1552 B847     		blx	r7
 29283              	.LVL3751:
 29284 1554 0028     		cmp	r0, #0
 29285 1556 7FF49CAC 		bne	.L3306
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29286              		.loc 1 746 0
 29287 155a 049F     		ldr	r7, [sp, #16]
 29288 155c 226A     		ldr	r2, [r4, #32]
 29289 155e E762     		str	r7, [r4, #44]
 29290 1560 F1E5     		b	.L3445
 29291              	.LVL3752:
 29292              	.L3892:
 29293              	.LBE2759:
 29294              	.LBE2758:
 29295              	.LBE2764:
 29296              	.LBE2794:
 29297              	.LBB2795:
 29298              	.LBB2787:
 29299              	.LBB2782:
 29300              	.LBB2783:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 29301              		.loc 1 744 0
 29302 1562 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29303 1564 049A     		ldr	r2, [sp, #16]
 29304 1566 5F4F     		ldr	r7, .L3936+4
 29305 1568 04F13001 		add	r1, r4, #48
 29306 156c 0123     		movs	r3, #1
 29307 156e B847     		blx	r7
 29308              	.LVL3753:
 29309 1570 0028     		cmp	r0, #0
 29310 1572 7FF48EAC 		bne	.L3306
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29311              		.loc 1 746 0
 29312 1576 049F     		ldr	r7, [sp, #16]
 29313 1578 E762     		str	r7, [r4, #44]
 29314 157a 32E6     		b	.L3448
 29315              	.LVL3754:
 29316              	.L3291:
 29317              	.LBE2783:
 29318              	.LBE2782:
 29319              	.LBE2787:
 29320              	.LBE2795:
 29321              	.LBB2796:
 29322              	.LBB2753:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29323              		.loc 1 731 0
 29324 157c 04F13007 		add	r7, r4, #48
 29325 1580 0697     		str	r7, [sp, #24]
 29326 1582 574F     		ldr	r7, .L3936
 29327 1584 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29328              	.LVL3755:
 29329 1586 0699     		ldr	r1, [sp, #24]
 29330 1588 0A9A     		ldr	r2, [sp, #40]
 29331 158a 0597     		str	r7, [sp, #20]
 29332 158c 0123     		movs	r3, #1
 29333 158e B847     		blx	r7
 29334              	.LVL3756:
 29335 1590 0028     		cmp	r0, #0
 29336 1592 7FF47EAC 		bne	.L3306
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29337              		.loc 1 734 0
 29338 1596 E369     		ldr	r3, [r4, #28]
 29339 1598 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29340              		.loc 1 733 0
 29341 159a 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29342              		.loc 1 734 0
 29343 159c 0A98     		ldr	r0, [sp, #40]
 29344 159e 9A18     		adds	r2, r3, r2
 29345 15a0 9042     		cmp	r0, r2
 29346 15a2 BFF49CAD 		bcs	.L3293
 29347              	.LBB2749:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29348              		.loc 1 736 0
 29349 15a6 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29350              	.LVL3757:
 29351 15aa BCF1010F 		cmp	ip, #1
 29352 15ae 7FF696AD 		bls	.L3293
 29353 15b2 0995     		str	r5, [sp, #36]
 29354 15b4 0746     		mov	r7, r0
 29355 15b6 2546     		mov	r5, r4
 29356 15b8 0A96     		str	r6, [sp, #40]
 29357 15ba 6446     		mov	r4, ip
 29358              	.LVL3758:
 29359 15bc 00E0     		b	.L3737
 29360              	.LVL3759:
 29361              	.L3900:
 29362 15be EB69     		ldr	r3, [r5, #28]
 29363              	.LVL3760:
 29364              	.L3737:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29365              		.loc 1 737 0
 29366 15c0 FF18     		adds	r7, r7, r3
 29367              	.LVL3761:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29368              		.loc 1 736 0
 29369 15c2 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29370              		.loc 1 738 0
 29371 15c4 0123     		movs	r3, #1
 29372 15c6 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 29373 15c8 0699     		ldr	r1, [sp, #24]
 29374 15ca 059E     		ldr	r6, [sp, #20]
 29375 15cc 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29376              		.loc 1 736 0
 29377 15ce E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29378              		.loc 1 738 0
 29379 15d0 B047     		blx	r6
 29380              	.LVL3762:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29381              		.loc 1 736 0
 29382 15d2 012C     		cmp	r4, #1
 29383 15d4 F3D8     		bhi	.L3900
 29384 15d6 2C46     		mov	r4, r5
 29385              	.LVL3763:
 29386 15d8 0A9E     		ldr	r6, [sp, #40]
 29387 15da 099D     		ldr	r5, [sp, #36]
 29388              	.LVL3764:
 29389 15dc 7FE5     		b	.L3293
 29390              	.LVL3765:
 29391              	.L3278:
 29392              	.LBE2749:
 29393              	.LBE2753:
 29394              	.LBE2796:
 29395              	.LBB2797:
 29396              	.LBB2765:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29397              		.loc 1 731 0
 29398 15de 04F13007 		add	r7, r4, #48
 29399              	.LVL3766:
 29400 15e2 0997     		str	r7, [sp, #36]
 29401 15e4 3E4F     		ldr	r7, .L3936
 29402 15e6 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29403              	.LVL3767:
 29404 15e8 0999     		ldr	r1, [sp, #36]
 29405 15ea 0B9A     		ldr	r2, [sp, #44]
 29406 15ec 0597     		str	r7, [sp, #20]
 29407 15ee B847     		blx	r7
 29408              	.LVL3768:
 29409 15f0 0028     		cmp	r0, #0
 29410 15f2 7FF44EAC 		bne	.L3306
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29411              		.loc 1 734 0
 29412 15f6 E369     		ldr	r3, [r4, #28]
 29413 15f8 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29414              		.loc 1 733 0
 29415 15fa 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29416              		.loc 1 734 0
 29417 15fc 0B98     		ldr	r0, [sp, #44]
 29418 15fe 9A18     		adds	r2, r3, r2
 29419 1600 9042     		cmp	r0, r2
 29420 1602 BFF499AD 		bcs	.L3281
 29421              	.LBB2760:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29422              		.loc 1 736 0
 29423 1606 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29424              	.LVL3769:
 29425 160a BCF1010F 		cmp	ip, #1
 29426 160e 7FF693AD 		bls	.L3281
 29427 1612 0A95     		str	r5, [sp, #40]
 29428 1614 0746     		mov	r7, r0
 29429 1616 2546     		mov	r5, r4
 29430 1618 0B96     		str	r6, [sp, #44]
 29431 161a 6446     		mov	r4, ip
 29432              	.LVL3770:
 29433 161c 00E0     		b	.L3735
 29434              	.LVL3771:
 29435              	.L3901:
 29436 161e EB69     		ldr	r3, [r5, #28]
 29437              	.LVL3772:
 29438              	.L3735:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29439              		.loc 1 737 0
 29440 1620 FF18     		adds	r7, r7, r3
 29441              	.LVL3773:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29442              		.loc 1 736 0
 29443 1622 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29444              		.loc 1 738 0
 29445 1624 0123     		movs	r3, #1
 29446 1626 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 29447 1628 0999     		ldr	r1, [sp, #36]
 29448 162a 059E     		ldr	r6, [sp, #20]
 29449 162c 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29450              		.loc 1 736 0
 29451 162e E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29452              		.loc 1 738 0
 29453 1630 B047     		blx	r6
 29454              	.LVL3774:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29455              		.loc 1 736 0
 29456 1632 012C     		cmp	r4, #1
 29457 1634 F3D8     		bhi	.L3901
 29458 1636 2C46     		mov	r4, r5
 29459              	.LVL3775:
 29460 1638 0B9E     		ldr	r6, [sp, #44]
 29461 163a 0A9D     		ldr	r5, [sp, #40]
 29462              	.LVL3776:
 29463 163c 7CE5     		b	.L3281
 29464              	.LVL3777:
 29465              	.L3296:
 29466              	.LBE2760:
 29467              	.LBE2765:
 29468              	.LBE2797:
 29469              	.LBB2798:
 29470              	.LBB2788:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29471              		.loc 1 731 0
 29472 163e 04F13007 		add	r7, r4, #48
 29473 1642 0697     		str	r7, [sp, #24]
 29474 1644 264F     		ldr	r7, .L3936
 29475 1646 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29476              	.LVL3778:
 29477 1648 0699     		ldr	r1, [sp, #24]
 29478 164a 0A9A     		ldr	r2, [sp, #40]
 29479 164c 0597     		str	r7, [sp, #20]
 29480 164e 0123     		movs	r3, #1
 29481 1650 B847     		blx	r7
 29482              	.LVL3779:
 29483 1652 0028     		cmp	r0, #0
 29484 1654 7FF41DAC 		bne	.L3306
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29485              		.loc 1 734 0
 29486 1658 E369     		ldr	r3, [r4, #28]
 29487 165a 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29488              		.loc 1 733 0
 29489 165c 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29490              		.loc 1 734 0
 29491 165e 0A98     		ldr	r0, [sp, #40]
 29492 1660 9A18     		adds	r2, r3, r2
 29493 1662 9042     		cmp	r0, r2
 29494 1664 BFF4B9AD 		bcs	.L3298
 29495              	.LBB2784:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29496              		.loc 1 736 0
 29497 1668 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29498              	.LVL3780:
 29499 166c BCF1010F 		cmp	ip, #1
 29500 1670 7FF6B3AD 		bls	.L3298
 29501 1674 0995     		str	r5, [sp, #36]
 29502 1676 0746     		mov	r7, r0
 29503 1678 2546     		mov	r5, r4
 29504 167a 0A96     		str	r6, [sp, #40]
 29505 167c 6446     		mov	r4, ip
 29506              	.LVL3781:
 29507 167e 00E0     		b	.L3738
 29508              	.LVL3782:
 29509              	.L3902:
 29510 1680 EB69     		ldr	r3, [r5, #28]
 29511              	.LVL3783:
 29512              	.L3738:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29513              		.loc 1 737 0
 29514 1682 FF18     		adds	r7, r7, r3
 29515              	.LVL3784:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29516              		.loc 1 736 0
 29517 1684 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29518              		.loc 1 738 0
 29519 1686 0123     		movs	r3, #1
 29520 1688 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 29521 168a 0699     		ldr	r1, [sp, #24]
 29522 168c 059E     		ldr	r6, [sp, #20]
 29523 168e 3A46     		mov	r2, r7
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29524              		.loc 1 736 0
 29525 1690 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29526              		.loc 1 738 0
 29527 1692 B047     		blx	r6
 29528              	.LVL3785:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29529              		.loc 1 736 0
 29530 1694 012C     		cmp	r4, #1
 29531 1696 F3D8     		bhi	.L3902
 29532 1698 2C46     		mov	r4, r5
 29533              	.LVL3786:
 29534 169a 0A9E     		ldr	r6, [sp, #40]
 29535 169c 099D     		ldr	r5, [sp, #36]
 29536              	.LVL3787:
 29537 169e 9CE5     		b	.L3298
 29538              	.LVL3788:
 29539              	.L3869:
 29540              	.LBE2784:
 29541              	.LBE2788:
 29542              	.LBE2798:
 29543              	.LBE2805:
 29544              	.LBE2815:
 29545              	.LBE2821:
 29546              	.LBE2834:
 29547              	.LBE2849:
 29548              	.LBE2886:
 29549              	.LBE2902:
 29550              	.LBE3060:
 29551              	.LBB3061:
 29552              	.LBB2586:
 29553              	.LBB2577:
 29554              	.LBB2568:
 29555              	.LBB2559:
 29556              	.LBB2550:
 29557              	.LBB2540:
 29558              	.LBB2525:
 29559              	.LBB2516:
 29560              	.LBB2485:
 29561              	.LBB2479:
 29562              	.LBB2480:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 29563              		.loc 1 744 0
 29564 16a0 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29565 16a2 039A     		ldr	r2, [sp, #12]
 29566 16a4 DFF83CC0 		ldr	ip, .L3936+4
 29567 16a8 04F13001 		add	r1, r4, #48
 29568 16ac 0123     		movs	r3, #1
 29569 16ae E047     		blx	ip
 29570              	.LVL3789:
 29571 16b0 0028     		cmp	r0, #0
 29572 16b2 7FF46BA9 		bne	.L3772
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29573              		.loc 1 746 0
 29574 16b6 039F     		ldr	r7, [sp, #12]
 29575 16b8 216A     		ldr	r1, [r4, #32]
 29576 16ba E762     		str	r7, [r4, #44]
 29577 16bc FFF7B6B9 		b	.L3440
 29578              	.LVL3790:
 29579              	.L3893:
 29580              	.LBE2480:
 29581              	.LBE2479:
 29582              	.LBE2485:
 29583              	.LBE2516:
 29584              	.LBE2525:
 29585              	.LBE2540:
 29586              	.LBE2550:
 29587              	.LBE2559:
 29588              	.LBE2568:
 29589              	.LBE2577:
 29590              	.LBE2586:
 29591              	.LBE3061:
 29592              	.LBB3062:
 29593              	.LBB3043:
 29594              	.LBB3031:
 29595              	.LBB3019:
 29596              	.LBB3008:
 29597              	.LBB3001:
 29598              	.LBB2993:
 29599              	.LBB2980:
 29600              	.LBB2971:
 29601              	.LBB2943:
 29602              	.LBB2937:
 29603              	.LBB2938:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 29604              		.loc 1 744 0
 29605 16c0 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29606 16c2 059A     		ldr	r2, [sp, #20]
 29607 16c4 DFF81CC0 		ldr	ip, .L3936+4
 29608 16c8 04F13001 		add	r1, r4, #48
 29609 16cc 0123     		movs	r3, #1
 29610 16ce E047     		blx	ip
 29611              	.LVL3791:
 29612 16d0 0028     		cmp	r0, #0
 29613 16d2 7FF426AC 		bne	.L3819
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29614              		.loc 1 746 0
 29615 16d6 059F     		ldr	r7, [sp, #20]
 29616 16d8 216A     		ldr	r1, [r4, #32]
 29617 16da E762     		str	r7, [r4, #44]
 29618 16dc B3E5     		b	.L3454
 29619              	.L3937:
 29620 16de 00BF     		.align	2
 29621              	.L3936:
 29622 16e0 00000000 		.word	disk_write
 29623 16e4 00000000 		.word	disk_read
 29624              	.LVL3792:
 29625              	.L3895:
 29626              	.LBE2938:
 29627              	.LBE2937:
 29628              	.LBE2943:
 29629              	.LBE2971:
 29630              	.LBB2972:
 29631              	.LBB2955:
 29632              	.LBB2950:
 29633              	.LBB2951:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 29634              		.loc 1 744 0
 29635 16e8 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29636 16ea 059A     		ldr	r2, [sp, #20]
 29637 16ec DFF8BCC2 		ldr	ip, .L3938+4
 29638 16f0 04F13001 		add	r1, r4, #48
 29639 16f4 0123     		movs	r3, #1
 29640 16f6 E047     		blx	ip
 29641              	.LVL3793:
 29642 16f8 0028     		cmp	r0, #0
 29643 16fa 7FF412AC 		bne	.L3819
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29644              		.loc 1 746 0
 29645 16fe 059F     		ldr	r7, [sp, #20]
 29646 1700 E762     		str	r7, [r4, #44]
 29647 1702 D9E5     		b	.L3456
 29648              	.LVL3794:
 29649              	.L3896:
 29650              	.LBE2951:
 29651              	.LBE2950:
 29652              	.LBE2955:
 29653              	.LBE2972:
 29654              	.LBB2973:
 29655              	.LBB2968:
 29656              	.LBB2963:
 29657              	.LBB2964:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 29658              		.loc 1 744 0
 29659 1704 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29660 1706 059A     		ldr	r2, [sp, #20]
 29661 1708 DFF8A0C2 		ldr	ip, .L3938+4
 29662 170c 04F13001 		add	r1, r4, #48
 29663 1710 0123     		movs	r3, #1
 29664 1712 E047     		blx	ip
 29665              	.LVL3795:
 29666 1714 0028     		cmp	r0, #0
 29667 1716 7FF404AC 		bne	.L3819
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 29668              		.loc 1 746 0
 29669 171a 059F     		ldr	r7, [sp, #20]
 29670 171c E762     		str	r7, [r4, #44]
 29671 171e 10E6     		b	.L3455
 29672              	.LVL3796:
 29673              	.L3401:
 29674              	.LBE2964:
 29675              	.LBE2963:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29676              		.loc 1 731 0
 29677 1720 04F13007 		add	r7, r4, #48
 29678 1724 0797     		str	r7, [sp, #28]
 29679 1726 A04F     		ldr	r7, .L3938
 29680 1728 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29681              	.LVL3797:
 29682 172a 0799     		ldr	r1, [sp, #28]
 29683 172c 039A     		ldr	r2, [sp, #12]
 29684 172e 0897     		str	r7, [sp, #32]
 29685 1730 0123     		movs	r3, #1
 29686 1732 B847     		blx	r7
 29687              	.LVL3798:
 29688 1734 0028     		cmp	r0, #0
 29689 1736 7FF4F4AB 		bne	.L3819
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29690              		.loc 1 734 0
 29691 173a E369     		ldr	r3, [r4, #28]
 29692 173c 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29693              		.loc 1 733 0
 29694 173e 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29695              		.loc 1 734 0
 29696 1740 0398     		ldr	r0, [sp, #12]
 29697 1742 9A18     		adds	r2, r3, r2
 29698 1744 9042     		cmp	r0, r2
 29699 1746 BFF4F8AD 		bcs	.L3403
 29700              	.LBB2965:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29701              		.loc 1 736 0
 29702 174a 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29703              	.LVL3799:
 29704 174e BCF1010F 		cmp	ip, #1
 29705 1752 7FF6F2AD 		bls	.L3403
 29706 1756 0696     		str	r6, [sp, #24]
 29707 1758 0995     		str	r5, [sp, #36]
 29708 175a 2646     		mov	r6, r4
 29709 175c 0546     		mov	r5, r0
 29710 175e 6446     		mov	r4, ip
 29711              	.LVL3800:
 29712 1760 00E0     		b	.L3750
 29713              	.LVL3801:
 29714              	.L3903:
 29715 1762 F369     		ldr	r3, [r6, #28]
 29716              	.LVL3802:
 29717              	.L3750:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29718              		.loc 1 737 0
 29719 1764 ED18     		adds	r5, r5, r3
 29720              	.LVL3803:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29721              		.loc 1 736 0
 29722 1766 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29723              		.loc 1 738 0
 29724 1768 0123     		movs	r3, #1
 29725 176a 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 29726 176c 0799     		ldr	r1, [sp, #28]
 29727 176e 089F     		ldr	r7, [sp, #32]
 29728 1770 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29729              		.loc 1 736 0
 29730 1772 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29731              		.loc 1 738 0
 29732 1774 B847     		blx	r7
 29733              	.LVL3804:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29734              		.loc 1 736 0
 29735 1776 012C     		cmp	r4, #1
 29736 1778 F3D8     		bhi	.L3903
 29737 177a 3446     		mov	r4, r6
 29738              	.LVL3805:
 29739 177c 099D     		ldr	r5, [sp, #36]
 29740              	.LVL3806:
 29741 177e 069E     		ldr	r6, [sp, #24]
 29742              	.LVL3807:
 29743 1780 DBE5     		b	.L3403
 29744              	.LVL3808:
 29745              	.L3192:
 29746              	.LBE2965:
 29747              	.LBE2968:
 29748              	.LBE2973:
 29749              	.LBE2980:
 29750              	.LBE2993:
 29751              	.LBE3001:
 29752              	.LBE3008:
 29753              	.LBE3019:
 29754              	.LBE3031:
 29755              	.LBE3043:
 29756              	.LBE3062:
 29757              	.LBB3063:
 29758              	.LBB2587:
 29759              	.LBB2578:
 29760              	.LBB2569:
 29761              	.LBB2560:
 29762              	.LBB2551:
 29763              	.LBB2541:
 29764              	.LBB2526:
 29765              	.LBB2517:
 29766              	.LBB2486:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29767              		.loc 1 731 0
 29768 1782 04F13007 		add	r7, r4, #48
 29769              	.LVL3809:
 29770 1786 0A97     		str	r7, [sp, #40]
 29771 1788 874F     		ldr	r7, .L3938
 29772 178a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29773              	.LVL3810:
 29774 178c 0A99     		ldr	r1, [sp, #40]
 29775 178e 079A     		ldr	r2, [sp, #28]
 29776 1790 0597     		str	r7, [sp, #20]
 29777 1792 B847     		blx	r7
 29778              	.LVL3811:
 29779 1794 0028     		cmp	r0, #0
 29780 1796 7FF4F9A8 		bne	.L3772
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29781              		.loc 1 734 0
 29782 179a E369     		ldr	r3, [r4, #28]
 29783 179c 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29784              		.loc 1 733 0
 29785 179e 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29786              		.loc 1 734 0
 29787 17a0 0798     		ldr	r0, [sp, #28]
 29788 17a2 9A18     		adds	r2, r3, r2
 29789 17a4 9042     		cmp	r0, r2
 29790 17a6 BFF43CA9 		bcs	.L3195
 29791              	.LBB2481:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29792              		.loc 1 736 0
 29793 17aa 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29794              	.LVL3812:
 29795 17ae BCF1010F 		cmp	ip, #1
 29796 17b2 7FF636A9 		bls	.L3195
 29797 17b6 0B95     		str	r5, [sp, #44]
 29798 17b8 0796     		str	r6, [sp, #28]
 29799 17ba 0546     		mov	r5, r0
 29800 17bc 2646     		mov	r6, r4
 29801 17be 6446     		mov	r4, ip
 29802              	.LVL3813:
 29803 17c0 00E0     		b	.L3729
 29804              	.LVL3814:
 29805              	.L3904:
 29806 17c2 F369     		ldr	r3, [r6, #28]
 29807              	.LVL3815:
 29808              	.L3729:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29809              		.loc 1 737 0
 29810 17c4 ED18     		adds	r5, r5, r3
 29811              	.LVL3816:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29812              		.loc 1 736 0
 29813 17c6 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29814              		.loc 1 738 0
 29815 17c8 0123     		movs	r3, #1
 29816 17ca 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 29817 17cc 0A99     		ldr	r1, [sp, #40]
 29818 17ce 059F     		ldr	r7, [sp, #20]
 29819 17d0 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29820              		.loc 1 736 0
 29821 17d2 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29822              		.loc 1 738 0
 29823 17d4 B847     		blx	r7
 29824              	.LVL3817:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29825              		.loc 1 736 0
 29826 17d6 012C     		cmp	r4, #1
 29827 17d8 F3D8     		bhi	.L3904
 29828 17da 3446     		mov	r4, r6
 29829              	.LVL3818:
 29830 17dc 0B9D     		ldr	r5, [sp, #44]
 29831              	.LVL3819:
 29832 17de 079E     		ldr	r6, [sp, #28]
 29833              	.LVL3820:
 29834 17e0 FFF71FB9 		b	.L3195
 29835              	.LVL3821:
 29836              	.L3393:
 29837              	.LBE2481:
 29838              	.LBE2486:
 29839              	.LBE2517:
 29840              	.LBE2526:
 29841              	.LBE2541:
 29842              	.LBE2551:
 29843              	.LBE2560:
 29844              	.LBE2569:
 29845              	.LBE2578:
 29846              	.LBE2587:
 29847              	.LBE3063:
 29848              	.LBB3064:
 29849              	.LBB3044:
 29850              	.LBB3032:
 29851              	.LBB3020:
 29852              	.LBB3009:
 29853              	.LBB3002:
 29854              	.LBB2994:
 29855              	.LBB2981:
 29856              	.LBB2974:
 29857              	.LBB2944:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29858              		.loc 1 731 0
 29859 17e4 04F13007 		add	r7, r4, #48
 29860              	.LVL3822:
 29861 17e8 0697     		str	r7, [sp, #24]
 29862 17ea 6F4F     		ldr	r7, .L3938
 29863 17ec 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29864              	.LVL3823:
 29865 17ee 0699     		ldr	r1, [sp, #24]
 29866 17f0 039A     		ldr	r2, [sp, #12]
 29867 17f2 0897     		str	r7, [sp, #32]
 29868 17f4 B847     		blx	r7
 29869              	.LVL3824:
 29870 17f6 0028     		cmp	r0, #0
 29871 17f8 7FF493AB 		bne	.L3819
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29872              		.loc 1 734 0
 29873 17fc E369     		ldr	r3, [r4, #28]
 29874 17fe 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29875              		.loc 1 733 0
 29876 1800 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29877              		.loc 1 734 0
 29878 1802 0398     		ldr	r0, [sp, #12]
 29879 1804 9A18     		adds	r2, r3, r2
 29880 1806 9042     		cmp	r0, r2
 29881 1808 BFF418AD 		bcs	.L3396
 29882              	.LBB2939:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29883              		.loc 1 736 0
 29884 180c 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29885              	.LVL3825:
 29886 1810 BCF1010F 		cmp	ip, #1
 29887 1814 7FF612AD 		bls	.L3396
 29888 1818 0996     		str	r6, [sp, #36]
 29889 181a 0A95     		str	r5, [sp, #40]
 29890 181c 2646     		mov	r6, r4
 29891 181e 0546     		mov	r5, r0
 29892 1820 6446     		mov	r4, ip
 29893              	.LVL3826:
 29894 1822 00E0     		b	.L3749
 29895              	.LVL3827:
 29896              	.L3905:
 29897 1824 F369     		ldr	r3, [r6, #28]
 29898              	.LVL3828:
 29899              	.L3749:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29900              		.loc 1 737 0
 29901 1826 ED18     		adds	r5, r5, r3
 29902              	.LVL3829:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29903              		.loc 1 736 0
 29904 1828 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29905              		.loc 1 738 0
 29906 182a 0123     		movs	r3, #1
 29907 182c 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 29908 182e 0699     		ldr	r1, [sp, #24]
 29909 1830 089F     		ldr	r7, [sp, #32]
 29910 1832 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29911              		.loc 1 736 0
 29912 1834 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29913              		.loc 1 738 0
 29914 1836 B847     		blx	r7
 29915              	.LVL3830:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29916              		.loc 1 736 0
 29917 1838 012C     		cmp	r4, #1
 29918 183a F3D8     		bhi	.L3905
 29919 183c 3446     		mov	r4, r6
 29920              	.LVL3831:
 29921 183e 0A9D     		ldr	r5, [sp, #40]
 29922              	.LVL3832:
 29923 1840 099E     		ldr	r6, [sp, #36]
 29924              	.LVL3833:
 29925 1842 FBE4     		b	.L3396
 29926              	.LVL3834:
 29927              	.L3406:
 29928              	.LBE2939:
 29929              	.LBE2944:
 29930              	.LBE2974:
 29931              	.LBB2975:
 29932              	.LBB2956:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 29933              		.loc 1 731 0
 29934 1844 04F13007 		add	r7, r4, #48
 29935 1848 0797     		str	r7, [sp, #28]
 29936 184a 574F     		ldr	r7, .L3938
 29937 184c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 29938              	.LVL3835:
 29939 184e 0799     		ldr	r1, [sp, #28]
 29940 1850 039A     		ldr	r2, [sp, #12]
 29941 1852 0897     		str	r7, [sp, #32]
 29942 1854 0123     		movs	r3, #1
 29943 1856 B847     		blx	r7
 29944              	.LVL3836:
 29945 1858 0028     		cmp	r0, #0
 29946 185a 7FF462AB 		bne	.L3819
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29947              		.loc 1 734 0
 29948 185e E369     		ldr	r3, [r4, #28]
 29949 1860 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 29950              		.loc 1 733 0
 29951 1862 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 29952              		.loc 1 734 0
 29953 1864 0398     		ldr	r0, [sp, #12]
 29954 1866 9A18     		adds	r2, r3, r2
 29955 1868 9042     		cmp	r0, r2
 29956 186a BFF421AD 		bcs	.L3408
 29957              	.LBB2952:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29958              		.loc 1 736 0
 29959 186e 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 29960              	.LVL3837:
 29961 1872 BCF1010F 		cmp	ip, #1
 29962 1876 7FF61BAD 		bls	.L3408
 29963 187a 0696     		str	r6, [sp, #24]
 29964 187c 0995     		str	r5, [sp, #36]
 29965 187e 2646     		mov	r6, r4
 29966 1880 0546     		mov	r5, r0
 29967 1882 6446     		mov	r4, ip
 29968              	.LVL3838:
 29969 1884 00E0     		b	.L3751
 29970              	.LVL3839:
 29971              	.L3906:
 29972 1886 F369     		ldr	r3, [r6, #28]
 29973              	.LVL3840:
 29974              	.L3751:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 29975              		.loc 1 737 0
 29976 1888 ED18     		adds	r5, r5, r3
 29977              	.LVL3841:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29978              		.loc 1 736 0
 29979 188a 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29980              		.loc 1 738 0
 29981 188c 0123     		movs	r3, #1
 29982 188e 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 29983 1890 0799     		ldr	r1, [sp, #28]
 29984 1892 089F     		ldr	r7, [sp, #32]
 29985 1894 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29986              		.loc 1 736 0
 29987 1896 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 29988              		.loc 1 738 0
 29989 1898 B847     		blx	r7
 29990              	.LVL3842:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 29991              		.loc 1 736 0
 29992 189a 012C     		cmp	r4, #1
 29993 189c F3D8     		bhi	.L3906
 29994 189e 3446     		mov	r4, r6
 29995              	.LVL3843:
 29996 18a0 099D     		ldr	r5, [sp, #36]
 29997              	.LVL3844:
 29998 18a2 069E     		ldr	r6, [sp, #24]
 29999              	.LVL3845:
 30000 18a4 04E5     		b	.L3408
 30001              	.LVL3846:
 30002              	.L3200:
 30003              	.LBE2952:
 30004              	.LBE2956:
 30005              	.LBE2975:
 30006              	.LBE2981:
 30007              	.LBE2994:
 30008              	.LBE3002:
 30009              	.LBE3009:
 30010              	.LBE3020:
 30011              	.LBE3032:
 30012              	.LBE3044:
 30013              	.LBE3064:
 30014              	.LBB3065:
 30015              	.LBB2588:
 30016              	.LBB2579:
 30017              	.LBB2570:
 30018              	.LBB2561:
 30019              	.LBB2552:
 30020              	.LBB2542:
 30021              	.LBB2527:
 30022              	.LBB2518:
 30023              	.LBB2511:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 30024              		.loc 1 731 0
 30025 18a6 04F13007 		add	r7, r4, #48
 30026 18aa 0997     		str	r7, [sp, #36]
 30027 18ac 3E4F     		ldr	r7, .L3938
 30028 18ae 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 30029              	.LVL3847:
 30030 18b0 0999     		ldr	r1, [sp, #36]
 30031 18b2 079A     		ldr	r2, [sp, #28]
 30032 18b4 0597     		str	r7, [sp, #20]
 30033 18b6 0123     		movs	r3, #1
 30034 18b8 B847     		blx	r7
 30035              	.LVL3848:
 30036 18ba 0028     		cmp	r0, #0
 30037 18bc 7FF466A8 		bne	.L3772
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30038              		.loc 1 734 0
 30039 18c0 E369     		ldr	r3, [r4, #28]
 30040 18c2 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 30041              		.loc 1 733 0
 30042 18c4 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30043              		.loc 1 734 0
 30044 18c6 0798     		ldr	r0, [sp, #28]
 30045 18c8 9A18     		adds	r2, r3, r2
 30046 18ca 9042     		cmp	r0, r2
 30047 18cc BFF425A9 		bcs	.L3202
 30048              	.LBB2507:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30049              		.loc 1 736 0
 30050 18d0 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 30051              	.LVL3849:
 30052 18d4 BCF1010F 		cmp	ip, #1
 30053 18d8 7FF61FA9 		bls	.L3202
 30054 18dc 0A95     		str	r5, [sp, #40]
 30055 18de 0B96     		str	r6, [sp, #44]
 30056 18e0 0546     		mov	r5, r0
 30057 18e2 2646     		mov	r6, r4
 30058 18e4 6446     		mov	r4, ip
 30059              	.LVL3850:
 30060 18e6 00E0     		b	.L3730
 30061              	.LVL3851:
 30062              	.L3907:
 30063 18e8 F369     		ldr	r3, [r6, #28]
 30064              	.LVL3852:
 30065              	.L3730:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 30066              		.loc 1 737 0
 30067 18ea ED18     		adds	r5, r5, r3
 30068              	.LVL3853:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30069              		.loc 1 736 0
 30070 18ec 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30071              		.loc 1 738 0
 30072 18ee 0123     		movs	r3, #1
 30073 18f0 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 30074 18f2 0999     		ldr	r1, [sp, #36]
 30075 18f4 059F     		ldr	r7, [sp, #20]
 30076 18f6 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30077              		.loc 1 736 0
 30078 18f8 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30079              		.loc 1 738 0
 30080 18fa B847     		blx	r7
 30081              	.LVL3854:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30082              		.loc 1 736 0
 30083 18fc 012C     		cmp	r4, #1
 30084 18fe F3D8     		bhi	.L3907
 30085 1900 3446     		mov	r4, r6
 30086              	.LVL3855:
 30087 1902 0A9D     		ldr	r5, [sp, #40]
 30088              	.LVL3856:
 30089 1904 0B9E     		ldr	r6, [sp, #44]
 30090              	.LVL3857:
 30091 1906 FFF708B9 		b	.L3202
 30092              	.LVL3858:
 30093              	.L3205:
 30094              	.LBE2507:
 30095              	.LBE2511:
 30096              	.LBE2518:
 30097              	.LBB2519:
 30098              	.LBB2498:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 30099              		.loc 1 731 0
 30100 190a 04F13007 		add	r7, r4, #48
 30101 190e 0997     		str	r7, [sp, #36]
 30102 1910 254F     		ldr	r7, .L3938
 30103 1912 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 30104              	.LVL3859:
 30105 1914 0999     		ldr	r1, [sp, #36]
 30106 1916 079A     		ldr	r2, [sp, #28]
 30107 1918 0597     		str	r7, [sp, #20]
 30108 191a 0123     		movs	r3, #1
 30109 191c B847     		blx	r7
 30110              	.LVL3860:
 30111 191e 0028     		cmp	r0, #0
 30112 1920 7FF434A8 		bne	.L3772
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30113              		.loc 1 734 0
 30114 1924 E369     		ldr	r3, [r4, #28]
 30115 1926 226A     		ldr	r2, [r4, #32]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 30116              		.loc 1 733 0
 30117 1928 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30118              		.loc 1 734 0
 30119 192a 0798     		ldr	r0, [sp, #28]
 30120 192c 9A18     		adds	r2, r3, r2
 30121 192e 9042     		cmp	r0, r2
 30122 1930 BFF4AEA8 		bcs	.L3207
 30123              	.LBB2494:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30124              		.loc 1 736 0
 30125 1934 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 30126              	.LVL3861:
 30127 1938 BCF1010F 		cmp	ip, #1
 30128 193c 7FF6A8A8 		bls	.L3207
 30129 1940 0A95     		str	r5, [sp, #40]
 30130 1942 0B96     		str	r6, [sp, #44]
 30131 1944 0546     		mov	r5, r0
 30132 1946 2646     		mov	r6, r4
 30133 1948 6446     		mov	r4, ip
 30134              	.LVL3862:
 30135 194a 00E0     		b	.L3731
 30136              	.LVL3863:
 30137              	.L3908:
 30138 194c F369     		ldr	r3, [r6, #28]
 30139              	.LVL3864:
 30140              	.L3731:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 30141              		.loc 1 737 0
 30142 194e ED18     		adds	r5, r5, r3
 30143              	.LVL3865:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30144              		.loc 1 736 0
 30145 1950 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30146              		.loc 1 738 0
 30147 1952 0123     		movs	r3, #1
 30148 1954 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 30149 1956 0999     		ldr	r1, [sp, #36]
 30150 1958 059F     		ldr	r7, [sp, #20]
 30151 195a 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30152              		.loc 1 736 0
 30153 195c E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30154              		.loc 1 738 0
 30155 195e B847     		blx	r7
 30156              	.LVL3866:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30157              		.loc 1 736 0
 30158 1960 012C     		cmp	r4, #1
 30159 1962 F3D8     		bhi	.L3908
 30160 1964 3446     		mov	r4, r6
 30161              	.LVL3867:
 30162 1966 0A9D     		ldr	r5, [sp, #40]
 30163              	.LVL3868:
 30164 1968 0B9E     		ldr	r6, [sp, #44]
 30165              	.LVL3869:
 30166 196a FFF791B8 		b	.L3207
 30167              	.LVL3870:
 30168              	.L3891:
 30169              	.LBE2494:
 30170              	.LBE2498:
 30171              	.LBE2519:
 30172              	.LBE2527:
 30173              	.LBE2542:
 30174              	.LBE2552:
 30175              	.LBE2561:
 30176              	.LBE2570:
 30177              	.LBE2579:
 30178              	.LBE2588:
 30179              	.LBE3065:
 30180              	.LBB3066:
 30181              	.LBB2903:
 30182              	.LBB2887:
 30183              	.LBB2850:
 30184              	.LBB2835:
 30185              	.LBB2822:
 30186              	.LBB2816:
 30187              	.LBB2806:
 30188              	.LBB2799:
 30189              	.LBB2776:
 30190              	.LBB2771:
 30191              	.LBB2772:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 30192              		.loc 1 744 0
 30193 196e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 30194 1970 069A     		ldr	r2, [sp, #24]
 30195 1972 0E4F     		ldr	r7, .L3938+4
 30196 1974 04F13001 		add	r1, r4, #48
 30197 1978 0123     		movs	r3, #1
 30198 197a B847     		blx	r7
 30199              	.LVL3871:
 30200 197c 0028     		cmp	r0, #0
 30201 197e 7FF488AA 		bne	.L3306
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 30202              		.loc 1 746 0
 30203 1982 069F     		ldr	r7, [sp, #24]
 30204 1984 E762     		str	r7, [r4, #44]
 30205 1986 FFF7F5BB 		b	.L3446
 30206              	.LVL3872:
 30207              	.L3884:
 30208              	.LBE2772:
 30209              	.LBE2771:
 30210              	.LBE2776:
 30211              	.LBE2799:
 30212              	.LBE2806:
 30213              	.LBE2816:
 30214              	.LBE2822:
 30215              	.LBE2835:
 30216              	.LBB2836:
 30217              	.LBB2738:
 30218              	.LBB2729:
 30219              	.LBB2716:
 30220              	.LBB2710:
 30221              	.LBB2677:
 30222              	.LBB2672:
 30223              	.LBB2673:
 744:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK)
 30224              		.loc 1 744 0
 30225 198a 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 30226 198c 039A     		ldr	r2, [sp, #12]
 30227 198e 074D     		ldr	r5, .L3938+4
 30228 1990 04F13001 		add	r1, r4, #48
 30229 1994 0123     		movs	r3, #1
 30230 1996 A847     		blx	r5
 30231              	.LVL3873:
 30232 1998 0028     		cmp	r0, #0
 30233 199a 7FF44AAA 		bne	.L3354
 746:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->winsect = sector;
 30234              		.loc 1 746 0
 30235 199e 039D     		ldr	r5, [sp, #12]
 30236 19a0 E562     		str	r5, [r4, #44]
 30237 19a2 FFF7F7BA 		b	.L3450
 30238              	.L3939:
 30239 19a6 00BF     		.align	2
 30240              	.L3938:
 30241 19a8 00000000 		.word	disk_write
 30242 19ac 00000000 		.word	disk_read
 30243              	.LVL3874:
 30244              	.L3328:
 30245              	.LBE2673:
 30246              	.LBE2672:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 30247              		.loc 1 731 0
 30248 19b0 04F13005 		add	r5, r4, #48
 30249              	.LVL3875:
 30250 19b4 0995     		str	r5, [sp, #36]
 30251 19b6 C44D     		ldr	r5, .L3940
 30252 19b8 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 30253 19ba 0999     		ldr	r1, [sp, #36]
 30254 19bc 0B9A     		ldr	r2, [sp, #44]
 30255              	.LVL3876:
 30256 19be 0595     		str	r5, [sp, #20]
 30257 19c0 0123     		movs	r3, #1
 30258 19c2 A847     		blx	r5
 30259              	.LVL3877:
 30260 19c4 0028     		cmp	r0, #0
 30261 19c6 7FF434AA 		bne	.L3354
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30262              		.loc 1 734 0
 30263 19ca E369     		ldr	r3, [r4, #28]
 30264 19cc 226A     		ldr	r2, [r4, #32]
 30265 19ce 0B9D     		ldr	r5, [sp, #44]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 30266              		.loc 1 733 0
 30267 19d0 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30268              		.loc 1 734 0
 30269 19d2 9A18     		adds	r2, r3, r2
 30270 19d4 9542     		cmp	r5, r2
 30271 19d6 BFF4D9AA 		bcs	.L3330
 30272              	.LBB2674:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30273              		.loc 1 736 0
 30274 19da 94F803C0 		ldrb	ip, [r4, #3]	@ zero_extendqisi2
 30275              	.LVL3878:
 30276 19de BCF1010F 		cmp	ip, #1
 30277 19e2 7FF6D3AA 		bls	.L3330
 30278 19e6 CDF82CA0 		str	sl, [sp, #44]
 30279 19ea 0097     		str	r7, [sp, #0]
 30280 19ec B246     		mov	sl, r6
 30281 19ee 2646     		mov	r6, r4
 30282 19f0 6446     		mov	r4, ip
 30283              	.LVL3879:
 30284 19f2 00E0     		b	.L3742
 30285              	.LVL3880:
 30286              	.L3909:
 30287 19f4 F369     		ldr	r3, [r6, #28]
 30288              	.LVL3881:
 30289              	.L3742:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 30290              		.loc 1 737 0
 30291 19f6 ED18     		adds	r5, r5, r3
 30292              	.LVL3882:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30293              		.loc 1 736 0
 30294 19f8 013C     		subs	r4, r4, #1
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30295              		.loc 1 738 0
 30296 19fa 0123     		movs	r3, #1
 30297 19fc 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 30298 19fe 0999     		ldr	r1, [sp, #36]
 30299 1a00 059F     		ldr	r7, [sp, #20]
 30300 1a02 2A46     		mov	r2, r5
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30301              		.loc 1 736 0
 30302 1a04 E4B2     		uxtb	r4, r4
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30303              		.loc 1 738 0
 30304 1a06 B847     		blx	r7
 30305              	.LVL3883:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30306              		.loc 1 736 0
 30307 1a08 012C     		cmp	r4, #1
 30308 1a0a F3D8     		bhi	.L3909
 30309 1a0c 3446     		mov	r4, r6
 30310              	.LVL3884:
 30311 1a0e 009F     		ldr	r7, [sp, #0]
 30312 1a10 5646     		mov	r6, sl
 30313              	.LVL3885:
 30314 1a12 DDF82CA0 		ldr	sl, [sp, #44]
 30315 1a16 FFF7B9BA 		b	.L3330
 30316              	.LVL3886:
 30317              	.L3284:
 30318              	.LBE2674:
 30319              	.LBE2677:
 30320              	.LBE2710:
 30321              	.LBE2716:
 30322              	.LBE2729:
 30323              	.LBE2738:
 30324              	.LBE2836:
 30325              	.LBB2837:
 30326              	.LBB2823:
 30327              	.LBB2817:
 30328              	.LBB2807:
 30329              	.LBB2800:
 30330              	.LBB2777:
 731:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK)
 30331              		.loc 1 731 0
 30332 1a1a 04F13007 		add	r7, r4, #48
 30333              	.LVL3887:
 30334 1a1e 0A97     		str	r7, [sp, #40]
 30335 1a20 A94F     		ldr	r7, .L3940
 30336 1a22 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 30337 1a24 0A99     		ldr	r1, [sp, #40]
 30338 1a26 049A     		ldr	r2, [sp, #16]
 30339              	.LVL3888:
 30340 1a28 0597     		str	r7, [sp, #20]
 30341 1a2a 0123     		movs	r3, #1
 30342 1a2c B847     		blx	r7
 30343              	.LVL3889:
 30344 1a2e 0028     		cmp	r0, #0
 30345 1a30 7FF42FAA 		bne	.L3306
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30346              		.loc 1 734 0
 30347 1a34 E369     		ldr	r3, [r4, #28]
 30348 1a36 226A     		ldr	r2, [r4, #32]
 30349 1a38 049F     		ldr	r7, [sp, #16]
 733:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fs->wflag = 0;
 30350              		.loc 1 733 0
 30351 1a3a 2071     		strb	r0, [r4, #4]
 734:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (wsect < (fs->fatbase + fs->fsize)) {	/* In FAT area */
 30352              		.loc 1 734 0
 30353 1a3c 9A18     		adds	r2, r3, r2
 30354 1a3e 9742     		cmp	r7, r2
 30355 1a40 BFF494AB 		bcs	.L3286
 30356              	.LBB2773:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30357              		.loc 1 736 0
 30358 1a44 E778     		ldrb	r7, [r4, #3]	@ zero_extendqisi2
 30359              	.LVL3890:
 30360 1a46 012F     		cmp	r7, #1
 30361 1a48 7FF690AB 		bls	.L3286
 30362 1a4c 5246     		mov	r2, sl
 30363 1a4e 9446     		mov	ip, r2
 30364 1a50 B246     		mov	sl, r6
 30365 1a52 2E46     		mov	r6, r5
 30366 1a54 2546     		mov	r5, r4
 30367 1a56 00E0     		b	.L3736
 30368              	.LVL3891:
 30369              	.L3910:
 30370 1a58 EB69     		ldr	r3, [r5, #28]
 30371              	.LVL3892:
 30372              	.L3736:
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 30373              		.loc 1 737 0
 30374 1a5a 049C     		ldr	r4, [sp, #16]
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30375              		.loc 1 738 0
 30376 1a5c 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 30377 1a5e 0A99     		ldr	r1, [sp, #40]
 30378 1a60 CDF804C0 		str	ip, [sp, #4]
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 30379              		.loc 1 737 0
 30380 1a64 E418     		adds	r4, r4, r3
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30381              		.loc 1 736 0
 30382 1a66 013F     		subs	r7, r7, #1
 737:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					wsect += fs->fsize;
 30383              		.loc 1 737 0
 30384 1a68 0494     		str	r4, [sp, #16]
 30385              	.LVL3893:
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30386              		.loc 1 738 0
 30387 1a6a 2246     		mov	r2, r4
 30388 1a6c 0123     		movs	r3, #1
 30389 1a6e 059C     		ldr	r4, [sp, #20]
 30390              	.LVL3894:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30391              		.loc 1 736 0
 30392 1a70 FFB2     		uxtb	r7, r7
 738:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 30393              		.loc 1 738 0
 30394 1a72 A047     		blx	r4
 30395              	.LVL3895:
 736:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				for (nf = fs->n_fats; nf > 1; nf--) {	/* Reflect the change to all FAT copies */
 30396              		.loc 1 736 0
 30397 1a74 012F     		cmp	r7, #1
 30398 1a76 DDF804C0 		ldr	ip, [sp, #4]
 30399 1a7a EDD8     		bhi	.L3910
 30400 1a7c 2C46     		mov	r4, r5
 30401 1a7e 3546     		mov	r5, r6
 30402              	.LVL3896:
 30403 1a80 5646     		mov	r6, sl
 30404 1a82 E246     		mov	sl, ip
 30405 1a84 FFF772BB 		b	.L3286
 30406              	.LVL3897:
 30407              	.L3843:
 30408              	.LBE2773:
 30409              	.LBE2777:
 30410              	.LBE2800:
 30411              	.LBE2807:
 30412              	.LBE2817:
 30413              	.LBE2823:
 30414              	.LBE2837:
 30415              	.LBE2850:
 30416              	.LBE2887:
 30417              	.LBE2903:
 30418              	.LBE3066:
 30419              	.LBB3067:
 30420              	.LBB2449:
 30421              	.LBB2442:
 30422              	.LBB2435:
 30423              	.LBB2429:
 30424              	.LBB2428:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 30425              		.loc 1 808 0
 30426 1a88 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 30427 1a8a 996A     		ldr	r1, [r3, #40]
 30428 1a8c 02FB0012 		mla	r2, r2, r0, r1
 30429              	.LVL3898:
 30430              	.LBE2428:
 30431              	.LBE2429:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 30432              		.loc 1 2531 0
 30433 1a90 002A     		cmp	r2, #0
 30434 1a92 3EF4A9AB 		beq	.L3113
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30435              		.loc 1 2559 0
 30436 1a96 DAF81810 		ldr	r1, [sl, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30437              		.loc 1 2560 0
 30438 1a9a DAF80C00 		ldr	r0, [sl, #12]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 30439              		.loc 1 2532 0
 30440 1a9e AD18     		adds	r5, r5, r2
 30441              	.LVL3899:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30442              		.loc 1 2559 0
 30443 1aa0 8D42     		cmp	r5, r1
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30444              		.loc 1 2560 0
 30445 1aa2 DAF80810 		ldr	r1, [sl, #8]
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30446              		.loc 1 2559 0
 30447 1aa6 02D0     		beq	.L3116
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30448              		.loc 1 2560 0
 30449 1aa8 8142     		cmp	r1, r0
 30450 1aaa C0F0EB80 		bcc	.L3911
 30451              	.LVL3900:
 30452              	.L3116:
 30453 1aae CB05     		lsls	r3, r1, #23
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 30454              		.loc 1 2565 0
 30455 1ab0 CAF81850 		str	r5, [sl, #24]
 30456 1ab4 9DF83450 		ldrb	r5, [sp, #52]	@ zero_extendqisi2
 30457              	.LVL3901:
 30458 1ab8 DB0D     		lsrs	r3, r3, #23
 30459              	.LVL3902:
 30460              	.L3102:
 30461              	.LBB2430:
 30462              	.LBB2431:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 30463              		.loc 1 541 0
 30464 1aba 5344     		add	r3, sl, r3
 30465              	.LVL3903:
 30466              	.LBE2431:
 30467              	.LBE2430:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 30468              		.loc 1 2576 0
 30469 1abc 47F04002 		orr	r2, r7, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 30470              		.loc 1 2499 0
 30471 1ac0 4F1C     		adds	r7, r1, #1
 30472              	.LBB2433:
 30473              	.LBB2432:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 30474              		.loc 1 541 0
 30475 1ac2 83F82450 		strb	r5, [r3, #36]
 30476              	.LVL3904:
 30477              	.LBE2432:
 30478              	.LBE2433:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 30479              		.loc 1 2576 0
 30480 1ac6 8AF80620 		strb	r2, [sl, #6]
 30481              	.LVL3905:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 30482              		.loc 1 2499 0
 30483 1aca CAF80870 		str	r7, [sl, #8]
 30484              	.LVL3906:
 30485 1ace 0121     		movs	r1, #1
 30486              	.LVL3907:
 30487              	.L3101:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 30488              		.loc 1 2580 0
 30489 1ad0 8742     		cmp	r7, r0
 30490 1ad2 88BF     		it	hi
 30491 1ad4 CAF80C70 		strhi	r7, [sl, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 30492              		.loc 1 2581 0
 30493 1ad8 42F02002 		orr	r2, r2, #32
 30494              	.LBE2435:
 30495              	.LBE2442:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 30496              		.loc 1 3952 0
 30497 1adc 0129     		cmp	r1, #1
 30498              	.LBB2443:
 30499              	.LBB2436:
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 30500              		.loc 1 2581 0
 30501 1ade 8AF80620 		strb	r2, [sl, #6]
 30502              	.LVL3908:
 30503              	.LBE2436:
 30504              	.LBE2443:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 30505              		.loc 1 3952 0
 30506 1ae2 08BF     		it	eq
 30507 1ae4 0846     		moveq	r0, r1
 30508 1ae6 3EF427AB 		beq	.L3119
 30509 1aea FEF723BB 		b	.L3439
 30510              	.LVL3909:
 30511              	.L3852:
 30512              	.LBE2449:
 30513              	.LBE3067:
 30514              	.LBB3068:
 30515              	.LBB2412:
 30516              	.LBB2403:
 30517              	.LBB2394:
 30518              	.LBB2387:
 30519              	.LBB2386:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 30520              		.loc 1 808 0
 30521 1aee 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 30522 1af0 9A6A     		ldr	r2, [r3, #40]
 30523 1af2 01FB0021 		mla	r1, r1, r0, r2
 30524              	.LVL3910:
 30525              	.LBE2386:
 30526              	.LBE2387:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 30527              		.loc 1 2531 0
 30528 1af6 0029     		cmp	r1, #0
 30529 1af8 3EF491AD 		beq	.L3047
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30530              		.loc 1 2559 0
 30531 1afc DAF81820 		ldr	r2, [sl, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30532              		.loc 1 2560 0
 30533 1b00 DAF80C70 		ldr	r7, [sl, #12]
 30534              	.LVL3911:
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 30535              		.loc 1 2532 0
 30536 1b04 6618     		adds	r6, r4, r1
 30537              	.LVL3912:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30538              		.loc 1 2559 0
 30539 1b06 9642     		cmp	r6, r2
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30540              		.loc 1 2560 0
 30541 1b08 DAF80810 		ldr	r1, [sl, #8]
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30542              		.loc 1 2559 0
 30543 1b0c 02D0     		beq	.L3050
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30544              		.loc 1 2560 0
 30545 1b0e B942     		cmp	r1, r7
 30546 1b10 C0F0C980 		bcc	.L3912
 30547              	.LVL3913:
 30548              	.L3050:
 30549 1b14 CB05     		lsls	r3, r1, #23
 30550 1b16 9DF83440 		ldrb	r4, [sp, #52]	@ zero_extendqisi2
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 30551              		.loc 1 2565 0
 30552 1b1a CAF81860 		str	r6, [sl, #24]
 30553 1b1e DB0D     		lsrs	r3, r3, #23
 30554              	.LVL3914:
 30555              	.L3036:
 30556              	.LBB2388:
 30557              	.LBB2389:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 30558              		.loc 1 541 0
 30559 1b20 5344     		add	r3, sl, r3
 30560              	.LVL3915:
 30561              	.LBE2389:
 30562              	.LBE2388:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 30563              		.loc 1 2576 0
 30564 1b22 45F04002 		orr	r2, r5, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 30565              		.loc 1 2499 0
 30566 1b26 4D1C     		adds	r5, r1, #1
 30567              	.LBB2391:
 30568              	.LBB2390:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 30569              		.loc 1 541 0
 30570 1b28 83F82440 		strb	r4, [r3, #36]
 30571              	.LVL3916:
 30572              	.LBE2390:
 30573              	.LBE2391:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 30574              		.loc 1 2576 0
 30575 1b2c 8AF80620 		strb	r2, [sl, #6]
 30576              	.LVL3917:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 30577              		.loc 1 2499 0
 30578 1b30 CAF80850 		str	r5, [sl, #8]
 30579              	.LVL3918:
 30580 1b34 0121     		movs	r1, #1
 30581              	.LVL3919:
 30582              	.L3035:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 30583              		.loc 1 2580 0
 30584 1b36 BD42     		cmp	r5, r7
 30585 1b38 88BF     		it	hi
 30586 1b3a CAF80C50 		strhi	r5, [sl, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 30587              		.loc 1 2581 0
 30588 1b3e 42F02002 		orr	r2, r2, #32
 30589              	.LBE2394:
 30590              	.LBE2403:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 30591              		.loc 1 3952 0
 30592 1b42 0129     		cmp	r1, #1
 30593              	.LBB2404:
 30594              	.LBB2395:
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 30595              		.loc 1 2581 0
 30596 1b44 8AF80620 		strb	r2, [sl, #6]
 30597              	.LVL3920:
 30598              	.LBE2395:
 30599              	.LBE2404:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 30600              		.loc 1 3952 0
 30601 1b48 7EF47BAA 		bne	.L3436
 30602              	.LBE2412:
 30603              	.LBE3068:
3998:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		c = *str++;
 30604              		.loc 1 3998 0
 30605 1b4c 1D9C     		ldr	r4, [sp, #116]
 30606 1b4e 0134     		adds	r4, r4, #1
 30607 1b50 1D94     		str	r4, [sp, #116]
 30608              	.LVL3921:
3997:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for (cc = res = 0; cc != EOF; res += cc) {
 30609              		.loc 1 3997 0
 30610 1b52 0BF1010B 		add	fp, fp, #1
 30611              	.LVL3922:
 30612 1b56 FEF75FBA 		b	.L3722
 30613              	.LVL3923:
 30614              	.L3858:
 30615              	.LBB3069:
 30616              	.LBB2631:
 30617              	.LBB2625:
 30618              	.LBB2619:
 30619              	.LBB2613:
 30620              	.LBB2612:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 30621              		.loc 1 808 0
 30622 1b5a 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 30623 1b5c 996A     		ldr	r1, [r3, #40]
 30624 1b5e 02FB0012 		mla	r2, r2, r0, r1
 30625              	.LVL3924:
 30626              	.LBE2612:
 30627              	.LBE2613:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 30628              		.loc 1 2531 0
 30629 1b62 002A     		cmp	r2, #0
 30630 1b64 3EF4DDAD 		beq	.L3090
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30631              		.loc 1 2559 0
 30632 1b68 DAF81810 		ldr	r1, [sl, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30633              		.loc 1 2560 0
 30634 1b6c DAF80C00 		ldr	r0, [sl, #12]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 30635              		.loc 1 2532 0
 30636 1b70 AD18     		adds	r5, r5, r2
 30637              	.LVL3925:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30638              		.loc 1 2559 0
 30639 1b72 8D42     		cmp	r5, r1
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30640              		.loc 1 2560 0
 30641 1b74 DAF80810 		ldr	r1, [sl, #8]
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 30642              		.loc 1 2559 0
 30643 1b78 02D0     		beq	.L3093
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30644              		.loc 1 2560 0
 30645 1b7a 8142     		cmp	r1, r0
 30646 1b7c C0F0BE80 		bcc	.L3913
 30647              	.LVL3926:
 30648              	.L3093:
 30649 1b80 CB05     		lsls	r3, r1, #23
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 30650              		.loc 1 2565 0
 30651 1b82 CAF81850 		str	r5, [sl, #24]
 30652 1b86 9DF83450 		ldrb	r5, [sp, #52]	@ zero_extendqisi2
 30653              	.LVL3927:
 30654 1b8a DB0D     		lsrs	r3, r3, #23
 30655              	.LVL3928:
 30656              	.L3079:
 30657              	.LBB2614:
 30658              	.LBB2615:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 30659              		.loc 1 541 0
 30660 1b8c 0AEB030C 		add	ip, sl, r3
 30661              	.LBE2615:
 30662              	.LBE2614:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 30663              		.loc 1 2576 0
 30664 1b90 4EF04002 		orr	r2, lr, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 30665              		.loc 1 2499 0
 30666 1b94 4B1C     		adds	r3, r1, #1
 30667              	.LVL3929:
 30668              	.LBB2617:
 30669              	.LBB2616:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 30670              		.loc 1 541 0
 30671 1b96 8CF82450 		strb	r5, [ip, #36]
 30672              	.LVL3930:
 30673              	.LBE2616:
 30674              	.LBE2617:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 30675              		.loc 1 2576 0
 30676 1b9a 8AF80620 		strb	r2, [sl, #6]
 30677              	.LVL3931:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 30678              		.loc 1 2499 0
 30679 1b9e CAF80830 		str	r3, [sl, #8]
 30680              	.LVL3932:
 30681 1ba2 0121     		movs	r1, #1
 30682              	.LVL3933:
 30683              	.L3078:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 30684              		.loc 1 2580 0
 30685 1ba4 9842     		cmp	r0, r3
 30686 1ba6 38BF     		it	cc
 30687 1ba8 CAF80C30 		strcc	r3, [sl, #12]
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 30688              		.loc 1 2581 0
 30689 1bac 42F02002 		orr	r2, r2, #32
 30690              	.LBE2619:
 30691              	.LBE2625:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 30692              		.loc 1 3952 0
 30693 1bb0 0129     		cmp	r1, #1
 30694              	.LBB2626:
 30695              	.LBB2620:
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 30696              		.loc 1 2581 0
 30697 1bb2 8AF80620 		strb	r2, [sl, #6]
 30698              	.LVL3934:
 30699              	.LBE2620:
 30700              	.LBE2626:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 30701              		.loc 1 3952 0
 30702 1bb6 08BF     		it	eq
 30703 1bb8 0B46     		moveq	r3, r1
 30704 1bba 3EF45AAD 		beq	.L3096
 30705 1bbe FEF756BD 		b	.L3438
 30706              	.LVL3935:
 30707              	.L3842:
 30708              	.LBE2631:
 30709              	.LBE3069:
 30710              	.LBB3070:
 30711              	.LBB2450:
 30712              	.LBB2444:
 30713              	.LBB2437:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 30714              		.loc 1 2525 0
 30715 1bc2 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 30716 1bc4 DAF81820 		ldr	r2, [sl, #24]
 30717 1bc8 3F4F     		ldr	r7, .L3940
 30718 1bca 0AF12401 		add	r1, sl, #36
 30719 1bce 0123     		movs	r3, #1
 30720 1bd0 B847     		blx	r7
 30721              	.LVL3936:
 30722 1bd2 0028     		cmp	r0, #0
 30723 1bd4 40F07C81 		bne	.L3117
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 30724              		.loc 1 2527 0
 30725 1bd8 9AF80670 		ldrb	r7, [sl, #6]	@ zero_extendqisi2
 30726 1bdc DAF80030 		ldr	r3, [sl, #0]
 30727 1be0 07F0BF07 		and	r7, r7, #191
 30728 1be4 8AF80670 		strb	r7, [sl, #6]
 30729 1be8 FEF7F6BA 		b	.L3111
 30730              	.LVL3937:
 30731              	.L3851:
 30732              	.LBE2437:
 30733              	.LBE2444:
 30734              	.LBE2450:
 30735              	.LBE3070:
 30736              	.LBB3071:
 30737              	.LBB2413:
 30738              	.LBB2405:
 30739              	.LBB2396:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 30740              		.loc 1 2525 0
 30741 1bec 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 30742 1bee DAF81820 		ldr	r2, [sl, #24]
 30743 1bf2 354D     		ldr	r5, .L3940
 30744 1bf4 0AF12401 		add	r1, sl, #36
 30745 1bf8 0123     		movs	r3, #1
 30746 1bfa A847     		blx	r5
 30747              	.LVL3938:
 30748 1bfc 0028     		cmp	r0, #0
 30749 1bfe 40F06A82 		bne	.L3051
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 30750              		.loc 1 2527 0
 30751 1c02 9AF80650 		ldrb	r5, [sl, #6]	@ zero_extendqisi2
 30752 1c06 DAF80030 		ldr	r3, [sl, #0]
 30753 1c0a 05F0BF05 		and	r5, r5, #191
 30754 1c0e 8AF80650 		strb	r5, [sl, #6]
 30755 1c12 FEF7FCBC 		b	.L3045
 30756              	.LVL3939:
 30757              	.L3857:
 30758              	.LBE2396:
 30759              	.LBE2405:
 30760              	.LBE2413:
 30761              	.LBE3071:
 30762              	.LBB3072:
 30763              	.LBB2632:
 30764              	.LBB2627:
 30765              	.LBB2621:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 30766              		.loc 1 2525 0
 30767 1c16 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 30768 1c18 DAF81820 		ldr	r2, [sl, #24]
 30769 1c1c DFF8A8C0 		ldr	ip, .L3940
 30770 1c20 0AF12401 		add	r1, sl, #36
 30771 1c24 0123     		movs	r3, #1
 30772 1c26 E047     		blx	ip
 30773              	.LVL3940:
 30774 1c28 0028     		cmp	r0, #0
 30775 1c2a 40F04C82 		bne	.L3094
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 30776              		.loc 1 2527 0
 30777 1c2e 9AF806E0 		ldrb	lr, [sl, #6]	@ zero_extendqisi2
 30778 1c32 DAF80030 		ldr	r3, [sl, #0]
 30779 1c36 0EF0BF0E 		and	lr, lr, #191
 30780 1c3a 8AF806E0 		strb	lr, [sl, #6]
 30781 1c3e FEF768BD 		b	.L3088
 30782              	.LVL3941:
 30783              	.L3104:
 30784              	.LBE2621:
 30785              	.LBE2627:
 30786              	.LBE2632:
 30787              	.LBE3072:
 30788              	.LBB3073:
 30789              	.LBB2451:
 30790              	.LBB2445:
 30791              	.LBB2438:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 30792              		.loc 1 2513 0
 30793 1c42 1846     		mov	r0, r3
 30794              	.LVL3942:
 30795 1c44 DAF81410 		ldr	r1, [sl, #20]
 30796 1c48 204B     		ldr	r3, .L3940+4
 30797 1c4a 9847     		blx	r3
 30798              	.LVL3943:
 30799 1c4c 0146     		mov	r1, r0
 30800              	.LVL3944:
 30801              	.L3106:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 30802              		.loc 1 2515 0
 30803 1c4e 0029     		cmp	r1, #0
 30804 1c50 00F02C81 		beq	.L3914
 30805 1c54 9AF80670 		ldrb	r7, [sl, #6]	@ zero_extendqisi2
 30806 1c58 FEF7B0BA 		b	.L3105
 30807              	.LVL3945:
 30808              	.L3038:
 30809              	.LBE2438:
 30810              	.LBE2445:
 30811              	.LBE2451:
 30812              	.LBE3073:
 30813              	.LBB3074:
 30814              	.LBB2414:
 30815              	.LBB2406:
 30816              	.LBB2397:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 30817              		.loc 1 2513 0
 30818 1c5c 1846     		mov	r0, r3
 30819 1c5e DAF81410 		ldr	r1, [sl, #20]
 30820 1c62 1A4B     		ldr	r3, .L3940+4
 30821 1c64 9847     		blx	r3
 30822              	.LVL3946:
 30823 1c66 0146     		mov	r1, r0
 30824              	.LVL3947:
 30825              	.L3040:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 30826              		.loc 1 2515 0
 30827 1c68 0029     		cmp	r1, #0
 30828 1c6a 00F02681 		beq	.L3915
 30829 1c6e 9AF80650 		ldrb	r5, [sl, #6]	@ zero_extendqisi2
 30830 1c72 FEF7BEBC 		b	.L3039
 30831              	.LVL3948:
 30832              	.L3841:
 30833              	.LBE2397:
 30834              	.LBE2406:
 30835              	.LBE2414:
 30836              	.LBE3074:
 30837              	.LBB3075:
 30838              	.LBB2452:
 30839              	.LBB2446:
 30840              	.LBB2439:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 30841              		.loc 1 2506 0
 30842 1c76 1846     		mov	r0, r3
 30843              	.LVL3949:
 30844 1c78 144B     		ldr	r3, .L3940+4
 30845 1c7a 9847     		blx	r3
 30846              	.LVL3950:
 30847 1c7c 0146     		mov	r1, r0
 30848              	.LVL3951:
 30849 1c7e CAF81000 		str	r0, [sl, #16]
 30850 1c82 E4E7     		b	.L3106
 30851              	.LVL3952:
 30852              	.L3911:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 30853              		.loc 1 2561 0
 30854 1c84 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 30855 1c86 124F     		ldr	r7, .L3940+8
 30856 1c88 0AF12401 		add	r1, sl, #36
 30857 1c8c 2A46     		mov	r2, r5
 30858 1c8e 0123     		movs	r3, #1
 30859              	.LVL3953:
 30860 1c90 B847     		blx	r7
 30861              	.LVL3954:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30862              		.loc 1 2560 0
 30863 1c92 0028     		cmp	r0, #0
 30864 1c94 40F01C81 		bne	.L3117
 30865 1c98 DAF80810 		ldr	r1, [sl, #8]
 30866 1c9c DAF80C00 		ldr	r0, [sl, #12]
 30867 1ca0 9AF80670 		ldrb	r7, [sl, #6]	@ zero_extendqisi2
 30868 1ca4 03E7     		b	.L3116
 30869              	.LVL3955:
 30870              	.L3912:
 30871              	.LBE2439:
 30872              	.LBE2446:
 30873              	.LBE2452:
 30874              	.LBE3075:
 30875              	.LBB3076:
 30876              	.LBB2415:
 30877              	.LBB2407:
 30878              	.LBB2398:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 30879              		.loc 1 2561 0
 30880 1ca6 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 30881 1ca8 094C     		ldr	r4, .L3940+8
 30882 1caa 0AF12401 		add	r1, sl, #36
 30883 1cae 3246     		mov	r2, r6
 30884 1cb0 0123     		movs	r3, #1
 30885              	.LVL3956:
 30886 1cb2 A047     		blx	r4
 30887              	.LVL3957:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30888              		.loc 1 2560 0
 30889 1cb4 0028     		cmp	r0, #0
 30890 1cb6 40F00E82 		bne	.L3051
 30891 1cba DAF80810 		ldr	r1, [sl, #8]
 30892 1cbe DAF80C70 		ldr	r7, [sl, #12]
 30893 1cc2 9AF80650 		ldrb	r5, [sl, #6]	@ zero_extendqisi2
 30894 1cc6 25E7     		b	.L3050
 30895              	.L3941:
 30896              		.align	2
 30897              	.L3940:
 30898 1cc8 00000000 		.word	disk_write
 30899 1ccc 00000000 		.word	create_chain
 30900 1cd0 00000000 		.word	disk_read
 30901              	.LVL3958:
 30902              	.L3850:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 30903              		.loc 1 2506 0
 30904 1cd4 1846     		mov	r0, r3
 30905 1cd6 C94B     		ldr	r3, .L3942
 30906 1cd8 9847     		blx	r3
 30907              	.LVL3959:
 30908 1cda 0146     		mov	r1, r0
 30909              	.LVL3960:
 30910 1cdc CAF81000 		str	r0, [sl, #16]
 30911 1ce0 C2E7     		b	.L3040
 30912              	.LVL3961:
 30913              	.L3081:
 30914              	.LBE2398:
 30915              	.LBE2407:
 30916              	.LBE2415:
 30917              	.LBE3076:
 30918              	.LBB3077:
 30919              	.LBB2633:
 30920              	.LBB2628:
 30921              	.LBB2622:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 30922              		.loc 1 2513 0
 30923 1ce2 1846     		mov	r0, r3
 30924              	.LVL3962:
 30925 1ce4 DAF81410 		ldr	r1, [sl, #20]
 30926              	.LVL3963:
 30927 1ce8 C44B     		ldr	r3, .L3942
 30928              	.LVL3964:
 30929 1cea 9847     		blx	r3
 30930              	.LVL3965:
 30931 1cec 0146     		mov	r1, r0
 30932              	.LVL3966:
 30933              	.L3083:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 30934              		.loc 1 2515 0
 30935 1cee 0029     		cmp	r1, #0
 30936 1cf0 00F0E281 		beq	.L3916
 30937 1cf4 9AF806E0 		ldrb	lr, [sl, #6]	@ zero_extendqisi2
 30938 1cf8 FEF7FDBC 		b	.L3082
 30939              	.LVL3967:
 30940              	.L3913:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 30941              		.loc 1 2561 0
 30942 1cfc 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 30943 1cfe DFF800C3 		ldr	ip, .L3942+4
 30944 1d02 0AF12401 		add	r1, sl, #36
 30945 1d06 2A46     		mov	r2, r5
 30946 1d08 0123     		movs	r3, #1
 30947              	.LVL3968:
 30948 1d0a E047     		blx	ip
 30949              	.LVL3969:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 30950              		.loc 1 2560 0
 30951 1d0c 0028     		cmp	r0, #0
 30952 1d0e 40F0DA81 		bne	.L3094
 30953 1d12 DAF80810 		ldr	r1, [sl, #8]
 30954 1d16 DAF80C00 		ldr	r0, [sl, #12]
 30955 1d1a 9AF806E0 		ldrb	lr, [sl, #6]	@ zero_extendqisi2
 30956 1d1e 2FE7     		b	.L3093
 30957              	.LVL3970:
 30958              	.L3856:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 30959              		.loc 1 2506 0
 30960 1d20 1846     		mov	r0, r3
 30961              	.LVL3971:
 30962 1d22 B64B     		ldr	r3, .L3942
 30963              	.LVL3972:
 30964 1d24 9847     		blx	r3
 30965              	.LVL3973:
 30966 1d26 0146     		mov	r1, r0
 30967              	.LVL3974:
 30968 1d28 CAF81000 		str	r0, [sl, #16]
 30969 1d2c DFE7     		b	.L3083
 30970              	.LVL3975:
 30971              	.L3365:
 30972              	.LBE2622:
 30973              	.LBE2628:
 30974              	.LBE2633:
 30975              	.LBE3077:
 30976              	.LBB3078:
 30977              	.LBB2904:
 30978              	.LBB2888:
 30979              	.LBB2851:
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 30980              		.loc 1 2562 0
 30981 1d2e 9AF80630 		ldrb	r3, [sl, #6]	@ zero_extendqisi2
 30982 1d32 63F07F03 		orn	r3, r3, #127
 30983 1d36 8AF80630 		strb	r3, [sl, #6]
 30984 1d3a FEF770BD 		b	.L3453
 30985              	.LVL3976:
 30986              	.L3844:
 30987 1d3e CDF81C80 		str	r8, [sp, #28]
 30988              	.LBE2851:
 30989              	.LBE2888:
 30990              	.LBE2904:
 30991              	.LBE3078:
4066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (!(f & 2) && j++ < w) res += (cc = f_putc(d, fil));
 30992              		.loc 1 4066 0
 30993 1d42 0894     		str	r4, [sp, #32]
 30994 1d44 8846     		mov	r8, r1
 30995 1d46 CB46     		mov	fp, r9
 30996 1d48 FEF774BD 		b	.L3727
 30997              	.LVL3977:
 30998              	.L3494:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 30999              		.loc 1 4061 0
 31000 1d4c 4FF00509 		mov	r9, #5
 31001 1d50 0422     		movs	r2, #4
 31002              	.LVL3978:
 31003 1d52 FEF78EBB 		b	.L3133
 31004              	.LVL3979:
 31005              	.L3166:
4065:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = 0;
 31006              		.loc 1 4065 0
 31007 1d56 4FF0000B 		mov	fp, #0
 31008 1d5a CDF81C80 		str	r8, [sp, #28]
 31009 1d5e DAF80030 		ldr	r3, [sl, #0]
 31010 1d62 BAF80420 		ldrh	r2, [sl, #4]
4066:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		while (!(f & 2) && j++ < w) res += (cc = f_putc(d, fil));
 31011              		.loc 1 4066 0
 31012 1d66 CDF82090 		str	r9, [sp, #32]
4065:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		res = 0;
 31013              		.loc 1 4065 0
 31014 1d6a D846     		mov	r8, fp
 31015 1d6c CB46     		mov	fp, r9
 31016 1d6e FEF761BD 		b	.L3727
 31017              	.LVL3980:
 31018              	.L3486:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 31019              		.loc 1 4061 0
 31020 1d72 4FF00109 		mov	r9, #1
 31021 1d76 FEF77CBB 		b	.L3133
 31022              	.LVL3981:
 31023              	.L3488:
 31024 1d7a 4FF00209 		mov	r9, #2
 31025 1d7e 0122     		movs	r2, #1
 31026              	.LVL3982:
 31027 1d80 FEF777BB 		b	.L3133
 31028              	.LVL3983:
 31029              	.L3490:
 31030 1d84 4FF00309 		mov	r9, #3
 31031 1d88 0222     		movs	r2, #2
 31032              	.LVL3984:
 31033 1d8a FEF772BB 		b	.L3133
 31034              	.LVL3985:
 31035              	.L3492:
 31036 1d8e 4FF00409 		mov	r9, #4
 31037 1d92 0322     		movs	r2, #3
 31038              	.LVL3986:
 31039 1d94 FEF76DBB 		b	.L3133
 31040              	.LVL3987:
 31041              	.L3500:
 31042 1d98 4FF00809 		mov	r9, #8
 31043 1d9c 0722     		movs	r2, #7
 31044              	.LVL3988:
 31045 1d9e FEF768BB 		b	.L3133
 31046              	.LVL3989:
 31047              	.L3496:
 31048 1da2 4FF00609 		mov	r9, #6
 31049 1da6 0522     		movs	r2, #5
 31050              	.LVL3990:
 31051 1da8 FEF763BB 		b	.L3133
 31052              	.LVL3991:
 31053              	.L3350:
 31054              	.LBB3079:
 31055              	.LBB2905:
 31056              	.LBB2889:
 31057              	.LBB2852:
 31058              	.LBB2838:
 31059              	.LBB2739:
 31060              	.LBB2730:
 31061              	.LBB2721:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 31062              		.loc 1 873 0
 31063 1dac 012E     		cmp	r6, #1
 31064 1dae 7FF647A8 		bls	.L3561
 31065 1db2 A369     		ldr	r3, [r4, #24]
 31066 1db4 9E42     		cmp	r6, r3
 31067 1db6 BFF443A8 		bcs	.L3561
 31068 1dba 2046     		mov	r0, r4
 31069              	.LVL3992:
 31070 1dbc 3146     		mov	r1, r6
 31071 1dbe 3A46     		mov	r2, r7
 31072 1dc0 A847     		blx	r5
 31073              	.LVL3993:
 31074              	.LBE2721:
 31075              	.LBE2730:
1017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 31076              		.loc 1 1017 0
 31077 1dc2 0028     		cmp	r0, #0
 31078 1dc4 3FF432A9 		beq	.L3352
 31079              	.LVL3994:
 31080              	.L3353:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 31081              		.loc 1 1024 0
 31082 1dc8 0128     		cmp	r0, #1
 31083 1dca 3FF432A8 		beq	.L3354
 31084              	.LBB2731:
 31085              	.LBB2722:
 31086 1dce 0127     		movs	r7, #1
 31087              	.LVL3995:
 31088 1dd0 FFF731B8 		b	.L3355
 31089              	.LVL3996:
 31090              	.L3502:
 31091              	.LBE2722:
 31092              	.LBE2731:
 31093              	.LBE2739:
 31094              	.LBE2838:
 31095              	.LBE2852:
 31096              	.LBE2889:
 31097              	.LBE2905:
 31098              	.LBE3079:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 31099              		.loc 1 4061 0
 31100 1dd4 4FF00909 		mov	r9, #9
 31101 1dd8 0822     		movs	r2, #8
 31102              	.LVL3997:
 31103 1dda FEF74ABB 		b	.L3133
 31104              	.LVL3998:
 31105              	.L3504:
 31106 1dde 4FF00A09 		mov	r9, #10
 31107 1de2 0922     		movs	r2, #9
 31108              	.LVL3999:
 31109 1de4 FEF745BB 		b	.L3133
 31110              	.LVL4000:
 31111              	.L3506:
 31112 1de8 4FF00B09 		mov	r9, #11
 31113 1dec 0A22     		movs	r2, #10
 31114              	.LVL4001:
 31115 1dee FEF740BB 		b	.L3133
 31116              	.LVL4002:
 31117              	.L3508:
 31118 1df2 4FF00C09 		mov	r9, #12
 31119 1df6 0B22     		movs	r2, #11
 31120              	.LVL4003:
 31121 1df8 FEF73BBB 		b	.L3133
 31122              	.LVL4004:
 31123              	.L3498:
 31124 1dfc 4FF00709 		mov	r9, #7
 31125 1e00 0622     		movs	r2, #6
 31126              	.LVL4005:
 31127 1e02 FEF736BB 		b	.L3133
 31128              	.LVL4006:
 31129              	.L3431:
 31130              	.LBB3080:
 31131              	.LBB3045:
 31132              	.LBB3033:
 31133              	.LBB3021:
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 31134              		.loc 1 2562 0
 31135 1e06 9AF80630 		ldrb	r3, [sl, #6]	@ zero_extendqisi2
 31136 1e0a 63F07F03 		orn	r3, r3, #127
 31137 1e0e 8AF80630 		strb	r3, [sl, #6]
 31138 1e12 FEF715BF 		b	.L3457
 31139              	.LVL4007:
 31140              	.L3230:
 31141              	.LBE3021:
 31142              	.LBE3033:
 31143              	.LBE3045:
 31144              	.LBE3080:
 31145              	.LBB3081:
 31146              	.LBB2589:
 31147              	.LBB2580:
 31148              	.LBB2571:
 31149 1e16 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 31150 1e1a DAF80030 		ldr	r3, [sl, #0]
 31151 1e1e 62F07F02 		orn	r2, r2, #127
 31152 1e22 8AF80620 		strb	r2, [sl, #6]
 31153 1e26 FEF7C5BC 		b	.L3222
 31154              	.LVL4008:
 31155              	.L3215:
 31156              	.LBB2562:
 31157              	.LBB2553:
 31158              	.LBB2543:
 31159              	.LBB2532:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 31160              		.loc 1 873 0
 31161 1e2a 0128     		cmp	r0, #1
 31162 1e2c 0146     		mov	r1, r0
 31163              	.LVL4009:
 31164 1e2e 7EF6C0AD 		bls	.L3531
 31165 1e32 A369     		ldr	r3, [r4, #24]
 31166 1e34 9842     		cmp	r0, r3
 31167 1e36 BEF4BCAD 		bcs	.L3531
 31168 1e3a 2046     		mov	r0, r4
 31169 1e3c 2A46     		mov	r2, r5
 31170 1e3e B047     		blx	r6
 31171              	.LVL4010:
 31172              	.LBE2532:
 31173              	.LBE2543:
1017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 31174              		.loc 1 1017 0
 31175 1e40 0028     		cmp	r0, #0
 31176 1e42 3EF451AE 		beq	.L3217
 31177              	.LVL4011:
 31178              	.L3218:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 31179              		.loc 1 1024 0
 31180 1e46 0128     		cmp	r0, #1
 31181 1e48 3EF4A1AD 		beq	.L3219
 31182              	.LBB2544:
 31183              	.LBB2533:
 31184 1e4c 0125     		movs	r5, #1
 31185              	.LVL4012:
 31186 1e4e FEF7A0BD 		b	.L3220
 31187              	.LVL4013:
 31188              	.L3512:
 31189              	.LBE2533:
 31190              	.LBE2544:
 31191              	.LBE2553:
 31192              	.LBE2562:
 31193              	.LBE2571:
 31194              	.LBE2580:
 31195              	.LBE2589:
 31196              	.LBE3081:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 31197              		.loc 1 4061 0
 31198 1e52 4FF00E09 		mov	r9, #14
 31199 1e56 0D22     		movs	r2, #13
 31200              	.LVL4014:
 31201 1e58 FEF70BBB 		b	.L3133
 31202              	.LVL4015:
 31203              	.L3514:
 31204 1e5c 4FF00F09 		mov	r9, #15
 31205 1e60 0E22     		movs	r2, #14
 31206              	.LVL4016:
 31207 1e62 FEF706BB 		b	.L3133
 31208              	.LVL4017:
 31209              	.L3859:
 31210 1e66 DAF80040 		ldr	r4, [sl, #0]
 31211 1e6a FEF7BBBC 		b	.L3173
 31212              	.LVL4018:
 31213              	.L3416:
 31214              	.LBB3082:
 31215              	.LBB3046:
 31216              	.LBB3034:
 31217              	.LBB3022:
 31218              	.LBB3010:
 31219              	.LBB3003:
 31220              	.LBB2995:
 31221              	.LBB2986:
 873:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 31222              		.loc 1 873 0
 31223 1e6e 0128     		cmp	r0, #1
 31224 1e70 0146     		mov	r1, r0
 31225              	.LVL4019:
 31226 1e72 7FF65FA8 		bls	.L3577
 31227 1e76 A369     		ldr	r3, [r4, #24]
 31228 1e78 9842     		cmp	r0, r3
 31229 1e7a BFF45BA8 		bcs	.L3577
 31230 1e7e 2046     		mov	r0, r4
 31231 1e80 3246     		mov	r2, r6
 31232 1e82 A847     		blx	r5
 31233              	.LVL4020:
 31234              	.LBE2986:
 31235              	.LBE2995:
1017:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (res == FR_OK) {
 31236              		.loc 1 1017 0
 31237 1e84 0028     		cmp	r0, #0
 31238 1e86 3FF43FAA 		beq	.L3418
 31239              	.LVL4021:
 31240              	.L3419:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 31241              		.loc 1 1024 0
 31242 1e8a 0128     		cmp	r0, #1
 31243 1e8c 3FF44AA8 		beq	.L3420
 31244              	.LBB2996:
 31245              	.LBB2987:
 31246 1e90 0126     		movs	r6, #1
 31247              	.LVL4022:
 31248 1e92 FFF749B8 		b	.L3421
 31249              	.LVL4023:
 31250              	.L3473:
 31251              	.LBE2987:
 31252              	.LBE2996:
 31253              	.LBE3003:
 31254              	.LBE3010:
 31255              	.LBE3022:
 31256              	.LBE3034:
 31257              	.LBE3046:
 31258              	.LBE3082:
4027:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			for (j = 0; p[j]; j++) ;
 31259              		.loc 1 4027 0
 31260 1e96 0124     		movs	r4, #1
 31261              	.LVL4024:
4029:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!(f & 2)) {
 31262              		.loc 1 4029 0
 31263 1e98 0029     		cmp	r1, #0
 31264 1e9a 7EF441A9 		bne	.L3474
 31265 1e9e FEF7E0BB 		b	.L3839
 31266              	.LVL4025:
 31267              	.L3510:
4061:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			s[i++] = d + '0';
 31268              		.loc 1 4061 0
 31269 1ea2 4FF00D09 		mov	r9, #13
 31270 1ea6 0C22     		movs	r2, #12
 31271              	.LVL4026:
 31272 1ea8 FEF7E3BA 		b	.L3133
 31273              	.LVL4027:
 31274              	.L3914:
 31275 1eac DAF80870 		ldr	r7, [sl, #8]
 31276 1eb0 DAF80C00 		ldr	r0, [sl, #12]
 31277              	.LVL4028:
 31278 1eb4 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 31279 1eb8 0AE6     		b	.L3101
 31280              	.LVL4029:
 31281              	.L3915:
 31282 1eba DAF80850 		ldr	r5, [sl, #8]
 31283 1ebe DAF80C70 		ldr	r7, [sl, #12]
 31284              	.LVL4030:
 31285 1ec2 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 31286 1ec6 36E6     		b	.L3035
 31287              	.LVL4031:
 31288              	.L3288:
 31289              	.LBB3083:
 31290              	.LBB2906:
 31291              	.LBB2890:
 31292              	.LBB2853:
 31293              	.LBB2839:
 31294              	.LBB2824:
 31295              	.LBB2818:
 31296              	.LBB2808:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 31297              		.loc 1 838 0
 31298 1ec8 1B05     		lsls	r3, r3, #20
 31299              	.LVL4032:
 31300 1eca 1B0D     		lsrs	r3, r3, #20
 31301 1ecc FFF715B9 		b	.L3289
 31302              	.LVL4033:
 31303              	.L3117:
 31304              	.LBE2808:
 31305              	.LBE2818:
 31306              	.LBE2824:
 31307              	.LBE2839:
 31308              	.LBE2853:
 31309              	.LBE2890:
 31310              	.LBE2906:
 31311              	.LBE3083:
 31312              	.LBB3084:
 31313              	.LBB2453:
 31314              	.LBB2447:
 31315              	.LBB2440:
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 31316              		.loc 1 2562 0
 31317 1ed0 9AF80630 		ldrb	r3, [sl, #6]	@ zero_extendqisi2
 31318 1ed4 63F07F03 		orn	r3, r3, #127
 31319 1ed8 8AF80630 		strb	r3, [sl, #6]
 31320 1edc FEF72AB9 		b	.L3439
 31321              	.LVL4034:
 31322              	.L3398:
 31323              	.LBE2440:
 31324              	.LBE2447:
 31325              	.LBE2453:
 31326              	.LBE3084:
 31327              	.LBB3085:
 31328              	.LBB3047:
 31329              	.LBB3035:
 31330              	.LBB3023:
 31331              	.LBB3011:
 31332              	.LBB3004:
 31333              	.LBB2997:
 31334              	.LBB2982:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 31335              		.loc 1 838 0
 31336 1ee0 1B05     		lsls	r3, r3, #20
 31337              	.LVL4035:
 31338 1ee2 1B0D     		lsrs	r3, r3, #20
 31339 1ee4 FFF7CFB9 		b	.L3399
 31340              	.LVL4036:
 31341              	.L3546:
 31342              	.LBE2982:
 31343              	.LBE2997:
 31344              	.LBE3004:
 31345              	.LBE3011:
 31346              	.LBE3023:
 31347              	.LBE3035:
 31348              	.LBE3047:
 31349              	.LBE3085:
 31350              	.LBB3086:
 31351              	.LBB2907:
 31352              	.LBB2891:
 31353              	.LBB2854:
 31354              	.LBB2840:
 31355              	.LBB2825:
1019:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 31356              		.loc 1 1019 0
 31357 1ee8 3746     		mov	r7, r6
 31358 1eea FEF7D4BF 		b	.L3271
 31359              	.LVL4037:
 31360              	.L3332:
 31361              	.LBE2825:
 31362              	.LBE2840:
 31363              	.LBB2841:
 31364              	.LBB2740:
 31365              	.LBB2732:
 31366              	.LBB2717:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 31367              		.loc 1 838 0
 31368 1eee 1B05     		lsls	r3, r3, #20
 31369              	.LVL4038:
 31370 1ef0 1B0D     		lsrs	r3, r3, #20
 31371 1ef2 FFF75CB8 		b	.L3333
 31372              	.LVL4039:
 31373              	.L3923:
 31374              	.LBE2717:
 31375              	.LBE2732:
 31376              	.LBE2740:
 31377              	.LBE2841:
 31378              	.LBE2854:
 31379              	.LBE2891:
 31380              	.LBE2907:
 31381              	.LBE3086:
4030:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				while (j++ < w) chc += (cc = f_putc(' ', fil));
 31382              		.loc 1 4030 0
 31383 1ef6 2546     		mov	r5, r4
 31384 1ef8 0E46     		mov	r6, r1
 31385 1efa 0134     		adds	r4, r4, #1
 31386              	.LVL4040:
 31387 1efc FEF711B9 		b	.L3073
 31388              	.LVL4041:
 31389              	.L3197:
 31390              	.LBB3087:
 31391              	.LBB2590:
 31392              	.LBB2581:
 31393              	.LBB2572:
 31394              	.LBB2563:
 31395              	.LBB2554:
 31396              	.LBB2545:
 31397              	.LBB2528:
 838:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 31398              		.loc 1 838 0
 31399 1f00 1B05     		lsls	r3, r3, #20
 31400              	.LVL4042:
 31401 1f02 1B0D     		lsrs	r3, r3, #20
 31402 1f04 FEF7B1BD 		b	.L3198
 31403              	.LVL4043:
 31404              	.L3236:
 31405              	.LBE2528:
 31406              	.LBE2545:
 31407              	.LBE2554:
 31408              	.LBE2563:
 31409              	.LBE2572:
 31410              	.LBE2581:
 31411              	.LBE2590:
 31412              	.LBE3087:
 31413              	.LBB3088:
 31414              	.LBB2908:
 31415              	.LBB2892:
 31416              	.LBB2879:
 31417              	.LBB2876:
 31418              	.LBB2873:
2492:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->flag & FA__ERROR)				/* Aborted file? */
 31419              		.loc 1 2492 0
 31420 1f08 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 31421 1f0c 1006     		lsls	r0, r2, #24
 31422 1f0e 1746     		mov	r7, r2
 31423 1f10 3EF508AF 		bmi	.L3825
2494:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 31424              		.loc 1 2494 0
 31425 1f14 02F00201 		and	r1, r2, #2
 31426 1f18 C9B2     		uxtb	r1, r1
 31427 1f1a 0029     		cmp	r1, #0
 31428 1f1c 3EF402AF 		beq	.L3825
2496:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if ((DWORD)(fp->fsize + btw) < fp->fsize) btw = 0;	/* File size cannot reach 4GB */
 31429              		.loc 1 2496 0
 31430 1f20 DAF80C00 		ldr	r0, [sl, #12]
 31431              	.LVL4044:
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 31432              		.loc 1 2500 0
 31433 1f24 DAF80810 		ldr	r1, [sl, #8]
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 31434              		.loc 1 2498 0
 31435 1f28 451C     		adds	r5, r0, #1
 31436 1f2a 80F0C280 		bcs	.L3917
2500:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 31437              		.loc 1 2500 0
 31438 1f2e CB05     		lsls	r3, r1, #23
 31439 1f30 DB0D     		lsrs	r3, r3, #23
 31440 1f32 63BB     		cbnz	r3, .L3532
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 31441              		.loc 1 2501 0
 31442 1f34 DAF80030 		ldr	r3, [sl, #0]
 31443 1f38 9E78     		ldrb	r6, [r3, #2]	@ zero_extendqisi2
 31444 1f3a 013E     		subs	r6, r6, #1
 31445 1f3c 06EA5126 		and	r6, r6, r1, lsr #9
 31446              	.LVL4045:
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 31447              		.loc 1 2502 0
 31448 1f40 16F0FF06 		ands	r6, r6, #255
 31449              	.LVL4046:
2501:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 31450              		.loc 1 2501 0
 31451 1f44 1D46     		mov	r5, r3
2502:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 31452              		.loc 1 2502 0
 31453 1f46 0ED1     		bne	.L3241
2503:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 31454              		.loc 1 2503 0
 31455 1f48 0029     		cmp	r1, #0
 31456 1f4a 6FD1     		bne	.L3242
2504:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 31457              		.loc 1 2504 0
 31458 1f4c DAF81030 		ldr	r3, [sl, #16]
 31459              	.LVL4047:
2505:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 31460              		.loc 1 2505 0
 31461 1f50 002B     		cmp	r3, #0
 31462 1f52 77D0     		beq	.L3918
 31463              	.LVL4048:
 31464              	.L3243:
2516:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 31465              		.loc 1 2516 0
 31466 1f54 012B     		cmp	r3, #1
 31467 1f56 00F08D80 		beq	.L3830
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 31468              		.loc 1 2517 0
 31469 1f5a 5A1C     		adds	r2, r3, #1
 31470 1f5c 00F08A80 		beq	.L3830
2518:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 31471              		.loc 1 2518 0
 31472 1f60 CAF81430 		str	r3, [sl, #20]
 31473 1f64 2B46     		mov	r3, r5
 31474              	.LVL4049:
 31475              	.L3241:
2524:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 31476              		.loc 1 2524 0
 31477 1f66 07F04002 		and	r2, r7, #64
 31478 1f6a D2B2     		uxtb	r2, r2
 31479 1f6c 002A     		cmp	r2, #0
 31480 1f6e 49D1     		bne	.L3919
 31481              	.L3249:
 31482              	.LVL4050:
 31483              	.LBB2865:
 31484              	.LBB2866:
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 31485              		.loc 1 806 0
 31486 1f70 DAF81410 		ldr	r1, [sl, #20]
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 31487              		.loc 1 807 0
 31488 1f74 AA69     		ldr	r2, [r5, #24]
 806:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	clst -= 2;
 31489              		.loc 1 806 0
 31490 1f76 0239     		subs	r1, r1, #2
 31491              	.LVL4051:
 807:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 31492              		.loc 1 807 0
 31493 1f78 023A     		subs	r2, r2, #2
 31494 1f7a 9142     		cmp	r1, r2
 31495 1f7c 26D3     		bcc	.L3920
 31496              	.L3251:
 31497              	.LBE2866:
 31498              	.LBE2865:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 31499              		.loc 1 2531 0
 31500 1f7e 67F07F07 		orn	r7, r7, #127
 31501 1f82 8AF80670 		strb	r7, [sl, #6]
 31502              	.LVL4052:
 31503              	.L3247:
 31504 1f86 BAF80420 		ldrh	r2, [sl, #4]
 31505 1f8a FEF75DBC 		b	.L3234
 31506              	.LVL4053:
 31507              	.L3532:
 31508 1f8e DAF80050 		ldr	r5, [sl, #0]
 31509              	.LVL4054:
 31510              	.L3240:
 31511              	.LBB2868:
 31512              	.LBB2869:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 31513              		.loc 1 541 0
 31514 1f92 5344     		add	r3, sl, r3
 31515              	.LVL4055:
 31516              	.LBE2869:
 31517              	.LBE2868:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 31518              		.loc 1 2576 0
 31519 1f94 47F04002 		orr	r2, r7, #64
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 31520              		.loc 1 2499 0
 31521 1f98 0131     		adds	r1, r1, #1
 31522              	.LBB2871:
 31523              	.LBB2870:
 541:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		*d++ = *s++;
 31524              		.loc 1 541 0
 31525 1f9a 83F82460 		strb	r6, [r3, #36]
 31526              	.LVL4056:
 31527              	.LBE2870:
 31528              	.LBE2871:
2576:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		fp->flag |= FA__DIRTY;
 31529              		.loc 1 2576 0
 31530 1f9e 8AF80620 		strb	r2, [sl, #6]
 31531              	.LVL4057:
2499:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 31532              		.loc 1 2499 0
 31533 1fa2 CAF80810 		str	r1, [sl, #8]
 31534              	.LVL4058:
 31535 1fa6 0123     		movs	r3, #1
 31536              	.LVL4059:
 31537              	.L3239:
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 31538              		.loc 1 2580 0
 31539 1fa8 8842     		cmp	r0, r1
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 31540              		.loc 1 2581 0
 31541 1faa 42F02002 		orr	r2, r2, #32
2580:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 31542              		.loc 1 2580 0
 31543 1fae 38BF     		it	cc
 31544 1fb0 CAF80C10 		strcc	r1, [sl, #12]
 31545              	.LBE2873:
 31546              	.LBE2876:
3952:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return (bw == btw) ? 1 : EOF;	/* Return the result */
 31547              		.loc 1 3952 0
 31548 1fb4 012B     		cmp	r3, #1
 31549              	.LBB2877:
 31550              	.LBB2874:
2581:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 31551              		.loc 1 2581 0
 31552 1fb6 8AF80620 		strb	r2, [sl, #6]
 31553              	.LVL4060:
 31554 1fba 07BF     		ittee	eq
 31555 1fbc 2B46     		moveq	r3, r5
 31556              	.LVL4061:
 31557 1fbe BAF80420 		ldrheq	r2, [sl, #4]
 31558 1fc2 BAF80420 		ldrhne	r2, [sl, #4]
 31559 1fc6 2B46     		movne	r3, r5
 31560 1fc8 FEF73EBC 		b	.L3234
 31561              	.LVL4062:
 31562              	.L3920:
 31563              	.LBB2872:
 31564              	.LBB2867:
 808:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	return clst * fs->csize + fs->database;
 31565              		.loc 1 808 0
 31566 1fcc A878     		ldrb	r0, [r5, #2]	@ zero_extendqisi2
 31567 1fce AA6A     		ldr	r2, [r5, #40]
 31568 1fd0 01FB0022 		mla	r2, r1, r0, r2
 31569              	.LBE2867:
 31570              	.LBE2872:
2531:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 31571              		.loc 1 2531 0
 31572 1fd4 002A     		cmp	r2, #0
 31573 1fd6 D2D0     		beq	.L3251
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 31574              		.loc 1 2559 0
 31575 1fd8 DAF81830 		ldr	r3, [sl, #24]
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 31576              		.loc 1 2560 0
 31577 1fdc DAF80810 		ldr	r1, [sl, #8]
 31578              	.LVL4063:
 31579 1fe0 DAF80C00 		ldr	r0, [sl, #12]
2532:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			sect += csect;
 31580              		.loc 1 2532 0
 31581 1fe4 B618     		adds	r6, r6, r2
 31582              	.LVL4064:
2559:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 31583              		.loc 1 2559 0
 31584 1fe6 9E42     		cmp	r6, r3
 31585 1fe8 01D0     		beq	.L3254
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 31586              		.loc 1 2560 0
 31587 1fea 8142     		cmp	r1, r0
 31588 1fec 31D3     		bcc	.L3921
 31589              	.LVL4065:
 31590              	.L3254:
 31591 1fee CB05     		lsls	r3, r1, #23
2565:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 			fp->dsect = sect;
 31592              		.loc 1 2565 0
 31593 1ff0 CAF81860 		str	r6, [sl, #24]
 31594 1ff4 DB0D     		lsrs	r3, r3, #23
 31595 1ff6 9DF83460 		ldrb	r6, [sp, #52]	@ zero_extendqisi2
 31596              	.LVL4066:
 31597 1ffa CAE7     		b	.L3240
 31598              	.L3943:
 31599              		.align	2
 31600              	.L3942:
 31601 1ffc 00000000 		.word	create_chain
 31602 2000 00000000 		.word	disk_read
 31603              	.LVL4067:
 31604              	.L3919:
2525:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1) != RES_OK)
 31605              		.loc 1 2525 0
 31606 2004 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 31607 2006 DAF81820 		ldr	r2, [sl, #24]
 31608 200a 3C4D     		ldr	r5, .L3944
 31609 200c 0AF12401 		add	r1, sl, #36
 31610 2010 0123     		movs	r3, #1
 31611 2012 A847     		blx	r5
 31612              	.LVL4068:
 31613 2014 0028     		cmp	r0, #0
 31614 2016 43D1     		bne	.L3255
2527:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				fp->flag &= ~FA__DIRTY;
 31615              		.loc 1 2527 0
 31616 2018 9AF80670 		ldrb	r7, [sl, #6]	@ zero_extendqisi2
 31617 201c DAF80050 		ldr	r5, [sl, #0]
 31618 2020 07F0BF07 		and	r7, r7, #191
 31619 2024 8AF80670 		strb	r7, [sl, #6]
 31620 2028 2B46     		mov	r3, r5
 31621 202a A1E7     		b	.L3249
 31622              	.LVL4069:
 31623              	.L3242:
2513:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 31624              		.loc 1 2513 0
 31625 202c 1846     		mov	r0, r3
 31626              	.LVL4070:
 31627 202e DAF81410 		ldr	r1, [sl, #20]
 31628              	.LVL4071:
 31629 2032 334B     		ldr	r3, .L3944+4
 31630              	.LVL4072:
 31631 2034 9847     		blx	r3
 31632              	.LVL4073:
 31633 2036 0346     		mov	r3, r0
 31634              	.LVL4074:
 31635              	.L3244:
2515:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 31636              		.loc 1 2515 0
 31637 2038 13B3     		cbz	r3, .L3922
 31638 203a 9AF80670 		ldrb	r7, [sl, #6]	@ zero_extendqisi2
 31639 203e DAF80050 		ldr	r5, [sl, #0]
 31640 2042 87E7     		b	.L3243
 31641              	.LVL4075:
 31642              	.L3918:
2506:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 31643              		.loc 1 2506 0
 31644 2044 2E4B     		ldr	r3, .L3944+4
 31645              	.LVL4076:
 31646 2046 2846     		mov	r0, r5
 31647              	.LVL4077:
 31648 2048 9847     		blx	r3
 31649              	.LVL4078:
 31650 204a 0346     		mov	r3, r0
 31651              	.LVL4079:
 31652 204c CAF81000 		str	r0, [sl, #16]
 31653 2050 F2E7     		b	.L3244
 31654              	.LVL4080:
 31655              	.L3921:
2561:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1) != RES_OK)
 31656              		.loc 1 2561 0
 31657 2052 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 31658 2054 2B4D     		ldr	r5, .L3944+8
 31659              	.LVL4081:
 31660 2056 0AF12401 		add	r1, sl, #36
 31661 205a 3246     		mov	r2, r6
 31662 205c 0123     		movs	r3, #1
 31663 205e A847     		blx	r5
 31664              	.LVL4082:
2560:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (fp->fptr < fp->fsize &&
 31665              		.loc 1 2560 0
 31666 2060 F0B9     		cbnz	r0, .L3255
 31667 2062 DAF80810 		ldr	r1, [sl, #8]
 31668 2066 DAF80C00 		ldr	r0, [sl, #12]
 31669 206a 9AF80670 		ldrb	r7, [sl, #6]	@ zero_extendqisi2
 31670 206e DAF80050 		ldr	r5, [sl, #0]
 31671 2072 BCE7     		b	.L3254
 31672              	.LVL4083:
 31673              	.L3830:
2517:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 31674              		.loc 1 2517 0
 31675 2074 67F07F07 		orn	r7, r7, #127
 31676 2078 8AF80670 		strb	r7, [sl, #6]
 31677 207c 2B46     		mov	r3, r5
 31678              	.LVL4084:
 31679 207e 82E7     		b	.L3247
 31680              	.LVL4085:
 31681              	.L3922:
 31682 2080 DAF80810 		ldr	r1, [sl, #8]
 31683 2084 DAF80C00 		ldr	r0, [sl, #12]
 31684              	.LVL4086:
 31685 2088 DAF80050 		ldr	r5, [sl, #0]
 31686 208c 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 31687 2090 8AE7     		b	.L3239
 31688              	.LVL4087:
 31689              	.L3840:
 31690 2092 DAF80870 		ldr	r7, [sl, #8]
 31691 2096 1BE5     		b	.L3101
 31692              	.LVL4088:
 31693              	.L3849:
 31694 2098 DAF80850 		ldr	r5, [sl, #8]
 31695              	.LBE2874:
 31696              	.LBE2877:
 31697              	.LBE2879:
 31698              	.LBE2892:
 31699              	.LBE2908:
 31700              	.LBE3088:
 31701              	.LBB3089:
 31702              	.LBB2416:
 31703              	.LBB2408:
 31704              	.LBB2399:
2498:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
 31705              		.loc 1 2498 0
 31706 209c 0146     		mov	r1, r0
 31707 209e 4AE5     		b	.L3035
 31708              	.LVL4089:
 31709              	.L3255:
 31710              	.LBE2399:
 31711              	.LBE2408:
 31712              	.LBE2416:
 31713              	.LBE3089:
 31714              	.LBB3090:
 31715              	.LBB2909:
 31716              	.LBB2893:
 31717              	.LBB2880:
 31718              	.LBB2878:
 31719              	.LBB2875:
2562:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 31720              		.loc 1 2562 0
 31721 20a0 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 31722 20a4 DAF80030 		ldr	r3, [sl, #0]
 31723 20a8 62F07F02 		orn	r2, r2, #127
 31724 20ac 8AF80620 		strb	r2, [sl, #6]
 31725 20b0 69E7     		b	.L3247
 31726              	.LVL4090:
 31727              	.L3917:
 31728 20b2 DAF80050 		ldr	r5, [sl, #0]
 31729 20b6 77E7     		b	.L3239
 31730              	.LVL4091:
 31731              	.L3916:
 31732 20b8 DAF80830 		ldr	r3, [sl, #8]
 31733 20bc DAF80C00 		ldr	r0, [sl, #12]
 31734              	.LVL4092:
 31735 20c0 9AF80620 		ldrb	r2, [sl, #6]	@ zero_extendqisi2
 31736 20c4 6EE5     		b	.L3078
 31737              	.LVL4093:
 31738              	.L3094:
 31739              	.LBE2875:
 31740              	.LBE2878:
 31741              	.LBE2880:
 31742              	.LBE2893:
 31743              	.LBE2909:
 31744              	.LBE3090:
 31745              	.LBB3091:
 31746              	.LBB2634:
 31747              	.LBB2629:
 31748              	.LBB2623:
 31749 20c6 9AF80630 		ldrb	r3, [sl, #6]	@ zero_extendqisi2
 31750 20ca 63F07F03 		orn	r3, r3, #127
 31751 20ce 8AF80630 		strb	r3, [sl, #6]
 31752 20d2 FEF7CCBA 		b	.L3438
 31753              	.LVL4094:
 31754              	.L3051:
 31755              	.LBE2623:
 31756              	.LBE2629:
 31757              	.LBE2634:
 31758              	.LBE3091:
 31759              	.LBB3092:
 31760              	.LBB2417:
 31761              	.LBB2409:
 31762              	.LBB2400:
 31763 20d6 9AF80630 		ldrb	r3, [sl, #6]	@ zero_extendqisi2
 31764 20da 63F07F03 		orn	r3, r3, #127
 31765 20de D346     		mov	fp, sl
 31766 20e0 8AF80630 		strb	r3, [sl, #6]
 31767 20e4 FDF7ADBF 		b	.L3436
 31768              	.LVL4095:
 31769              	.L3305:
 31770              	.LBE2400:
 31771              	.LBE2409:
 31772              	.LBE2417:
 31773              	.LBE3092:
 31774              	.LBB3093:
 31775              	.LBB2910:
 31776              	.LBB2894:
 31777              	.LBB2855:
 31778              	.LBB2842:
 31779              	.LBB2826:
1024:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
 31780              		.loc 1 1024 0
 31781 20e8 0128     		cmp	r0, #1
 31782 20ea 3EF4D2AE 		beq	.L3306
1008:/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 31783              		.loc 1 1008 0
 31784 20ee 0127     		movs	r7, #1
 31785 20f0 FEF7D1BE 		b	.L3271
 31786              	.LVL4096:
 31787              	.L3855:
 31788 20f4 DAF80830 		ldr	r3, [sl, #8]
 31789 20f8 54E5     		b	.L3078
 31790              	.L3945:
 31791 20fa 00BF     		.align	2
 31792              	.L3944:
 31793 20fc 00000000 		.word	disk_write
 31794 2100 00000000 		.word	create_chain
 31795 2104 00000000 		.word	disk_read
 31796              	.LBE2826:
 31797              	.LBE2842:
 31798              	.LBE2855:
 31799              	.LBE2894:
 31800              	.LBE2910:
 31801              	.LBE3093:
 31802              		.cfi_endproc
 31803              	.LFE49:
 31805              		.section	.rodata.excvt.4533,"a",%progbits
 31806              		.align	2
 31807              		.set	.LANCHOR1,. + 0
 31810              	excvt.4533:
 31811 0000 80       		.byte	-128
 31812 0001 81       		.byte	-127
 31813 0002 82       		.byte	-126
 31814 0003 83       		.byte	-125
 31815 0004 84       		.byte	-124
 31816 0005 85       		.byte	-123
 31817 0006 86       		.byte	-122
 31818 0007 87       		.byte	-121
 31819 0008 88       		.byte	-120
 31820 0009 89       		.byte	-119
 31821 000a 8A       		.byte	-118
 31822 000b 8B       		.byte	-117
 31823 000c 8C       		.byte	-116
 31824 000d 8D       		.byte	-115
 31825 000e 8E       		.byte	-114
 31826 000f 8F       		.byte	-113
 31827 0010 90       		.byte	-112
 31828 0011 91       		.byte	-111
 31829 0012 92       		.byte	-110
 31830 0013 93       		.byte	-109
 31831 0014 94       		.byte	-108
 31832 0015 95       		.byte	-107
 31833 0016 96       		.byte	-106
 31834 0017 97       		.byte	-105
 31835 0018 98       		.byte	-104
 31836 0019 99       		.byte	-103
 31837 001a AD       		.byte	-83
 31838 001b 9B       		.byte	-101
 31839 001c 8C       		.byte	-116
 31840 001d 9D       		.byte	-99
 31841 001e AE       		.byte	-82
 31842 001f 9F       		.byte	-97
 31843 0020 A0       		.byte	-96
 31844 0021 21       		.byte	33
 31845 0022 A2       		.byte	-94
 31846 0023 A3       		.byte	-93
 31847 0024 A4       		.byte	-92
 31848 0025 A5       		.byte	-91
 31849 0026 A6       		.byte	-90
 31850 0027 A7       		.byte	-89
 31851 0028 A8       		.byte	-88
 31852 0029 A9       		.byte	-87
 31853 002a AA       		.byte	-86
 31854 002b AB       		.byte	-85
 31855 002c AC       		.byte	-84
 31856 002d AD       		.byte	-83
 31857 002e AE       		.byte	-82
 31858 002f AF       		.byte	-81
 31859 0030 B0       		.byte	-80
 31860 0031 B1       		.byte	-79
 31861 0032 B2       		.byte	-78
 31862 0033 B3       		.byte	-77
 31863 0034 B4       		.byte	-76
 31864 0035 B5       		.byte	-75
 31865 0036 B6       		.byte	-74
 31866 0037 B7       		.byte	-73
 31867 0038 B8       		.byte	-72
 31868 0039 B9       		.byte	-71
 31869 003a BA       		.byte	-70
 31870 003b BB       		.byte	-69
 31871 003c BC       		.byte	-68
 31872 003d BD       		.byte	-67
 31873 003e BE       		.byte	-66
 31874 003f BF       		.byte	-65
 31875 0040 C0       		.byte	-64
 31876 0041 C1       		.byte	-63
 31877 0042 C2       		.byte	-62
 31878 0043 C3       		.byte	-61
 31879 0044 C4       		.byte	-60
 31880 0045 C5       		.byte	-59
 31881 0046 C6       		.byte	-58
 31882 0047 C7       		.byte	-57
 31883 0048 C8       		.byte	-56
 31884 0049 C9       		.byte	-55
 31885 004a CA       		.byte	-54
 31886 004b CB       		.byte	-53
 31887 004c CC       		.byte	-52
 31888 004d CD       		.byte	-51
 31889 004e CE       		.byte	-50
 31890 004f CF       		.byte	-49
 31891 0050 D0       		.byte	-48
 31892 0051 D1       		.byte	-47
 31893 0052 D2       		.byte	-46
 31894 0053 D3       		.byte	-45
 31895 0054 D4       		.byte	-44
 31896 0055 D5       		.byte	-43
 31897 0056 D6       		.byte	-42
 31898 0057 D7       		.byte	-41
 31899 0058 D8       		.byte	-40
 31900 0059 D9       		.byte	-39
 31901 005a DA       		.byte	-38
 31902 005b DB       		.byte	-37
 31903 005c DC       		.byte	-36
 31904 005d DD       		.byte	-35
 31905 005e DE       		.byte	-34
 31906 005f DF       		.byte	-33
 31907 0060 C0       		.byte	-64
 31908 0061 C1       		.byte	-63
 31909 0062 C2       		.byte	-62
 31910 0063 C3       		.byte	-61
 31911 0064 C4       		.byte	-60
 31912 0065 C5       		.byte	-59
 31913 0066 C6       		.byte	-58
 31914 0067 C7       		.byte	-57
 31915 0068 C8       		.byte	-56
 31916 0069 C9       		.byte	-55
 31917 006a CA       		.byte	-54
 31918 006b CB       		.byte	-53
 31919 006c CC       		.byte	-52
 31920 006d CD       		.byte	-51
 31921 006e CE       		.byte	-50
 31922 006f CF       		.byte	-49
 31923 0070 D0       		.byte	-48
 31924 0071 D1       		.byte	-47
 31925 0072 D2       		.byte	-46
 31926 0073 D3       		.byte	-45
 31927 0074 D4       		.byte	-44
 31928 0075 D5       		.byte	-43
 31929 0076 D6       		.byte	-42
 31930 0077 F7       		.byte	-9
 31931 0078 D8       		.byte	-40
 31932 0079 D9       		.byte	-39
 31933 007a DA       		.byte	-38
 31934 007b DB       		.byte	-37
 31935 007c DC       		.byte	-36
 31936 007d DD       		.byte	-35
 31937 007e DE       		.byte	-34
 31938 007f 9F       		.byte	-97
 31939              		.section	.rodata.cst.4791,"a",%progbits
 31940              		.align	2
 31941              		.set	.LANCHOR6,. + 0
 31944              	cst.4791:
 31945 0000 0080     		.short	-32768
 31946 0002 0040     		.short	16384
 31947 0004 0020     		.short	8192
 31948 0006 0010     		.short	4096
 31949 0008 0008     		.short	2048
 31950 000a 0040     		.short	16384
 31951 000c 0020     		.short	8192
 31952 000e 0010     		.short	4096
 31953 0010 0008     		.short	2048
 31954 0012 0004     		.short	1024
 31955 0014 0002     		.short	512
 31956 0016 0000     		.section	.bss.Fsid,"aw",%nobits
 31957              		.align	1
 31958              		.set	.LANCHOR3,. + 0
 31961              	Fsid:
 31962 0000 0000     		.space	2
 31963              		.section	.rodata.str1.4,"aMS",%progbits,1
 31964              		.align	2
 31965              	.LC0:
 31966 0000 222A3A3C 		.ascii	"\"*:<>?|\177\000"
 31966      3E3F7C7F 
 31966      00
 31967 0009 000000   		.space	3
 31968              	.LC1:
 31969 000c 2B2C3B3D 		.ascii	"+,;=[]\000"
 31969      5B5D00
 31970 0013 00       		.space	1
 31971              	.LC2:
 31972 0014 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 31972      53444F53 
 31972      352E3000 
 31973              	.LC3:
 31974 0020 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 31974      414D4520 
 31974      20202046 
 31974      41543332 
 31974      20202000 
 31975              	.LC4:
 31976 0034 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 31976      414D4520 
 31976      20202046 
 31976      41542020 
 31976      20202000 
 31977              		.section	.bss.LfnBuf,"aw",%nobits
 31978              		.align	2
 31979              		.set	.LANCHOR4,. + 0
 31982              	LfnBuf:
 31983 0000 00000000 		.space	512
 31983      00000000 
 31983      00000000 
 31983      00000000 
 31983      00000000 
 31984              		.section	.rodata.LfnOfs,"a",%progbits
 31985              		.align	2
 31986              		.set	.LANCHOR0,. + 0
 31989              	LfnOfs:
 31990 0000 01       		.byte	1
 31991 0001 03       		.byte	3
 31992 0002 05       		.byte	5
 31993 0003 07       		.byte	7
 31994 0004 09       		.byte	9
 31995 0005 0E       		.byte	14
 31996 0006 10       		.byte	16
 31997 0007 12       		.byte	18
 31998 0008 14       		.byte	20
 31999 0009 16       		.byte	22
 32000 000a 18       		.byte	24
 32001 000b 1C       		.byte	28
 32002 000c 1E       		.byte	30
 32003 000d 000000   		.section	.rodata.vst.4790,"a",%progbits
 32004              		.align	2
 32005              		.set	.LANCHOR5,. + 0
 32008              	vst.4790:
 32009 0000 0004     		.short	1024
 32010 0002 0002     		.short	512
 32011 0004 0001     		.short	256
 32012 0006 8000     		.short	128
 32013 0008 4000     		.short	64
 32014 000a 2000     		.short	32
 32015 000c 1000     		.short	16
 32016 000e 0800     		.short	8
 32017 0010 0400     		.short	4
 32018 0012 0200     		.short	2
 32019 0014 0000     		.short	0
 32020 0016 0000     		.section	.bss.FatFs,"aw",%nobits
 32021              		.align	2
 32022              		.set	.LANCHOR2,. + 0
 32025              	FatFs:
 32026 0000 00000000 		.space	4
 32027              		.text
 32028              	.Letext0:
 32029              		.file 2 "/opt/arm-2012.09/bin/../lib/gcc/arm-none-eabi/4.7.2/include/stddef.h"
 32030              		.file 3 "/opt/arm-2012.09/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/include/std
 32031              		.file 4 "/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/integer.h"
 32032              		.file 5 "/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/ff.h"
 32033              		.file 6 "/home/jonas/warwick/3dProfilometer/xpcc/ext/fatfs/diskio.h"
 32034              		.file 7 "/opt/arm-2012.09/bin/../lib/gcc/arm-none-eabi/4.7.2/include/stdarg.h"
 32035              		.file 8 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
     /tmp/ccs0f8Xg.s:20     .text.cmp_lfn:00000000 $t
     /tmp/ccs0f8Xg.s:24     .text.cmp_lfn:00000000 cmp_lfn
     /tmp/ccs0f8Xg.s:132    .text.cmp_lfn:00000088 $d
     /tmp/ccs0f8Xg.s:138    .text.sync:00000000 $t
     /tmp/ccs0f8Xg.s:142    .text.sync:00000000 sync
     /tmp/ccs0f8Xg.s:377    .text.sync:00000120 $d
     /tmp/ccs0f8Xg.s:383    .text.move_window:00000000 $t
     /tmp/ccs0f8Xg.s:387    .text.move_window:00000000 move_window
     /tmp/ccs0f8Xg.s:512    .text.move_window:0000007c $d
     /tmp/ccs0f8Xg.s:518    .text.put_fat.part.4:00000000 $t
     /tmp/ccs0f8Xg.s:522    .text.put_fat.part.4:00000000 put_fat.part.4
     /tmp/ccs0f8Xg.s:1039   .text.put_fat.part.4:0000025c $d
     /tmp/ccs0f8Xg.s:1046   .text.remove_chain.part.7:00000000 $t
     /tmp/ccs0f8Xg.s:1050   .text.remove_chain.part.7:00000000 remove_chain.part.7
     /tmp/ccs0f8Xg.s:1937   .text.remove_chain.part.7:0000040c $d
     /tmp/ccs0f8Xg.s:1950   .text.remove_chain.part.7:00000414 $t
     /tmp/ccs0f8Xg.s:2277   .text.remove_chain.part.7:000005b0 $d
     /tmp/ccs0f8Xg.s:2285   .text.dir_sdi:00000000 $t
     /tmp/ccs0f8Xg.s:2289   .text.dir_sdi:00000000 dir_sdi
     /tmp/ccs0f8Xg.s:2708   .text.dir_sdi:000001f4 $d
     /tmp/ccs0f8Xg.s:2717   .text.clust2sect:00000000 $t
     /tmp/ccs0f8Xg.s:2722   .text.clust2sect:00000000 clust2sect
     /tmp/ccs0f8Xg.s:2756   .text.get_fat:00000000 $t
     /tmp/ccs0f8Xg.s:2761   .text.get_fat:00000000 get_fat
     /tmp/ccs0f8Xg.s:2932   .text.get_fat:000000d8 $d
     /tmp/ccs0f8Xg.s:2937   .text.create_chain:00000000 $t
     /tmp/ccs0f8Xg.s:2941   .text.create_chain:00000000 create_chain
     /tmp/ccs0f8Xg.s:3591   .text.create_chain:00000320 $d
     /tmp/ccs0f8Xg.s:3602   .text.follow_path:00000000 $t
     /tmp/ccs0f8Xg.s:3606   .text.follow_path:00000000 follow_path
     /tmp/ccs0f8Xg.s:4319   .text.follow_path:00000300 $d
     /tmp/ccs0f8Xg.s:4335   .text.follow_path:00000314 $t
     /tmp/ccs0f8Xg.s:4901   .text.follow_path:000005f4 $d
     /tmp/ccs0f8Xg.s:4914   .text.follow_path:00000604 $t
     /tmp/ccs0f8Xg.s:5332   .text.follow_path:00000838 $d
     /tmp/ccs0f8Xg.s:5345   .text.dir_read:00000000 $t
     /tmp/ccs0f8Xg.s:5349   .text.dir_read:00000000 dir_read
     /tmp/ccs0f8Xg.s:5957   .text.dir_read:0000031c $d
     /tmp/ccs0f8Xg.s:5964   .text.dir_read:00000324 $t
     /tmp/ccs0f8Xg.s:6153   .text.dir_read:0000041c $d
     /tmp/ccs0f8Xg.s:6160   .text.dir_remove:00000000 $t
     /tmp/ccs0f8Xg.s:6164   .text.dir_remove:00000000 dir_remove
     /tmp/ccs0f8Xg.s:6725   .text.dir_remove:00000284 $d
     /tmp/ccs0f8Xg.s:6739   .text.dir_register:00000000 $t
     /tmp/ccs0f8Xg.s:6743   .text.dir_register:00000000 dir_register
     /tmp/ccs0f8Xg.s:7577   .text.dir_register:0000042c $d
     /tmp/ccs0f8Xg.s:7585   .text.dir_register:00000440 $t
     /tmp/ccs0f8Xg.s:8431   .text.dir_register:000008a4 $d
     /tmp/ccs0f8Xg.s:8440   .text.dir_register:000008b0 $t
     /tmp/ccs0f8Xg.s:8972   .text.dir_register:00000bb4 $d
     /tmp/ccs0f8Xg.s:8984   .text.dir_register:00000bc0 $t
     /tmp/ccs0f8Xg.s:9577   .text.dir_register:00000e9c $d
     /tmp/ccs0f8Xg.s:9589   .text.dir_register:00000eb0 $t
     /tmp/ccs0f8Xg.s:9975   .text.dir_register:000010c4 $d
     /tmp/ccs0f8Xg.s:9989   .text.put_fat:00000000 $t
     /tmp/ccs0f8Xg.s:9994   .text.put_fat:00000000 put_fat
     /tmp/ccs0f8Xg.s:10032  .text.put_fat:00000018 $d
     /tmp/ccs0f8Xg.s:10037  .text.gen_numname:00000000 $t
     /tmp/ccs0f8Xg.s:10042  .text.gen_numname:00000000 gen_numname
     /tmp/ccs0f8Xg.s:10218  .text.f_mount:00000000 $t
     /tmp/ccs0f8Xg.s:10223  .text.f_mount:00000000 f_mount
     /tmp/ccs0f8Xg.s:10265  .text.f_mount:0000001c $d
     /tmp/ccs0f8Xg.s:10270  .text.f_open:00000000 $t
     /tmp/ccs0f8Xg.s:10275  .text.f_open:00000000 f_open
     /tmp/ccs0f8Xg.s:10821  .text.f_open:000002f8 $d
     /tmp/ccs0f8Xg.s:10833  .text.f_open:00000318 $t
     /tmp/ccs0f8Xg.s:11273  .text.f_open:00000608 $d
     /tmp/ccs0f8Xg.s:11286  .text.f_read:00000000 $t
     /tmp/ccs0f8Xg.s:11291  .text.f_read:00000000 f_read
     /tmp/ccs0f8Xg.s:11687  .text.f_read:000001e8 $d
     /tmp/ccs0f8Xg.s:11695  .text.f_write:00000000 $t
     /tmp/ccs0f8Xg.s:11700  .text.f_write:00000000 f_write
     /tmp/ccs0f8Xg.s:12148  .text.f_write:00000250 $d
     /tmp/ccs0f8Xg.s:12156  .text.f_sync:00000000 $t
     /tmp/ccs0f8Xg.s:12161  .text.f_sync:00000000 f_sync
     /tmp/ccs0f8Xg.s:12416  .text.f_sync:00000138 $d
     /tmp/ccs0f8Xg.s:12429  .text.f_close:00000000 $t
     /tmp/ccs0f8Xg.s:12434  .text.f_close:00000000 f_close
     /tmp/ccs0f8Xg.s:12715  .text.f_close:0000013c $d
     /tmp/ccs0f8Xg.s:12730  .text.f_lseek:00000000 $t
     /tmp/ccs0f8Xg.s:12735  .text.f_lseek:00000000 f_lseek
     /tmp/ccs0f8Xg.s:13240  .text.f_lseek:00000288 $d
     /tmp/ccs0f8Xg.s:13249  .text.f_opendir:00000000 $t
     /tmp/ccs0f8Xg.s:13254  .text.f_opendir:00000000 f_opendir
     /tmp/ccs0f8Xg.s:13696  .text.f_opendir:00000244 $d
     /tmp/ccs0f8Xg.s:13710  .text.f_opendir:00000268 $t
     /tmp/ccs0f8Xg.s:13971  .text.f_opendir:00000460 $d
     /tmp/ccs0f8Xg.s:13981  .text.f_readdir:00000000 $t
     /tmp/ccs0f8Xg.s:13986  .text.f_readdir:00000000 f_readdir
     /tmp/ccs0f8Xg.s:14420  .text.f_readdir:000001d0 $d
     /tmp/ccs0f8Xg.s:14432  .text.f_stat:00000000 $t
     /tmp/ccs0f8Xg.s:14437  .text.f_stat:00000000 f_stat
     /tmp/ccs0f8Xg.s:14825  .text.f_stat:000001c0 $d
     /tmp/ccs0f8Xg.s:14838  .text.f_stat:000001e0 $t
     /tmp/ccs0f8Xg.s:15309  .text.f_stat:00000534 $d
     /tmp/ccs0f8Xg.s:15320  .text.f_getfree:00000000 $t
     /tmp/ccs0f8Xg.s:15325  .text.f_getfree:00000000 f_getfree
     /tmp/ccs0f8Xg.s:15780  .text.f_getfree:000001e8 $d
     /tmp/ccs0f8Xg.s:15791  .text.f_getfree:00000200 $t
     /tmp/ccs0f8Xg.s:16449  .text.f_getfree:00000638 $d
     /tmp/ccs0f8Xg.s:16461  .text.f_truncate:00000000 $t
     /tmp/ccs0f8Xg.s:16466  .text.f_truncate:00000000 f_truncate
     /tmp/ccs0f8Xg.s:16686  .text.f_truncate:000000c8 $d
     /tmp/ccs0f8Xg.s:16694  .text.f_unlink:00000000 $t
     /tmp/ccs0f8Xg.s:16699  .text.f_unlink:00000000 f_unlink
     /tmp/ccs0f8Xg.s:17254  .text.f_unlink:000002ac $d
     /tmp/ccs0f8Xg.s:17272  .text.f_unlink:000002e0 $t
     /tmp/ccs0f8Xg.s:17541  .text.f_unlink:000004d4 $d
     /tmp/ccs0f8Xg.s:17551  .text.f_mkdir:00000000 $t
     /tmp/ccs0f8Xg.s:17556  .text.f_mkdir:00000000 f_mkdir
     /tmp/ccs0f8Xg.s:18107  .text.f_mkdir:000002a4 $d
     /tmp/ccs0f8Xg.s:18124  .text.f_mkdir:000002d0 $t
     /tmp/ccs0f8Xg.s:18773  .text.f_mkdir:000006c0 $d
     /tmp/ccs0f8Xg.s:18788  .text.f_chmod:00000000 $t
     /tmp/ccs0f8Xg.s:18793  .text.f_chmod:00000000 f_chmod
     /tmp/ccs0f8Xg.s:19253  .text.f_chmod:0000024c $d
     /tmp/ccs0f8Xg.s:19267  .text.f_chmod:00000270 $t
     /tmp/ccs0f8Xg.s:19539  .text.f_chmod:00000474 $d
     /tmp/ccs0f8Xg.s:19549  .text.f_utime:00000000 $t
     /tmp/ccs0f8Xg.s:19554  .text.f_utime:00000000 f_utime
     /tmp/ccs0f8Xg.s:20002  .text.f_utime:00000248 $d
     /tmp/ccs0f8Xg.s:20016  .text.f_utime:0000026c $t
     /tmp/ccs0f8Xg.s:20285  .text.f_utime:00000464 $d
     /tmp/ccs0f8Xg.s:20295  .text.f_rename:00000000 $t
     /tmp/ccs0f8Xg.s:20300  .text.f_rename:00000000 f_rename
     /tmp/ccs0f8Xg.s:20786  .text.f_rename:00000268 $d
     /tmp/ccs0f8Xg.s:20799  .text.f_rename:00000288 $t
     /tmp/ccs0f8Xg.s:21265  .text.f_rename:00000560 $d
     /tmp/ccs0f8Xg.s:21278  .text.f_mkfs:00000000 $t
     /tmp/ccs0f8Xg.s:21283  .text.f_mkfs:00000000 f_mkfs
     /tmp/ccs0f8Xg.s:21904  .text.f_mkfs:0000032c $d
     /tmp/ccs0f8Xg.s:21916  .text.f_mkfs:00000350 $t
     /tmp/ccs0f8Xg.s:22366  .text.f_mkfs:00000618 $d
     /tmp/ccs0f8Xg.s:22374  .text.f_gets:00000000 $t
     /tmp/ccs0f8Xg.s:22379  .text.f_gets:00000000 f_gets
     /tmp/ccs0f8Xg.s:22819  .text.f_gets:000001f4 $d
     /tmp/ccs0f8Xg.s:22831  .text.f_putc:00000000 $t
     /tmp/ccs0f8Xg.s:22836  .text.f_putc:00000000 f_putc
     /tmp/ccs0f8Xg.s:23192  .text.f_putc:00000164 $d
     /tmp/ccs0f8Xg.s:23203  .text.f_puts:00000000 $t
     /tmp/ccs0f8Xg.s:23208  .text.f_puts:00000000 f_puts
     /tmp/ccs0f8Xg.s:23869  .text.f_puts:000002ec $d
     /tmp/ccs0f8Xg.s:23880  .text.f_puts:000002fc $t
     /tmp/ccs0f8Xg.s:24411  .text.f_puts:00000584 $d
     /tmp/ccs0f8Xg.s:24426  .text.f_puts:00000594 $t
     /tmp/ccs0f8Xg.s:24739  .text.f_puts:00000748 $d
     /tmp/ccs0f8Xg.s:24752  .text.f_printf:00000000 $t
     /tmp/ccs0f8Xg.s:24757  .text.f_printf:00000000 f_printf
     /tmp/ccs0f8Xg.s:24933  .text.f_printf:000000c6 $d
     /tmp/ccs0f8Xg.s:24957  .text.f_printf:000000f4 $t
     /tmp/ccs0f8Xg.s:25154  .text.f_printf:000001f4 $d
     /tmp/ccs0f8Xg.s:25163  .text.f_printf:000001fc $t
     /tmp/ccs0f8Xg.s:26273  .text.f_printf:000007bc $d
     /tmp/ccs0f8Xg.s:26278  .text.f_printf:000007c8 $t
     /tmp/ccs0f8Xg.s:26997  .text.f_printf:00000b40 $d
     /tmp/ccs0f8Xg.s:27012  .text.f_printf:00000b58 $t
     /tmp/ccs0f8Xg.s:27640  .text.f_printf:00000e44 $d
     /tmp/ccs0f8Xg.s:27653  .text.f_printf:00000e54 $t
     /tmp/ccs0f8Xg.s:28308  .text.f_printf:0000110c $d
     /tmp/ccs0f8Xg.s:28318  .text.f_printf:00001118 $t
     /tmp/ccs0f8Xg.s:29084  .text.f_printf:00001458 $d
     /tmp/ccs0f8Xg.s:29097  .text.f_printf:0000146c $t
     /tmp/ccs0f8Xg.s:29622  .text.f_printf:000016e0 $d
     /tmp/ccs0f8Xg.s:29635  .text.f_printf:000016e8 $t
     /tmp/ccs0f8Xg.s:30241  .text.f_printf:000019a8 $d
     /tmp/ccs0f8Xg.s:30248  .text.f_printf:000019b0 $t
     /tmp/ccs0f8Xg.s:30898  .text.f_printf:00001cc8 $d
     /tmp/ccs0f8Xg.s:30904  .text.f_printf:00001cd4 $t
     /tmp/ccs0f8Xg.s:31601  .text.f_printf:00001ffc $d
     /tmp/ccs0f8Xg.s:31606  .text.f_printf:00002004 $t
     /tmp/ccs0f8Xg.s:31793  .text.f_printf:000020fc $d
     /tmp/ccs0f8Xg.s:31806  .rodata.excvt.4533:00000000 $d
     /tmp/ccs0f8Xg.s:31810  .rodata.excvt.4533:00000000 excvt.4533
     /tmp/ccs0f8Xg.s:31940  .rodata.cst.4791:00000000 $d
     /tmp/ccs0f8Xg.s:31944  .rodata.cst.4791:00000000 cst.4791
     /tmp/ccs0f8Xg.s:31957  .bss.Fsid:00000000 $d
     /tmp/ccs0f8Xg.s:31961  .bss.Fsid:00000000 Fsid
     /tmp/ccs0f8Xg.s:31964  .rodata.str1.4:00000000 $d
     /tmp/ccs0f8Xg.s:31978  .bss.LfnBuf:00000000 $d
     /tmp/ccs0f8Xg.s:31982  .bss.LfnBuf:00000000 LfnBuf
     /tmp/ccs0f8Xg.s:31985  .rodata.LfnOfs:00000000 $d
     /tmp/ccs0f8Xg.s:31989  .rodata.LfnOfs:00000000 LfnOfs
     /tmp/ccs0f8Xg.s:32004  .rodata.vst.4790:00000000 $d
     /tmp/ccs0f8Xg.s:32008  .rodata.vst.4790:00000000 vst.4790
     /tmp/ccs0f8Xg.s:32021  .bss.FatFs:00000000 $d
     /tmp/ccs0f8Xg.s:32025  .bss.FatFs:00000000 FatFs
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
ff_wtoupper
disk_ioctl
disk_write
disk_read
ff_convert
disk_status
disk_initialize
get_fattime
